{"version":3,"file":"get-stylesheet.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/components/helpers/get-stylesheet.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Root from '../../../core/root/root.js';\nimport * as ThemeSupport from '../../legacy/theme_support/theme_support.js';\n\nconst sheetsCache = new Map<string, {sheets: CSSStyleSheet[], enableLegacyPatching: false}>();\n\n/**\n * Helper for importing a legacy stylesheet into a component.\n *\n * Given a path to a stylesheet, it returns a CSSStyleSheet that can then be\n * adopted by your component.\n */\nexport function getStyleSheets(path: string, {enableLegacyPatching}: {enableLegacyPatching: false} = {\n  enableLegacyPatching: false,\n}): CSSStyleSheet[] {\n  const cachedResult = sheetsCache.get(path);\n  if (cachedResult && cachedResult.enableLegacyPatching === enableLegacyPatching) {\n    return cachedResult.sheets;\n  }\n\n  const content = Root.Runtime.cachedResources.get(path) || '';\n  if (!content) {\n    throw new Error(`${path} not preloaded.`);\n  }\n\n  const originalStylesheet = new CSSStyleSheet();\n  originalStylesheet.replaceSync(content);\n\n  const themeStyleSheet = ThemeSupport.ThemeSupport.instance().themeStyleSheet(path, content);\n  if (!enableLegacyPatching || !themeStyleSheet) {\n    sheetsCache.set(path, {enableLegacyPatching, sheets: [originalStylesheet]});\n    return [originalStylesheet];\n  }\n\n  const patchedStyleSheet = new CSSStyleSheet();\n\n  patchedStyleSheet.replaceSync(themeStyleSheet + '\\n' + Root.Runtime.Runtime.resolveSourceURL(path + '.theme'));\n  sheetsCache.set(path, {enableLegacyPatching, sheets: [originalStylesheet, patchedStyleSheet]});\n\n  return [originalStylesheet, patchedStyleSheet];\n}\n\n/*\n * The getStylesheet helper in components reads styles out of the runtime cache.\n * In a proper build this is populated but in test runs because we don't load\n * all of DevTools it's not. Therefore we fetch all the CSS files and populate\n * the cache before any tests are run.\n *\n * The out/Release/gen/front_end URL is prepended so within the Karma config we can proxy\n * them through to the right place, respecting Karma's ROOT_DIRECTORY setting.\n */\nexport const CSS_RESOURCES_TO_LOAD_INTO_RUNTIME = [\n  'ui/legacy/checkboxTextLabel.css',\n  'ui/legacy/closeButton.css',\n  'ui/legacy/confirmDialog.css',\n  'ui/legacy/dialog.css',\n  'ui/legacy/dropTarget.css',\n  'ui/legacy/emptyWidget.css',\n  'ui/legacy/filter.css',\n  'ui/legacy/glassPane.css',\n  'ui/legacy/infobar.css',\n  'ui/legacy/inlineButton.css',\n  'ui/legacy/inspectorCommon.css',\n  'ui/legacy/inspectorScrollbars.css',\n  'ui/legacy/themeColors.css',\n  'ui/legacy/inspectorSyntaxHighlight.css',\n  'ui/legacy/inspectorSyntaxHighlightDark.css',\n  'ui/legacy/inspectorViewTabbedPane.css',\n  'ui/legacy/listWidget.css',\n  'ui/legacy/popover.css',\n  'ui/legacy/progressIndicator.css',\n  'ui/legacy/radioButton.css',\n  'ui/legacy/remoteDebuggingTerminatedScreen.css',\n  'ui/legacy/reportView.css',\n  'ui/legacy/rootView.css',\n  'ui/legacy/searchableView.css',\n  'ui/legacy/slider.css',\n  'ui/legacy/smallBubble.css',\n  'ui/legacy/softContextMenu.css',\n  'ui/legacy/softDropDown.css',\n  'ui/legacy/softDropDownButton.css',\n  'ui/legacy/splitWidget.css',\n  'ui/legacy/toolbar.css',\n  'ui/legacy/suggestBox.css',\n  'ui/legacy/tabbedPane.css',\n  'ui/legacy/targetCrashedScreen.css',\n  'ui/legacy/textButton.css',\n  'ui/legacy/textPrompt.css',\n  'ui/legacy/tooltip.css',\n  'ui/legacy/treeoutline.css',\n  'ui/legacy/viewContainers.css',\n  'panels/elements/layoutPane.css',\n  'ui/legacy/components/utils/imagePreview.css',\n  'ui/legacy/components/utils/jsUtils.css',\n  'models/persistence/editFileSystemView.css',\n  'models/persistence/workspaceSettingsTab.css',\n  'panels/mobile_throttling/throttlingSettingsTab.css',\n  'panels/emulation/deviceModeToolbar.css',\n  'panels/emulation/deviceModeView.css',\n  'panels/emulation/devicesSettingsTab.css',\n  'panels/emulation/inspectedPagePlaceholder.css',\n  'panels/emulation/locationsSettingsTab.css',\n  'panels/emulation/mediaQueryInspector.css',\n  'panels/emulation/sensors.css',\n  'ui/legacy/components/inline_editor/colorSwatch.css',\n  'entrypoints/inspector_main/nodeIcon.css',\n  'entrypoints/inspector_main/renderingOptions.css',\n  'ui/legacy/components/data_grid/dataGrid.css',\n  'panels/help/releaseNote.css',\n  'ui/legacy/components/object_ui/customPreviewComponent.css',\n  'ui/legacy/components/object_ui/objectPopover.css',\n  'ui/legacy/components/object_ui/objectPropertiesSection.css',\n  'ui/legacy/components/object_ui/objectValue.css',\n  'panels/console/consoleContextSelector.css',\n  'panels/console/consolePinPane.css',\n  'panels/console/consolePrompt.css',\n  'panels/console/consoleSidebar.css',\n  'panels/console/consoleView.css',\n  'third_party/codemirror/codemirror.css',\n  'ui/legacy/components/text_editor/autocompleteTooltip.css',\n  'ui/legacy/components/text_editor/cmdevtools.css',\n  'ui/legacy/components/text_editor/cmdevtools.darkmode.css',\n  'panels/application/serviceWorkerUpdateCycleView.css',\n];\n"]}