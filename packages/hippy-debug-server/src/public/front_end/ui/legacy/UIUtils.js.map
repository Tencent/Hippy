{"version":3,"file":"UIUtils.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/UIUtils.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2011 Google Inc.  All rights reserved.\n * Copyright (C) 2006, 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2007 Matt Lilek (pewtermoose@gmail.com).\n * Copyright (C) 2009 Joseph Pecoraro\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as Common from '../../core/common/common.js';\nimport * as DOMExtension from '../../core/dom_extension/dom_extension.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {Dialog} from './Dialog.js';\nimport {Size} from './Geometry.js';\nimport {GlassPane, PointerEventsBehavior, SizeBehavior} from './GlassPane.js';\nimport {Icon} from './Icon.js';\nimport {KeyboardShortcut} from './KeyboardShortcut.js';\nimport * as ThemeSupport from './theme_support/theme_support.js';  // eslint-disable-line rulesdir/es_modules_import\nimport type {ToolbarButton} from './Toolbar.js';\nimport {Toolbar} from './Toolbar.js';  // eslint-disable-line no-unused-vars\nimport {Tooltip} from './Tooltip.js';\nimport type {TreeOutline} from './Treeoutline.js'; // eslint-disable-line no-unused-vars\nimport {createShadowRootWithCoreStyles} from './utils/create-shadow-root-with-core-styles.js';\nimport {focusChanged} from './utils/focus-changed.js';\nimport {injectCoreStyles} from './utils/inject-core-styles.js';\nimport {measuredScrollbarWidth} from './utils/measured-scrollbar-width.js';\nimport {registerCustomElement} from './utils/register-custom-element.js';\n\nconst UIStrings = {\n  /**\n  *@description label to open link externally\n  */\n  openInNewTab: 'Open in new tab',\n  /**\n  *@description label to copy link address\n  */\n  copyLinkAddress: 'Copy link address',\n  /**\n  *@description label to copy file name\n  */\n  copyFileName: 'Copy file name',\n  /**\n  *@description label for the profiler control button\n  */\n  anotherProfilerIsAlreadyActive: 'Another profiler is already active',\n  /**\n  *@description Text in UIUtils\n  */\n  promiseResolvedAsync: 'Promise resolved (async)',\n  /**\n  *@description Text in UIUtils\n  */\n  promiseRejectedAsync: 'Promise rejected (async)',\n  /**\n  *@description Text in UIUtils\n  *@example {Promise} PH1\n  */\n  sAsync: '{PH1} (async)',\n  /**\n  *@description Text for the title of asynchronous function calls group in Call Stack\n  */\n  asyncCall: 'Async Call',\n  /**\n  *@description Text for the name of anonymous functions\n  */\n  anonymous: '(anonymous)',\n  /**\n  *@description Text to close something\n  */\n  close: 'Close',\n  /**\n  *@description Text on a button for message dialog\n  */\n  ok: 'OK',\n  /**\n  *@description Text to cancel something\n  */\n  cancel: 'Cancel',\n};\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/UIUtils.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport const highlightedSearchResultClassName = 'highlighted-search-result';\nexport const highlightedCurrentSearchResultClassName = 'current-search-result';\n\nexport function installDragHandle(\n    element: Element, elementDragStart: ((arg0: MouseEvent) => boolean)|null, elementDrag: (arg0: MouseEvent) => void,\n    elementDragEnd: ((arg0: MouseEvent) => void)|null, cursor: string|null, hoverCursor?: string|null,\n    startDelay?: number): void {\n  function onMouseDown(event: Event): void {\n    const dragHandler = new DragHandler();\n    const dragStart = (): void =>\n        dragHandler.elementDragStart(element, elementDragStart, elementDrag, elementDragEnd, cursor, event);\n    if (startDelay) {\n      startTimer = window.setTimeout(dragStart, startDelay);\n    } else {\n      dragStart();\n    }\n  }\n\n  function onMouseUp(): void {\n    if (startTimer) {\n      window.clearTimeout(startTimer);\n    }\n    startTimer = null;\n  }\n\n  let startTimer: number|null;\n  element.addEventListener('mousedown', onMouseDown, false);\n  if (startDelay) {\n    element.addEventListener('mouseup', onMouseUp, false);\n  }\n  if (hoverCursor !== null) {\n    (element as HTMLElement).style.cursor = hoverCursor || cursor || '';\n  }\n}\n\nexport function elementDragStart(\n    targetElement: Element, elementDragStart: ((arg0: MouseEvent) => boolean)|null,\n    elementDrag: (arg0: MouseEvent) => void, elementDragEnd: ((arg0: MouseEvent) => void)|null, cursor: string|null,\n    event: Event): void {\n  const dragHandler = new DragHandler();\n  dragHandler.elementDragStart(targetElement, elementDragStart, elementDrag, elementDragEnd, cursor, event);\n}\n\nclass DragHandler {\n  _glassPaneInUse?: boolean;\n  _elementDraggingEventListener?: ((arg0: MouseEvent) => void|boolean);\n  _elementEndDraggingEventListener?: ((arg0: MouseEvent) => void)|null;\n  _dragEventsTargetDocument?: Document;\n  _dragEventsTargetDocumentTop?: Document;\n  _restoreCursorAfterDrag?: (() => void);\n\n  constructor() {\n    this._elementDragMove = this._elementDragMove.bind(this);\n    this._elementDragEnd = this._elementDragEnd.bind(this);\n    this._mouseOutWhileDragging = this._mouseOutWhileDragging.bind(this);\n  }\n\n  _createGlassPane(): void {\n    this._glassPaneInUse = true;\n    if (!DragHandler._glassPaneUsageCount++) {\n      DragHandler._glassPane = new GlassPane();\n      DragHandler._glassPane.setPointerEventsBehavior(PointerEventsBehavior.BlockedByGlassPane);\n      if (DragHandler._documentForMouseOut) {\n        DragHandler._glassPane.show(DragHandler._documentForMouseOut);\n      }\n    }\n  }\n\n  _disposeGlassPane(): void {\n    if (!this._glassPaneInUse) {\n      return;\n    }\n    this._glassPaneInUse = false;\n    if (--DragHandler._glassPaneUsageCount) {\n      return;\n    }\n    if (DragHandler._glassPane) {\n      DragHandler._glassPane.hide();\n      DragHandler._glassPane = null;\n    }\n    DragHandler._documentForMouseOut = null;\n    DragHandler._rootForMouseOut = null;\n  }\n\n  elementDragStart(\n      targetElement: Element, elementDragStart: ((arg0: MouseEvent) => boolean)|null,\n      elementDrag: (arg0: MouseEvent) => void|boolean, elementDragEnd: ((arg0: MouseEvent) => void)|null,\n      cursor: string|null, ev: Event): void {\n    const event = (ev as MouseEvent);\n    // Only drag upon left button. Right will likely cause a context menu. So will ctrl-click on mac.\n    if (event.button || (Host.Platform.isMac() && event.ctrlKey)) {\n      return;\n    }\n\n    if (this._elementDraggingEventListener) {\n      return;\n    }\n\n    if (elementDragStart && !elementDragStart((event as MouseEvent))) {\n      return;\n    }\n\n    const targetDocument = (event.target instanceof Node && event.target.ownerDocument) as Document;\n    this._elementDraggingEventListener = elementDrag;\n    this._elementEndDraggingEventListener = elementDragEnd;\n    console.assert(\n        (DragHandler._documentForMouseOut || targetDocument) === targetDocument, 'Dragging on multiple documents.');\n    DragHandler._documentForMouseOut = targetDocument;\n    DragHandler._rootForMouseOut = event.target instanceof Node && event.target.getRootNode() || null;\n    this._dragEventsTargetDocument = targetDocument;\n    try {\n      if (targetDocument.defaultView) {\n        this._dragEventsTargetDocumentTop = targetDocument.defaultView.top.document;\n      }\n    } catch (e) {\n      this._dragEventsTargetDocumentTop = this._dragEventsTargetDocument;\n    }\n\n    targetDocument.addEventListener('mousemove', this._elementDragMove, true);\n    targetDocument.addEventListener('mouseup', this._elementDragEnd, true);\n    DragHandler._rootForMouseOut &&\n        DragHandler._rootForMouseOut.addEventListener('mouseout', this._mouseOutWhileDragging, {capture: true});\n    if (this._dragEventsTargetDocumentTop && targetDocument !== this._dragEventsTargetDocumentTop) {\n      this._dragEventsTargetDocumentTop.addEventListener('mouseup', this._elementDragEnd, true);\n    }\n\n    const targetHtmlElement = (targetElement as HTMLElement);\n    if (typeof cursor === 'string') {\n      this._restoreCursorAfterDrag = restoreCursor.bind(this, targetHtmlElement.style.cursor);\n      targetHtmlElement.style.cursor = cursor;\n      targetDocument.body.style.cursor = cursor;\n    }\n    function restoreCursor(this: DragHandler, oldCursor: string): void {\n      targetDocument.body.style.removeProperty('cursor');\n      targetHtmlElement.style.cursor = oldCursor;\n      this._restoreCursorAfterDrag = undefined;\n    }\n    event.preventDefault();\n  }\n\n  _mouseOutWhileDragging(): void {\n    this._unregisterMouseOutWhileDragging();\n    this._createGlassPane();\n  }\n\n  _unregisterMouseOutWhileDragging(): void {\n    if (!DragHandler._rootForMouseOut) {\n      return;\n    }\n    DragHandler._rootForMouseOut.removeEventListener('mouseout', this._mouseOutWhileDragging, {capture: true});\n  }\n\n  _unregisterDragEvents(): void {\n    if (!this._dragEventsTargetDocument) {\n      return;\n    }\n    this._dragEventsTargetDocument.removeEventListener('mousemove', this._elementDragMove, true);\n    this._dragEventsTargetDocument.removeEventListener('mouseup', this._elementDragEnd, true);\n    if (this._dragEventsTargetDocumentTop && this._dragEventsTargetDocument !== this._dragEventsTargetDocumentTop) {\n      this._dragEventsTargetDocumentTop.removeEventListener('mouseup', this._elementDragEnd, true);\n    }\n    delete this._dragEventsTargetDocument;\n    delete this._dragEventsTargetDocumentTop;\n  }\n\n  _elementDragMove(event: MouseEvent): void {\n    if (event.buttons !== 1) {\n      this._elementDragEnd(event);\n      return;\n    }\n    if (this._elementDraggingEventListener && this._elementDraggingEventListener(event)) {\n      this._cancelDragEvents(event);\n    }\n  }\n\n  _cancelDragEvents(_event: Event): void {\n    this._unregisterDragEvents();\n    this._unregisterMouseOutWhileDragging();\n\n    if (this._restoreCursorAfterDrag) {\n      this._restoreCursorAfterDrag();\n    }\n\n    this._disposeGlassPane();\n\n    delete this._elementDraggingEventListener;\n    delete this._elementEndDraggingEventListener;\n  }\n\n  _elementDragEnd(event: Event): void {\n    const elementDragEnd = this._elementEndDraggingEventListener;\n    this._cancelDragEvents((event as MouseEvent));\n    event.preventDefault();\n    if (elementDragEnd) {\n      elementDragEnd((event as MouseEvent));\n    }\n  }\n\n  static _glassPaneUsageCount = 0;\n  static _glassPane: GlassPane|null = null;\n  static _documentForMouseOut: Document|null = null;\n  static _rootForMouseOut: Node|null = null;\n}\n\nexport function isBeingEdited(node?: Node|null): boolean {\n  if (!node || node.nodeType !== Node.ELEMENT_NODE) {\n    return false;\n  }\n  const element = (node as Element);\n  if (element.classList.contains('text-prompt') || element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {\n    return true;\n  }\n\n  if (!elementsBeingEdited.size) {\n    return false;\n  }\n\n  let currentElement: (Element|null)|Element = element;\n  while (currentElement) {\n    if (elementsBeingEdited.has(element)) {\n      return true;\n    }\n    currentElement = currentElement.parentElementOrShadowHost();\n  }\n  return false;\n}\n\nexport function isEditing(): boolean {\n  if (elementsBeingEdited.size) {\n    return true;\n  }\n\n  const focused = document.deepActiveElement();\n  if (!focused) {\n    return false;\n  }\n  return focused.classList.contains('text-prompt') || focused.nodeName === 'INPUT' || focused.nodeName === 'TEXTAREA';\n}\n\nexport function markBeingEdited(element: Element, value: boolean): boolean {\n  if (value) {\n    if (elementsBeingEdited.has(element)) {\n      return false;\n    }\n    element.classList.add('being-edited');\n    elementsBeingEdited.add(element);\n  } else {\n    if (!elementsBeingEdited.has(element)) {\n      return false;\n    }\n    element.classList.remove('being-edited');\n    elementsBeingEdited.delete(element);\n  }\n  return true;\n}\n\nconst elementsBeingEdited = new Set<Element>();\n\n// Avoids Infinity, NaN, and scientific notation (e.g. 1e20), see crbug.com/81165.\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst _numberRegex = /^(-?(?:\\d+(?:\\.\\d+)?|\\.\\d+))$/;\n\nexport const StyleValueDelimiters = ' \\xA0\\t\\n\"\\':;,/()';\n\nexport function getValueModificationDirection(event: Event): string|null {\n  let direction: 'Up'|'Down'|null = null;\n  if (event.type === 'wheel') {\n    // When shift is pressed while spinning mousewheel, delta comes as wheelDeltaX.\n    const wheelEvent = (event as WheelEvent);\n    if (wheelEvent.deltaY < 0 || wheelEvent.deltaX < 0) {\n      direction = 'Up';\n    } else if (wheelEvent.deltaY > 0 || wheelEvent.deltaX > 0) {\n      direction = 'Down';\n    }\n  } else {\n    const keyEvent = (event as KeyboardEvent);\n    if (keyEvent.key === 'ArrowUp' || keyEvent.key === 'PageUp') {\n      direction = 'Up';\n    } else if (keyEvent.key === 'ArrowDown' || keyEvent.key === 'PageDown') {\n      direction = 'Down';\n    }\n  }\n\n  return direction;\n}\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction _modifiedHexValue(hexString: string, event: Event): string|null {\n  const direction = getValueModificationDirection(event);\n  if (!direction) {\n    return null;\n  }\n\n  const mouseEvent = (event as MouseEvent);\n  const number = parseInt(hexString, 16);\n  if (isNaN(number) || !isFinite(number)) {\n    return null;\n  }\n\n  const hexStrLen = hexString.length;\n  const channelLen = hexStrLen / 3;\n\n  // Colors are either rgb or rrggbb.\n  if (channelLen !== 1 && channelLen !== 2) {\n    return null;\n  }\n\n  // Precision modifier keys work with both mousewheel and up/down keys.\n  // When ctrl is pressed, increase R by 1.\n  // When shift is pressed, increase G by 1.\n  // When alt is pressed, increase B by 1.\n  // If no shortcut keys are pressed then increase hex value by 1.\n  // Keys can be pressed together to increase RGB channels. e.g trying different shades.\n  let delta = 0;\n  if (KeyboardShortcut.eventHasCtrlOrMeta(mouseEvent)) {\n    delta += Math.pow(16, channelLen * 2);\n  }\n  if (mouseEvent.shiftKey) {\n    delta += Math.pow(16, channelLen);\n  }\n  if (mouseEvent.altKey) {\n    delta += 1;\n  }\n  if (delta === 0) {\n    delta = 1;\n  }\n  if (direction === 'Down') {\n    delta *= -1;\n  }\n\n  // Increase hex value by 1 and clamp from 0 ... maxValue.\n  const maxValue = Math.pow(16, hexStrLen) - 1;\n  const result = Platform.NumberUtilities.clamp(number + delta, 0, maxValue);\n\n  // Ensure the result length is the same as the original hex value.\n  let resultString = result.toString(16).toUpperCase();\n  for (let i = 0, lengthDelta = hexStrLen - resultString.length; i < lengthDelta; ++i) {\n    resultString = '0' + resultString;\n  }\n  return resultString;\n}\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction _modifiedFloatNumber(number: number, event: Event, modifierMultiplier?: number): number|null {\n  const direction = getValueModificationDirection(event);\n  if (!direction) {\n    return null;\n  }\n\n  const mouseEvent = (event as MouseEvent);\n\n  // Precision modifier keys work with both mousewheel and up/down keys.\n  // When ctrl is pressed, increase by 100.\n  // When shift is pressed, increase by 10.\n  // When alt is pressed, increase by 0.1.\n  // Otherwise increase by 1.\n  let delta = 1;\n  if (KeyboardShortcut.eventHasCtrlOrMeta(mouseEvent)) {\n    delta = 100;\n  } else if (mouseEvent.shiftKey) {\n    delta = 10;\n  } else if (mouseEvent.altKey) {\n    delta = 0.1;\n  }\n\n  if (direction === 'Down') {\n    delta *= -1;\n  }\n  if (modifierMultiplier) {\n    delta *= modifierMultiplier;\n  }\n\n  // Make the new number and constrain it to a precision of 6, this matches numbers the engine returns.\n  // Use the Number constructor to forget the fixed precision, so 1.100000 will print as 1.1.\n  const result = Number((number + delta).toFixed(6));\n  if (!String(result).match(_numberRegex)) {\n    return null;\n  }\n  return result;\n}\n\nexport function createReplacementString(\n    wordString: string, event: Event,\n    customNumberHandler?: ((arg0: string, arg1: number, arg2: string) => string)): string|null {\n  let prefix;\n  let suffix;\n  let number;\n  let replacementString: string|null = null;\n  let matches = /(.*#)([\\da-fA-F]+)(.*)/.exec(wordString);\n  if (matches && matches.length) {\n    prefix = matches[1];\n    suffix = matches[3];\n    number = _modifiedHexValue(matches[2], event);\n    if (number !== null) {\n      replacementString = prefix + number + suffix;\n    }\n  } else {\n    matches = /(.*?)(-?(?:\\d+(?:\\.\\d+)?|\\.\\d+))(.*)/.exec(wordString);\n    if (matches && matches.length) {\n      prefix = matches[1];\n      suffix = matches[3];\n      number = _modifiedFloatNumber(parseFloat(matches[2]), event);\n      if (number !== null) {\n        replacementString =\n            customNumberHandler ? customNumberHandler(prefix, number, suffix) : prefix + number + suffix;\n      }\n    }\n  }\n  return replacementString;\n}\n\nexport function handleElementValueModifications(\n    event: Event, element: Element, finishHandler?: ((arg0: string, arg1: string) => void),\n    suggestionHandler?: ((arg0: string) => boolean),\n    customNumberHandler?: ((arg0: string, arg1: number, arg2: string) => string)): boolean {\n  const arrowKeyOrWheelEvent =\n      ((event as KeyboardEvent).key === 'ArrowUp' || (event as KeyboardEvent).key === 'ArrowDown' ||\n       event.type === 'wheel');\n  const pageKeyPressed = ((event as KeyboardEvent).key === 'PageUp' || (event as KeyboardEvent).key === 'PageDown');\n  if (!arrowKeyOrWheelEvent && !pageKeyPressed) {\n    return false;\n  }\n\n  const selection = element.getComponentSelection();\n  if (!selection || !selection.rangeCount) {\n    return false;\n  }\n\n  const selectionRange = selection.getRangeAt(0);\n  if (!selectionRange.commonAncestorContainer.isSelfOrDescendant(element)) {\n    return false;\n  }\n\n  const originalValue = element.textContent;\n  const wordRange = DOMExtension.DOMExtension.rangeOfWord(\n      selectionRange.startContainer, selectionRange.startOffset, StyleValueDelimiters, element);\n  const wordString = wordRange.toString();\n\n  if (suggestionHandler && suggestionHandler(wordString)) {\n    return false;\n  }\n\n  const replacementString = createReplacementString(wordString, event, customNumberHandler);\n\n  if (replacementString) {\n    const replacementTextNode = document.createTextNode(replacementString);\n\n    wordRange.deleteContents();\n    wordRange.insertNode(replacementTextNode);\n\n    const finalSelectionRange = document.createRange();\n    finalSelectionRange.setStart(replacementTextNode, 0);\n    finalSelectionRange.setEnd(replacementTextNode, replacementString.length);\n\n    selection.removeAllRanges();\n    selection.addRange(finalSelectionRange);\n\n    event.handled = true;\n    event.preventDefault();\n\n    if (finishHandler) {\n      finishHandler(originalValue || '', replacementString);\n    }\n\n    return true;\n  }\n  return false;\n}\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function formatLocalized(format: string, substitutions: ArrayLike<any>|null): Element {\n  const formatters = {\n    s: (substitution: unknown): unknown => substitution,\n  };\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  function append(a: Element, b: any): Element {\n    a.appendChild(typeof b === 'string' ? document.createTextNode(b) : b as Element);\n    return a;\n  }\n  return Platform.StringUtilities.format(format, substitutions, formatters, document.createElement('span'), append)\n      .formattedResult;\n}\n\nexport function openLinkExternallyLabel(): string {\n  return i18nString(UIStrings.openInNewTab);\n}\n\nexport function copyLinkAddressLabel(): string {\n  return i18nString(UIStrings.copyLinkAddress);\n}\n\nexport function copyFileNameLabel(): string {\n  return i18nString(UIStrings.copyFileName);\n}\n\nexport function anotherProfilerActiveLabel(): string {\n  return i18nString(UIStrings.anotherProfilerIsAlreadyActive);\n}\n\nexport function asyncStackTraceLabel(description: string|undefined): string {\n  if (description) {\n    if (description === 'Promise.resolve') {\n      return i18nString(UIStrings.promiseResolvedAsync);\n    }\n    if (description === 'Promise.reject') {\n      return i18nString(UIStrings.promiseRejectedAsync);\n    }\n    return i18nString(UIStrings.sAsync, {PH1: description});\n  }\n  return i18nString(UIStrings.asyncCall);\n}\n\nexport function installComponentRootStyles(element: Element): void {\n  injectCoreStyles(element);\n  element.classList.add('platform-' + Host.Platform.platform());\n\n  // Detect overlay scrollbar enable by checking for nonzero scrollbar width.\n  if (!Host.Platform.isMac() && measuredScrollbarWidth(element.ownerDocument) === 0) {\n    element.classList.add('overlay-scrollbar-enabled');\n  }\n}\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction _windowFocused(document: Document, event: Event): void {\n  if (event.target instanceof Window && event.target.document.nodeType === Node.DOCUMENT_NODE) {\n    document.body.classList.remove('inactive');\n  }\n}\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction _windowBlurred(document: Document, event: Event): void {\n  if (event.target instanceof Window && event.target.document.nodeType === Node.DOCUMENT_NODE) {\n    document.body.classList.add('inactive');\n  }\n}\n\nexport class ElementFocusRestorer {\n  _element: HTMLElement|null;\n  _previous: HTMLElement|null;\n  constructor(element: Element) {\n    this._element = (element as HTMLElement | null);\n    this._previous = (element.ownerDocument.deepActiveElement() as HTMLElement | null);\n    (element as HTMLElement).focus();\n  }\n\n  restore(): void {\n    if (!this._element) {\n      return;\n    }\n    if (this._element.hasFocus() && this._previous) {\n      this._previous.focus();\n    }\n    this._previous = null;\n    this._element = null;\n  }\n}\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function highlightSearchResult(element: Element, offset: number, length: number, domChanges?: any[]): Element|\n    null {\n  const result = highlightSearchResults(element, [new TextUtils.TextRange.SourceRange(offset, length)], domChanges);\n  return result.length ? result[0] : null;\n}\n\nexport function highlightSearchResults(\n    element: Element, resultRanges: TextUtils.TextRange.SourceRange[], changes?: HighlightChange[]): Element[] {\n  return highlightRangesWithStyleClass(element, resultRanges, highlightedSearchResultClassName, changes);\n}\n\nexport function runCSSAnimationOnce(element: Element, className: string): void {\n  function animationEndCallback(): void {\n    element.classList.remove(className);\n    element.removeEventListener('webkitAnimationEnd', animationEndCallback, false);\n  }\n\n  if (element.classList.contains(className)) {\n    element.classList.remove(className);\n  }\n\n  element.addEventListener('webkitAnimationEnd', animationEndCallback, false);\n  element.classList.add(className);\n}\n\nexport function highlightRangesWithStyleClass(\n    element: Element, resultRanges: TextUtils.TextRange.SourceRange[], styleClass: string,\n    changes?: HighlightChange[]): Element[] {\n  changes = changes || [];\n  const highlightNodes: Element[] = [];\n  const textNodes = element.childTextNodes();\n  const lineText = textNodes\n                       .map(function(node) {\n                         return node.textContent;\n                       })\n                       .join('');\n  const ownerDocument = element.ownerDocument;\n\n  if (textNodes.length === 0) {\n    return highlightNodes;\n  }\n\n  const nodeRanges: TextUtils.TextRange.SourceRange[] = [];\n  let rangeEndOffset = 0;\n  for (const textNode of textNodes) {\n    const range =\n        new TextUtils.TextRange.SourceRange(rangeEndOffset, textNode.textContent ? textNode.textContent.length : 0);\n    rangeEndOffset = range.offset + range.length;\n    nodeRanges.push(range);\n  }\n\n  let startIndex = 0;\n  for (let i = 0; i < resultRanges.length; ++i) {\n    const startOffset = resultRanges[i].offset;\n    const endOffset = startOffset + resultRanges[i].length;\n\n    while (startIndex < textNodes.length &&\n           nodeRanges[startIndex].offset + nodeRanges[startIndex].length <= startOffset) {\n      startIndex++;\n    }\n    let endIndex = startIndex;\n    while (endIndex < textNodes.length && nodeRanges[endIndex].offset + nodeRanges[endIndex].length < endOffset) {\n      endIndex++;\n    }\n    if (endIndex === textNodes.length) {\n      break;\n    }\n\n    const highlightNode = ownerDocument.createElement('span');\n    highlightNode.className = styleClass;\n    highlightNode.textContent = lineText.substring(startOffset, endOffset);\n\n    const lastTextNode = textNodes[endIndex];\n    const lastText = lastTextNode.textContent || '';\n    lastTextNode.textContent = lastText.substring(endOffset - nodeRanges[endIndex].offset);\n    changes.push({\n      node: (lastTextNode as Element),\n      type: 'changed',\n      oldText: lastText,\n      newText: lastTextNode.textContent,\n      nextSibling: undefined,\n      parent: undefined,\n    });\n\n    if (startIndex === endIndex && lastTextNode.parentElement) {\n      lastTextNode.parentElement.insertBefore(highlightNode, lastTextNode);\n      changes.push({\n        node: highlightNode,\n        type: 'added',\n        nextSibling: lastTextNode,\n        parent: lastTextNode.parentElement,\n        oldText: undefined,\n        newText: undefined,\n      });\n      highlightNodes.push(highlightNode);\n\n      const prefixNode =\n          ownerDocument.createTextNode(lastText.substring(0, startOffset - nodeRanges[startIndex].offset));\n      lastTextNode.parentElement.insertBefore(prefixNode, highlightNode);\n      changes.push({\n        // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        node: (prefixNode as any),\n        type: 'added',\n        nextSibling: highlightNode,\n        parent: lastTextNode.parentElement,\n        oldText: undefined,\n        newText: undefined,\n      });\n    } else {\n      const firstTextNode = textNodes[startIndex];\n      const firstText = firstTextNode.textContent || '';\n      const anchorElement = firstTextNode.nextSibling;\n\n      if (firstTextNode.parentElement) {\n        firstTextNode.parentElement.insertBefore(highlightNode, anchorElement);\n        changes.push({\n          node: highlightNode,\n          type: 'added',\n          nextSibling: anchorElement || undefined,\n          parent: firstTextNode.parentElement,\n          oldText: undefined,\n          newText: undefined,\n        });\n        highlightNodes.push(highlightNode);\n      }\n\n      firstTextNode.textContent = firstText.substring(0, startOffset - nodeRanges[startIndex].offset);\n      changes.push({\n        node: (firstTextNode as Element),\n        type: 'changed',\n        oldText: firstText,\n        newText: firstTextNode.textContent,\n        nextSibling: undefined,\n        parent: undefined,\n      });\n\n      for (let j = startIndex + 1; j < endIndex; j++) {\n        const textNode = textNodes[j];\n        const text = textNode.textContent;\n        textNode.textContent = '';\n        changes.push({\n          node: (textNode as Element),\n          type: 'changed',\n          oldText: text || undefined,\n          newText: textNode.textContent,\n          nextSibling: undefined,\n          parent: undefined,\n        });\n      }\n    }\n    startIndex = endIndex;\n    nodeRanges[startIndex].offset = endOffset;\n    nodeRanges[startIndex].length = lastTextNode.textContent.length;\n  }\n  return highlightNodes;\n}\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function applyDomChanges(domChanges: any[]): void {\n  for (let i = 0, size = domChanges.length; i < size; ++i) {\n    const entry = domChanges[i];\n    switch (entry.type) {\n      case 'added':\n        entry.parent.insertBefore(entry.node, entry.nextSibling);\n        break;\n      case 'changed':\n        entry.node.textContent = entry.newText;\n        break;\n    }\n  }\n}\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function revertDomChanges(domChanges: any[]): void {\n  for (let i = domChanges.length - 1; i >= 0; --i) {\n    const entry = domChanges[i];\n    switch (entry.type) {\n      case 'added':\n        entry.node.remove();\n        break;\n      case 'changed':\n        entry.node.textContent = entry.oldText;\n        break;\n    }\n  }\n}\n\nexport function measurePreferredSize(element: Element, containerElement?: Element|null): Size {\n  const oldParent = element.parentElement;\n  const oldNextSibling = element.nextSibling;\n  containerElement = containerElement || element.ownerDocument.body;\n  containerElement.appendChild(element);\n  element.positionAt(0, 0);\n  const result = element.getBoundingClientRect();\n\n  element.positionAt(undefined, undefined);\n  if (oldParent) {\n    oldParent.insertBefore(element, oldNextSibling);\n  } else {\n    element.remove();\n  }\n  return new Size(result.width, result.height);\n}\n\nclass InvokeOnceHandlers {\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  _handlers: Map<any, any>|null;\n  _autoInvoke: boolean;\n  constructor(autoInvoke: boolean) {\n    this._handlers = null;\n    this._autoInvoke = autoInvoke;\n  }\n\n  add(object: Object, method: () => void): void {\n    if (!this._handlers) {\n      this._handlers = new Map();\n      if (this._autoInvoke) {\n        this.scheduleInvoke();\n      }\n    }\n    let methods = this._handlers.get(object);\n    if (!methods) {\n      methods = new Set();\n      this._handlers.set(object, methods);\n    }\n    methods.add(method);\n  }\n  scheduleInvoke(): void {\n    if (this._handlers) {\n      requestAnimationFrame(this._invoke.bind(this));\n    }\n  }\n\n  _invoke(): void {\n    const handlers = this._handlers || new Map();  // Make closure happy. This should not be null.\n    this._handlers = null;\n    for (const [object, methods] of handlers) {\n      for (const method of methods) {\n        method.call(object);\n      }\n    }\n  }\n}\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n// eslint-disable-next-line @typescript-eslint/naming-convention\nlet _coalescingLevel = 0;\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n// eslint-disable-next-line @typescript-eslint/naming-convention\nlet _postUpdateHandlers: InvokeOnceHandlers|null = null;\n\nexport function startBatchUpdate(): void {\n  if (!_coalescingLevel++) {\n    _postUpdateHandlers = new InvokeOnceHandlers(false);\n  }\n}\n\nexport function endBatchUpdate(): void {\n  if (--_coalescingLevel) {\n    return;\n  }\n\n  if (_postUpdateHandlers) {\n    _postUpdateHandlers.scheduleInvoke();\n    _postUpdateHandlers = null;\n  }\n}\n\nexport function invokeOnceAfterBatchUpdate(object: Object, method: () => void): void {\n  if (!_postUpdateHandlers) {\n    _postUpdateHandlers = new InvokeOnceHandlers(true);\n  }\n  _postUpdateHandlers.add(object, method);\n}\n\nexport function animateFunction(\n    window: Window, func: Function, params: {\n      from: number,\n      to: number,\n    }[],\n    // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    duration: number, animationComplete?: (() => any)): () => void {\n  const start = window.performance.now();\n  let raf = window.requestAnimationFrame(animationStep);\n\n  function animationStep(timestamp: number): void {\n    const progress = Platform.NumberUtilities.clamp((timestamp - start) / duration, 0, 1);\n    func(...params.map(p => p.from + (p.to - p.from) * progress));\n    if (progress < 1) {\n      raf = window.requestAnimationFrame(animationStep);\n    } else if (animationComplete) {\n      animationComplete();\n    }\n  }\n\n  return (): void => window.cancelAnimationFrame(raf);\n}\n\nexport class LongClickController extends Common.ObjectWrapper.ObjectWrapper {\n  _element: Element;\n  _callback: (arg0: Event) => void;\n  _editKey: (arg0: Event) => boolean;\n  _longClickData!: {\n    mouseUp: (arg0: Event) => void,\n    mouseDown: (arg0: Event) => void,\n    reset: () => void,\n  }|undefined;\n  _longClickInterval!: number|undefined;\n\n  constructor(\n      element: Element, callback: (arg0: Event) => void,\n      isEditKeyFunc: (arg0: Event) => boolean = (event): boolean => isEnterOrSpaceKey(event)) {\n    super();\n    this._element = element;\n    this._callback = callback;\n    this._editKey = isEditKeyFunc;\n    this._enable();\n  }\n\n  reset(): void {\n    if (this._longClickInterval) {\n      clearInterval(this._longClickInterval);\n      delete this._longClickInterval;\n    }\n  }\n\n  _enable(): void {\n    if (this._longClickData) {\n      return;\n    }\n    const boundKeyDown = keyDown.bind(this);\n    const boundKeyUp = keyUp.bind(this);\n    const boundMouseDown = mouseDown.bind(this);\n    const boundMouseUp = mouseUp.bind(this);\n    const boundReset = this.reset.bind(this);\n\n    this._element.addEventListener('keydown', boundKeyDown, false);\n    this._element.addEventListener('keyup', boundKeyUp, false);\n    this._element.addEventListener('mousedown', boundMouseDown, false);\n    this._element.addEventListener('mouseout', boundReset, false);\n    this._element.addEventListener('mouseup', boundMouseUp, false);\n    this._element.addEventListener('click', boundReset, true);\n\n    this._longClickData = {mouseUp: boundMouseUp, mouseDown: boundMouseDown, reset: boundReset};\n\n    function keyDown(this: LongClickController, e: Event): void {\n      if (this._editKey(e)) {\n        const callback = this._callback;\n        this._longClickInterval = window.setTimeout(callback.bind(null, e), LongClickController.TIME_MS);\n      }\n    }\n\n    function keyUp(this: LongClickController, e: Event): void {\n      if (this._editKey(e)) {\n        this.reset();\n      }\n    }\n\n    function mouseDown(this: LongClickController, e: Event): void {\n      if ((e as MouseEvent).which !== 1) {\n        return;\n      }\n      const callback = this._callback;\n      this._longClickInterval = window.setTimeout(callback.bind(null, e), LongClickController.TIME_MS);\n    }\n\n    function mouseUp(this: LongClickController, e: Event): void {\n      if ((e as MouseEvent).which !== 1) {\n        return;\n      }\n      this.reset();\n    }\n  }\n\n  dispose(): void {\n    if (!this._longClickData) {\n      return;\n    }\n    this._element.removeEventListener('mousedown', this._longClickData.mouseDown, false);\n    this._element.removeEventListener('mouseout', this._longClickData.reset, false);\n    this._element.removeEventListener('mouseup', this._longClickData.mouseUp, false);\n    this._element.addEventListener('click', this._longClickData.reset, true);\n    delete this._longClickData;\n  }\n\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  static TIME_MS = 200;\n}\n\nexport function initializeUIUtils(document: Document, themeSetting: Common.Settings.Setting<string>): void {\n  document.body.classList.toggle('inactive', !document.hasFocus());\n  if (document.defaultView) {\n    document.defaultView.addEventListener('focus', _windowFocused.bind(undefined, document), false);\n    document.defaultView.addEventListener('blur', _windowBlurred.bind(undefined, document), false);\n  }\n  document.addEventListener('focus', focusChanged.bind(undefined), true);\n\n  if (!ThemeSupport.ThemeSupport.hasInstance()) {\n    ThemeSupport.ThemeSupport.instance({forceNew: true, setting: themeSetting});\n  }\n  ThemeSupport.ThemeSupport.instance().applyTheme(document);\n\n  const body = (document.body as Element);\n  GlassPane.setContainer(body);\n}\n\nexport function beautifyFunctionName(name: string): string {\n  return name || i18nString(UIStrings.anonymous);\n}\n\nexport const createTextChild = (element: Element|DocumentFragment, text: string): Text => {\n  const textNode = element.ownerDocument.createTextNode(text);\n  element.appendChild(textNode);\n  return textNode;\n};\n\nexport const createTextChildren = (element: Element|DocumentFragment, ...childrenText: string[]): void => {\n  for (const child of childrenText) {\n    createTextChild(element, child);\n  }\n};\n\nexport function createTextButton(\n    // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    text: string, eventHandler?: ((arg0: Event) => any), className?: string, primary?: boolean,\n    alternativeEvent?: string): HTMLButtonElement {\n  const element = (document.createElement('button') as HTMLButtonElement);\n  if (className) {\n    element.className = className;\n  }\n  element.textContent = text;\n  element.classList.add('text-button');\n  if (primary) {\n    element.classList.add('primary-button');\n  }\n  if (eventHandler) {\n    element.addEventListener(alternativeEvent || 'click', eventHandler);\n  }\n  element.type = 'button';\n  return element;\n}\n\nexport function createInput(className?: string, type?: string): HTMLInputElement {\n  const element = document.createElement('input');\n  if (className) {\n    element.className = className;\n  }\n  element.spellcheck = false;\n  element.classList.add('harmony-input');\n  if (type) {\n    element.type = type;\n  }\n  return /** @type {!HTMLInputElement} */ element as HTMLInputElement;\n}\n\nexport function createSelect(name: string, options: string[]|Map<string, string[]>[]|Set<string>): HTMLSelectElement {\n  const select = (document.createElementWithClass('select', 'chrome-select') as HTMLSelectElement);\n  ARIAUtils.setAccessibleName(select, name);\n  for (const option of options) {\n    if (option instanceof Map) {\n      for (const [key, value] of option) {\n        const optGroup = (select.createChild('optgroup') as HTMLOptGroupElement);\n        optGroup.label = key;\n        for (const child of value) {\n          if (typeof child === 'string') {\n            optGroup.appendChild(new Option(child, child));\n          }\n        }\n      }\n    } else if (typeof option === 'string') {\n      select.add(new Option(option, option));\n    }\n  }\n  return select;\n}\n\nexport function createLabel(title: string, className?: string, associatedControl?: Element): Element {\n  const element = document.createElement('label');\n  if (className) {\n    element.className = className;\n  }\n  element.textContent = title;\n  if (associatedControl) {\n    ARIAUtils.bindLabelToControl(element, associatedControl);\n  }\n\n  return element;\n}\n\nexport function createRadioLabel(name: string, title: string, checked?: boolean): DevToolsRadioButton {\n  const element = (document.createElement('span', {is: 'dt-radio'}) as DevToolsRadioButton);\n  element.radioElement.name = name;\n  element.radioElement.checked = Boolean(checked);\n  createTextChild(element.labelElement, title);\n  return element;\n}\n\nexport function createIconLabel(title: string, iconClass: string): HTMLElement {\n  const element = (document.createElement('span', {is: 'dt-icon-label'}) as DevToolsIconLabel);\n  element.createChild('span').textContent = title;\n  element.type = iconClass;\n  return element;\n}\n\nexport function createSlider(min: number, max: number, tabIndex: number): Element {\n  const element = (document.createElement('span', {is: 'dt-slider'}) as DevToolsSlider);\n  element.sliderElement.min = String(min);\n  element.sliderElement.max = String(max);\n  element.sliderElement.step = String(1);\n  element.sliderElement.tabIndex = tabIndex;\n  return element;\n}\n\nexport function setTitle(element: HTMLElement, title: string, actionId: string|undefined = undefined): void {\n  ARIAUtils.setAccessibleName(element, title);\n  Tooltip.install(element, title, actionId, {\n    anchorTooltipAtElement: true,\n  });\n}\n\nexport class CheckboxLabel extends HTMLSpanElement {\n  _shadowRoot!: DocumentFragment;\n  checkboxElement!: HTMLInputElement;\n  textElement!: Element;\n\n  constructor() {\n    super();\n    CheckboxLabel._lastId = CheckboxLabel._lastId + 1;\n    const id = 'ui-checkbox-label' + CheckboxLabel._lastId;\n    this._shadowRoot = createShadowRootWithCoreStyles(\n        this, {cssFile: 'ui/legacy/checkboxTextLabel.css', enableLegacyPatching: false, delegatesFocus: undefined});\n    this.checkboxElement = (this._shadowRoot.createChild('input') as HTMLInputElement);\n    this.checkboxElement.type = 'checkbox';\n    this.checkboxElement.setAttribute('id', id);\n    this.textElement = this._shadowRoot.createChild('label', 'dt-checkbox-text');\n    this.textElement.setAttribute('for', id);\n    this._shadowRoot.createChild('slot');\n  }\n\n  static create(title?: string, checked?: boolean, subtitle?: string): CheckboxLabel {\n    if (!CheckboxLabel._constructor) {\n      CheckboxLabel._constructor = registerCustomElement('span', 'dt-checkbox', CheckboxLabel);\n    }\n    const element = (CheckboxLabel._constructor() as CheckboxLabel);\n    element.checkboxElement.checked = Boolean(checked);\n    if (title !== undefined) {\n      element.textElement.textContent = title;\n      ARIAUtils.setAccessibleName(element.checkboxElement, title);\n      if (subtitle !== undefined) {\n        element.textElement.createChild('div', 'dt-checkbox-subtitle').textContent = subtitle;\n      }\n    }\n    return element;\n  }\n\n  set backgroundColor(color: string) {\n    this.checkboxElement.classList.add('dt-checkbox-themed');\n    this.checkboxElement.style.backgroundColor = color;\n  }\n\n  set checkColor(color: string) {\n    this.checkboxElement.classList.add('dt-checkbox-themed');\n    const stylesheet = document.createElement('style');\n    stylesheet.textContent = 'input.dt-checkbox-themed:checked:after { background-color: ' + color + '}';\n    this._shadowRoot.appendChild(stylesheet);\n  }\n\n  set borderColor(color: string) {\n    this.checkboxElement.classList.add('dt-checkbox-themed');\n    this.checkboxElement.style.borderColor = color;\n  }\n\n  static _lastId = 0;\n  static _constructor: (() => Element)|null = null;\n}\n\nexport class DevToolsIconLabel extends HTMLSpanElement {\n  _iconElement: Icon;\n\n  constructor() {\n    super();\n    const root = createShadowRootWithCoreStyles(this, {\n      enableLegacyPatching: false,\n      cssFile: undefined,\n      delegatesFocus: undefined,\n    });\n    this._iconElement = Icon.create();\n    this._iconElement.style.setProperty('margin-right', '4px');\n    root.appendChild(this._iconElement);\n    root.createChild('slot');\n  }\n\n  set type(type: string) {\n    this._iconElement.setIconType(type);\n  }\n}\n\nlet labelId = 0;\n\nexport class DevToolsRadioButton extends HTMLSpanElement {\n  radioElement: HTMLInputElement;\n  labelElement: HTMLLabelElement;\n\n  constructor() {\n    super();\n    this.radioElement = (this.createChild('input', 'dt-radio-button') as HTMLInputElement);\n    this.labelElement = (this.createChild('label') as HTMLLabelElement);\n\n    const id = 'dt-radio-button-id' + (++labelId);\n    this.radioElement.id = id;\n    this.radioElement.type = 'radio';\n    this.labelElement.htmlFor = id;\n    const root = createShadowRootWithCoreStyles(\n        this, {cssFile: 'ui/legacy/radioButton.css', enableLegacyPatching: false, delegatesFocus: undefined});\n    root.createChild('slot');\n    this.addEventListener('click', this.radioClickHandler.bind(this), false);\n  }\n\n  radioClickHandler(): void {\n    if (this.radioElement.checked || this.radioElement.disabled) {\n      return;\n    }\n    this.radioElement.checked = true;\n    this.radioElement.dispatchEvent(new Event('change'));\n  }\n}\n\nregisterCustomElement('span', 'dt-radio', DevToolsRadioButton);\nregisterCustomElement('span', 'dt-icon-label', DevToolsIconLabel);\n\nexport class DevToolsSlider extends HTMLSpanElement {\n  sliderElement: HTMLInputElement;\n\n  constructor() {\n    super();\n    const root = createShadowRootWithCoreStyles(\n        this, {cssFile: 'ui/legacy/slider.css', enableLegacyPatching: false, delegatesFocus: undefined});\n    this.sliderElement = document.createElement('input');\n    this.sliderElement.classList.add('dt-range-input');\n    this.sliderElement.type = 'range';\n    root.appendChild(this.sliderElement);\n  }\n\n  set value(amount: number) {\n    this.sliderElement.value = String(amount);\n  }\n\n  get value(): number {\n    return Number(this.sliderElement.value);\n  }\n}\n\nregisterCustomElement('span', 'dt-slider', DevToolsSlider);\n\nexport class DevToolsSmallBubble extends HTMLSpanElement {\n  _textElement: Element;\n\n  constructor() {\n    super();\n    const root = createShadowRootWithCoreStyles(\n        this, {cssFile: 'ui/legacy/smallBubble.css', enableLegacyPatching: false, delegatesFocus: undefined});\n    this._textElement = root.createChild('div');\n    this._textElement.className = 'info';\n    this._textElement.createChild('slot');\n  }\n\n  set type(type: string) {\n    this._textElement.className = type;\n  }\n}\n\nregisterCustomElement('span', 'dt-small-bubble', DevToolsSmallBubble);\n\nexport class DevToolsCloseButton extends HTMLDivElement {\n  _buttonElement: HTMLElement;\n  _hoverIcon: Icon;\n  _activeIcon: Icon;\n\n  constructor() {\n    super();\n    const root = createShadowRootWithCoreStyles(\n        this, {cssFile: 'ui/legacy/closeButton.css', enableLegacyPatching: false, delegatesFocus: undefined});\n    this._buttonElement = (root.createChild('div', 'close-button') as HTMLElement);\n    ARIAUtils.setAccessibleName(this._buttonElement, i18nString(UIStrings.close));\n    ARIAUtils.markAsButton(this._buttonElement);\n    const regularIcon = Icon.create('smallicon-cross', 'default-icon');\n    this._hoverIcon = Icon.create('mediumicon-red-cross-hover', 'hover-icon');\n    this._activeIcon = Icon.create('mediumicon-red-cross-active', 'active-icon');\n    this._buttonElement.appendChild(regularIcon);\n    this._buttonElement.appendChild(this._hoverIcon);\n    this._buttonElement.appendChild(this._activeIcon);\n  }\n\n  set gray(gray: boolean) {\n    if (gray) {\n      this._hoverIcon.setIconType('mediumicon-gray-cross-hover');\n      this._activeIcon.setIconType('mediumicon-gray-cross-active');\n    } else {\n      this._hoverIcon.setIconType('mediumicon-red-cross-hover');\n      this._activeIcon.setIconType('mediumicon-red-cross-active');\n    }\n  }\n\n  setAccessibleName(name: string): void {\n    ARIAUtils.setAccessibleName(this._buttonElement, name);\n  }\n\n  setTabbable(tabbable: boolean): void {\n    if (tabbable) {\n      this._buttonElement.tabIndex = 0;\n    } else {\n      this._buttonElement.tabIndex = -1;\n    }\n  }\n}\n\nregisterCustomElement('div', 'dt-close-button', DevToolsCloseButton);\n\nexport function bindInput(\n    input: HTMLInputElement, apply: (arg0: string) => void, validate: (arg0: string) => {\n      valid: boolean,\n      errorMessage: (string | undefined),\n    },\n    numeric: boolean, modifierMultiplier?: number): (arg0: string) => void {\n  input.addEventListener('change', onChange, false);\n  input.addEventListener('input', onInput, false);\n  input.addEventListener('keydown', onKeyDown, false);\n  input.addEventListener('focus', input.select.bind(input), false);\n\n  function onInput(): void {\n    input.classList.toggle('error-input', !validate(input.value));\n  }\n\n  function onChange(): void {\n    const {valid} = validate(input.value);\n    input.classList.toggle('error-input', !valid);\n    if (valid) {\n      apply(input.value);\n    }\n  }\n\n  function onKeyDown(event: KeyboardEvent): void {\n    if (event.key === 'Enter') {\n      const {valid} = validate(input.value);\n      if (valid) {\n        apply(input.value);\n      }\n      event.preventDefault();\n      return;\n    }\n\n    if (!numeric) {\n      return;\n    }\n\n    const value = _modifiedFloatNumber(parseFloat(input.value), event, modifierMultiplier);\n    const stringValue = value ? String(value) : '';\n    const {valid} = validate(stringValue);\n    if (!valid || !value) {\n      return;\n    }\n\n    input.value = stringValue;\n    apply(input.value);\n    event.preventDefault();\n  }\n\n  function setValue(value: string): void {\n    if (value === input.value) {\n      return;\n    }\n    const {valid} = validate(value);\n    input.classList.toggle('error-input', !valid);\n    input.value = value;\n  }\n\n  return setValue;\n}\n\nexport function trimText(\n    context: CanvasRenderingContext2D, text: string, maxWidth: number,\n    trimFunction: (arg0: string, arg1: number) => string): string {\n  const maxLength = 200;\n  if (maxWidth <= 10) {\n    return '';\n  }\n  if (text.length > maxLength) {\n    text = trimFunction(text, maxLength);\n  }\n  const textWidth = measureTextWidth(context, text);\n  if (textWidth <= maxWidth) {\n    return text;\n  }\n\n  let l = 0;\n  let r: number = text.length;\n  let lv = 0;\n  let rv: number = textWidth;\n  while (l < r && lv !== rv && lv !== maxWidth) {\n    const m = Math.ceil(l + (r - l) * (maxWidth - lv) / (rv - lv));\n    const mv = measureTextWidth(context, trimFunction(text, m));\n    if (mv <= maxWidth) {\n      l = m;\n      lv = mv;\n    } else {\n      r = m - 1;\n      rv = mv;\n    }\n  }\n  text = trimFunction(text, l);\n  return text !== '' ? text : '';\n}\n\nexport function trimTextMiddle(context: CanvasRenderingContext2D, text: string, maxWidth: number): string {\n  return trimText(context, text, maxWidth, (text, width) => Platform.StringUtilities.trimMiddle(text, width));\n}\n\nexport function trimTextEnd(context: CanvasRenderingContext2D, text: string, maxWidth: number): string {\n  return trimText(context, text, maxWidth, (text, width) => Platform.StringUtilities.trimEndWithMaxLength(text, width));\n}\n\nexport function measureTextWidth(context: CanvasRenderingContext2D, text: string): number {\n  const maxCacheableLength = 200;\n  if (text.length > maxCacheableLength) {\n    return context.measureText(text).width;\n  }\n\n  if (!measureTextWidthCache) {\n    measureTextWidthCache = new Map();\n  }\n  const font = context.font;\n  let textWidths = measureTextWidthCache.get(font);\n  if (!textWidths) {\n    textWidths = new Map();\n    measureTextWidthCache.set(font, textWidths);\n  }\n  let width = textWidths.get(text);\n  if (!width) {\n    width = context.measureText(text).width;\n    textWidths.set(text, width);\n  }\n  return width;\n}\n\nlet measureTextWidthCache: Map<string, Map<string, number>>|null = null;\n\n/**\n * Adds a 'utm_source=devtools' as query parameter to the url.\n */\nexport function addReferrerToURL(url: string): string {\n  if (/(\\?|&)utm_source=devtools/.test(url)) {\n    return url;\n  }\n  if (url.indexOf('?') === -1) {\n    // If the URL does not contain a query, add the referrer query after path\n    // and before (potential) anchor.\n    return url.replace(/^([^#]*)(#.*)?$/g, '$1?utm_source=devtools$2');\n  }\n  // If the URL already contains a query, add the referrer query after the last query\n  // and before (potential) anchor.\n  return url.replace(/^([^#]*)(#.*)?$/g, '$1&utm_source=devtools$2');\n}\n\n/**\n * We want to add a referrer query param to every request to\n * 'web.dev' or 'developers.google.com'.\n */\nexport function addReferrerToURLIfNecessary(url: string): string {\n  if (/(\\/\\/developers.google.com\\/|\\/\\/web.dev\\/)/.test(url)) {\n    return addReferrerToURL(url);\n  }\n  return url;\n}\n\nexport function loadImage(url: string): Promise<HTMLImageElement|null> {\n  return new Promise(fulfill => {\n    const image = new Image();\n    image.addEventListener('load', () => fulfill(image));\n    image.addEventListener('error', () => fulfill(null));\n    image.src = url;\n  });\n}\n\nexport function loadImageFromData(data: string|null): Promise<HTMLImageElement|null> {\n  return data ? loadImage('data:image/jpg;base64,' + data) : Promise.resolve(null);\n}\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function createFileSelectorElement(callback: (arg0: File) => any): HTMLInputElement {\n  const fileSelectorElement = (document.createElement('input') as HTMLInputElement);\n  fileSelectorElement.type = 'file';\n  fileSelectorElement.style.display = 'none';\n  fileSelectorElement.tabIndex = -1;\n  fileSelectorElement.onchange = (): void => {\n    if (fileSelectorElement.files) {\n      callback(fileSelectorElement.files[0]);\n    }\n  };\n\n  return fileSelectorElement;\n}\n\nexport const MaxLengthForDisplayedURLs = 150;\n\nexport class MessageDialog {\n  static async show(message: string, where?: Element | Document): Promise<void> {\n    const dialog = new Dialog();\n    dialog.setSizeBehavior(SizeBehavior.MeasureContent);\n    dialog.setDimmed(true);\n    const shadowRoot = createShadowRootWithCoreStyles(\n        dialog.contentElement,\n        {cssFile: 'ui/legacy/confirmDialog.css', enableLegacyPatching: false, delegatesFocus: undefined});\n    const content = shadowRoot.createChild('div', 'widget');\n    await new Promise(resolve => {\n      const okButton = createTextButton(i18nString(UIStrings.ok), resolve, '', true);\n      content.createChild('div', 'message').createChild('span').textContent = message;\n      content.createChild('div', 'button').appendChild(okButton);\n      dialog.setOutsideClickCallback(event => {\n        event.consume();\n        resolve(undefined);\n      });\n      dialog.show(where);\n      okButton.focus();\n    });\n    dialog.hide();\n  }\n}\n\nexport class ConfirmDialog {\n  static async show(message: string, where?: Element | Document): Promise<boolean> {\n    const dialog = new Dialog();\n    dialog.setSizeBehavior(SizeBehavior.MeasureContent);\n    dialog.setDimmed(true);\n    ARIAUtils.setAccessibleName(dialog.contentElement, message);\n    const shadowRoot = createShadowRootWithCoreStyles(\n        dialog.contentElement,\n        {cssFile: 'ui/legacy/confirmDialog.css', enableLegacyPatching: false, delegatesFocus: undefined});\n    const content = shadowRoot.createChild('div', 'widget');\n    content.createChild('div', 'message').createChild('span').textContent = message;\n    const buttonsBar = content.createChild('div', 'button');\n    const result = await new Promise<boolean>(resolve => {\n      const okButton = createTextButton(\n          /* text= */ i18nString(UIStrings.ok), /* clickHandler= */ () => resolve(true), /* className= */ '',\n          /* primary= */ true);\n      buttonsBar.appendChild(okButton);\n      buttonsBar.appendChild(createTextButton(i18nString(UIStrings.cancel), () => resolve(false)));\n      dialog.setOutsideClickCallback(event => {\n        event.consume();\n        resolve(false);\n      });\n      dialog.show(where);\n      okButton.focus();\n    });\n    dialog.hide();\n    return result;\n  }\n}\n\nexport function createInlineButton(toolbarButton: ToolbarButton): Element {\n  const element = document.createElement('span');\n  const shadowRoot = createShadowRootWithCoreStyles(\n      element, {cssFile: 'ui/legacy/inlineButton.css', enableLegacyPatching: false, delegatesFocus: undefined});\n  element.classList.add('inline-button');\n  const toolbar = new Toolbar('');\n  toolbar.appendToolbarItem(toolbarButton);\n  shadowRoot.appendChild(toolbar.element);\n  return element;\n}\n\nexport abstract class Renderer {\n  abstract render(object: Object, options?: Options): Promise<{\n    node: Node,\n    tree: TreeOutline|null,\n  }|null>;\n\n  static async render(object: Object, options?: Options): Promise<{\n    node: Node,\n    tree: TreeOutline|null,\n  }|null> {\n    if (!object) {\n      throw new Error('Can\\'t render ' + object);\n    }\n    const extension = getApplicableRegisteredRenderers(object)[0];\n    if (!extension) {\n      return null;\n    }\n    const renderer = await extension.loadRenderer();\n    return renderer.render(object, options);\n  }\n}\n\nexport function formatTimestamp(timestamp: number, full: boolean): string {\n  const date = new Date(timestamp);\n  const yymmdd = date.getFullYear() + '-' + leadZero(date.getMonth() + 1, 2) + '-' + leadZero(date.getDate(), 2);\n  const hhmmssfff = leadZero(date.getHours(), 2) + ':' + leadZero(date.getMinutes(), 2) + ':' +\n      leadZero(date.getSeconds(), 2) + '.' + leadZero(date.getMilliseconds(), 3);\n  return full ? (yymmdd + ' ' + hhmmssfff) : hhmmssfff;\n\n  function leadZero(value: number, length: number): string {\n    const valueString = String(value);\n    return valueString.padStart(length, '0');\n  }\n}\n\nexport interface Options {\n  title?: string|Element;\n  editable?: boolean;\n}\n\nexport interface HighlightChange {\n  node: Element;\n  type: string;\n  oldText?: string;\n  newText?: string;\n  nextSibling?: Node;\n  parent?: Node;\n}\n\nexport const isScrolledToBottom = (element: Element): boolean => {\n  // This code works only for 0-width border.\n  // The scrollTop, clientHeight and scrollHeight are computed in double values internally.\n  // However, they are exposed to javascript differently, each being either rounded (via\n  // round, ceil or floor functions) or left intouch.\n  // This adds up a total error up to 2.\n  return Math.abs(element.scrollTop + element.clientHeight - element.scrollHeight) <= 2;\n};\n\nexport function createSVGChild(element: Element, childType: string, className?: string): Element {\n  const child = element.ownerDocument.createElementNS('http://www.w3.org/2000/svg', childType);\n  if (className) {\n    child.setAttribute('class', className);\n  }\n  element.appendChild(child);\n  return child;\n}\n\nexport const enclosingNodeOrSelfWithNodeNameInArray = (initialNode: Node, nameArray: string[]): Node|null => {\n  let node: (Node|null)|Node = initialNode;\n  for (; node && node !== initialNode.ownerDocument; node = node.parentNodeOrShadowHost()) {\n    for (let i = 0; i < nameArray.length; ++i) {\n      if (node.nodeName.toLowerCase() === nameArray[i].toLowerCase()) {\n        return node;\n      }\n    }\n  }\n  return null;\n};\n\nexport const enclosingNodeOrSelfWithNodeName = function(node: Node, nodeName: string): Node|null {\n  return enclosingNodeOrSelfWithNodeNameInArray(node, [nodeName]);\n};\n\nexport const deepElementFromPoint = (document: Document|ShadowRoot|null|undefined, x: number, y: number): Node|null => {\n  let container: (ShadowRoot|null)|(Document | ShadowRoot | null | undefined) = document;\n  let node: Element|null = null;\n  while (container) {\n    const innerNode = container.elementFromPoint(x, y);\n    if (!innerNode || node === innerNode) {\n      break;\n    }\n    node = innerNode;\n    container = node.shadowRoot;\n  }\n  return node;\n};\n\nexport const deepElementFromEvent = (ev: Event): Node|null => {\n  const event = (ev as MouseEvent);\n  // Some synthetic events have zero coordinates which lead to a wrong element. Better return nothing in this case.\n  if (!event.which && !event.pageX && !event.pageY && !event.clientX && !event.clientY && !event.movementX &&\n      !event.movementY) {\n    return null;\n  }\n  const root = event.target && (event.target as Element).getComponentRoot();\n  return root ? deepElementFromPoint((root as Document | ShadowRoot), event.pageX, event.pageY) : null;\n};\n\nconst registeredRenderers: RendererRegistration[] = [];\n\nexport function registerRenderer(registration: RendererRegistration): void {\n  registeredRenderers.push(registration);\n}\nexport function getApplicableRegisteredRenderers(object: Object): RendererRegistration[] {\n  return registeredRenderers.filter(isRendererApplicableToContextTypes);\n\n  function isRendererApplicableToContextTypes(rendererRegistration: RendererRegistration): boolean {\n    if (!rendererRegistration.contextTypes) {\n      return true;\n    }\n    for (const contextType of rendererRegistration.contextTypes()) {\n      // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n      // @ts-expect-error\n      if (object instanceof contextType) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\nexport interface RendererRegistration {\n  loadRenderer: () => Promise<Renderer>;\n  contextTypes: () => Array<unknown>;\n}\n"]}