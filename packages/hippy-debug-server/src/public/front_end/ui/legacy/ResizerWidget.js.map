{"version":3,"file":"ResizerWidget.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/ResizerWidget.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2014 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as Common from '../../core/common/common.js';\nimport {elementDragStart} from './UIUtils.js';\n\nexport class ResizerWidget extends Common.ObjectWrapper.ObjectWrapper {\n  _isEnabled: boolean;\n  _elements: Set<HTMLElement>;\n  _installDragOnMouseDownBound: (event: Event) => false | undefined;\n  _cursor: string;\n  _startX?: number;\n  _startY?: number;\n\n  constructor() {\n    super();\n\n    this._isEnabled = true;\n    this._elements = new Set();\n    this._installDragOnMouseDownBound = this._installDragOnMouseDown.bind(this);\n    this._cursor = 'nwse-resize';\n  }\n\n  isEnabled(): boolean {\n    return this._isEnabled;\n  }\n\n  setEnabled(enabled: boolean): void {\n    this._isEnabled = enabled;\n    this.updateElementCursors();\n  }\n\n  elements(): Element[] {\n    return [...this._elements];\n  }\n\n  addElement(element: HTMLElement): void {\n    if (!this._elements.has(element)) {\n      this._elements.add(element);\n      element.addEventListener('mousedown', this._installDragOnMouseDownBound, false);\n      this._updateElementCursor(element);\n    }\n  }\n\n  removeElement(element: HTMLElement): void {\n    if (this._elements.has(element)) {\n      this._elements.delete(element);\n      element.removeEventListener('mousedown', this._installDragOnMouseDownBound, false);\n      element.style.removeProperty('cursor');\n    }\n  }\n\n  updateElementCursors(): void {\n    this._elements.forEach(this._updateElementCursor.bind(this));\n  }\n\n  _updateElementCursor(element: HTMLElement): void {\n    if (this._isEnabled) {\n      element.style.setProperty('cursor', this.cursor());\n    } else {\n      element.style.removeProperty('cursor');\n    }\n  }\n\n  cursor(): string {\n    return this._cursor;\n  }\n\n  setCursor(cursor: string): void {\n    this._cursor = cursor;\n    this.updateElementCursors();\n  }\n\n  _installDragOnMouseDown(event: Event): false|undefined {\n    const element = (event.target as HTMLElement);\n    // Only handle drags of the nodes specified.\n    if (!this._elements.has(element)) {\n      return false;\n    }\n    elementDragStart(element, this._dragStart.bind(this), event => {\n      this._drag(event);\n    }, this._dragEnd.bind(this), this.cursor(), event);\n    return undefined;\n  }\n\n  _dragStart(event: MouseEvent): boolean {\n    if (!this._isEnabled) {\n      return false;\n    }\n    this._startX = event.pageX;\n    this._startY = event.pageY;\n    this.sendDragStart(this._startX, this._startY);\n    return true;\n  }\n\n  sendDragStart(x: number, y: number): void {\n    this.dispatchEventToListeners(Events.ResizeStart, {startX: x, currentX: x, startY: y, currentY: y});\n  }\n\n  _drag(event: MouseEvent): boolean {\n    if (!this._isEnabled) {\n      this._dragEnd(event);\n      return true;  // Cancel drag.\n    }\n    this.sendDragMove((this._startX as number), event.pageX, (this._startY as number), event.pageY, event.shiftKey);\n    event.preventDefault();\n    return false;  // Continue drag.\n  }\n\n  sendDragMove(startX: number, currentX: number, startY: number, currentY: number, shiftKey: boolean): void {\n    this.dispatchEventToListeners(\n        Events.ResizeUpdate,\n        {startX: startX, currentX: currentX, startY: startY, currentY: currentY, shiftKey: shiftKey});\n  }\n\n  _dragEnd(_event: MouseEvent): void {\n    this.dispatchEventToListeners(Events.ResizeEnd);\n    delete this._startX;\n    delete this._startY;\n  }\n}\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum Events {\n  ResizeStart = 'ResizeStart',\n  ResizeUpdate = 'ResizeUpdate',\n  ResizeEnd = 'ResizeEnd',\n}\n\n\nexport class SimpleResizerWidget extends ResizerWidget {\n  _isVertical: boolean;\n  constructor() {\n    super();\n    this._isVertical = true;\n  }\n\n  isVertical(): boolean {\n    return this._isVertical;\n  }\n\n  /**\n   * Vertical widget resizes height (along y-axis).\n   */\n  setVertical(vertical: boolean): void {\n    this._isVertical = vertical;\n    this.updateElementCursors();\n  }\n\n  cursor(): string {\n    return this._isVertical ? 'ns-resize' : 'ew-resize';\n  }\n\n  sendDragStart(x: number, y: number): void {\n    const position = this._isVertical ? y : x;\n    this.dispatchEventToListeners(Events.ResizeStart, {startPosition: position, currentPosition: position});\n  }\n\n  sendDragMove(startX: number, currentX: number, startY: number, currentY: number, shiftKey: boolean): void {\n    if (this._isVertical) {\n      this.dispatchEventToListeners(\n          Events.ResizeUpdate, {startPosition: startY, currentPosition: currentY, shiftKey: shiftKey});\n    } else {\n      this.dispatchEventToListeners(\n          Events.ResizeUpdate, {startPosition: startX, currentPosition: currentX, shiftKey: shiftKey});\n    }\n  }\n}\n"]}