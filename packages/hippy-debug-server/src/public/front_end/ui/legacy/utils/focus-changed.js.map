{"version":3,"file":"focus-changed.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/legacy/utils/focus-changed.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,mEAAmE;AACnE,gEAAgE;AAChE,SAAS,wBAAwB,CAAC,IAAe;IAC/C,OAAO,IAAI,EAAE;QACX,mEAAmE;QACnE,8DAA8D;QAC9D,IAAK,IAAY,CAAC,QAAQ,EAAE;YAC1B,MAAM;SACP;QACD,IAAI,GAAG,IAAI,CAAC,sBAAsB,EAAE,CAAC;KACtC;IACD,IAAI,CAAC,IAAI,EAAE;QACT,OAAO;KACR;IAED,mEAAmE;IACnE,8DAA8D;IAC9D,IAAI,MAAM,GAAI,IAAY,CAAC,QAAQ,CAAC;IACpC,OAAO,MAAM,CAAC,aAAa,EAAE;QAC3B,MAAM,CAAC,aAAa,CAAC,oBAAoB,GAAG,MAAM,CAAC;QACnD,MAAM,GAAG,MAAM,CAAC,aAAa,CAAC;KAC/B;AACH,CAAC;AAED,mEAAmE;AACnE,gEAAgE;AAChE,SAAS,yBAAyB,CAAC,IAAe;IAChD,IAAI,GAAG,IAAI,IAAI,IAAI,CAAC,sBAAsB,EAAE,CAAC;IAC7C,MAAM,WAAW,GAAG,cAAc,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;IACnD,IAAI,MAAM,GAAG,IAAI,CAAC;IAClB,OAAO,IAAI,EAAE;QACX,IAAI,IAAI,YAAY,WAAW,EAAE;YAC/B,IAAI,MAAM,EAAE;gBACV,mEAAmE;gBACnE,8DAA8D;gBAC7D,IAAY,CAAC,sBAAsB,GAAG,MAAM,CAAC;aAC/C;YACD,MAAM,GAAG,IAAI,CAAC;SACf;QACD,IAAI,GAAG,IAAI,CAAC,sBAAsB,EAAE,CAAC;KACtC;AACH,CAAC;AAED,MAAM,UAAU,YAAY,CAAC,KAAY;IACvC,MAAM,MAAM,GAAG,KAAK,CAAC,MAAqB,CAAC;IAC3C,MAAM,QAAQ,GAAG,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC;IACtD,MAAM,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;IAC/D,wBAAwB,CAAC,OAAO,CAAC,CAAC;IAClC,yBAAyB,CAAC,OAAO,CAAC,CAAC;AACrC,CAAC","sourcesContent":["// Copyright 2019 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction WidgetfocusWidgetForNode(node: Node|null): void {\n  while (node) {\n    // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if ((node as any).__widget) {\n      break;\n    }\n    node = node.parentNodeOrShadowHost();\n  }\n  if (!node) {\n    return;\n  }\n\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  let widget = (node as any).__widget;\n  while (widget._parentWidget) {\n    widget._parentWidget._defaultFocusedChild = widget;\n    widget = widget._parentWidget;\n  }\n}\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction XWidgetfocusWidgetForNode(node: Node|null): void {\n  node = node && node.parentNodeOrShadowHost();\n  const XWidgetCtor = customElements.get('x-widget');\n  let widget = null;\n  while (node) {\n    if (node instanceof XWidgetCtor) {\n      if (widget) {\n        // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (node as any)._defaultFocusedElement = widget;\n      }\n      widget = node;\n    }\n    node = node.parentNodeOrShadowHost();\n  }\n}\n\nexport function focusChanged(event: Event): void {\n  const target = event.target as HTMLElement;\n  const document = target ? target.ownerDocument : null;\n  const element = document ? document.deepActiveElement() : null;\n  WidgetfocusWidgetForNode(element);\n  XWidgetfocusWidgetForNode(element);\n}\n"]}