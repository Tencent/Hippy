{"version":3,"file":"ReportView.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/ReportView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {Toolbar} from './Toolbar.js';\nimport {Tooltip} from './Tooltip.js';\nimport {VBox} from './Widget.js';\n\n/**\n * @deprecated Please consider using the web component version of this widget\n *             (`ui/components/report_view/ReportView.ts`) for new code.\n */\nexport class ReportView extends VBox {\n  _contentBox: HTMLElement;\n  _headerElement: HTMLElement;\n  _titleElement: HTMLElement;\n  _sectionList: HTMLElement;\n  _subtitleElement?: HTMLElement;\n  _urlElement?: HTMLElement;\n  constructor(title?: string) {\n    super(true);\n    this.registerRequiredCSS('ui/legacy/reportView.css', {enableLegacyPatching: false});\n\n    this._contentBox = this.contentElement.createChild('div', 'report-content-box');\n    this._headerElement = this._contentBox.createChild('div', 'report-header vbox');\n    this._titleElement = this._headerElement.createChild('div', 'report-title');\n    if (title) {\n      this._titleElement.textContent = title;\n    } else {\n      this._headerElement.classList.add('hidden');\n    }\n    ARIAUtils.markAsHeading(this._titleElement, 1);\n\n    this._sectionList = this._contentBox.createChild('div', 'vbox');\n  }\n\n  setTitle(title: string): void {\n    if (this._titleElement.textContent === title) {\n      return;\n    }\n    this._titleElement.textContent = title;\n    this._headerElement.classList.toggle('hidden', Boolean(title));\n  }\n\n  setSubtitle(subtitle: string): void {\n    if (this._subtitleElement && this._subtitleElement.textContent === subtitle) {\n      return;\n    }\n    if (!this._subtitleElement) {\n      this._subtitleElement = this._headerElement.createChild('div', 'report-subtitle');\n    }\n    this._subtitleElement.textContent = subtitle;\n  }\n\n  setURL(link: Element|null): void {\n    if (!this._urlElement) {\n      this._urlElement = this._headerElement.createChild('div', 'report-url link');\n    }\n    this._urlElement.removeChildren();\n    if (link) {\n      this._urlElement.appendChild(link);\n    }\n  }\n\n  createToolbar(): Toolbar {\n    const toolbar = new Toolbar('');\n    this._headerElement.appendChild(toolbar.element);\n    return toolbar;\n  }\n\n  appendSection(title: string, className?: string): Section {\n    const section = new Section(title, className);\n    section.show(this._sectionList);\n    return section;\n  }\n\n  sortSections(comparator: (arg0: Section, arg1: Section) => number): void {\n    const sections = (this.children().slice() as Section[]);\n    const sorted = sections.every((e, i, a) => !i || comparator(a[i - 1], a[i]) <= 0);\n    if (sorted) {\n      return;\n    }\n\n    this.detachChildWidgets();\n    sections.sort(comparator);\n    for (const section of sections) {\n      section.show(this._sectionList);\n    }\n  }\n\n  setHeaderVisible(visible: boolean): void {\n    this._headerElement.classList.toggle('hidden', !visible);\n  }\n\n  setBodyScrollable(scrollable: boolean): void {\n    this._contentBox.classList.toggle('no-scroll', !scrollable);\n  }\n}\n\nexport class Section extends VBox {\n  _headerElement: HTMLElement;\n  _titleElement: HTMLElement;\n  _fieldList: HTMLElement;\n  _fieldMap: Map<string, Element>;\n  constructor(title: string, className?: string) {\n    super();\n    this.element.classList.add('report-section');\n    if (className) {\n      this.element.classList.add(className);\n    }\n    this._headerElement = this.element.createChild('div', 'report-section-header');\n    this._titleElement = this._headerElement.createChild('div', 'report-section-title');\n    this.setTitle(title);\n    ARIAUtils.markAsHeading(this._titleElement, 2);\n    this._fieldList = this.element.createChild('div', 'vbox');\n    this._fieldMap = new Map();\n  }\n\n  title(): string {\n    return this._titleElement.textContent || '';\n  }\n\n  setTitle(title: string, tooltip?: string): void {\n    if (this._titleElement.textContent !== title) {\n      this._titleElement.textContent = title;\n    }\n    Tooltip.install(this._titleElement, tooltip || '');\n    this._titleElement.classList.toggle('hidden', !this._titleElement.textContent);\n  }\n\n  /**\n   * Declares the overall container to be a group and assigns a title.\n   */\n  setUiGroupTitle(groupTitle: string): void {\n    ARIAUtils.markAsGroup(this.element);\n    ARIAUtils.setAccessibleName(this.element, groupTitle);\n  }\n\n  createToolbar(): Toolbar {\n    const toolbar = new Toolbar('');\n    this._headerElement.appendChild(toolbar.element);\n    return toolbar;\n  }\n\n  appendField(title: string, textValue?: string): HTMLElement {\n    let row = this._fieldMap.get(title);\n    if (!row) {\n      row = this._fieldList.createChild('div', 'report-field');\n      row.createChild('div', 'report-field-name').textContent = title;\n      this._fieldMap.set(title, row);\n      row.createChild('div', 'report-field-value');\n    }\n    if (textValue && row.lastElementChild) {\n      row.lastElementChild.textContent = textValue;\n    }\n    return /** @type {!HTMLElement} */ row.lastElementChild as HTMLElement;\n  }\n\n  appendFlexedField(title: string, textValue?: string): Element {\n    const field = this.appendField(title, textValue);\n    field.classList.add('report-field-value-is-flexed');\n    return field;\n  }\n\n  removeField(title: string): void {\n    const row = this._fieldMap.get(title);\n    if (row) {\n      row.remove();\n    }\n    this._fieldMap.delete(title);\n  }\n\n  setFieldVisible(title: string, visible: boolean): void {\n    const row = this._fieldMap.get(title);\n    if (row) {\n      row.classList.toggle('hidden', !visible);\n    }\n  }\n\n  fieldValue(title: string): Element|null {\n    const row = this._fieldMap.get(title);\n    return row ? row.lastElementChild : null;\n  }\n\n  appendRow(): HTMLElement {\n    return /** @type {!HTMLElement} */ this._fieldList.createChild('div', 'report-row') as HTMLElement;\n  }\n\n  appendSelectableRow(): HTMLElement {\n    return /** @type {!HTMLElement} */ this._fieldList.createChild('div', 'report-row report-row-selectable') as\n        HTMLElement;\n  }\n\n  clearContent(): void {\n    this._fieldList.removeChildren();\n    this._fieldMap.clear();\n  }\n\n  markFieldListAsGroup(): void {\n    ARIAUtils.markAsGroup(this._fieldList);\n    ARIAUtils.setAccessibleName(this._fieldList, this.title());\n  }\n\n  setIconMasked(masked: boolean): void {\n    this.element.classList.toggle('show-mask', masked);\n  }\n}\n"]}