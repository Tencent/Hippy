{"version":3,"file":"CSSShadowEditor.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/inline_editor/CSSShadowEditor.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as UI from '../../legacy.js';\n\nimport type {CSSShadowModel} from './CSSShadowModel.js';\nimport {CSSLength} from './CSSShadowModel.js';  // eslint-disable-line no-unused-vars\n\nconst UIStrings = {\n  /**\n  *@description Text that refers to some types\n  */\n  type: 'Type',\n  /**\n  *@description Text in CSSShadow Editor of the inline editor in the Styles tab\n  */\n  xOffset: 'X offset',\n  /**\n  *@description Text in CSSShadow Editor of the inline editor in the Styles tab\n  */\n  yOffset: 'Y offset',\n  /**\n  * @description Text in CSSShadow Editor of the inline editor in the Styles tab. Noun which is a\n  * label for an input that allows the user to specify how blurred the box-shadow should be.\n  */\n  blur: 'Blur',\n  /**\n  *@description Text in CSSShadow Editor of the inline editor in the Styles tab\n  */\n  spread: 'Spread',\n};\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/inline_editor/CSSShadowEditor.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst maxRange: number = 20;\nconst defaultUnit: string = 'px';\nconst sliderThumbRadius: number = 6;\nconst canvasSize: number = 88;\n\nexport class CSSShadowEditor extends UI.Widget.VBox {\n  _typeField: HTMLElement;\n  _outsetButton: HTMLElement;\n  _insetButton: HTMLElement;\n  _xInput: HTMLInputElement;\n  _yInput: HTMLInputElement;\n  _xySlider: HTMLCanvasElement;\n  _halfCanvasSize: number;\n  _innerCanvasSize: number;\n  _blurInput: HTMLInputElement;\n  _blurSlider: HTMLInputElement;\n  _spreadField: HTMLElement;\n  _spreadInput: HTMLInputElement;\n  _spreadSlider: HTMLInputElement;\n  _model!: CSSShadowModel;\n  _canvasOrigin!: UI.Geometry.Point;\n  _changedElement?: HTMLInputElement|null;\n  constructor() {\n    super(true);\n    this.registerRequiredCSS('ui/legacy/components/inline_editor/cssShadowEditor.css', {enableLegacyPatching: false});\n    this.contentElement.tabIndex = 0;\n    this.setDefaultFocusedElement(this.contentElement);\n\n    this._typeField = this.contentElement.createChild('div', 'shadow-editor-field shadow-editor-flex-field');\n    this._typeField.createChild('label', 'shadow-editor-label').textContent = i18nString(UIStrings.type);\n    this._outsetButton = this._typeField.createChild('button', 'shadow-editor-button-left');\n    this._outsetButton.textContent = i18n.i18n.lockedString('Outset');\n    this._outsetButton.addEventListener('click', this._onButtonClick.bind(this), false);\n    this._insetButton = this._typeField.createChild('button', 'shadow-editor-button-right');\n    this._insetButton.textContent = i18n.i18n.lockedString('Inset');\n    this._insetButton.addEventListener('click', this._onButtonClick.bind(this), false);\n\n    const xField = this.contentElement.createChild('div', 'shadow-editor-field');\n    this._xInput = this._createTextInput(xField, i18nString(UIStrings.xOffset));\n    const yField = this.contentElement.createChild('div', 'shadow-editor-field');\n    this._yInput = this._createTextInput(yField, i18nString(UIStrings.yOffset));\n    this._xySlider = (xField.createChild('canvas', 'shadow-editor-2D-slider') as HTMLCanvasElement);\n    this._xySlider.width = canvasSize;\n    this._xySlider.height = canvasSize;\n    this._xySlider.tabIndex = -1;\n    this._halfCanvasSize = canvasSize / 2;\n    this._innerCanvasSize = this._halfCanvasSize - sliderThumbRadius;\n    UI.UIUtils.installDragHandle(\n        this._xySlider, this._dragStart.bind(this), this._dragMove.bind(this), null, 'default');\n    this._xySlider.addEventListener('keydown', this._onCanvasArrowKey.bind(this), false);\n    this._xySlider.addEventListener('blur', this._onCanvasBlur.bind(this), false);\n\n    const blurField =\n        this.contentElement.createChild('div', 'shadow-editor-field shadow-editor-flex-field shadow-editor-blur-field');\n    this._blurInput = this._createTextInput(blurField, i18nString(UIStrings.blur));\n    this._blurSlider = this._createSlider(blurField);\n\n    this._spreadField = this.contentElement.createChild('div', 'shadow-editor-field shadow-editor-flex-field');\n    this._spreadInput = this._createTextInput(this._spreadField, i18nString(UIStrings.spread));\n    this._spreadSlider = this._createSlider(this._spreadField);\n  }\n\n  _createTextInput(field: Element, propertyName: string): HTMLInputElement {\n    const label = field.createChild('label', 'shadow-editor-label');\n    label.textContent = propertyName;\n    label.setAttribute('for', propertyName);\n    const textInput = UI.UIUtils.createInput('shadow-editor-text-input', 'text');\n    field.appendChild(textInput);\n    textInput.id = propertyName;\n    textInput.addEventListener('keydown', this._handleValueModification.bind(this), false);\n    textInput.addEventListener('mousewheel', this._handleValueModification.bind(this), false);\n    textInput.addEventListener('input', this._onTextInput.bind(this), false);\n    textInput.addEventListener('blur', this._onTextBlur.bind(this), false);\n    return textInput;\n  }\n\n  _createSlider(field: Element): HTMLInputElement {\n    const slider = UI.UIUtils.createSlider(0, maxRange, -1);\n    slider.addEventListener('input', this._onSliderInput.bind(this), false);\n    field.appendChild(slider);\n    return /** @type {!HTMLInputElement} */ slider as HTMLInputElement;\n  }\n\n  wasShown(): void {\n    this._updateUI();\n  }\n\n  setModel(model: CSSShadowModel): void {\n    this._model = model;\n    this._typeField.classList.toggle('hidden', !model.isBoxShadow());\n    this._spreadField.classList.toggle('hidden', !model.isBoxShadow());\n    this._updateUI();\n  }\n\n  _updateUI(): void {\n    this._updateButtons();\n    this._xInput.value = this._model.offsetX().asCSSText();\n    this._yInput.value = this._model.offsetY().asCSSText();\n    this._blurInput.value = this._model.blurRadius().asCSSText();\n    this._spreadInput.value = this._model.spreadRadius().asCSSText();\n    this._blurSlider.value = this._model.blurRadius().amount.toString();\n    this._spreadSlider.value = this._model.spreadRadius().amount.toString();\n    this._updateCanvas(false);\n  }\n\n  _updateButtons(): void {\n    this._insetButton.classList.toggle('enabled', this._model.inset());\n    this._outsetButton.classList.toggle('enabled', !this._model.inset());\n  }\n\n  _updateCanvas(drawFocus: boolean): void {\n    const context = this._xySlider.getContext('2d');\n    if (!context) {\n      throw new Error('Unable to obtain canvas context');\n    }\n    context.clearRect(0, 0, this._xySlider.width, this._xySlider.height);\n\n    // Draw dashed axes.\n    context.save();\n    context.setLineDash([1, 1]);\n    context.strokeStyle = 'rgba(210, 210, 210, 0.8)';\n    context.beginPath();\n    context.moveTo(this._halfCanvasSize, 0);\n    context.lineTo(this._halfCanvasSize, canvasSize);\n    context.moveTo(0, this._halfCanvasSize);\n    context.lineTo(canvasSize, this._halfCanvasSize);\n    context.stroke();\n    context.restore();\n\n    const thumbPoint = this._sliderThumbPosition();\n    // Draw 2D slider line.\n    context.save();\n    context.translate(this._halfCanvasSize, this._halfCanvasSize);\n    context.lineWidth = 2;\n    context.strokeStyle = 'rgba(130, 130, 130, 0.75)';\n    context.beginPath();\n    context.moveTo(0, 0);\n    context.lineTo(thumbPoint.x, thumbPoint.y);\n    context.stroke();\n    // Draw 2D slider thumb.\n    if (drawFocus) {\n      context.beginPath();\n      context.fillStyle = 'rgba(66, 133, 244, 0.4)';\n      context.arc(thumbPoint.x, thumbPoint.y, sliderThumbRadius + 2, 0, 2 * Math.PI);\n      context.fill();\n    }\n    context.beginPath();\n    context.fillStyle = '#4285F4';\n    context.arc(thumbPoint.x, thumbPoint.y, sliderThumbRadius, 0, 2 * Math.PI);\n    context.fill();\n    context.restore();\n  }\n\n  _onButtonClick(event: Event): void {\n    const insetClicked = (event.currentTarget === this._insetButton);\n    if (insetClicked && this._model.inset() || !insetClicked && !this._model.inset()) {\n      return;\n    }\n    this._model.setInset(insetClicked);\n    this._updateButtons();\n    this.dispatchEventToListeners(Events.ShadowChanged, this._model);\n  }\n\n  _handleValueModification(event: Event): void {\n    const target = (event.currentTarget as HTMLInputElement);\n    const modifiedValue = UI.UIUtils.createReplacementString(target.value, event, customNumberHandler);\n    if (!modifiedValue) {\n      return;\n    }\n    const length = CSSLength.parse(modifiedValue);\n    if (!length) {\n      return;\n    }\n    if (event.currentTarget === this._blurInput && length.amount < 0) {\n      length.amount = 0;\n    }\n    target.value = length.asCSSText();\n    target.selectionStart = 0;\n    target.selectionEnd = target.value.length;\n    this._onTextInput(event);\n    event.consume(true);\n\n    function customNumberHandler(prefix: string, number: number, suffix: string): string {\n      if (!suffix.length) {\n        suffix = defaultUnit;\n      }\n      return prefix + number + suffix;\n    }\n  }\n\n  _onTextInput(event: Event): void {\n    const currentTarget = (event.currentTarget as HTMLInputElement);\n    this._changedElement = currentTarget;\n    this._changedElement.classList.remove('invalid');\n    const length = CSSLength.parse(currentTarget.value);\n    if (!length || currentTarget === this._blurInput && length.amount < 0) {\n      return;\n    }\n    if (currentTarget === this._xInput) {\n      this._model.setOffsetX(length);\n      this._updateCanvas(false);\n    } else if (currentTarget === this._yInput) {\n      this._model.setOffsetY(length);\n      this._updateCanvas(false);\n    } else if (currentTarget === this._blurInput) {\n      this._model.setBlurRadius(length);\n      this._blurSlider.value = length.amount.toString();\n    } else if (currentTarget === this._spreadInput) {\n      this._model.setSpreadRadius(length);\n      this._spreadSlider.value = length.amount.toString();\n    }\n    this.dispatchEventToListeners(Events.ShadowChanged, this._model);\n  }\n\n  _onTextBlur(): void {\n    if (!this._changedElement) {\n      return;\n    }\n    let length: (CSSLength|null)|CSSLength =\n        !this._changedElement.value.trim() ? CSSLength.zero() : CSSLength.parse(this._changedElement.value);\n    if (!length) {\n      length = CSSLength.parse(this._changedElement.value + defaultUnit);\n    }\n    if (!length) {\n      this._changedElement.classList.add('invalid');\n      this._changedElement = null;\n      return;\n    }\n    if (this._changedElement === this._xInput) {\n      this._model.setOffsetX(length);\n      this._xInput.value = length.asCSSText();\n      this._updateCanvas(false);\n    } else if (this._changedElement === this._yInput) {\n      this._model.setOffsetY(length);\n      this._yInput.value = length.asCSSText();\n      this._updateCanvas(false);\n    } else if (this._changedElement === this._blurInput) {\n      if (length.amount < 0) {\n        length = CSSLength.zero();\n      }\n      this._model.setBlurRadius(length);\n      this._blurInput.value = length.asCSSText();\n      this._blurSlider.value = length.amount.toString();\n    } else if (this._changedElement === this._spreadInput) {\n      this._model.setSpreadRadius(length);\n      this._spreadInput.value = length.asCSSText();\n      this._spreadSlider.value = length.amount.toString();\n    }\n    this._changedElement = null;\n    this.dispatchEventToListeners(Events.ShadowChanged, this._model);\n  }\n\n  _onSliderInput(event: Event): void {\n    if (event.currentTarget === this._blurSlider) {\n      this._model.setBlurRadius(\n          new CSSLength(Number(this._blurSlider.value), this._model.blurRadius().unit || defaultUnit));\n      this._blurInput.value = this._model.blurRadius().asCSSText();\n      this._blurInput.classList.remove('invalid');\n    } else if (event.currentTarget === this._spreadSlider) {\n      this._model.setSpreadRadius(\n          new CSSLength(Number(this._spreadSlider.value), this._model.spreadRadius().unit || defaultUnit));\n      this._spreadInput.value = this._model.spreadRadius().asCSSText();\n      this._spreadInput.classList.remove('invalid');\n    }\n    this.dispatchEventToListeners(Events.ShadowChanged, this._model);\n  }\n\n  _dragStart(event: MouseEvent): boolean {\n    this._xySlider.focus();\n    this._updateCanvas(true);\n    this._canvasOrigin = new UI.Geometry.Point(\n        this._xySlider.totalOffsetLeft() + this._halfCanvasSize,\n        this._xySlider.totalOffsetTop() + this._halfCanvasSize);\n    const clickedPoint = new UI.Geometry.Point(event.x - this._canvasOrigin.x, event.y - this._canvasOrigin.y);\n    const thumbPoint = this._sliderThumbPosition();\n    if (clickedPoint.distanceTo(thumbPoint) >= sliderThumbRadius) {\n      this._dragMove(event);\n    }\n    return true;\n  }\n\n  _dragMove(event: MouseEvent): void {\n    let point: UI.Geometry.Point =\n        new UI.Geometry.Point(event.x - this._canvasOrigin.x, event.y - this._canvasOrigin.y);\n    if (event.shiftKey) {\n      point = this._snapToClosestDirection(point);\n    }\n    const constrainedPoint = this._constrainPoint(point, this._innerCanvasSize);\n    const newX = Math.round((constrainedPoint.x / this._innerCanvasSize) * maxRange);\n    const newY = Math.round((constrainedPoint.y / this._innerCanvasSize) * maxRange);\n\n    if (event.shiftKey) {\n      this._model.setOffsetX(new CSSLength(newX, this._model.offsetX().unit || defaultUnit));\n      this._model.setOffsetY(new CSSLength(newY, this._model.offsetY().unit || defaultUnit));\n    } else {\n      if (!event.altKey) {\n        this._model.setOffsetX(new CSSLength(newX, this._model.offsetX().unit || defaultUnit));\n      }\n      if (!UI.KeyboardShortcut.KeyboardShortcut.eventHasCtrlOrMeta(event)) {\n        this._model.setOffsetY(new CSSLength(newY, this._model.offsetY().unit || defaultUnit));\n      }\n    }\n    this._xInput.value = this._model.offsetX().asCSSText();\n    this._yInput.value = this._model.offsetY().asCSSText();\n    this._xInput.classList.remove('invalid');\n    this._yInput.classList.remove('invalid');\n    this._updateCanvas(true);\n    this.dispatchEventToListeners(Events.ShadowChanged, this._model);\n  }\n\n  _onCanvasBlur(): void {\n    this._updateCanvas(false);\n  }\n\n  _onCanvasArrowKey(event: Event): void {\n    const keyboardEvent = (event as KeyboardEvent);\n    let shiftX = 0;\n    let shiftY = 0;\n    if (keyboardEvent.key === 'ArrowRight') {\n      shiftX = 1;\n    } else if (keyboardEvent.key === 'ArrowLeft') {\n      shiftX = -1;\n    } else if (keyboardEvent.key === 'ArrowUp') {\n      shiftY = -1;\n    } else if (keyboardEvent.key === 'ArrowDown') {\n      shiftY = 1;\n    }\n\n    if (!shiftX && !shiftY) {\n      return;\n    }\n    event.consume(true);\n\n    if (shiftX) {\n      const offsetX = this._model.offsetX();\n      const newAmount = Platform.NumberUtilities.clamp(offsetX.amount + shiftX, -maxRange, maxRange);\n      if (newAmount === offsetX.amount) {\n        return;\n      }\n      this._model.setOffsetX(new CSSLength(newAmount, offsetX.unit || defaultUnit));\n      this._xInput.value = this._model.offsetX().asCSSText();\n      this._xInput.classList.remove('invalid');\n    }\n    if (shiftY) {\n      const offsetY = this._model.offsetY();\n      const newAmount = Platform.NumberUtilities.clamp(offsetY.amount + shiftY, -maxRange, maxRange);\n      if (newAmount === offsetY.amount) {\n        return;\n      }\n      this._model.setOffsetY(new CSSLength(newAmount, offsetY.unit || defaultUnit));\n      this._yInput.value = this._model.offsetY().asCSSText();\n      this._yInput.classList.remove('invalid');\n    }\n    this._updateCanvas(true);\n    this.dispatchEventToListeners(Events.ShadowChanged, this._model);\n  }\n\n  _constrainPoint(point: UI.Geometry.Point, max: number): UI.Geometry.Point {\n    if (Math.abs(point.x) <= max && Math.abs(point.y) <= max) {\n      return new UI.Geometry.Point(point.x, point.y);\n    }\n    return point.scale(max / Math.max(Math.abs(point.x), Math.abs(point.y)));\n  }\n\n  _snapToClosestDirection(point: UI.Geometry.Point): UI.Geometry.Point {\n    let minDistance: number = Number.MAX_VALUE;\n    let closestPoint: UI.Geometry.Point = point;\n\n    const directions = [\n      new UI.Geometry.Point(0, -1), new UI.Geometry.Point(1, -1), new UI.Geometry.Point(1, 0),\n      new UI.Geometry.Point(1, 1),  // Southeast\n    ];\n\n    for (const direction of directions) {\n      const projection = point.projectOn(direction);\n      const distance = point.distanceTo(projection);\n      if (distance < minDistance) {\n        minDistance = distance;\n        closestPoint = projection;\n      }\n    }\n\n    return closestPoint;\n  }\n\n  _sliderThumbPosition(): UI.Geometry.Point {\n    const x = (this._model.offsetX().amount / maxRange) * this._innerCanvasSize;\n    const y = (this._model.offsetY().amount / maxRange) * this._innerCanvasSize;\n    return this._constrainPoint(new UI.Geometry.Point(x, y), this._innerCanvasSize);\n  }\n}\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum Events {\n  ShadowChanged = 'ShadowChanged',\n}\n"]}