{"version":3,"file":"Swatches.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/inline_editor/Swatches.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) 2015 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as TextUtils from '../../../../models/text_utils/text_utils.js';\nimport * as UI from '../../legacy.js';\n\nimport {ColorSwatch} from './ColorSwatch.js';\nimport type {CSSShadowModel} from './CSSShadowModel.js'; // eslint-disable-line no-unused-vars\n\nexport class BezierSwatch extends HTMLSpanElement {\n  _iconElement: UI.Icon.Icon;\n  _textElement: HTMLElement;\n\n  constructor() {\n    super();\n    const root = UI.Utils.createShadowRootWithCoreStyles(this, {\n      cssFile: 'ui/legacy/components/inline_editor/bezierSwatch.css',\n      enableLegacyPatching: false,\n      delegatesFocus: undefined,\n    });\n    this._iconElement = UI.Icon.Icon.create('smallicon-bezier', 'bezier-swatch-icon');\n    root.appendChild(this._iconElement);\n    this._textElement = this.createChild('span');\n    root.createChild('slot');\n  }\n\n  static create(): BezierSwatch {\n    let constructor: (() => Element)|((() => Element) | null) = BezierSwatch._constructor;\n    if (!constructor) {\n      constructor = UI.Utils.registerCustomElement('span', 'bezier-swatch', BezierSwatch);\n      BezierSwatch._constructor = constructor;\n    }\n\n    return constructor() as BezierSwatch;\n  }\n\n  bezierText(): string {\n    return this._textElement.textContent || '';\n  }\n\n  setBezierText(text: string): void {\n    this._textElement.textContent = text;\n  }\n\n  hideText(hide: boolean): void {\n    this._textElement.hidden = hide;\n  }\n\n  iconElement(): HTMLSpanElement {\n    return this._iconElement;\n  }\n\n  static _constructor: (() => Element)|null = null;\n}\n\nexport class CSSShadowSwatch extends HTMLSpanElement {\n  _iconElement: UI.Icon.Icon;\n  _contentElement: HTMLElement;\n  _colorSwatch!: ColorSwatch|null;\n  _model?: CSSShadowModel;\n\n  constructor() {\n    super();\n    const root = UI.Utils.createShadowRootWithCoreStyles(this, {\n      cssFile: 'ui/legacy/components/inline_editor/cssShadowSwatch.css',\n      enableLegacyPatching: false,\n      delegatesFocus: undefined,\n    });\n    this._iconElement = UI.Icon.Icon.create('smallicon-shadow', 'shadow-swatch-icon');\n    root.appendChild(this._iconElement);\n    root.createChild('slot');\n    this._contentElement = this.createChild('span');\n  }\n\n  static create(): CSSShadowSwatch {\n    let constructor: (() => Element)|((() => Element) | null) = CSSShadowSwatch._constructor;\n    if (!constructor) {\n      constructor = UI.Utils.registerCustomElement('span', 'css-shadow-swatch', CSSShadowSwatch);\n      CSSShadowSwatch._constructor = constructor;\n    }\n\n    return constructor() as CSSShadowSwatch;\n  }\n\n  model(): CSSShadowModel {\n    return this._model as CSSShadowModel;\n  }\n\n  setCSSShadow(model: CSSShadowModel): void {\n    this._model = model;\n    this._contentElement.removeChildren();\n    const results = TextUtils.TextUtils.Utils.splitStringByRegexes(\n        model.asCSSText(), [/!important/g, /inset/g, Common.Color.Regex]);\n    for (let i = 0; i < results.length; i++) {\n      const result = results[i];\n      if (result.regexIndex === 2) {\n        if (!this._colorSwatch) {\n          this._colorSwatch = new ColorSwatch();\n          const value = this._colorSwatch.createChild('span');\n          this._colorSwatch.addEventListener('formatchanged', (event: Event) => {\n            // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration)\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            value.textContent = (event as any).data.text;\n          });\n        }\n\n        this._colorSwatch.renderColor(model.color());\n        const value = this._colorSwatch.querySelector('span');\n        if (value) {\n          value.textContent = model.color().asString();\n        }\n        this._contentElement.appendChild(this._colorSwatch);\n      } else {\n        this._contentElement.appendChild(document.createTextNode(result.value));\n      }\n    }\n  }\n\n  hideText(hide: boolean): void {\n    this._contentElement.hidden = hide;\n  }\n\n  iconElement(): HTMLSpanElement {\n    return this._iconElement;\n  }\n\n  colorSwatch(): ColorSwatch|null {\n    return this._colorSwatch;\n  }\n\n  static _constructor: (() => Element)|null = null;\n}\n"]}