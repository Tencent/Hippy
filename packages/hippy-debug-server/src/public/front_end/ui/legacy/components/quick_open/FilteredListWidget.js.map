{"version":3,"file":"FilteredListWidget.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/quick_open/FilteredListWidget.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration)\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as TextUtils from '../../../../models/text_utils/text_utils.js';\nimport * as Diff from '../../../../third_party/diff/diff.js';\nimport * as UI from '../../legacy.js';\n\nconst UIStrings = {\n  /**\n  * @description Aria label for quick open dialog prompt\n  */\n  quickOpenPrompt: 'Quick open prompt',\n  /**\n  * @description Title of quick open dialog\n  */\n  quickOpen: 'Quick open',\n  /**\n  * @description Text to show no results have been found\n  */\n  noResultsFound: 'No results found',\n};\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/quick_open/FilteredListWidget.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class FilteredListWidget extends UI.Widget.VBox implements UI.ListControl.ListDelegate<number> {\n  _promptHistory: string[];\n  _scoringTimer: number;\n  _filterTimer: number;\n  _loadTimeout: number;\n  _refreshListWithCurrentResult!: (() => void)|undefined;\n  _dialog!: UI.Dialog.Dialog|undefined;\n  _query!: string|undefined;\n  _promptElement: HTMLElement;\n  _prompt: UI.TextPrompt.TextPrompt;\n  _bottomElementsContainer: HTMLElement;\n  _progressElement: HTMLElement;\n  _progressBarElement: HTMLElement;\n  _items: UI.ListModel.ListModel<number>;\n  _list: UI.ListControl.ListControl<number>;\n  _itemElementsContainer: HTMLDivElement;\n  _notFoundElement: HTMLElement;\n  _prefix: string;\n  _provider: Provider|null;\n  _queryChangedCallback?: (arg0: string) => void;\n\n  constructor(provider: Provider|null, promptHistory?: string[], queryChangedCallback?: ((arg0: string) => void)) {\n    super(true);\n    this._promptHistory = promptHistory || [];\n\n    this._scoringTimer = 0;\n    this._filterTimer = 0;\n    this._loadTimeout = 0;\n\n    this.contentElement.classList.add('filtered-list-widget');\n    const listener = (this._onKeyDown.bind(this) as (arg0: Event) => void);\n    this.contentElement.addEventListener('keydown', listener, true);\n    UI.ARIAUtils.markAsCombobox(this.contentElement);\n    this.registerRequiredCSS('ui/legacy/components/quick_open/filteredListWidget.css', {enableLegacyPatching: false});\n\n    this._promptElement = this.contentElement.createChild('div', 'filtered-list-widget-input');\n    UI.ARIAUtils.setAccessibleName(this._promptElement, i18nString(UIStrings.quickOpenPrompt));\n    this._promptElement.setAttribute('spellcheck', 'false');\n    this._promptElement.setAttribute('contenteditable', 'plaintext-only');\n    this._prompt = new UI.TextPrompt.TextPrompt();\n    this._prompt.initialize(() => Promise.resolve([]));\n    const promptProxy = this._prompt.attach(this._promptElement);\n    promptProxy.addEventListener('input', this._onInput.bind(this), false);\n    promptProxy.classList.add('filtered-list-widget-prompt-element');\n\n    this._bottomElementsContainer = this.contentElement.createChild('div', 'vbox');\n    this._progressElement = this._bottomElementsContainer.createChild('div', 'filtered-list-widget-progress');\n    this._progressBarElement = this._progressElement.createChild('div', 'filtered-list-widget-progress-bar');\n\n    this._items = new UI.ListModel.ListModel();\n    this._list = new UI.ListControl.ListControl(this._items, this, UI.ListControl.ListMode.EqualHeightItems);\n    this._itemElementsContainer = this._list.element;\n    this._itemElementsContainer.classList.add('container');\n    this._bottomElementsContainer.appendChild(this._itemElementsContainer);\n    this._itemElementsContainer.addEventListener('click', this._onClick.bind(this), false);\n    UI.ARIAUtils.markAsListBox(this._itemElementsContainer);\n    UI.ARIAUtils.setControls(this._promptElement, this._itemElementsContainer);\n    UI.ARIAUtils.setAutocomplete(this._promptElement, UI.ARIAUtils.AutocompleteInteractionModel.list);\n\n    this._notFoundElement = this._bottomElementsContainer.createChild('div', 'not-found-text');\n    this._notFoundElement.classList.add('hidden');\n\n    this.setDefaultFocusedElement(this._promptElement);\n\n    this._prefix = '';\n    this._provider = provider;\n    this._queryChangedCallback = queryChangedCallback;\n  }\n\n  static highlightRanges(element: Element, query: string, caseInsensitive?: boolean): boolean {\n    if (!query) {\n      return false;\n    }\n\n    function rangesForMatch(text: string, query: string): TextUtils.TextRange.SourceRange[]|null {\n      const opcodes = Diff.Diff.DiffWrapper.charDiff(query, text);\n      let offset = 0;\n      const ranges = [];\n      for (let i = 0; i < opcodes.length; ++i) {\n        const opcode = opcodes[i];\n        if (opcode[0] === Diff.Diff.Operation.Equal) {\n          ranges.push(new TextUtils.TextRange.SourceRange(offset, opcode[1].length));\n        } else if (opcode[0] !== Diff.Diff.Operation.Insert) {\n          return null;\n        }\n        offset += opcode[1].length;\n      }\n      return ranges;\n    }\n\n    if (element.textContent === null) {\n      return false;\n    }\n    const text = element.textContent;\n    let ranges = rangesForMatch(text, query);\n    if (!ranges || caseInsensitive) {\n      ranges = rangesForMatch(text.toUpperCase(), query.toUpperCase());\n    }\n    if (ranges) {\n      UI.UIUtils.highlightRangesWithStyleClass(element, ranges, 'highlight');\n      return true;\n    }\n    return false;\n  }\n\n  setPlaceholder(placeholder: string, ariaPlaceholder?: string): void {\n    this._prompt.setPlaceholder(placeholder, ariaPlaceholder);\n  }\n\n  /**\n   * Sets the text prompt's accessible title. By default, it is \"Quick open prompt\".\n   */\n  setPromptTitle(title: string): void {\n    UI.ARIAUtils.setAccessibleName(this._promptElement, title);\n  }\n\n  showAsDialog(dialogTitle?: string): void {\n    if (!dialogTitle) {\n      dialogTitle = i18nString(UIStrings.quickOpen);\n    }\n\n    this._dialog = new UI.Dialog.Dialog();\n    UI.ARIAUtils.setAccessibleName(this._dialog.contentElement, dialogTitle);\n    this._dialog.setMaxContentSize(new UI.Geometry.Size(504, 340));\n    this._dialog.setSizeBehavior(UI.GlassPane.SizeBehavior.SetExactWidthMaxHeight);\n    this._dialog.setContentPosition(null, 22);\n    this.show(this._dialog.contentElement);\n    UI.ARIAUtils.setExpanded(this.contentElement, true);\n    this._dialog.once('hidden').then(() => {\n      this.dispatchEventToListeners('hidden');\n    });\n    // @ts-ignore\n    this._dialog.show();\n  }\n\n  setPrefix(prefix: string): void {\n    this._prefix = prefix;\n  }\n\n  setProvider(provider: Provider|null): void {\n    if (provider === this._provider) {\n      return;\n    }\n\n    if (this._provider) {\n      this._provider.detach();\n    }\n    this._clearTimers();\n\n    this._provider = provider;\n    if (this.isShowing()) {\n      this._attachProvider();\n    }\n  }\n\n  setQuerySelectedRange(startIndex: number, endIndex: number): void {\n    this._prompt.setSelectedRange(startIndex, endIndex);\n  }\n\n  _attachProvider(): void {\n    this._items.replaceAll([]);\n    this._list.invalidateItemHeight();\n    if (this._provider) {\n      this._provider.setRefreshCallback(this._itemsLoaded.bind(this, this._provider));\n      this._provider.attach();\n    }\n    this._itemsLoaded(this._provider);\n  }\n\n  _value(): string {\n    return this._prompt.text().trim();\n  }\n\n  _cleanValue(): string {\n    return this._value().substring(this._prefix.length);\n  }\n\n  wasShown(): void {\n    this._attachProvider();\n  }\n\n  willHide(): void {\n    if (this._provider) {\n      this._provider.detach();\n    }\n    this._clearTimers();\n    UI.ARIAUtils.setExpanded(this.contentElement, false);\n  }\n\n  _clearTimers(): void {\n    clearTimeout(this._filterTimer);\n    clearTimeout(this._scoringTimer);\n    clearTimeout(this._loadTimeout);\n    this._filterTimer = 0;\n    this._scoringTimer = 0;\n    this._loadTimeout = 0;\n    this._refreshListWithCurrentResult = undefined;\n  }\n\n  _onEnter(_event: Event): void {\n    if (!this._provider) {\n      return;\n    }\n    const selectedIndexInProvider = this._provider.itemCount() ? this._list.selectedItem() : null;\n\n    this._selectItem(selectedIndexInProvider);\n    if (this._dialog) {\n      this._dialog.hide();\n    }\n  }\n\n  _itemsLoaded(provider: Provider|null): void {\n    if (this._loadTimeout || provider !== this._provider) {\n      return;\n    }\n    this._loadTimeout = window.setTimeout(this._updateAfterItemsLoaded.bind(this), 0);\n  }\n\n  _updateAfterItemsLoaded(): void {\n    this._loadTimeout = 0;\n    this._filterItems();\n  }\n\n  createElementForItem(item: number): Element {\n    const itemElement = document.createElement('div');\n    const renderAsTwoRows = this._provider && this._provider.renderAsTwoRows();\n    itemElement.className = 'filtered-list-widget-item ' + (renderAsTwoRows ? 'two-rows' : 'one-row');\n    const titleElement = itemElement.createChild('div', 'filtered-list-widget-title');\n    const subtitleElement = itemElement.createChild('div', 'filtered-list-widget-subtitle');\n    subtitleElement.textContent = '\\u200B';\n    if (this._provider) {\n      this._provider.renderItem(item, this._cleanValue(), titleElement, subtitleElement);\n    }\n    UI.ARIAUtils.markAsOption(itemElement);\n    return itemElement;\n  }\n\n  heightForItem(_item: number): number {\n    // Let the list measure items for us.\n    return 0;\n  }\n\n  isItemSelectable(_item: number): boolean {\n    return true;\n  }\n\n  selectedItemChanged(_from: number|null, _to: number|null, fromElement: Element|null, toElement: Element|null): void {\n    if (fromElement) {\n      fromElement.classList.remove('selected');\n    }\n    if (toElement) {\n      toElement.classList.add('selected');\n    }\n    UI.ARIAUtils.setActiveDescendant(this._promptElement, toElement);\n  }\n\n  _onClick(event: Event): void {\n    const item = this._list.itemForNode((event.target as Node | null));\n    if (item === null) {\n      return;\n    }\n\n    event.consume(true);\n    this._selectItem(item);\n    if (this._dialog) {\n      this._dialog.hide();\n    }\n  }\n\n  setQuery(query: string): void {\n    this._prompt.focus();\n    this._prompt.setText(query);\n    this._queryChanged();\n    this._prompt.autoCompleteSoon(true);\n    this._scheduleFilter();\n  }\n\n  _tabKeyPressed(): boolean {\n    const userEnteredText = this._prompt.text();\n    let completion;\n    for (let i = this._promptHistory.length - 1; i >= 0; i--) {\n      if (this._promptHistory[i] !== userEnteredText && this._promptHistory[i].startsWith(userEnteredText)) {\n        completion = this._promptHistory[i];\n        break;\n      }\n    }\n    if (!completion) {\n      return false;\n    }\n    this._prompt.focus();\n    this._prompt.setText(completion);\n    this._prompt.setDOMSelection(userEnteredText.length, completion.length);\n    this._scheduleFilter();\n    return true;\n  }\n\n  _itemsFilteredForTest(): void {\n    // Sniffed in tests.\n  }\n\n  _filterItems(): void {\n    this._filterTimer = 0;\n    if (this._scoringTimer) {\n      clearTimeout(this._scoringTimer);\n      this._scoringTimer = 0;\n\n      if (this._refreshListWithCurrentResult) {\n        this._refreshListWithCurrentResult();\n      }\n    }\n\n    if (!this._provider) {\n      this._bottomElementsContainer.classList.toggle('hidden', true);\n      this._itemsFilteredForTest();\n      return;\n    }\n\n    this._bottomElementsContainer.classList.toggle('hidden', false);\n\n    this._progressBarElement.style.transform = 'scaleX(0)';\n    this._progressBarElement.classList.remove('filtered-widget-progress-fade', 'hidden');\n\n    const query = this._provider.rewriteQuery(this._cleanValue());\n    this._query = query;\n\n    const filterRegex = query ? Platform.StringUtilities.filterRegex(query) : null;\n\n    const filteredItems: number[] = [];\n\n    const bestScores: number[] = [];\n    const bestItems: number[] = [];\n    const bestItemsToCollect = 100;\n    let minBestScore = 0;\n    const overflowItems: number[] = [];\n    const scoreStartTime = window.performance.now();\n\n    const maxWorkItems = Platform.NumberUtilities.clamp(10, 500, (this._provider.itemCount() / 10) | 0);\n\n    scoreItems.call(this, 0);\n\n    function compareIntegers(a: number, b: number): number {\n      return b - a;\n    }\n\n    function scoreItems(this: FilteredListWidget, fromIndex: number): void {\n      if (!this._provider) {\n        return;\n      }\n      this._scoringTimer = 0;\n      let workDone = 0;\n      let i;\n\n      for (i = fromIndex; i < this._provider.itemCount() && workDone < maxWorkItems; ++i) {\n        // Filter out non-matching items quickly.\n        if (filterRegex && !filterRegex.test(this._provider.itemKeyAt(i))) {\n          continue;\n        }\n\n        // Score item.\n        const score = this._provider.itemScoreAt(i, query);\n        if (query) {\n          workDone++;\n        }\n\n        // Find its index in the scores array (earlier elements have bigger scores).\n        if (score > minBestScore || bestScores.length < bestItemsToCollect) {\n          const index = Platform.ArrayUtilities.upperBound(bestScores, score, compareIntegers);\n          bestScores.splice(index, 0, score);\n          bestItems.splice(index, 0, i);\n          if (bestScores.length > bestItemsToCollect) {\n            // Best list is too large -> drop last elements.\n            const bestItemLast = bestItems[bestItems.length - 1];\n            if (bestItemLast) {\n              overflowItems.push(bestItemLast);\n            }\n            bestScores.length = bestItemsToCollect;\n            bestItems.length = bestItemsToCollect;\n          }\n          const bestScoreLast = bestScores[bestScores.length - 1];\n          if (bestScoreLast) {\n            minBestScore = bestScoreLast;\n          }\n        } else {\n          filteredItems.push(i);\n        }\n      }\n\n      this._refreshListWithCurrentResult = this._refreshList.bind(this, bestItems, overflowItems, filteredItems);\n\n      // Process everything in chunks.\n      if (i < this._provider.itemCount()) {\n        this._scoringTimer = window.setTimeout(scoreItems.bind(this, i), 0);\n        if (window.performance.now() - scoreStartTime > 50) {\n          this._progressBarElement.style.transform = 'scaleX(' + i / this._provider.itemCount() + ')';\n        }\n        return;\n      }\n      if (window.performance.now() - scoreStartTime > 100) {\n        this._progressBarElement.style.transform = 'scaleX(1)';\n        this._progressBarElement.classList.add('filtered-widget-progress-fade');\n      } else {\n        this._progressBarElement.classList.add('hidden');\n      }\n      this._refreshListWithCurrentResult();\n    }\n  }\n\n  _refreshList(bestItems: number[], overflowItems: number[], filteredItems: number[]): void {\n    this._refreshListWithCurrentResult = undefined;\n    filteredItems = [...bestItems, ...overflowItems, ...filteredItems];\n    this._updateNotFoundMessage(Boolean(filteredItems.length));\n    const oldHeight = this._list.element.offsetHeight;\n    this._items.replaceAll(filteredItems);\n    if (filteredItems.length) {\n      this._list.selectItem(filteredItems[0]);\n    }\n    if (this._list.element.offsetHeight !== oldHeight) {\n      this._list.viewportResized();\n    }\n    this._itemsFilteredForTest();\n  }\n\n  _updateNotFoundMessage(hasItems: boolean): void {\n    this._list.element.classList.toggle('hidden', !hasItems);\n    this._notFoundElement.classList.toggle('hidden', hasItems);\n    if (!hasItems && this._provider) {\n      this._notFoundElement.textContent = this._provider.notFoundText(this._cleanValue());\n      UI.ARIAUtils.alert(this._notFoundElement.textContent);\n    }\n  }\n\n  _onInput(): void {\n    this._queryChanged();\n    this._scheduleFilter();\n  }\n\n  _queryChanged(): void {\n    if (this._queryChangedCallback) {\n      this._queryChangedCallback(this._value());\n    }\n    if (this._provider) {\n      this._provider.queryChanged(this._cleanValue());\n    }\n  }\n\n  updateSelectedItemARIA(_fromElement: Element|null, _toElement: Element|null): boolean {\n    return false;\n  }\n\n  _onKeyDown(keyboardEvent: KeyboardEvent): void {\n    let handled = false;\n    switch (keyboardEvent.key) {\n      case 'Enter':\n        this._onEnter(keyboardEvent);\n        return;\n      case 'Tab':\n        handled = this._tabKeyPressed();\n        break;\n      case 'ArrowUp':\n        handled = this._list.selectPreviousItem(true, false);\n        break;\n      case 'ArrowDown':\n        handled = this._list.selectNextItem(true, false);\n        break;\n      case 'PageUp':\n        handled = this._list.selectItemPreviousPage(false);\n        break;\n      case 'PageDown':\n        handled = this._list.selectItemNextPage(false);\n        break;\n    }\n    if (handled) {\n      keyboardEvent.consume(true);\n    }\n  }\n\n  _scheduleFilter(): void {\n    if (this._filterTimer) {\n      return;\n    }\n    this._filterTimer = window.setTimeout(this._filterItems.bind(this), 0);\n  }\n\n  _selectItem(itemIndex: number|null): void {\n    this._promptHistory.push(this._value());\n    if (this._promptHistory.length > 100) {\n      this._promptHistory.shift();\n    }\n    if (this._provider) {\n      this._provider.selectItem(itemIndex, this._cleanValue());\n    }\n  }\n}\n\nexport class Provider {\n  _refreshCallback!: () => void;\n  constructor() {\n  }\n\n  setRefreshCallback(refreshCallback: () => void): void {\n    this._refreshCallback = refreshCallback;\n  }\n\n  attach(): void {\n  }\n\n  itemCount(): number {\n    return 0;\n  }\n\n  itemKeyAt(_itemIndex: number): string {\n    return '';\n  }\n\n  itemScoreAt(_itemIndex: number, _query: string): number {\n    return 1;\n  }\n\n  renderItem(_itemIndex: number, _query: string, _titleElement: Element, _subtitleElement: Element): void {\n  }\n\n  renderAsTwoRows(): boolean {\n    return false;\n  }\n\n  selectItem(_itemIndex: number|null, _promptValue: string): void {\n  }\n\n  refresh(): void {\n    if (this._refreshCallback) {\n      this._refreshCallback();\n    }\n  }\n\n  rewriteQuery(query: string): string {\n    return query;\n  }\n\n  queryChanged(_query: string): void {\n  }\n\n  notFoundText(_query: string): string {\n    return i18nString(UIStrings.noResultsFound);\n  }\n\n  detach(): void {\n  }\n}\n\nconst registeredProviders: ProviderRegistration[] = [];\n\nexport function registerProvider(registration: ProviderRegistration): void {\n  registeredProviders.push(registration);\n}\nexport function getRegisteredProviders(): ProviderRegistration[] {\n  return registeredProviders;\n}\nexport interface ProviderRegistration {\n  provider: () => Promise<Provider>;\n  title?: (() => string);\n  prefix: string;\n}\n"]}