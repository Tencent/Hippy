{"version":3,"file":"FlameChart.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/perf_ui/FlameChart.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Copyright (C) 2013 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as Host from '../../../../core/host/host.js';\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as Root from '../../../../core/root/root.js';\nimport type * as SDK from '../../../../core/sdk/sdk.js'; // eslint-disable-line no-unused-vars\nimport type * as TimelineModel from '../../../../models/timeline_model/timeline_model.js'; // eslint-disable-line no-unused-vars\nimport * as UI from '../../legacy.js';\nimport * as ThemeSupport from '../../theme_support/theme_support.js';\n\nimport type {ChartViewportDelegate} from './ChartViewport.js';\nimport {ChartViewport} from './ChartViewport.js';  // eslint-disable-line no-unused-vars\nimport type {Calculator} from './TimelineGrid.js';\nimport {TimelineGrid} from './TimelineGrid.js';  // eslint-disable-line no-unused-vars\n\nconst UIStrings = {\n  /**\n  *@description Aria accessible name in Flame Chart of the Performance panel\n  */\n  flameChart: 'Flame Chart',\n  /**\n  *@description Text for the screen reader to announce a hovered group\n  *@example {Network} PH1\n  */\n  sHovered: '{PH1} hovered',\n  /**\n  *@description Text for screen reader to announce a selected group.\n  *@example {Network} PH1\n  */\n  sSelected: '{PH1} selected',\n  /**\n  *@description Text for screen reader to announce an expanded group\n  *@example {Network} PH1\n  */\n  sExpanded: '{PH1} expanded',\n  /**\n  *@description Text for screen reader to announce a collapsed group\n  *@example {Network} PH1\n  */\n  sCollapsed: '{PH1} collapsed',\n};\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/perf_ui/FlameChart.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class FlameChartDelegate {\n  windowChanged(_startTime: number, _endTime: number, _animate: boolean): void {\n  }\n  updateRangeSelection(_startTime: number, _endTime: number): void {\n  }\n  updateSelectedGroup(_flameChart: FlameChart, _group: Group|null): void {\n  }\n}\n\ninterface GroupExpansionState {\n  [key: string]: boolean;\n}\n\nexport class FlameChart extends UI.Widget.VBox implements Calculator, ChartViewportDelegate {\n  _groupExpansionSetting?: Common.Settings.Setting<GroupExpansionState>;\n  _groupExpansionState: GroupExpansionState;\n  _flameChartDelegate: FlameChartDelegate;\n  _useWebGL: boolean;\n  _chartViewport: ChartViewport;\n  _dataProvider: FlameChartDataProvider;\n  _candyStripeCanvas: HTMLCanvasElement;\n  _viewportElement: HTMLElement;\n  _canvasGL!: HTMLCanvasElement;\n  _canvas: HTMLCanvasElement;\n  _entryInfo: HTMLElement;\n  _markerHighlighElement: HTMLElement;\n  _highlightElement: HTMLElement;\n  _selectedElement: HTMLElement;\n  _rulerEnabled: boolean;\n  _rangeSelectionStart: number;\n  _rangeSelectionEnd: number;\n  _barHeight: number;\n  _textBaseline: number;\n  _textPadding: number;\n  _markerRadius: number;\n  _headerLeftPadding: number;\n  _arrowSide: number;\n  _expansionArrowIndent: number;\n  _headerLabelXPadding: number;\n  _headerLabelYPadding: number;\n  _highlightedMarkerIndex: number;\n  _highlightedEntryIndex: number;\n  _selectedEntryIndex: number;\n  _rawTimelineDataLength: number;\n  _textWidth: Map<string, Map<string, number>>;\n  _markerPositions: Map<number, {\n    x: number,\n    width: number,\n  }>;\n  _lastMouseOffsetX: number;\n  _selectedGroup: number;\n  _keyboardFocusedGroup: number;\n  _selectedGroupBackroundColor: string;\n  _selectedGroupBorderColor: string;\n  _offsetWidth!: number;\n  _offsetHeight!: number;\n  _dragStartX!: number;\n  _dragStartY!: number;\n  _lastMouseOffsetY!: number;\n  _minimumBoundary!: number;\n  _maxDragOffset!: number;\n  _shaderProgram?: WebGLProgram|null;\n  _vertexBuffer?: WebGLBuffer|null;\n  _colorBuffer?: WebGLBuffer|null;\n  _uScalingFactor?: WebGLUniformLocation|null;\n  _uShiftVector?: WebGLUniformLocation|null;\n  _aVertexPosition?: number;\n  _aVertexColor?: number;\n  _vertexCount?: number;\n  _prevTimelineData?: TimelineData;\n  _timelineLevels?: number[][]|null;\n  _visibleLevelOffsets?: Uint32Array|null;\n  _visibleLevels?: Uint16Array|null;\n  _groupOffsets?: Uint32Array|null;\n  _rawTimelineData?: TimelineData|null;\n  _forceDecorationCache?: Int8Array|null;\n  _entryColorsCache?: string[]|null;\n  _visibleLevelHeights?: Uint32Array;\n  _totalTime?: number;\n\n  constructor(\n      dataProvider: FlameChartDataProvider, flameChartDelegate: FlameChartDelegate,\n      groupExpansionSetting?: Common.Settings.Setting<GroupExpansionState>) {\n    super(true);\n    this.registerRequiredCSS('ui/legacy/components/perf_ui/flameChart.css', {enableLegacyPatching: false});\n    this.contentElement.classList.add('flame-chart-main-pane');\n    this._groupExpansionSetting = groupExpansionSetting;\n    this._groupExpansionState = groupExpansionSetting && groupExpansionSetting.get() || {};\n    this._flameChartDelegate = flameChartDelegate;\n\n    this._useWebGL = Root.Runtime.experiments.isEnabled('timelineWebGL');\n    this._chartViewport = new ChartViewport(this);\n    this._chartViewport.show(this.contentElement);\n\n    this._dataProvider = dataProvider;\n    this._candyStripeCanvas = (document.createElement('canvas') as HTMLCanvasElement);\n    this._createCandyStripePattern();\n\n    this._viewportElement = this._chartViewport.viewportElement;\n    if (this._useWebGL) {\n      this._canvasGL = (this._viewportElement.createChild('canvas', 'fill') as HTMLCanvasElement);\n      this._initWebGL();\n    }\n    this._canvas = (this._viewportElement.createChild('canvas', 'fill') as HTMLCanvasElement);\n\n    this._canvas.tabIndex = 0;\n    UI.ARIAUtils.setAccessibleName(this._canvas, i18nString(UIStrings.flameChart));\n    UI.ARIAUtils.markAsTree(this._canvas);\n    this.setDefaultFocusedElement(this._canvas);\n    this._canvas.classList.add('flame-chart-canvas');\n    this._canvas.addEventListener('mousemove', this._onMouseMove.bind(this), false);\n    this._canvas.addEventListener('mouseout', this._onMouseOut.bind(this), false);\n    this._canvas.addEventListener('click', this._onClick.bind(this), false);\n    this._canvas.addEventListener('keydown', this._onKeyDown.bind(this), false);\n\n    this._entryInfo = this._viewportElement.createChild('div', 'flame-chart-entry-info');\n    this._markerHighlighElement = this._viewportElement.createChild('div', 'flame-chart-marker-highlight-element');\n    this._highlightElement = this._viewportElement.createChild('div', 'flame-chart-highlight-element');\n    this._selectedElement = this._viewportElement.createChild('div', 'flame-chart-selected-element');\n    this._canvas.addEventListener('focus', () => {\n      this.dispatchEventToListeners(Events.CanvasFocused);\n    }, false);\n\n    UI.UIUtils.installDragHandle(\n        this._viewportElement, this._startDragging.bind(this), this._dragging.bind(this), this._endDragging.bind(this),\n        null);\n\n    this._rulerEnabled = true;\n    this._rangeSelectionStart = 0;\n    this._rangeSelectionEnd = 0;\n    this._barHeight = 17;\n    this._textBaseline = 5;\n    this._textPadding = 5;\n    this._markerRadius = 6;\n    this._chartViewport.setWindowTimes(\n        dataProvider.minimumBoundary(), dataProvider.minimumBoundary() + dataProvider.totalTime());\n\n    this._headerLeftPadding = 6;\n    this._arrowSide = 8;\n    this._expansionArrowIndent = this._headerLeftPadding + this._arrowSide / 2;\n    this._headerLabelXPadding = 3;\n    this._headerLabelYPadding = 2;\n\n    this._highlightedMarkerIndex = -1;\n    this._highlightedEntryIndex = -1;\n    this._selectedEntryIndex = -1;\n    this._rawTimelineDataLength = 0;\n    this._textWidth = new Map();\n    this._markerPositions = new Map();\n\n    this._lastMouseOffsetX = 0;\n    this._selectedGroup = -1;\n\n    // Keyboard focused group is used to navigate groups irrespective of whether they are selectable or not\n    this._keyboardFocusedGroup = -1;\n\n    this._selectedGroupBackroundColor = ThemeSupport.ThemeSupport.instance().patchColorText(\n        Colors.SelectedGroupBackground, ThemeSupport.ThemeSupport.ColorUsage.Background);\n    this._selectedGroupBorderColor = ThemeSupport.ThemeSupport.instance().patchColorText(\n        Colors.SelectedGroupBorder, ThemeSupport.ThemeSupport.ColorUsage.Background);\n  }\n\n  willHide(): void {\n    this.hideHighlight();\n  }\n\n  setBarHeight(value: number): void {\n    this._barHeight = value;\n  }\n\n  setTextBaseline(value: number): void {\n    this._textBaseline = value;\n  }\n\n  setTextPadding(value: number): void {\n    this._textPadding = value;\n  }\n\n  enableRuler(enable: boolean): void {\n    this._rulerEnabled = enable;\n  }\n\n  alwaysShowVerticalScroll(): void {\n    this._chartViewport.alwaysShowVerticalScroll();\n  }\n\n  disableRangeSelection(): void {\n    this._chartViewport.disableRangeSelection();\n  }\n\n  highlightEntry(entryIndex: number): void {\n    if (this._highlightedEntryIndex === entryIndex) {\n      return;\n    }\n    if (!this._dataProvider.entryColor(entryIndex)) {\n      return;\n    }\n    this._highlightedEntryIndex = entryIndex;\n    this._updateElementPosition(this._highlightElement, this._highlightedEntryIndex);\n    this.dispatchEventToListeners(Events.EntryHighlighted, entryIndex);\n  }\n\n  hideHighlight(): void {\n    this._entryInfo.removeChildren();\n    this._highlightedEntryIndex = -1;\n    this._updateElementPosition(this._highlightElement, this._highlightedEntryIndex);\n    this.dispatchEventToListeners(Events.EntryHighlighted, -1);\n  }\n\n  _createCandyStripePattern(): void {\n    // Set the candy stripe pattern to 17px so it repeats well.\n    const size = 17;\n    this._candyStripeCanvas.width = size;\n    this._candyStripeCanvas.height = size;\n\n    const ctx = this._candyStripeCanvas.getContext('2d');\n    if (!ctx) {\n      return;\n    }\n\n    // Rotate the stripe by 45deg to the right.\n    ctx.translate(size * 0.5, size * 0.5);\n    ctx.rotate(Math.PI * 0.25);\n    ctx.translate(-size * 0.5, -size * 0.5);\n\n    ctx.fillStyle = 'rgba(255, 0, 0, 0.4)';\n    for (let x = -size; x < size * 2; x += 3) {\n      ctx.fillRect(x, -size, 1, size * 3);\n    }\n  }\n\n  _resetCanvas(): void {\n    const ratio = window.devicePixelRatio;\n    const width = Math.round(this._offsetWidth * ratio);\n    const height = Math.round(this._offsetHeight * ratio);\n    this._canvas.width = width;\n    this._canvas.height = height;\n    this._canvas.style.width = `${width / ratio}px`;\n    this._canvas.style.height = `${height / ratio}px`;\n    if (this._useWebGL) {\n      this._canvasGL.width = width;\n      this._canvasGL.height = height;\n      this._canvasGL.style.width = `${width / ratio}px`;\n      this._canvasGL.style.height = `${height / ratio}px`;\n    }\n  }\n\n  windowChanged(startTime: number, endTime: number, animate: boolean): void {\n    this._flameChartDelegate.windowChanged(startTime, endTime, animate);\n  }\n\n  updateRangeSelection(startTime: number, endTime: number): void {\n    this._flameChartDelegate.updateRangeSelection(startTime, endTime);\n  }\n\n  setSize(width: number, height: number): void {\n    this._offsetWidth = width;\n    this._offsetHeight = height;\n  }\n\n  _startDragging(event: MouseEvent): boolean {\n    this.hideHighlight();\n    this._maxDragOffset = 0;\n    this._dragStartX = event.pageX;\n    this._dragStartY = event.pageY;\n    return true;\n  }\n\n  _dragging(event: MouseEvent): void {\n    const dx = event.pageX - this._dragStartX;\n    const dy = event.pageY - this._dragStartY;\n    this._maxDragOffset = Math.max(this._maxDragOffset, Math.sqrt(dx * dx + dy * dy));\n  }\n\n  _endDragging(_event: MouseEvent): void {\n    this._updateHighlight();\n  }\n\n  _timelineData(): TimelineData|null {\n    if (!this._dataProvider) {\n      return null;\n    }\n    const timelineData = this._dataProvider.timelineData();\n    if (timelineData !== this._rawTimelineData ||\n        (timelineData && timelineData.entryStartTimes.length !== this._rawTimelineDataLength)) {\n      this._processTimelineData(timelineData);\n    }\n    return this._rawTimelineData || null;\n  }\n\n  _revealEntry(entryIndex: number): void {\n    const timelineData = this._timelineData();\n    if (!timelineData) {\n      return;\n    }\n    const timeLeft = this._chartViewport.windowLeftTime();\n    const timeRight = this._chartViewport.windowRightTime();\n    const entryStartTime = timelineData.entryStartTimes[entryIndex];\n    const entryTotalTime = timelineData.entryTotalTimes[entryIndex];\n    const entryEndTime = entryStartTime + entryTotalTime;\n    let minEntryTimeWindow = Math.min(entryTotalTime, timeRight - timeLeft);\n\n    const level = timelineData.entryLevels[entryIndex];\n    this._chartViewport.setScrollOffset(this._levelToOffset(level), this._levelHeight(level));\n\n    const minVisibleWidthPx = 30;\n    const futurePixelToTime = (timeRight - timeLeft) / this._offsetWidth;\n    minEntryTimeWindow = Math.max(minEntryTimeWindow, futurePixelToTime * minVisibleWidthPx);\n    if (timeLeft > entryEndTime) {\n      const delta = timeLeft - entryEndTime + minEntryTimeWindow;\n      this.windowChanged(timeLeft - delta, timeRight - delta, /* animate */ true);\n    } else if (timeRight < entryStartTime) {\n      const delta = entryStartTime - timeRight + minEntryTimeWindow;\n      this.windowChanged(timeLeft + delta, timeRight + delta, /* animate */ true);\n    }\n  }\n\n  setWindowTimes(startTime: number, endTime: number, animate?: boolean): void {\n    this._chartViewport.setWindowTimes(startTime, endTime, animate);\n    this._updateHighlight();\n  }\n\n  _onMouseMove(event: Event): void {\n    const mouseEvent = (event as MouseEvent);\n    this._lastMouseOffsetX = mouseEvent.offsetX;\n    this._lastMouseOffsetY = mouseEvent.offsetY;\n    if (!this._enabled()) {\n      return;\n    }\n    if (this._chartViewport.isDragging()) {\n      return;\n    }\n    if (this._coordinatesToGroupIndex(mouseEvent.offsetX, mouseEvent.offsetY, true /* headerOnly */) >= 0) {\n      this.hideHighlight();\n      this._viewportElement.style.cursor = 'pointer';\n      return;\n    }\n    this._updateHighlight();\n  }\n\n  _updateHighlight(): void {\n    const entryIndex = this._coordinatesToEntryIndex(this._lastMouseOffsetX, this._lastMouseOffsetY);\n    if (entryIndex === -1) {\n      this.hideHighlight();\n      const group =\n          this._coordinatesToGroupIndex(this._lastMouseOffsetX, this._lastMouseOffsetY, false /* headerOnly */);\n      if (group >= 0 && this._rawTimelineData && this._rawTimelineData.groups &&\n          this._rawTimelineData.groups[group].selectable) {\n        this._viewportElement.style.cursor = 'pointer';\n      } else {\n        this._viewportElement.style.cursor = 'default';\n      }\n      return;\n    }\n    if (this._chartViewport.isDragging()) {\n      return;\n    }\n    this._updatePopover(entryIndex);\n    this._viewportElement.style.cursor = this._dataProvider.canJumpToEntry(entryIndex) ? 'pointer' : 'default';\n    this.highlightEntry(entryIndex);\n  }\n\n  _onMouseOut(): void {\n    this._lastMouseOffsetX = -1;\n    this._lastMouseOffsetY = -1;\n    this.hideHighlight();\n  }\n\n  _updatePopover(entryIndex: number): void {\n    if (entryIndex === this._highlightedEntryIndex) {\n      this._updatePopoverOffset();\n      return;\n    }\n    this._entryInfo.removeChildren();\n    const popoverElement = this._dataProvider.prepareHighlightedEntryInfo(entryIndex);\n    if (popoverElement) {\n      this._entryInfo.appendChild(popoverElement);\n      this._updatePopoverOffset();\n    }\n  }\n\n  _updatePopoverOffset(): void {\n    const mouseX = this._lastMouseOffsetX;\n    const mouseY = this._lastMouseOffsetY;\n    const parentWidth = this._entryInfo.parentElement ? this._entryInfo.parentElement.clientWidth : 0;\n    const parentHeight = this._entryInfo.parentElement ? this._entryInfo.parentElement.clientHeight : 0;\n    const infoWidth = this._entryInfo.clientWidth;\n    const infoHeight = this._entryInfo.clientHeight;\n    const /** @const */ offsetX = 10;\n    const /** @const */ offsetY = 6;\n    let x;\n    let y;\n    for (let quadrant = 0; quadrant < 4; ++quadrant) {\n      const dx = quadrant & 2 ? -offsetX - infoWidth : offsetX;\n      const dy = quadrant & 1 ? -offsetY - infoHeight : offsetY;\n      x = Platform.NumberUtilities.clamp(mouseX + dx, 0, parentWidth - infoWidth);\n      y = Platform.NumberUtilities.clamp(mouseY + dy, 0, parentHeight - infoHeight);\n      if (x >= mouseX || mouseX >= x + infoWidth || y >= mouseY || mouseY >= y + infoHeight) {\n        break;\n      }\n    }\n    this._entryInfo.style.left = x + 'px';\n    this._entryInfo.style.top = y + 'px';\n  }\n\n  _onClick(event: Event): void {\n    const mouseEvent = (event as MouseEvent);\n    this.focus();\n    // onClick comes after dragStart and dragEnd events.\n    // So if there was drag (mouse move) in the middle of that events\n    // we skip the click. Otherwise we jump to the sources.\n    const clickThreshold = 5;\n    if (this._maxDragOffset > clickThreshold) {\n      return;\n    }\n\n    this._selectGroup(this._coordinatesToGroupIndex(mouseEvent.offsetX, mouseEvent.offsetY, false /* headerOnly */));\n    this._toggleGroupExpand(\n        this._coordinatesToGroupIndex(mouseEvent.offsetX, mouseEvent.offsetY, true /* headerOnly */));\n    const timelineData = this._timelineData();\n    if (mouseEvent.shiftKey && this._highlightedEntryIndex !== -1 && timelineData) {\n      const start = timelineData.entryStartTimes[this._highlightedEntryIndex];\n      const end = start + timelineData.entryTotalTimes[this._highlightedEntryIndex];\n      this._chartViewport.setRangeSelection(start, end);\n    } else {\n      this._chartViewport.onClick(mouseEvent);\n      this.dispatchEventToListeners(Events.EntryInvoked, this._highlightedEntryIndex);\n    }\n  }\n\n  _selectGroup(groupIndex: number): void {\n    if (groupIndex < 0 || this._selectedGroup === groupIndex) {\n      return;\n    }\n    if (!this._rawTimelineData) {\n      return;\n    }\n\n    const groups = this._rawTimelineData.groups;\n    if (!groups) {\n      return;\n    }\n\n    this._keyboardFocusedGroup = groupIndex;\n    this._scrollGroupIntoView(groupIndex);\n    const groupName = groups[groupIndex].name;\n    if (!groups[groupIndex].selectable) {\n      this._deselectAllGroups();\n      UI.ARIAUtils.alert(i18nString(UIStrings.sHovered, {PH1: groupName}));\n    } else {\n      this._selectedGroup = groupIndex;\n      this._flameChartDelegate.updateSelectedGroup(this, groups[groupIndex]);\n      this._resetCanvas();\n      this._draw();\n      UI.ARIAUtils.alert(i18nString(UIStrings.sSelected, {PH1: groupName}));\n    }\n  }\n\n  _deselectAllGroups(): void {\n    this._selectedGroup = -1;\n    this._flameChartDelegate.updateSelectedGroup(this, null);\n    this._resetCanvas();\n    this._draw();\n  }\n\n  _deselectAllEntries(): void {\n    this._selectedEntryIndex = -1;\n    this._resetCanvas();\n    this._draw();\n  }\n\n  _isGroupFocused(index: number): boolean {\n    return index === this._selectedGroup || index === this._keyboardFocusedGroup;\n  }\n\n  _scrollGroupIntoView(index: number): void {\n    if (index < 0) {\n      return;\n    }\n\n    if (!this._rawTimelineData) {\n      return;\n    }\n\n    const groups = this._rawTimelineData.groups;\n    const groupOffsets = this._groupOffsets;\n    if (!groupOffsets || !groups) {\n      return;\n    }\n    const groupTop = groupOffsets[index];\n\n    let nextOffset = groupOffsets[index + 1];\n    if (index === groups.length - 1) {\n      nextOffset += groups[index].style.padding;\n    }\n\n    // For the top group, scroll all the way to the top of the chart\n    // to accommodate the bar with time markers\n    const scrollTop = index === 0 ? 0 : groupTop;\n\n    const scrollHeight = Math.min(nextOffset - scrollTop, this._chartViewport.chartHeight());\n    this._chartViewport.setScrollOffset(scrollTop, scrollHeight);\n  }\n\n  _toggleGroupExpand(groupIndex: number): void {\n    if (groupIndex < 0 || !this._isGroupCollapsible(groupIndex)) {\n      return;\n    }\n\n    if (!this._rawTimelineData || !this._rawTimelineData.groups) {\n      return;\n    }\n\n    this._expandGroup(groupIndex, !this._rawTimelineData.groups[groupIndex].expanded /* setExpanded */);\n  }\n\n  _expandGroup(groupIndex: number, setExpanded: boolean|undefined = true, propagatedExpand: boolean|undefined = false):\n      void {\n    if (groupIndex < 0 || !this._isGroupCollapsible(groupIndex)) {\n      return;\n    }\n\n    if (!this._rawTimelineData) {\n      return;\n    }\n\n    const groups = this._rawTimelineData.groups;\n    if (!groups) {\n      return;\n    }\n\n    const group = groups[groupIndex];\n    group.expanded = setExpanded;\n\n    this._groupExpansionState[group.name] = group.expanded;\n    if (this._groupExpansionSetting) {\n      this._groupExpansionSetting.set(this._groupExpansionState);\n    }\n    this._updateLevelPositions();\n\n    this._updateHighlight();\n    if (!group.expanded) {\n      const timelineData = this._timelineData();\n      if (timelineData) {\n        const level = timelineData.entryLevels[this._selectedEntryIndex];\n        if (this._selectedEntryIndex >= 0 && level >= group.startLevel &&\n            (groupIndex >= groups.length - 1 || groups[groupIndex + 1].startLevel > level)) {\n          this._selectedEntryIndex = -1;\n        }\n      }\n    }\n\n    this._updateHeight();\n    this._resetCanvas();\n    this._draw();\n\n    this._scrollGroupIntoView(groupIndex);\n    // We only want to read expanded/collapsed state on user inputted expand/collapse\n    if (!propagatedExpand) {\n      const groupName = groups[groupIndex].name;\n      const content = group.expanded ? i18nString(UIStrings.sExpanded, {PH1: groupName}) :\n                                       i18nString(UIStrings.sCollapsed, {PH1: groupName});\n      UI.ARIAUtils.alert(content);\n    }\n  }\n\n  _onKeyDown(e: KeyboardEvent): void {\n    if (!UI.KeyboardShortcut.KeyboardShortcut.hasNoModifiers(e) || !this._timelineData()) {\n      return;\n    }\n\n    const eventHandled = this._handleSelectionNavigation(e);\n\n    // Handle keyboard navigation in groups\n    if (!eventHandled && this._rawTimelineData && this._rawTimelineData.groups) {\n      this._handleKeyboardGroupNavigation(e);\n    }\n  }\n\n  bindCanvasEvent(eventName: string, onEvent: (arg0: Event) => void): void {\n    this._canvas.addEventListener(eventName, onEvent);\n  }\n\n  _handleKeyboardGroupNavigation(event: Event): void {\n    const keyboardEvent = (event as KeyboardEvent);\n    let handled = false;\n    let entrySelected = false;\n\n    if (keyboardEvent.code === 'ArrowUp') {\n      handled = this._selectPreviousGroup();\n    } else if (keyboardEvent.code === 'ArrowDown') {\n      handled = this._selectNextGroup();\n    } else if (keyboardEvent.code === 'ArrowLeft') {\n      if (this._keyboardFocusedGroup >= 0) {\n        this._expandGroup(this._keyboardFocusedGroup, false /* setExpanded */);\n        handled = true;\n      }\n    } else if (keyboardEvent.code === 'ArrowRight') {\n      if (this._keyboardFocusedGroup >= 0) {\n        this._expandGroup(this._keyboardFocusedGroup, true /* setExpanded */);\n        this._selectFirstChild();\n        handled = true;\n      }\n    } else if (keyboardEvent.key === 'Enter') {\n      entrySelected = this._selectFirstEntryInCurrentGroup();\n      handled = entrySelected;\n    }\n\n    if (handled && !entrySelected) {\n      this._deselectAllEntries();\n    }\n\n    if (handled) {\n      keyboardEvent.consume(true);\n    }\n  }\n\n  _selectFirstEntryInCurrentGroup(): boolean {\n    if (!this._rawTimelineData) {\n      return false;\n    }\n\n    const allGroups = this._rawTimelineData.groups;\n\n    if (this._keyboardFocusedGroup < 0 || !allGroups) {\n      return false;\n    }\n\n    const group = allGroups[this._keyboardFocusedGroup];\n    const startLevelInGroup = group.startLevel;\n\n    // Return if no levels in this group\n    if (startLevelInGroup < 0) {\n      return false;\n    }\n\n    // Make sure this is the innermost nested group with this startLevel\n    // This is because a parent group also contains levels of all its child groups\n    // So check if the next group has the same level, if it does, user should\n    // go to that child group to select this entry\n    if (this._keyboardFocusedGroup < allGroups.length - 1 &&\n        allGroups[this._keyboardFocusedGroup + 1].startLevel === startLevelInGroup) {\n      return false;\n    }\n\n    if (!this._timelineLevels) {\n      return false;\n    }\n\n    // Get first (default) entry in startLevel of selected group\n    const firstEntryIndex = this._timelineLevels[startLevelInGroup][0];\n\n    this._expandGroup(this._keyboardFocusedGroup, true /* setExpanded */);\n    this.setSelectedEntry(firstEntryIndex);\n    return true;\n  }\n\n  _selectPreviousGroup(): boolean {\n    if (this._keyboardFocusedGroup <= 0) {\n      return false;\n    }\n\n    const groupIndexToSelect = this._getGroupIndexToSelect(-1 /* offset */);\n    this._selectGroup(groupIndexToSelect);\n    return true;\n  }\n\n  _selectNextGroup(): boolean {\n    if (!this._rawTimelineData || !this._rawTimelineData.groups) {\n      return false;\n    }\n\n    if (this._keyboardFocusedGroup >= this._rawTimelineData.groups.length - 1) {\n      return false;\n    }\n\n    const groupIndexToSelect = this._getGroupIndexToSelect(1 /* offset */);\n    this._selectGroup(groupIndexToSelect);\n    return true;\n  }\n\n  _getGroupIndexToSelect(offset: number): number {\n    if (!this._rawTimelineData || !this._rawTimelineData.groups) {\n      throw new Error('No raw timeline data');\n    }\n    const allGroups = this._rawTimelineData.groups;\n    let groupIndexToSelect = this._keyboardFocusedGroup;\n    let groupName, groupWithSubNestingLevel;\n\n    do {\n      groupIndexToSelect += offset;\n      groupName = this._rawTimelineData.groups[groupIndexToSelect].name;\n      groupWithSubNestingLevel = this._keyboardFocusedGroup !== -1 &&\n          allGroups[groupIndexToSelect].style.nestingLevel > allGroups[this._keyboardFocusedGroup].style.nestingLevel;\n    } while (groupIndexToSelect > 0 && groupIndexToSelect < allGroups.length - 1 &&\n             (!groupName || groupWithSubNestingLevel));\n\n    return groupIndexToSelect;\n  }\n\n  _selectFirstChild(): void {\n    if (!this._rawTimelineData || !this._rawTimelineData.groups) {\n      return;\n    }\n\n    const allGroups = this._rawTimelineData.groups;\n    if (this._keyboardFocusedGroup < 0 || this._keyboardFocusedGroup >= allGroups.length - 1) {\n      return;\n    }\n\n    const groupIndexToSelect = this._keyboardFocusedGroup + 1;\n    if (allGroups[groupIndexToSelect].style.nestingLevel > allGroups[this._keyboardFocusedGroup].style.nestingLevel) {\n      this._selectGroup(groupIndexToSelect);\n    }\n  }\n\n  _handleSelectionNavigation(event: KeyboardEvent): boolean {\n    if (this._selectedEntryIndex === -1) {\n      return false;\n    }\n    const timelineData = this._timelineData();\n    if (!timelineData) {\n      return false;\n    }\n\n    function timeComparator(time: number, entryIndex: number): number {\n      if (!timelineData) {\n        throw new Error('No timeline data');\n      }\n      return time - timelineData.entryStartTimes[entryIndex];\n    }\n\n    function entriesIntersect(entry1: number, entry2: number): boolean {\n      if (!timelineData) {\n        throw new Error('No timeline data');\n      }\n\n      const start1 = timelineData.entryStartTimes[entry1];\n      const start2 = timelineData.entryStartTimes[entry2];\n      const end1 = start1 + timelineData.entryTotalTimes[entry1];\n      const end2 = start2 + timelineData.entryTotalTimes[entry2];\n      return start1 < end2 && start2 < end1;\n    }\n\n    const keyboardEvent = (event as KeyboardEvent);\n    const keys = UI.KeyboardShortcut.Keys;\n    if (keyboardEvent.keyCode === keys.Left.code || keyboardEvent.keyCode === keys.Right.code) {\n      const level = timelineData.entryLevels[this._selectedEntryIndex];\n      const levelIndexes = this._timelineLevels ? this._timelineLevels[level] : [];\n      let indexOnLevel = Platform.ArrayUtilities.lowerBound(levelIndexes, this._selectedEntryIndex, (a, b) => a - b);\n      indexOnLevel += keyboardEvent.keyCode === keys.Left.code ? -1 : 1;\n      event.consume(true);\n      if (indexOnLevel >= 0 && indexOnLevel < levelIndexes.length) {\n        this.dispatchEventToListeners(Events.EntrySelected, levelIndexes[indexOnLevel]);\n      }\n      return true;\n    }\n\n    if (keyboardEvent.keyCode === keys.Up.code || keyboardEvent.keyCode === keys.Down.code) {\n      let level = timelineData.entryLevels[this._selectedEntryIndex];\n      level += keyboardEvent.keyCode === keys.Up.code ? -1 : 1;\n      if (level < 0 || (this._timelineLevels && level >= this._timelineLevels.length)) {\n        this._deselectAllEntries();\n        keyboardEvent.consume(true);\n        return true;\n      }\n      const entryTime = timelineData.entryStartTimes[this._selectedEntryIndex] +\n          timelineData.entryTotalTimes[this._selectedEntryIndex] / 2;\n      const levelIndexes = this._timelineLevels ? this._timelineLevels[level] : [];\n      let indexOnLevel = Platform.ArrayUtilities.upperBound(levelIndexes, entryTime, timeComparator) - 1;\n      if (!entriesIntersect(this._selectedEntryIndex, levelIndexes[indexOnLevel])) {\n        ++indexOnLevel;\n        if (indexOnLevel >= levelIndexes.length ||\n            !entriesIntersect(this._selectedEntryIndex, levelIndexes[indexOnLevel])) {\n          if (keyboardEvent.code === 'ArrowDown') {\n            return false;\n          }\n\n          // Stay in the current group and give focus to the parent group instead of entries\n          this._deselectAllEntries();\n          keyboardEvent.consume(true);\n          return true;\n        }\n      }\n      keyboardEvent.consume(true);\n      this.dispatchEventToListeners(Events.EntrySelected, levelIndexes[indexOnLevel]);\n      return true;\n    }\n    if (event.key === 'Enter') {\n      event.consume(true);\n      this.dispatchEventToListeners(Events.EntryInvoked, this._selectedEntryIndex);\n      return true;\n    }\n    return false;\n  }\n\n  _coordinatesToEntryIndex(x: number, y: number): number {\n    if (x < 0 || y < 0) {\n      return -1;\n    }\n    const timelineData = this._timelineData();\n    if (!timelineData) {\n      return -1;\n    }\n    y += this._chartViewport.scrollOffset();\n    if (!this._visibleLevelOffsets) {\n      throw new Error('No visible level offsets');\n    }\n    const cursorLevel =\n        Platform.ArrayUtilities.upperBound(this._visibleLevelOffsets, y, Platform.ArrayUtilities.DEFAULT_COMPARATOR) -\n        1;\n    if (cursorLevel < 0 || (this._visibleLevels && !this._visibleLevels[cursorLevel])) {\n      return -1;\n    }\n    const offsetFromLevel = y - this._visibleLevelOffsets[cursorLevel];\n    if (offsetFromLevel > this._levelHeight(cursorLevel)) {\n      return -1;\n    }\n\n    // Check markers first.\n    for (const [index, pos] of this._markerPositions) {\n      if (timelineData.entryLevels[index] !== cursorLevel) {\n        continue;\n      }\n      if (pos.x <= x && x < pos.x + pos.width) {\n        return /** @type {number} */ index as number;\n      }\n    }\n\n    // Check regular entries.\n    const entryStartTimes = timelineData.entryStartTimes;\n    const entriesOnLevel: number[] = this._timelineLevels ? this._timelineLevels[cursorLevel] : [];\n    if (!entriesOnLevel || !entriesOnLevel.length) {\n      return -1;\n    }\n\n    const cursorTime = this._chartViewport.pixelToTime(x);\n    const indexOnLevel = Math.max(\n        Platform.ArrayUtilities.upperBound(\n            entriesOnLevel, cursorTime, (time, entryIndex) => time - entryStartTimes[entryIndex]) -\n            1,\n        0);\n\n    function checkEntryHit(this: FlameChart, entryIndex: number|undefined): boolean {\n      if (entryIndex === undefined) {\n        return false;\n      }\n\n      if (!timelineData) {\n        return false;\n      }\n\n      const startTime = entryStartTimes[entryIndex];\n      const duration = timelineData.entryTotalTimes[entryIndex];\n      const startX = this._chartViewport.timeToPosition(startTime);\n      const endX = this._chartViewport.timeToPosition(startTime + duration);\n      const barThresholdPx = 3;\n      return startX - barThresholdPx < x && x < endX + barThresholdPx;\n    }\n\n    let entryIndex: number = entriesOnLevel[indexOnLevel];\n    if (checkEntryHit.call(this, entryIndex)) {\n      return entryIndex;\n    }\n    entryIndex = entriesOnLevel[indexOnLevel + 1];\n    if (checkEntryHit.call(this, entryIndex)) {\n      return entryIndex;\n    }\n    return -1;\n  }\n\n  _coordinatesToGroupIndex(x: number, y: number, headerOnly: boolean): number {\n    if (!this._rawTimelineData || !this._rawTimelineData.groups || !this._groupOffsets) {\n      return -1;\n    }\n\n    if (x < 0 || y < 0) {\n      return -1;\n    }\n    y += this._chartViewport.scrollOffset();\n    const groups = this._rawTimelineData.groups || [];\n    const group =\n        Platform.ArrayUtilities.upperBound(this._groupOffsets, y, Platform.ArrayUtilities.DEFAULT_COMPARATOR) - 1;\n    if (group < 0 || group >= groups.length) {\n      return -1;\n    }\n    const height = headerOnly ? groups[group].style.height : this._groupOffsets[group + 1] - this._groupOffsets[group];\n    if (y - this._groupOffsets[group] >= height) {\n      return -1;\n    }\n    if (!headerOnly) {\n      return group;\n    }\n\n    const context = (this._canvas.getContext('2d') as CanvasRenderingContext2D);\n    context.save();\n    context.font = groups[group].style.font;\n    const right = this._headerLeftPadding + this._labelWidthForGroup(context, groups[group]);\n    context.restore();\n    if (x > right) {\n      return -1;\n    }\n\n    return group;\n  }\n\n  _markerIndexAtPosition(x: number): number {\n    const timelineData = this._timelineData();\n    if (!timelineData) {\n      return -1;\n    }\n\n    const markers = timelineData.markers;\n    if (!markers) {\n      return -1;\n    }\n    const /** @const */ accurracyOffsetPx = 4;\n    const time = this._chartViewport.pixelToTime(x);\n    const leftTime = this._chartViewport.pixelToTime(x - accurracyOffsetPx);\n    const rightTime = this._chartViewport.pixelToTime(x + accurracyOffsetPx);\n    const left = this._markerIndexBeforeTime(leftTime);\n    let markerIndex = -1;\n    let distance: number = Infinity;\n    for (let i = left; i < markers.length && markers[i].startTime() < rightTime; i++) {\n      const nextDistance = Math.abs(markers[i].startTime() - time);\n      if (nextDistance < distance) {\n        markerIndex = i;\n        distance = nextDistance;\n      }\n    }\n    return markerIndex;\n  }\n\n  _markerIndexBeforeTime(time: number): number {\n    const timelineData = this._timelineData();\n    if (!timelineData) {\n      throw new Error('No timeline data');\n    }\n\n    const markers = timelineData.markers;\n    if (!markers) {\n      throw new Error('No timeline markers');\n    }\n\n    return Platform.ArrayUtilities.lowerBound(\n        timelineData.markers, time, (markerTimestamp, marker) => markerTimestamp - marker.startTime());\n  }\n\n  _draw(): void {\n    const timelineData = this._timelineData();\n    if (!timelineData) {\n      return;\n    }\n\n    const visibleLevelOffsets = this._visibleLevelOffsets ? this._visibleLevelOffsets : new Uint32Array();\n\n    const width = this._offsetWidth;\n    const height = this._offsetHeight;\n    const context = (this._canvas.getContext('2d') as CanvasRenderingContext2D);\n    context.save();\n    const ratio = window.devicePixelRatio;\n    const top = this._chartViewport.scrollOffset();\n    context.scale(ratio, ratio);\n    context.fillStyle = 'rgba(0, 0, 0, 0)';\n    context.fillRect(0, 0, width, height);\n    context.translate(0, -top);\n    const defaultFont = '11px ' + Host.Platform.fontFamily();\n    context.font = defaultFont;\n\n    const candyStripePattern = context.createPattern(this._candyStripeCanvas, 'repeat');\n\n    const entryTotalTimes = timelineData.entryTotalTimes;\n    const entryStartTimes = timelineData.entryStartTimes;\n    const entryLevels = timelineData.entryLevels;\n    const timeToPixel = this._chartViewport.timeToPixel();\n\n    const titleIndices = [];\n    const markerIndices = [];\n    const textPadding = this._textPadding;\n    const minTextWidth = 2 * textPadding + UI.UIUtils.measureTextWidth(context, '…');\n    const minTextWidthDuration = this._chartViewport.pixelToTimeOffset(minTextWidth);\n    const minVisibleBarLevel = Math.max(\n        Platform.ArrayUtilities.upperBound(visibleLevelOffsets, top, Platform.ArrayUtilities.DEFAULT_COMPARATOR) - 1,\n        0);\n    this._markerPositions.clear();\n\n    let mainThreadTopLevel = -1;\n\n    // Find the main thread so that we can mark tasks longer than 50ms.\n    if ('groups' in timelineData && Array.isArray(timelineData.groups)) {\n      const mainThread = timelineData.groups.find(group => {\n        if (!group.track) {\n          return false;\n        }\n\n        return group.track.name === 'CrRendererMain';\n      });\n\n      if (mainThread) {\n        mainThreadTopLevel = mainThread.startLevel;\n      }\n    }\n\n    const colorBuckets = new Map<string, {\n      indexes: number[],\n    }>();\n    for (let level = minVisibleBarLevel; level < this._dataProvider.maxStackDepth(); ++level) {\n      if (this._levelToOffset(level) > top + height) {\n        break;\n      }\n      if (!this._visibleLevels || !this._visibleLevels[level]) {\n        continue;\n      }\n      if (!this._timelineLevels) {\n        continue;\n      }\n\n      // Entries are ordered by start time within a level, so find the last visible entry.\n      const levelIndexes = this._timelineLevels[level];\n      const rightIndexOnLevel = Platform.ArrayUtilities.lowerBound(\n                                    levelIndexes, this._chartViewport.windowRightTime(),\n                                    (time, entryIndex) => time - entryStartTimes[entryIndex]) -\n          1;\n      let lastDrawOffset = Infinity;\n      for (let entryIndexOnLevel = rightIndexOnLevel; entryIndexOnLevel >= 0; --entryIndexOnLevel) {\n        const entryIndex = levelIndexes[entryIndexOnLevel];\n        const duration = entryTotalTimes[entryIndex];\n        if (isNaN(duration)) {\n          markerIndices.push(entryIndex);\n          continue;\n        }\n        if (duration >= minTextWidthDuration ||\n            (this._forceDecorationCache && this._forceDecorationCache[entryIndex])) {\n          titleIndices.push(entryIndex);\n        }\n\n        const entryStartTime = entryStartTimes[entryIndex];\n        const entryOffsetRight = entryStartTime + duration;\n        if (entryOffsetRight <= this._chartViewport.windowLeftTime()) {\n          break;\n        }\n        if (this._useWebGL) {\n          continue;\n        }\n\n        const barX = this._timeToPositionClipped(entryStartTime);\n        // Check if the entry entirely fits into an already drawn pixel, we can just skip drawing it.\n        if (barX >= lastDrawOffset) {\n          continue;\n        }\n        lastDrawOffset = barX;\n\n        if (this._entryColorsCache) {\n          const color = this._entryColorsCache[entryIndex];\n          let bucket = colorBuckets.get(color);\n          if (!bucket) {\n            bucket = {indexes: []};\n            colorBuckets.set(color, bucket);\n          }\n          bucket.indexes.push(entryIndex);\n        }\n      }\n    }\n\n    if (this._useWebGL) {\n      this._drawGL();\n    } else {\n      context.save();\n      this._forEachGroupInViewport((offset, index, group, isFirst, groupHeight) => {\n        if (this._isGroupFocused(index)) {\n          context.fillStyle = this._selectedGroupBackroundColor;\n          context.fillRect(0, offset, width, groupHeight - group.style.padding);\n        }\n      });\n      context.restore();\n\n      for (const [color, {indexes}] of colorBuckets) {\n        context.beginPath();\n        for (let i = 0; i < indexes.length; ++i) {\n          const entryIndex = indexes[i];\n          const duration = entryTotalTimes[entryIndex];\n          if (isNaN(duration)) {\n            continue;\n          }\n          const entryStartTime = entryStartTimes[entryIndex];\n          const barX = this._timeToPositionClipped(entryStartTime);\n          const barLevel = entryLevels[entryIndex];\n          const barHeight = this._levelHeight(barLevel);\n          const barY = this._levelToOffset(barLevel);\n          const barRight = this._timeToPositionClipped(entryStartTime + duration);\n          const barWidth = Math.max(barRight - barX, 1);\n          context.rect(barX, barY, barWidth - 0.4, barHeight - 1);\n        }\n        context.fillStyle = color;\n        context.fill();\n\n        // Draw long task regions.\n        context.beginPath();\n        for (let i = 0; i < indexes.length; ++i) {\n          const entryIndex = indexes[i];\n          const duration = entryTotalTimes[entryIndex];\n          const showLongDurations = entryLevels[entryIndex] === mainThreadTopLevel;\n\n          if (!showLongDurations) {\n            continue;\n          }\n\n          if (isNaN(duration) || duration < 50) {\n            continue;\n          }\n\n          const entryStartTime = entryStartTimes[entryIndex];\n          const barX = this._timeToPositionClipped(entryStartTime + 50);\n          const barLevel = entryLevels[entryIndex];\n          const barHeight = this._levelHeight(barLevel);\n          const barY = this._levelToOffset(barLevel);\n          const barRight = this._timeToPositionClipped(entryStartTime + duration);\n          const barWidth = Math.max(barRight - barX, 1);\n          context.rect(barX, barY, barWidth - 0.4, barHeight - 1);\n        }\n\n        if (candyStripePattern) {\n          context.fillStyle = candyStripePattern;\n          context.fill();\n        }\n      }\n    }\n\n    context.textBaseline = 'alphabetic';\n    context.beginPath();\n    let lastMarkerLevel = -1;\n    let lastMarkerX: number = -Infinity;\n    // Markers are sorted top to bottom, right to left.\n    for (let m = markerIndices.length - 1; m >= 0; --m) {\n      const entryIndex = markerIndices[m];\n      const title = this._dataProvider.entryTitle(entryIndex);\n      if (!title) {\n        continue;\n      }\n      const entryStartTime = entryStartTimes[entryIndex];\n      const level = entryLevels[entryIndex];\n      if (lastMarkerLevel !== level) {\n        lastMarkerX = -Infinity;\n      }\n      const x = Math.max(this._chartViewport.timeToPosition(entryStartTime), lastMarkerX);\n      const y = this._levelToOffset(level);\n      const h = this._levelHeight(level);\n      const padding = 4;\n      const width = Math.ceil(UI.UIUtils.measureTextWidth(context, title)) + 2 * padding;\n      lastMarkerX = x + width + 1;\n      lastMarkerLevel = level;\n      this._markerPositions.set(entryIndex, {x, width});\n      context.fillStyle = this._dataProvider.entryColor(entryIndex);\n      context.fillRect(x, y, width, h - 1);\n      context.fillStyle = 'white';\n      context.fillText(title, x + padding, y + h - this._textBaseline);\n    }\n    context.strokeStyle = 'rgba(0, 0, 0, 0.2)';\n    context.stroke();\n\n    for (let i = 0; i < titleIndices.length; ++i) {\n      const entryIndex = titleIndices[i];\n      const entryStartTime = entryStartTimes[entryIndex];\n      const barX = this._timeToPositionClipped(entryStartTime);\n      const barRight = Math.min(this._timeToPositionClipped(entryStartTime + entryTotalTimes[entryIndex]), width) + 1;\n      const barWidth = barRight - barX;\n      const barLevel = entryLevels[entryIndex];\n      const barY = this._levelToOffset(barLevel);\n      let text = this._dataProvider.entryTitle(entryIndex);\n      if (text && text.length) {\n        context.font = this._dataProvider.entryFont(entryIndex) || defaultFont;\n        text = UI.UIUtils.trimTextMiddle(context, text, barWidth - 2 * textPadding);\n      }\n      const unclippedBarX = this._chartViewport.timeToPosition(entryStartTime);\n      const barHeight = this._levelHeight(barLevel);\n      if (this._dataProvider.decorateEntry(\n              entryIndex, context, text, barX, barY, barWidth, barHeight, unclippedBarX, timeToPixel)) {\n        continue;\n      }\n      if (!text || !text.length) {\n        continue;\n      }\n      context.fillStyle = this._dataProvider.textColor(entryIndex);\n      context.fillText(text, barX + textPadding, barY + barHeight - this._textBaseline);\n    }\n\n    context.restore();\n\n    this._drawGroupHeaders(width, height);\n    this._drawFlowEvents(context, width, height);\n    this._drawMarkers();\n    const dividersData = TimelineGrid.calculateGridOffsets(this);\n    const navStartTimes = Array.from(this._dataProvider.navStartTimes().values());\n\n    let navStartTimeIndex = 0;\n    const drawAdjustedTime = (time: number): string => {\n      if (navStartTimes.length === 0) {\n        return this.formatValue(time, dividersData.precision);\n      }\n\n      // Track when the time crosses the boundary to the next nav start record,\n      // and when it does, move the nav start array index accordingly.\n      const hasNextNavStartTime = navStartTimes.length > navStartTimeIndex + 1;\n      if (hasNextNavStartTime && time > navStartTimes[navStartTimeIndex + 1].startTime) {\n        navStartTimeIndex++;\n      }\n\n      // Adjust the time by the nearest nav start marker's value.\n      const nearestMarker = navStartTimes[navStartTimeIndex];\n      if (nearestMarker) {\n        time -= nearestMarker.startTime - this.zeroTime();\n      }\n\n      return this.formatValue(time, dividersData.precision);\n    };\n\n    TimelineGrid.drawCanvasGrid(context, dividersData);\n    if (this._rulerEnabled) {\n      TimelineGrid.drawCanvasHeaders(context, dividersData, drawAdjustedTime, 3, HeaderHeight);\n    }\n\n    this._updateElementPosition(this._highlightElement, this._highlightedEntryIndex);\n    this._updateElementPosition(this._selectedElement, this._selectedEntryIndex);\n    this._updateMarkerHighlight();\n  }\n\n  _initWebGL(): void {\n    const gl = (this._canvasGL.getContext('webgl') as WebGLRenderingContext | null);\n    if (!gl) {\n      console.error('Failed to obtain WebGL context.');\n      this._useWebGL = false;  // Fallback to use canvas.\n      return;\n    }\n\n    const vertexShaderSource = `\n  attribute vec2 aVertexPosition;\n  attribute float aVertexColor;\n\n  uniform vec2 uScalingFactor;\n  uniform vec2 uShiftVector;\n\n  varying mediump vec2 vPalettePosition;\n\n  void main() {\n  vec2 shiftedPosition = aVertexPosition - uShiftVector;\n  gl_Position = vec4(shiftedPosition * uScalingFactor + vec2(-1.0, 1.0), 0.0, 1.0);\n  vPalettePosition = vec2(aVertexColor, 0.5);\n  }`;\n\n    const fragmentShaderSource = `\n  varying mediump vec2 vPalettePosition;\n  uniform sampler2D uSampler;\n\n  void main() {\n  gl_FragColor = texture2D(uSampler, vPalettePosition);\n  }`;\n\n    function loadShader(gl: WebGLRenderingContext, type: number, source: string): WebGLShader|null {\n      const shader = gl.createShader(type);\n      if (!shader) {\n        return null;\n      }\n\n      gl.shaderSource(shader, source);\n      gl.compileShader(shader);\n      if (gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        return shader;\n      }\n      console.error('Shader compile error: ' + gl.getShaderInfoLog(shader));\n      gl.deleteShader(shader);\n      return null;\n    }\n\n    const vertexShader = loadShader(gl, gl.VERTEX_SHADER, vertexShaderSource);\n    const fragmentShader = loadShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);\n\n    const shaderProgram = gl.createProgram();\n    if (!shaderProgram || !vertexShader || !fragmentShader) {\n      return;\n    }\n    gl.attachShader(shaderProgram, vertexShader);\n    gl.attachShader(shaderProgram, fragmentShader);\n    gl.linkProgram(shaderProgram);\n\n    if (gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n      this._shaderProgram = shaderProgram;\n      gl.useProgram(shaderProgram);\n    } else {\n      this._shaderProgram = null;\n      throw new Error('Unable to initialize the shader program: ' + gl.getProgramInfoLog(shaderProgram));\n    }\n\n    this._vertexBuffer = gl.createBuffer();\n    this._colorBuffer = gl.createBuffer();\n\n    this._uScalingFactor = gl.getUniformLocation(shaderProgram, 'uScalingFactor');\n    this._uShiftVector = gl.getUniformLocation(shaderProgram, 'uShiftVector');\n    const uSampler = gl.getUniformLocation(shaderProgram, 'uSampler');\n    gl.uniform1i(uSampler, 0);\n    this._aVertexPosition = gl.getAttribLocation(this._shaderProgram, 'aVertexPosition');\n    this._aVertexColor = gl.getAttribLocation(this._shaderProgram, 'aVertexColor');\n    gl.enableVertexAttribArray(this._aVertexPosition);\n    gl.enableVertexAttribArray(this._aVertexColor);\n  }\n\n  _setupGLGeometry(): void {\n    const gl = (this._canvasGL.getContext('webgl') as WebGLRenderingContext | null);\n    if (!gl) {\n      return;\n    }\n\n    const timelineData = this._timelineData();\n    if (!timelineData) {\n      return;\n    }\n\n    const entryTotalTimes = timelineData.entryTotalTimes;\n    const entryStartTimes = timelineData.entryStartTimes;\n    const entryLevels = timelineData.entryLevels;\n\n    const verticesPerBar = 6;\n    const vertexArray = new Float32Array(entryTotalTimes.length * verticesPerBar * 2);\n    let colorArray = new Uint8Array(entryTotalTimes.length * verticesPerBar);\n    let vertex = 0;\n    const parsedColorCache = new Map<string, number>();\n    const colors: number[] = [];\n\n    const visibleLevels = this._visibleLevels || [];\n    const rawTimelineData = this._rawTimelineData || {groups: []};\n\n    const collapsedOverviewLevels = new Array(visibleLevels.length);\n    const groups = rawTimelineData.groups || [];\n    this._forEachGroup((offset, index, group) => {\n      if (group.style.useFirstLineForOverview || !this._isGroupCollapsible(index) || group.expanded) {\n        return;\n      }\n      let nextGroup = index + 1;\n      while (nextGroup < groups.length && groups[nextGroup].style.nestingLevel > group.style.nestingLevel) {\n        ++nextGroup;\n      }\n      const endLevel = nextGroup < groups.length ? groups[nextGroup].startLevel : this._dataProvider.maxStackDepth();\n      for (let i = group.startLevel; i < endLevel; ++i) {\n        collapsedOverviewLevels[i] = offset;\n      }\n    });\n\n    for (let i = 0; i < entryTotalTimes.length; ++i) {\n      const level = entryLevels[i];\n      const collapsedGroupOffset = collapsedOverviewLevels[level];\n      if (!visibleLevels[level] && !collapsedGroupOffset) {\n        continue;\n      }\n      if (!this._entryColorsCache) {\n        continue;\n      }\n\n      const color = this._entryColorsCache[i];\n      if (!color) {\n        continue;\n      }\n      let colorIndex = parsedColorCache.get(color);\n      if (colorIndex === undefined) {\n        const parsedColor = Common.Color.Color.parse(color);\n        if (parsedColor) {\n          const rgba = parsedColor.canonicalRGBA();\n          rgba[3] = Math.round(rgba[3] * 255);\n          colorIndex = colors.length / 4;\n          colors.push(...rgba);\n          if (colorIndex === 256) {\n            colorArray = new Uint8Array(colorArray);\n          }\n        }\n\n        if (colorIndex) {\n          parsedColorCache.set(color, colorIndex);\n        }\n      }\n      for (let j = 0; j < verticesPerBar; ++j) {\n        if (colorIndex) {\n          colorArray[vertex + j] = colorIndex;\n        }\n      }\n\n      const vpos = vertex * 2;\n      const x0 = entryStartTimes[i] - this._minimumBoundary;\n      const x1 = x0 + entryTotalTimes[i];\n      const y0 = collapsedGroupOffset || this._levelToOffset(level);\n      const y1 = y0 + this._levelHeight(level) - 1;\n      vertexArray[vpos + 0] = x0;\n      vertexArray[vpos + 1] = y0;\n      vertexArray[vpos + 2] = x1;\n      vertexArray[vpos + 3] = y0;\n      vertexArray[vpos + 4] = x0;\n      vertexArray[vpos + 5] = y1;\n      vertexArray[vpos + 6] = x0;\n      vertexArray[vpos + 7] = y1;\n      vertexArray[vpos + 8] = x1;\n      vertexArray[vpos + 9] = y0;\n      vertexArray[vpos + 10] = x1;\n      vertexArray[vpos + 11] = y1;\n\n      vertex += verticesPerBar;\n    }\n    this._vertexCount = vertex;\n\n    const paletteTexture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, paletteTexture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.activeTexture(gl.TEXTURE0);\n\n    const numColors = colors.length / 4;\n    const useShortForColors = numColors >= 256;\n    const width = !useShortForColors ? 256 : Math.min(1 << 16, gl.getParameter(gl.MAX_TEXTURE_SIZE));\n    console.assert(numColors <= width, 'Too many colors');\n    const height = 1;\n    const colorIndexType = useShortForColors ? gl.UNSIGNED_SHORT : gl.UNSIGNED_BYTE;\n    if (useShortForColors) {\n      const factor = (1 << 16) / width;\n      for (let i = 0; i < vertex; ++i) {\n        colorArray[i] *= factor;\n      }\n    }\n\n    const pixels = new Uint8Array(width * 4);\n    pixels.set(colors);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n\n    if (this._vertexBuffer && this._aVertexPosition) {\n      gl.bindBuffer(gl.ARRAY_BUFFER, this._vertexBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, vertexArray, gl.STATIC_DRAW);\n      gl.vertexAttribPointer(this._aVertexPosition, /* vertexComponents */ 2, gl.FLOAT, false, 0, 0);\n    }\n\n    if (this._colorBuffer && this._aVertexColor) {\n      gl.bindBuffer(gl.ARRAY_BUFFER, this._colorBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, colorArray, gl.STATIC_DRAW);\n      gl.vertexAttribPointer(this._aVertexColor, /* colorComponents */ 1, colorIndexType, true, 0, 0);\n    }\n  }\n\n  _drawGL(): void {\n    const gl = (this._canvasGL.getContext('webgl') as WebGLRenderingContext | null);\n    if (!gl) {\n      return;\n    }\n    const timelineData = this._timelineData();\n    if (!timelineData) {\n      return;\n    }\n\n    if (!this._prevTimelineData || timelineData.entryTotalTimes !== this._prevTimelineData.entryTotalTimes) {\n      this._prevTimelineData = timelineData;\n      this._setupGLGeometry();\n    }\n\n    gl.viewport(0, 0, this._canvasGL.width, this._canvasGL.height);\n\n    if (!this._vertexCount) {\n      return;\n    }\n\n    const viewportScale = [2.0 / this.boundarySpan(), -2.0 * window.devicePixelRatio / this._canvasGL.height];\n    const viewportShift = [this.minimumBoundary() - this.zeroTime(), this._chartViewport.scrollOffset()];\n    if (this._uScalingFactor) {\n      gl.uniform2fv(this._uScalingFactor, viewportScale);\n    }\n\n    if (this._uShiftVector) {\n      gl.uniform2fv(this._uShiftVector, viewportShift);\n    }\n\n    gl.drawArrays(gl.TRIANGLES, 0, this._vertexCount);\n  }\n\n  _drawGroupHeaders(width: number, height: number): void {\n    const context = (this._canvas.getContext('2d') as CanvasRenderingContext2D);\n    const top = this._chartViewport.scrollOffset();\n    const ratio = window.devicePixelRatio;\n    if (!this._rawTimelineData) {\n      return;\n    }\n\n    const groups = this._rawTimelineData.groups || [];\n    if (!groups.length) {\n      return;\n    }\n\n    const groupOffsets = this._groupOffsets;\n    if (groupOffsets === null || groupOffsets === undefined) {\n      return;\n    }\n    const lastGroupOffset = groupOffsets[groupOffsets.length - 1];\n    const colorUsage = ThemeSupport.ThemeSupport.ColorUsage;\n\n    context.save();\n    context.scale(ratio, ratio);\n    context.translate(0, -top);\n    const defaultFont = '11px ' + Host.Platform.fontFamily();\n    context.font = defaultFont;\n\n    context.fillStyle = ThemeSupport.ThemeSupport.instance().patchColorText('#fff', colorUsage.Background);\n    this._forEachGroupInViewport((offset, index, group) => {\n      const paddingHeight = group.style.padding;\n      if (paddingHeight < 5) {\n        return;\n      }\n      context.fillRect(0, offset - paddingHeight + 2, width, paddingHeight - 4);\n    });\n    if (groups.length && lastGroupOffset < top + height) {\n      context.fillRect(0, lastGroupOffset + 2, width, top + height - lastGroupOffset);\n    }\n\n    context.strokeStyle = ThemeSupport.ThemeSupport.instance().patchColorText('#eee', colorUsage.Background);\n    context.beginPath();\n    this._forEachGroupInViewport((offset, index, group, isFirst) => {\n      if (isFirst || group.style.padding < 4) {\n        return;\n      }\n      hLine(offset - 2.5);\n    });\n    hLine(lastGroupOffset + 1.5);\n    context.stroke();\n\n    this._forEachGroupInViewport((offset, index, group) => {\n      if (group.style.useFirstLineForOverview) {\n        return;\n      }\n      if (!this._isGroupCollapsible(index) || group.expanded) {\n        if (!group.style.shareHeaderLine && this._isGroupFocused(index)) {\n          context.fillStyle = group.style.backgroundColor;\n          context.fillRect(0, offset, width, group.style.height);\n        }\n        return;\n      }\n      if (this._useWebGL) {\n        return;\n      }\n      let nextGroup = index + 1;\n      while (nextGroup < groups.length && groups[nextGroup].style.nestingLevel > group.style.nestingLevel) {\n        nextGroup++;\n      }\n      const endLevel = nextGroup < groups.length ? groups[nextGroup].startLevel : this._dataProvider.maxStackDepth();\n      this._drawCollapsedOverviewForGroup(group, offset, endLevel);\n    });\n\n    context.save();\n    this._forEachGroupInViewport((offset, index, group) => {\n      context.font = group.style.font;\n      if (this._isGroupCollapsible(index) && !group.expanded || group.style.shareHeaderLine) {\n        const width = this._labelWidthForGroup(context, group) + 2;\n        if (this._isGroupFocused(index)) {\n          context.fillStyle = this._selectedGroupBackroundColor;\n        } else {\n          const parsedColor = Common.Color.Color.parse(group.style.backgroundColor);\n          if (parsedColor) {\n            context.fillStyle = (parsedColor.setAlpha(0.8).asString(null) as string);\n          }\n        }\n\n        context.fillRect(\n            this._headerLeftPadding - this._headerLabelXPadding, offset + this._headerLabelYPadding, width,\n            group.style.height - 2 * this._headerLabelYPadding);\n      }\n      context.fillStyle = group.style.color;\n      context.fillText(\n          group.name, Math.floor(this._expansionArrowIndent * (group.style.nestingLevel + 1) + this._arrowSide),\n          offset + group.style.height - this._textBaseline);\n    });\n    context.restore();\n\n    context.fillStyle = ThemeSupport.ThemeSupport.instance().patchColorText('#6e6e6e', colorUsage.Foreground);\n    context.beginPath();\n    this._forEachGroupInViewport((offset, index, group) => {\n      if (this._isGroupCollapsible(index)) {\n        drawExpansionArrow.call(\n            this, this._expansionArrowIndent * (group.style.nestingLevel + 1),\n            offset + group.style.height - this._textBaseline - this._arrowSide / 2, Boolean(group.expanded));\n      }\n    });\n    context.fill();\n\n    context.strokeStyle = ThemeSupport.ThemeSupport.instance().patchColorText('#ddd', colorUsage.Background);\n    context.beginPath();\n    context.stroke();\n\n    this._forEachGroupInViewport((offset, index, group, isFirst, groupHeight) => {\n      if (this._isGroupFocused(index)) {\n        const lineWidth = 2;\n        const bracketLength = 10;\n        context.fillStyle = this._selectedGroupBorderColor;\n        context.fillRect(0, offset - lineWidth, lineWidth, groupHeight - group.style.padding + 2 * lineWidth);\n        context.fillRect(0, offset - lineWidth, bracketLength, lineWidth);\n        context.fillRect(0, offset + groupHeight - group.style.padding, bracketLength, lineWidth);\n      }\n    });\n\n    context.restore();\n\n    function hLine(y: number): void {\n      context.moveTo(0, y);\n      context.lineTo(width, y);\n    }\n\n    function drawExpansionArrow(this: FlameChart, x: number, y: number, expanded: boolean): void {\n      const arrowHeight = this._arrowSide * Math.sqrt(3) / 2;\n      const arrowCenterOffset = Math.round(arrowHeight / 2);\n      context.save();\n      context.translate(x, y);\n      context.rotate(expanded ? Math.PI / 2 : 0);\n      context.moveTo(-arrowCenterOffset, -this._arrowSide / 2);\n      context.lineTo(-arrowCenterOffset, this._arrowSide / 2);\n      context.lineTo(arrowHeight - arrowCenterOffset, 0);\n      context.restore();\n    }\n  }\n\n  _forEachGroup(callback: (arg0: number, arg1: number, arg2: Group, arg3: boolean, arg4: number) => void): void {\n    if (!this._rawTimelineData) {\n      return;\n    }\n    const groups = this._rawTimelineData.groups || [];\n    if (!groups.length) {\n      return;\n    }\n    const groupOffsets = this._groupOffsets;\n    if (!groupOffsets) {\n      return;\n    }\n\n    const groupStack: {\n      nestingLevel: number,\n      visible: boolean,\n    }[] = [{nestingLevel: -1, visible: true}];\n    for (let i = 0; i < groups.length; ++i) {\n      const groupTop = groupOffsets[i];\n      const group = groups[i];\n      let firstGroup = true;\n      let last: {\n        nestingLevel: number,\n        visible: boolean,\n      } = groupStack[groupStack.length - 1];\n      while (last && last.nestingLevel >= group.style.nestingLevel) {\n        groupStack.pop();\n        firstGroup = false;\n        last = groupStack[groupStack.length - 1];\n      }\n      last = groupStack[groupStack.length - 1];\n      const parentGroupVisible = last ? last.visible : false;\n      const thisGroupVisible = parentGroupVisible && (!this._isGroupCollapsible(i) || group.expanded);\n      groupStack.push({nestingLevel: group.style.nestingLevel, visible: Boolean(thisGroupVisible)});\n      const nextOffset = i === groups.length - 1 ? groupOffsets[i + 1] + group.style.padding : groupOffsets[i + 1];\n      if (!parentGroupVisible) {\n        continue;\n      }\n      callback(groupTop, i, group, firstGroup, nextOffset - groupTop);\n    }\n  }\n\n  _forEachGroupInViewport(callback: (arg0: number, arg1: number, arg2: Group, arg3: boolean, arg4: number) => void):\n      void {\n    const top = this._chartViewport.scrollOffset();\n    this._forEachGroup((groupTop, index, group, firstGroup, height) => {\n      if (groupTop - group.style.padding > top + this._offsetHeight) {\n        return;\n      }\n      if (groupTop + height < top) {\n        return;\n      }\n      callback(groupTop, index, group, firstGroup, height);\n    });\n  }\n\n  _labelWidthForGroup(context: CanvasRenderingContext2D, group: Group): number {\n    return UI.UIUtils.measureTextWidth(context, group.name) +\n        this._expansionArrowIndent * (group.style.nestingLevel + 1) + 2 * this._headerLabelXPadding;\n  }\n\n  _drawCollapsedOverviewForGroup(group: Group, y: number, endLevel: number): void {\n    const range = new Common.SegmentedRange.SegmentedRange(mergeCallback);\n    const timeWindowLeft = this._chartViewport.windowLeftTime();\n    const timeWindowRight = this._chartViewport.windowRightTime();\n    const context = (this._canvas.getContext('2d') as CanvasRenderingContext2D);\n    const barHeight = group.style.height;\n    if (!this._rawTimelineData) {\n      return;\n    }\n    const entryStartTimes = this._rawTimelineData.entryStartTimes;\n    const entryTotalTimes = this._rawTimelineData.entryTotalTimes;\n    const timeToPixel = this._chartViewport.timeToPixel();\n\n    for (let level = group.startLevel; level < endLevel; ++level) {\n      const levelIndexes: number[] = this._timelineLevels ? this._timelineLevels[level] : [];\n      const rightIndexOnLevel =\n          Platform.ArrayUtilities.lowerBound(\n              levelIndexes, timeWindowRight, (time, entryIndex) => time - entryStartTimes[entryIndex]) -\n          1;\n      let lastDrawOffset: number = Infinity;\n\n      for (let entryIndexOnLevel = rightIndexOnLevel; entryIndexOnLevel >= 0; --entryIndexOnLevel) {\n        const entryIndex = levelIndexes[entryIndexOnLevel];\n        const entryStartTime = entryStartTimes[entryIndex];\n        const barX = this._timeToPositionClipped(entryStartTime);\n        const entryEndTime = entryStartTime + entryTotalTimes[entryIndex];\n        if (isNaN(entryEndTime) || barX >= lastDrawOffset) {\n          continue;\n        }\n        if (entryEndTime <= timeWindowLeft) {\n          break;\n        }\n        lastDrawOffset = barX;\n        const color = this._entryColorsCache ? this._entryColorsCache[entryIndex] : '';\n        const endBarX = this._timeToPositionClipped(entryEndTime);\n        if (group.style.useDecoratorsForOverview && this._dataProvider.forceDecoration(entryIndex)) {\n          const unclippedBarX = this._chartViewport.timeToPosition(entryStartTime);\n          const barWidth = endBarX - barX;\n          context.beginPath();\n          context.fillStyle = color;\n          context.fillRect(barX, y, barWidth, barHeight - 1);\n          this._dataProvider.decorateEntry(\n              entryIndex, context, '', barX, y, barWidth, barHeight, unclippedBarX, timeToPixel);\n          continue;\n        }\n        range.append(new Common.SegmentedRange.Segment(barX, endBarX, color));\n      }\n    }\n\n    const segments = range.segments().slice().sort((a, b) => a.data.localeCompare(b.data));\n    let lastColor;\n    context.beginPath();\n    for (let i = 0; i < segments.length; ++i) {\n      const segment = segments[i];\n      if (lastColor !== segments[i].data) {\n        context.fill();\n        context.beginPath();\n        lastColor = segments[i].data;\n        context.fillStyle = lastColor;\n      }\n      context.rect(segment.begin, y, segment.end - segment.begin, barHeight);\n    }\n    context.fill();\n\n    function mergeCallback(\n        a: Common.SegmentedRange.Segment, b: Common.SegmentedRange.Segment): Common.SegmentedRange.Segment|null {\n      return a.data === b.data && a.end + 0.4 > b.end ? a : null;\n    }\n  }\n\n  _drawFlowEvents(context: CanvasRenderingContext2D, _width: number, _height: number): void {\n    context.save();\n    const ratio = window.devicePixelRatio;\n    const top = this._chartViewport.scrollOffset();\n    const arrowWidth = 6;\n    context.scale(ratio, ratio);\n    context.translate(0, -top);\n\n    context.fillStyle = '#7f5050';\n    context.strokeStyle = '#7f5050';\n    const td = this._timelineData();\n    if (!td) {\n      return;\n    }\n\n    const endIndex = Platform.ArrayUtilities.lowerBound(\n        td.flowStartTimes, this._chartViewport.windowRightTime(), Platform.ArrayUtilities.DEFAULT_COMPARATOR);\n\n    context.lineWidth = 0.5;\n    for (let i = 0; i < endIndex; ++i) {\n      if (!td.flowEndTimes[i] || td.flowEndTimes[i] < this._chartViewport.windowLeftTime()) {\n        continue;\n      }\n      const startX = this._chartViewport.timeToPosition(td.flowStartTimes[i]);\n      const endX = this._chartViewport.timeToPosition(td.flowEndTimes[i]);\n      const startLevel = td.flowStartLevels[i];\n      const endLevel = td.flowEndLevels[i];\n      const startY = this._levelToOffset(startLevel) + this._levelHeight(startLevel) / 2;\n      const endY = this._levelToOffset(endLevel) + this._levelHeight(endLevel) / 2;\n\n      const segment = Math.min((endX - startX) / 4, 40);\n      const distanceTime = td.flowEndTimes[i] - td.flowStartTimes[i];\n      const distanceY = (endY - startY) / 10;\n      const spread = 30;\n      const lineY = distanceTime < 1 ? startY : spread + Math.max(0, startY + distanceY * (i % spread));\n\n      const p = [];\n      p.push({x: startX, y: startY});\n      p.push({x: startX + arrowWidth, y: startY});\n      p.push({x: startX + segment + 2 * arrowWidth, y: startY});\n      p.push({x: startX + segment, y: lineY});\n      p.push({x: startX + segment * 2, y: lineY});\n      p.push({x: endX - segment * 2, y: lineY});\n      p.push({x: endX - segment, y: lineY});\n      p.push({x: endX - segment - 2 * arrowWidth, y: endY});\n      p.push({x: endX - arrowWidth, y: endY});\n\n      context.beginPath();\n      context.moveTo(p[0].x, p[0].y);\n      context.lineTo(p[1].x, p[1].y);\n      context.bezierCurveTo(p[2].x, p[2].y, p[3].x, p[3].y, p[4].x, p[4].y);\n      context.lineTo(p[5].x, p[5].y);\n      context.bezierCurveTo(p[6].x, p[6].y, p[7].x, p[7].y, p[8].x, p[8].y);\n      context.stroke();\n\n      context.beginPath();\n      context.arc(startX, startY, 2, -Math.PI / 2, Math.PI / 2, false);\n      context.fill();\n\n      context.beginPath();\n      context.moveTo(endX, endY);\n      context.lineTo(endX - arrowWidth, endY - 3);\n      context.lineTo(endX - arrowWidth, endY + 3);\n      context.fill();\n    }\n    context.restore();\n  }\n\n  _drawMarkers(): void {\n    const timelineData = this._timelineData();\n    if (!timelineData) {\n      return;\n    }\n    const markers = timelineData.markers;\n    const left = this._markerIndexBeforeTime(this.minimumBoundary());\n    const rightBoundary = this.maximumBoundary();\n    const timeToPixel = this._chartViewport.timeToPixel();\n\n    const context = (this._canvas.getContext('2d') as CanvasRenderingContext2D);\n    context.save();\n    const ratio = window.devicePixelRatio;\n    context.scale(ratio, ratio);\n    context.translate(0, 3);\n    const height = HeaderHeight - 1;\n    for (let i = left; i < markers.length; i++) {\n      const timestamp = markers[i].startTime();\n      if (timestamp > rightBoundary) {\n        break;\n      }\n      markers[i].draw(context, this._chartViewport.timeToPosition(timestamp), height, timeToPixel);\n    }\n    context.restore();\n  }\n\n  _updateMarkerHighlight(): void {\n    const element = this._markerHighlighElement;\n    if (element.parentElement) {\n      element.remove();\n    }\n    const markerIndex = this._highlightedMarkerIndex;\n    if (markerIndex === -1) {\n      return;\n    }\n    const timelineData = this._timelineData();\n    if (!timelineData) {\n      return;\n    }\n    const marker = timelineData.markers[markerIndex];\n    const barX = this._timeToPositionClipped(marker.startTime());\n    UI.Tooltip.Tooltip.install(element, marker.title() || '');\n    const style = element.style;\n    style.left = barX + 'px';\n    style.backgroundColor = marker.color();\n    this._viewportElement.appendChild(element);\n  }\n\n  _processTimelineData(timelineData: TimelineData|null): void {\n    if (!timelineData) {\n      this._timelineLevels = null;\n      this._visibleLevelOffsets = null;\n      this._visibleLevels = null;\n      this._groupOffsets = null;\n      this._rawTimelineData = null;\n      this._forceDecorationCache = null;\n      this._entryColorsCache = null;\n      this._rawTimelineDataLength = 0;\n      this._selectedGroup = -1;\n      this._keyboardFocusedGroup = -1;\n      this._flameChartDelegate.updateSelectedGroup(this, null);\n      return;\n    }\n\n    this._rawTimelineData = timelineData;\n    this._rawTimelineDataLength = timelineData.entryStartTimes.length;\n    this._forceDecorationCache = new Int8Array(this._rawTimelineDataLength);\n    this._entryColorsCache = new Array(this._rawTimelineDataLength);\n    for (let i = 0; i < this._rawTimelineDataLength; ++i) {\n      this._forceDecorationCache[i] = this._dataProvider.forceDecoration(i) ? 1 : 0;\n      this._entryColorsCache[i] = this._dataProvider.entryColor(i);\n    }\n\n    const entryCounters = new Uint32Array(this._dataProvider.maxStackDepth() + 1);\n    for (let i = 0; i < timelineData.entryLevels.length; ++i) {\n      ++entryCounters[timelineData.entryLevels[i]];\n    }\n    const levelIndexes = new Array(entryCounters.length);\n    for (let i = 0; i < levelIndexes.length; ++i) {\n      levelIndexes[i] = new Uint32Array(entryCounters[i]);\n      entryCounters[i] = 0;\n    }\n\n    for (let i = 0; i < timelineData.entryLevels.length; ++i) {\n      const level = timelineData.entryLevels[i];\n      levelIndexes[level][entryCounters[level]++] = i;\n    }\n    this._timelineLevels = levelIndexes;\n    const groups = this._rawTimelineData.groups || [];\n    for (let i = 0; i < groups.length; ++i) {\n      const expanded = this._groupExpansionState[groups[i].name];\n      if (expanded !== undefined) {\n        groups[i].expanded = expanded;\n      }\n    }\n    this._updateLevelPositions();\n    this._updateHeight();\n\n    this._selectedGroup = timelineData.selectedGroup ? groups.indexOf(timelineData.selectedGroup) : -1;\n    this._keyboardFocusedGroup = this._selectedGroup;\n    this._flameChartDelegate.updateSelectedGroup(this, timelineData.selectedGroup);\n  }\n\n  _updateLevelPositions(): void {\n    const levelCount = this._dataProvider.maxStackDepth();\n    const groups = this._rawTimelineData ? (this._rawTimelineData.groups || []) : [];\n    this._visibleLevelOffsets = new Uint32Array(levelCount + 1);\n    this._visibleLevelHeights = new Uint32Array(levelCount);\n    this._visibleLevels = new Uint16Array(levelCount);\n    this._groupOffsets = new Uint32Array(groups.length + 1);\n\n    let groupIndex = -1;\n    let currentOffset = this._rulerEnabled ? HeaderHeight + 2 : 2;\n    let visible = true;\n    const groupStack: {\n      nestingLevel: number,\n      visible: boolean,\n    }[] = [{nestingLevel: -1, visible: true}];\n    const lastGroupLevel =\n        Math.max(levelCount, groups.length ? (groups[groups.length - 1] as Group).startLevel + 1 : 0);\n    let level;\n    for (level = 0; level < lastGroupLevel; ++level) {\n      let parentGroupIsVisible = true;\n      let style;\n      while (groupIndex < groups.length - 1 && level === groups[groupIndex + 1].startLevel) {\n        ++groupIndex;\n        style = groups[groupIndex].style;\n        let nextLevel = true;\n        let last: {\n          nestingLevel: number,\n          visible: boolean,\n        } = groupStack[groupStack.length - 1];\n        while (last && last.nestingLevel >= style.nestingLevel) {\n          groupStack.pop();\n          nextLevel = false;\n          last = groupStack[groupStack.length - 1];\n        }\n        const thisGroupIsVisible =\n            groupIndex >= 0 && this._isGroupCollapsible(groupIndex) ? groups[groupIndex].expanded : true;\n\n        last = groupStack[groupStack.length - 1];\n        parentGroupIsVisible = last ? last.visible : false;\n        visible = Boolean(thisGroupIsVisible) && parentGroupIsVisible;\n        groupStack.push({nestingLevel: style.nestingLevel, visible: visible});\n        if (parentGroupIsVisible) {\n          currentOffset += nextLevel ? 0 : style.padding;\n        }\n        this._groupOffsets[groupIndex] = currentOffset;\n        if (parentGroupIsVisible && !style.shareHeaderLine) {\n          currentOffset += style.height;\n        }\n      }\n      if (level >= levelCount) {\n        continue;\n      }\n      const isFirstOnLevel = groupIndex >= 0 && level === groups[groupIndex].startLevel;\n      const thisLevelIsVisible =\n          parentGroupIsVisible && (visible || isFirstOnLevel && groups[groupIndex].style.useFirstLineForOverview);\n      let height;\n      if (groupIndex >= 0) {\n        const group = groups[groupIndex];\n        const styleB = group.style;\n        height = isFirstOnLevel && !styleB.shareHeaderLine || (styleB.collapsible && !group.expanded) ?\n            styleB.height :\n            (styleB.itemsHeight || this._barHeight);\n      } else {\n        height = this._barHeight;\n      }\n      this._visibleLevels[level] = thisLevelIsVisible ? 1 : 0;\n      this._visibleLevelOffsets[level] = currentOffset;\n      this._visibleLevelHeights[level] = height;\n      if (thisLevelIsVisible || (parentGroupIsVisible && style && style.shareHeaderLine && isFirstOnLevel)) {\n        currentOffset += this._visibleLevelHeights[level];\n      }\n    }\n    if (groupIndex >= 0) {\n      this._groupOffsets[groupIndex + 1] = currentOffset;\n    }\n    this._visibleLevelOffsets[level] = currentOffset;\n    if (this._useWebGL) {\n      this._setupGLGeometry();\n    }\n  }\n\n  _isGroupCollapsible(index: number): boolean|undefined {\n    if (!this._rawTimelineData) {\n      return;\n    }\n\n    const groups = this._rawTimelineData.groups || [];\n    const style = groups[index].style;\n    if (!style.shareHeaderLine || !style.collapsible) {\n      return Boolean(style.collapsible);\n    }\n    const isLastGroup = index + 1 >= groups.length;\n    if (!isLastGroup && groups[index + 1].style.nestingLevel > style.nestingLevel) {\n      return true;\n    }\n    const nextGroupLevel = isLastGroup ? this._dataProvider.maxStackDepth() : groups[index + 1].startLevel;\n    if (nextGroupLevel !== groups[index].startLevel + 1) {\n      return true;\n    }\n    // For groups that only have one line and share header line, pretend these are not collapsible\n    // unless the itemsHeight does not match the headerHeight\n    return style.height !== style.itemsHeight;\n  }\n\n  setSelectedEntry(entryIndex: number): void {\n    if (this._selectedEntryIndex === entryIndex) {\n      return;\n    }\n    if (entryIndex !== -1) {\n      this._chartViewport.hideRangeSelection();\n    }\n    this._selectedEntryIndex = entryIndex;\n    this._revealEntry(entryIndex);\n    this._updateElementPosition(this._selectedElement, this._selectedEntryIndex);\n  }\n\n  _updateElementPosition(element: Element, entryIndex: number): void {\n    const elementMinWidthPx = 2;\n    element.classList.add('hidden');\n    if (entryIndex === -1) {\n      return;\n    }\n    const timelineData = this._timelineData();\n    if (!timelineData) {\n      return;\n    }\n\n    const startTime = timelineData.entryStartTimes[entryIndex];\n    const duration = timelineData.entryTotalTimes[entryIndex];\n    let barX = 0;\n    let barWidth = 0;\n    let visible = true;\n    if (Number.isNaN(duration)) {\n      const position = this._markerPositions.get(entryIndex);\n      if (position) {\n        barX = position.x;\n        barWidth = position.width;\n      } else {\n        visible = false;\n      }\n    } else {\n      barX = this._chartViewport.timeToPosition(startTime);\n      barWidth = duration * this._chartViewport.timeToPixel();\n    }\n    if (barX + barWidth <= 0 || barX >= this._offsetWidth) {\n      return;\n    }\n    const barCenter = barX + barWidth / 2;\n    barWidth = Math.max(barWidth, elementMinWidthPx);\n    barX = barCenter - barWidth / 2;\n    const entryLevel = timelineData.entryLevels[entryIndex];\n    const barY = this._levelToOffset(entryLevel) - this._chartViewport.scrollOffset();\n    const barHeight = this._levelHeight(entryLevel);\n    const style = (element as HTMLElement).style;\n    style.left = barX + 'px';\n    style.top = barY + 'px';\n    style.width = barWidth + 'px';\n    style.height = barHeight - 1 + 'px';\n    element.classList.toggle('hidden', !visible);\n    this._viewportElement.appendChild(element);\n  }\n\n  _timeToPositionClipped(time: number): number {\n    return Platform.NumberUtilities.clamp(this._chartViewport.timeToPosition(time), 0, this._offsetWidth);\n  }\n\n  _levelToOffset(level: number): number {\n    if (!this._visibleLevelOffsets) {\n      throw new Error('No visible level offsets');\n    }\n    return this._visibleLevelOffsets[level];\n  }\n\n  _levelHeight(level: number): number {\n    if (!this._visibleLevelHeights) {\n      throw new Error('No visible level heights');\n    }\n    return this._visibleLevelHeights[level];\n  }\n\n  _updateBoundaries(): void {\n    this._totalTime = this._dataProvider.totalTime();\n    this._minimumBoundary = this._dataProvider.minimumBoundary();\n    this._chartViewport.setBoundaries(this._minimumBoundary, this._totalTime);\n  }\n\n  _updateHeight(): void {\n    const height = this._levelToOffset(this._dataProvider.maxStackDepth()) + 2;\n    this._chartViewport.setContentHeight(height);\n  }\n\n  onResize(): void {\n    this.scheduleUpdate();\n  }\n\n  update(): void {\n    if (!this._timelineData()) {\n      return;\n    }\n    this._resetCanvas();\n    this._updateHeight();\n    this._updateBoundaries();\n    this._draw();\n    if (!this._chartViewport.isDragging()) {\n      this._updateHighlight();\n    }\n  }\n\n  reset(): void {\n    this._chartViewport.reset();\n    this._rawTimelineData = null;\n    this._rawTimelineDataLength = 0;\n    this._highlightedMarkerIndex = -1;\n    this._highlightedEntryIndex = -1;\n    this._selectedEntryIndex = -1;\n    /** @type {!Map<string,!Map<string,number>>} */\n    this._textWidth = new Map();\n    this._chartViewport.scheduleUpdate();\n  }\n\n  scheduleUpdate(): void {\n    this._chartViewport.scheduleUpdate();\n  }\n\n  _enabled(): boolean {\n    return this._rawTimelineDataLength !== 0;\n  }\n\n  computePosition(time: number): number {\n    return this._chartViewport.timeToPosition(time);\n  }\n\n  formatValue(value: number, precision?: number): string {\n    return this._dataProvider.formatValue(value - this.zeroTime(), precision);\n  }\n\n  maximumBoundary(): number {\n    return this._chartViewport.windowRightTime();\n  }\n\n  minimumBoundary(): number {\n    return this._chartViewport.windowLeftTime();\n  }\n\n  zeroTime(): number {\n    return this._dataProvider.minimumBoundary();\n  }\n\n  boundarySpan(): number {\n    return this.maximumBoundary() - this.minimumBoundary();\n  }\n}\n\nexport const HeaderHeight = 15;\nexport const MinimalTimeWindowMs = 0.5;\n\nexport class TimelineData {\n  entryLevels: number[]|Uint16Array;\n  entryTotalTimes: number[]|Float32Array;\n  entryStartTimes: number[]|Float64Array;\n  groups: Group[];\n  markers: FlameChartMarker[];\n  flowStartTimes: number[];\n  flowStartLevels: number[];\n  flowEndTimes: number[];\n  flowEndLevels: number[];\n  selectedGroup: Group|null;\n  constructor(\n      entryLevels: number[]|Uint16Array, entryTotalTimes: number[]|Float32Array, entryStartTimes: number[]|Float64Array,\n      groups: Group[]|null) {\n    this.entryLevels = entryLevels;\n    this.entryTotalTimes = entryTotalTimes;\n    this.entryStartTimes = entryStartTimes;\n    this.groups = groups || [];\n    this.markers = [];\n    this.flowStartTimes = [];\n    this.flowStartLevels = [];\n    this.flowEndTimes = [];\n    this.flowEndLevels = [];\n    this.selectedGroup = null;\n  }\n}\n\n/**\n * @interface\n */\nexport interface FlameChartDataProvider {\n  minimumBoundary(): number;\n\n  totalTime(): number;\n\n  formatValue(value: number, precision?: number): string;\n\n  maxStackDepth(): number;\n\n  timelineData(): TimelineData|null;\n\n  prepareHighlightedEntryInfo(entryIndex: number): Element|null;\n\n  canJumpToEntry(entryIndex: number): boolean;\n\n  entryTitle(entryIndex: number): string|null;\n\n  entryFont(entryIndex: number): string|null;\n\n  entryColor(entryIndex: number): string;\n\n  decorateEntry(\n      entryIndex: number, context: CanvasRenderingContext2D, text: string|null, barX: number, barY: number,\n      barWidth: number, barHeight: number, unclippedBarX: number, timeToPixelRatio: number): boolean;\n\n  forceDecoration(entryIndex: number): boolean;\n\n  textColor(entryIndex: number): string;\n\n  navStartTimes(): Map<string, SDK.TracingModel.Event>;\n}\n\nexport interface FlameChartMarker {\n  startTime(): number;\n  color(): string;\n  title(): string|null;\n  draw(context: CanvasRenderingContext2D, x: number, height: number, pixelsPerMillisecond: number): void;\n}\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum Events {\n  CanvasFocused = 'CanvasFocused',\n  EntryInvoked = 'EntryInvoked',\n  EntrySelected = 'EntrySelected',\n  EntryHighlighted = 'EntryHighlighted',\n}\n\nexport const Colors = {\n  SelectedGroupBackground: 'hsl(215, 85%, 98%)',\n  SelectedGroupBorder: 'hsl(216, 68%, 54%)',\n};\nexport interface Group {\n  name: Common.UIString.LocalizedString;\n  startLevel: number;\n  expanded?: boolean;\n  selectable?: boolean;\n  style: {\n    height: number,\n    padding: number,\n    collapsible: boolean,\n    font: string,\n    color: string,\n    backgroundColor: string,\n    nestingLevel: number,\n    itemsHeight?: number,\n    shareHeaderLine?: boolean,\n    useFirstLineForOverview?: boolean,\n    useDecoratorsForOverview?: boolean,\n  };\n  track?: TimelineModel.TimelineModel.Track|null;\n}\nexport interface GroupStyle {\n  height: number;\n  padding: number;\n  collapsible: boolean;\n  font: string;\n  color: string;\n  backgroundColor: string;\n  nestingLevel: number;\n  itemsHeight?: number;\n  shareHeaderLine?: boolean;\n  useFirstLineForOverview?: boolean;\n  useDecoratorsForOverview?: boolean;\n}\n"]}