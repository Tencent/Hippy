{"version":3,"file":"XMLView.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/source_frame/XMLView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2014 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as TextUtils from '../../../../models/text_utils/text_utils.js';\nimport * as UI from '../../legacy.js';\n\nconst UIStrings = {\n  /**\n  *@description Text to find an item\n  */\n  find: 'Find',\n};\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/source_frame/XMLView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class XMLView extends UI.Widget.Widget implements UI.SearchableView.Searchable {\n  _treeOutline: UI.TreeOutline.TreeOutlineInShadow;\n  _searchableView!: UI.SearchableView.SearchableView|null;\n  _currentSearchFocusIndex: number;\n  _currentSearchTreeElements: XMLViewNode[];\n  _searchConfig!: UI.SearchableView.SearchConfig|null;\n\n  constructor(parsedXML: Document) {\n    super(true);\n    this.registerRequiredCSS('ui/legacy/components/source_frame/xmlView.css', {enableLegacyPatching: false});\n    this.contentElement.classList.add('shadow-xml-view', 'source-code');\n    this._treeOutline = new UI.TreeOutline.TreeOutlineInShadow();\n    this._treeOutline.registerRequiredCSS(\n        'ui/legacy/components/source_frame/xmlTree.css', {enableLegacyPatching: false});\n    this.contentElement.appendChild(this._treeOutline.element);\n    this._currentSearchFocusIndex = 0;\n    this._currentSearchTreeElements = [];\n\n    XMLViewNode.populate(this._treeOutline, parsedXML, this);\n    const firstChild = this._treeOutline.firstChild();\n    if (firstChild) {\n      firstChild.select(true /* omitFocus */, false /* selectedByUser */);\n    }\n  }\n\n  static createSearchableView(parsedXML: Document): UI.SearchableView.SearchableView {\n    const xmlView = new XMLView(parsedXML);\n    const searchableView = new UI.SearchableView.SearchableView(xmlView, null);\n    searchableView.setPlaceholder(i18nString(UIStrings.find));\n    xmlView._searchableView = searchableView;\n    xmlView.show(searchableView.element);\n    return searchableView;\n  }\n\n  static parseXML(text: string, mimeType: string): Document|null {\n    let parsedXML;\n    try {\n      switch (mimeType) {\n        case 'application/xhtml+xml':\n        case 'application/xml':\n        case 'image/svg+xml':\n        case 'text/html':\n        case 'text/xml':\n          parsedXML = (new DOMParser()).parseFromString(text, mimeType);\n      }\n    } catch (e) {\n      return null;\n    }\n    if (!parsedXML || parsedXML.body) {\n      return null;\n    }\n    return parsedXML;\n  }\n\n  _jumpToMatch(index: number, shouldJump: boolean): void {\n    if (!this._searchConfig) {\n      return;\n    }\n    const regex = this._searchConfig.toSearchRegex(true);\n    const previousFocusElement = this._currentSearchTreeElements[this._currentSearchFocusIndex];\n    if (previousFocusElement) {\n      previousFocusElement.setSearchRegex(regex);\n    }\n\n    const newFocusElement = this._currentSearchTreeElements[index];\n    if (newFocusElement) {\n      this._updateSearchIndex(index);\n      if (shouldJump) {\n        newFocusElement.reveal(true);\n      }\n      newFocusElement.setSearchRegex(regex, UI.UIUtils.highlightedCurrentSearchResultClassName);\n    } else {\n      this._updateSearchIndex(0);\n    }\n  }\n\n  _updateSearchCount(count: number): void {\n    if (!this._searchableView) {\n      return;\n    }\n    this._searchableView.updateSearchMatchesCount(count);\n  }\n\n  _updateSearchIndex(index: number): void {\n    this._currentSearchFocusIndex = index;\n    if (!this._searchableView) {\n      return;\n    }\n    this._searchableView.updateCurrentMatchIndex(index);\n  }\n\n  _innerPerformSearch(shouldJump: boolean, jumpBackwards?: boolean): void {\n    if (!this._searchConfig) {\n      return;\n    }\n    let newIndex: number = this._currentSearchFocusIndex;\n    const previousSearchFocusElement = this._currentSearchTreeElements[newIndex];\n    this._innerSearchCanceled();\n    this._currentSearchTreeElements = [];\n    const regex = this._searchConfig.toSearchRegex(true);\n\n    for (let element: (UI.TreeOutline.TreeElement|null) =\n             (this._treeOutline.rootElement() as UI.TreeOutline.TreeElement | null);\n         element; element = element.traverseNextTreeElement(false)) {\n      if (!(element instanceof XMLViewNode)) {\n        continue;\n      }\n      const hasMatch = element.setSearchRegex(regex);\n      if (hasMatch) {\n        this._currentSearchTreeElements.push(element);\n      }\n      if (previousSearchFocusElement === element) {\n        const currentIndex = this._currentSearchTreeElements.length - 1;\n        if (hasMatch || jumpBackwards) {\n          newIndex = currentIndex;\n        } else {\n          newIndex = currentIndex + 1;\n        }\n      }\n    }\n    this._updateSearchCount(this._currentSearchTreeElements.length);\n\n    if (!this._currentSearchTreeElements.length) {\n      this._updateSearchIndex(0);\n      return;\n    }\n    newIndex = Platform.NumberUtilities.mod(newIndex, this._currentSearchTreeElements.length);\n\n    this._jumpToMatch(newIndex, shouldJump);\n  }\n\n  _innerSearchCanceled(): void {\n    for (let element: (UI.TreeOutline.TreeElement|null) =\n             (this._treeOutline.rootElement() as UI.TreeOutline.TreeElement | null);\n         element; element = element.traverseNextTreeElement(false)) {\n      if (!(element instanceof XMLViewNode)) {\n        continue;\n      }\n      element.revertHighlightChanges();\n    }\n    this._updateSearchCount(0);\n    this._updateSearchIndex(0);\n  }\n\n  searchCanceled(): void {\n    this._searchConfig = null;\n    this._currentSearchTreeElements = [];\n    this._innerSearchCanceled();\n  }\n\n  performSearch(searchConfig: UI.SearchableView.SearchConfig, shouldJump: boolean, jumpBackwards?: boolean): void {\n    this._searchConfig = searchConfig;\n    this._innerPerformSearch(shouldJump, jumpBackwards);\n  }\n\n  jumpToNextSearchResult(): void {\n    if (!this._currentSearchTreeElements.length) {\n      return;\n    }\n\n    const newIndex =\n        Platform.NumberUtilities.mod(this._currentSearchFocusIndex + 1, this._currentSearchTreeElements.length);\n    this._jumpToMatch(newIndex, true);\n  }\n\n  jumpToPreviousSearchResult(): void {\n    if (!this._currentSearchTreeElements.length) {\n      return;\n    }\n\n    const newIndex =\n        Platform.NumberUtilities.mod(this._currentSearchFocusIndex - 1, this._currentSearchTreeElements.length);\n    this._jumpToMatch(newIndex, true);\n  }\n\n  supportsCaseSensitiveSearch(): boolean {\n    return true;\n  }\n\n  supportsRegexSearch(): boolean {\n    return true;\n  }\n}\n\nexport class XMLViewNode extends UI.TreeOutline.TreeElement {\n  _node: Node|ParentNode;\n  _closeTag: boolean;\n  _highlightChanges: UI.UIUtils.HighlightChange[];\n  _xmlView: XMLView;\n\n  constructor(node: Node|ParentNode, closeTag: boolean, xmlView: XMLView) {\n    super('', !closeTag && 'childElementCount' in node && Boolean(node.childElementCount));\n    this._node = node;\n    this._closeTag = closeTag;\n    this.selectable = true;\n    this._highlightChanges = [];\n    this._xmlView = xmlView;\n    this._updateTitle();\n  }\n\n  static populate(\n      root: UI.TreeOutline.TreeOutline|UI.TreeOutline.TreeElement, xmlNode: Node|ParentNode, xmlView: XMLView): void {\n    if (!(xmlNode instanceof Node)) {\n      return;\n    }\n    let node: (ChildNode|null) = xmlNode.firstChild;\n    while (node) {\n      const currentNode = node;\n      node = node.nextSibling;\n      const nodeType = currentNode.nodeType;\n      // ignore empty TEXT\n      if (nodeType === 3 && currentNode.nodeValue && currentNode.nodeValue.match(/\\s+/)) {\n        continue;\n      }\n      // ignore ATTRIBUTE, ENTITY_REFERENCE, ENTITY, DOCUMENT, DOCUMENT_TYPE, DOCUMENT_FRAGMENT, NOTATION\n      if ((nodeType !== 1) && (nodeType !== 3) && (nodeType !== 4) && (nodeType !== 7) && (nodeType !== 8)) {\n        continue;\n      }\n      root.appendChild(new XMLViewNode(currentNode, false, xmlView));\n    }\n  }\n\n  setSearchRegex(regex: RegExp|null, additionalCssClassName?: string): boolean {\n    this.revertHighlightChanges();\n    if (!regex) {\n      return false;\n    }\n    if (this._closeTag && this.parent && !this.parent.expanded) {\n      return false;\n    }\n    regex.lastIndex = 0;\n    let cssClasses = UI.UIUtils.highlightedSearchResultClassName;\n    if (additionalCssClassName) {\n      cssClasses += ' ' + additionalCssClassName;\n    }\n    if (!this.listItemElement.textContent) {\n      return false;\n    }\n    const content = this.listItemElement.textContent.replace(/\\xA0/g, ' ');\n    let match = regex.exec(content);\n    const ranges = [];\n    while (match) {\n      ranges.push(new TextUtils.TextRange.SourceRange(match.index, match[0].length));\n      match = regex.exec(content);\n    }\n    if (ranges.length) {\n      UI.UIUtils.highlightRangesWithStyleClass(this.listItemElement, ranges, cssClasses, this._highlightChanges);\n    }\n    return Boolean(this._highlightChanges.length);\n  }\n\n  revertHighlightChanges(): void {\n    UI.UIUtils.revertDomChanges(this._highlightChanges);\n    this._highlightChanges = [];\n  }\n\n  _updateTitle(): void {\n    const node = this._node;\n    if (!('nodeType' in node)) {\n      return;\n    }\n    switch (node.nodeType) {\n      case 1: {  // ELEMENT\n        if (node instanceof Element) {\n          const tag = node.tagName;\n          if (this._closeTag) {\n            this._setTitle(['</' + tag + '>', 'shadow-xml-view-tag']);\n            return;\n          }\n          const titleItems = ['<' + tag, 'shadow-xml-view-tag'];\n          const attributes = node.attributes;\n          for (let i = 0; i < attributes.length; ++i) {\n            const attributeNode = attributes.item(i);\n            if (!attributeNode) {\n              return;\n            }\n            titleItems.push(\n                '\\xA0', 'shadow-xml-view-tag', attributeNode.name, 'shadow-xml-view-attribute-name', '=\"',\n                'shadow-xml-view-tag', attributeNode.value, 'shadow-xml-view-attribute-value', '\"',\n                'shadow-xml-view-tag');\n          }\n          if (!this.expanded) {\n            if (node.childElementCount) {\n              titleItems.push(\n                  '>', 'shadow-xml-view-tag', '…', 'shadow-xml-view-comment', '</' + tag, 'shadow-xml-view-tag');\n            } else if (node.textContent) {\n              titleItems.push(\n                  '>', 'shadow-xml-view-tag', node.textContent, 'shadow-xml-view-text', '</' + tag,\n                  'shadow-xml-view-tag');\n            } else {\n              titleItems.push(' /', 'shadow-xml-view-tag');\n            }\n          }\n          titleItems.push('>', 'shadow-xml-view-tag');\n          this._setTitle(titleItems);\n          return;\n        }\n        return;\n      }\n      case 3: {  // TEXT\n        if (node.nodeValue) {\n          this._setTitle([node.nodeValue, 'shadow-xml-view-text']);\n        }\n        return;\n      }\n      case 4: {  // CDATA\n        if (node.nodeValue) {\n          this._setTitle([\n            '<![CDATA[',\n            'shadow-xml-view-cdata',\n            node.nodeValue,\n            'shadow-xml-view-text',\n            ']]>',\n            'shadow-xml-view-cdata',\n          ]);\n        }\n        return;\n      }\n      case 7: {  // PROCESSING_INSTRUCTION\n        if (node.nodeValue) {\n          this._setTitle(\n              ['<?' + node.nodeName + ' ' + node.nodeValue + '?>', 'shadow-xml-view-processing-instruction']);\n        }\n        return;\n      }\n      case 8: {  // COMMENT\n        this._setTitle(['<!--' + node.nodeValue + '-->', 'shadow-xml-view-comment']);\n        return;\n      }\n    }\n  }\n\n  _setTitle(items: string[]): void {\n    const titleFragment = document.createDocumentFragment();\n    for (let i = 0; i < items.length; i += 2) {\n      titleFragment.createChild('span', items[i + 1]).textContent = items[i];\n    }\n    this.title = titleFragment;\n    this._xmlView._innerPerformSearch(false, false);\n  }\n\n  onattach(): void {\n    this.listItemElement.classList.toggle('shadow-xml-view-close-tag', this._closeTag);\n  }\n\n  onexpand(): void {\n    this._updateTitle();\n  }\n\n  oncollapse(): void {\n    this._updateTitle();\n  }\n\n  async onpopulate(): Promise<void> {\n    XMLViewNode.populate(this, this._node, this._xmlView);\n    this.appendChild(new XMLViewNode(this._node, true, this._xmlView));\n  }\n}\n"]}