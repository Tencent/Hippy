{"version":3,"file":"Toolbar.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/Toolbar.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2009 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Root from '../../core/root/root.js';\n\nimport type {Action} from './ActionRegistration.js';\nimport {Events as ActionEvents} from './ActionRegistration.js';  // eslint-disable-line no-unused-vars\nimport {ActionRegistry} from './ActionRegistry.js';\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {ContextMenu} from './ContextMenu.js';\nimport {GlassPane, PointerEventsBehavior} from './GlassPane.js';\nimport {Icon} from './Icon.js';\nimport {bindCheckbox} from './SettingsUI.js';\nimport type {Suggestion} from './SuggestBox.js';\nimport {Events as TextPromptEvents, TextPrompt} from './TextPrompt.js';\nimport {Tooltip} from './Tooltip.js';\nimport {CheckboxLabel, LongClickController} from './UIUtils.js';\nimport {createShadowRootWithCoreStyles} from './utils/create-shadow-root-with-core-styles.js';\n\nconst UIStrings = {\n  /**\n  *@description Announced screen reader message for ToolbarSettingToggle when the setting is toggled on.\n  */\n  pressed: 'pressed',\n  /**\n  *@description Announced screen reader message for ToolbarSettingToggle when the setting is toggled off.\n  */\n  notPressed: 'not pressed',\n};\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/Toolbar.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class Toolbar {\n  _items: ToolbarItem[];\n  element: HTMLElement;\n  _enabled: boolean;\n  _shadowRoot: ShadowRoot;\n  _contentElement: Element;\n  _insertionPoint: Element;\n\n  constructor(className: string, parentElement?: Element) {\n    this._items = [];\n    this.element = (parentElement ? parentElement.createChild('div') : document.createElement('div')) as HTMLElement;\n    this.element.className = className;\n    this.element.classList.add('toolbar');\n    this._enabled = true;\n    this._shadowRoot = createShadowRootWithCoreStyles(\n        this.element, {cssFile: 'ui/legacy/toolbar.css', enableLegacyPatching: false, delegatesFocus: undefined});\n    this._contentElement = this._shadowRoot.createChild('div', 'toolbar-shadow');\n    this._insertionPoint = this._contentElement.createChild('slot');\n  }\n\n  static createLongPressActionButton(\n      action: Action, toggledOptions: ToolbarButton[], untoggledOptions: ToolbarButton[]): ToolbarButton {\n    const button = Toolbar.createActionButton(action);\n    const mainButtonClone = Toolbar.createActionButton(action);\n\n    let longClickController: LongClickController|null = null;\n    let longClickButtons: ToolbarButton[]|null = null;\n    let longClickGlyph: Icon|null = null;\n\n    action.addEventListener(ActionEvents.Toggled, updateOptions);\n    updateOptions();\n    return button;\n\n    function updateOptions(): void {\n      const buttons = action.toggled() ? (toggledOptions || null) : (untoggledOptions || null);\n\n      if (buttons && buttons.length) {\n        if (!longClickController) {\n          longClickController = new LongClickController(button.element, showOptions);\n          longClickGlyph = Icon.create('largeicon-longclick-triangle', 'long-click-glyph');\n          button.element.appendChild(longClickGlyph);\n          longClickButtons = buttons;\n        }\n      } else {\n        if (longClickController) {\n          longClickController.dispose();\n          longClickController = null;\n          if (longClickGlyph) {\n            longClickGlyph.remove();\n          }\n          longClickGlyph = null;\n          longClickButtons = null;\n        }\n      }\n    }\n\n    function showOptions(): void {\n      let buttons: ToolbarButton[] = longClickButtons ? longClickButtons.slice() : [];\n      buttons.push(mainButtonClone);\n\n      const document = button.element.ownerDocument;\n      document.documentElement.addEventListener('mouseup', mouseUp, false);\n\n      const optionsGlassPane = new GlassPane();\n      optionsGlassPane.setPointerEventsBehavior(PointerEventsBehavior.BlockedByGlassPane);\n      optionsGlassPane.show(document);\n      const optionsBar = new Toolbar('fill', optionsGlassPane.contentElement);\n      optionsBar._contentElement.classList.add('floating');\n      const buttonHeight = 26;\n\n      const hostButtonPosition = button.element.boxInWindow().relativeToElement(GlassPane.container(document));\n\n      const topNotBottom = hostButtonPosition.y + buttonHeight * buttons.length < document.documentElement.offsetHeight;\n\n      if (topNotBottom) {\n        buttons = buttons.reverse();\n      }\n\n      optionsBar.element.style.height = (buttonHeight * buttons.length) + 'px';\n      if (topNotBottom) {\n        optionsBar.element.style.top = (hostButtonPosition.y - 5) + 'px';\n      } else {\n        optionsBar.element.style.top = (hostButtonPosition.y - (buttonHeight * (buttons.length - 1)) - 6) + 'px';\n      }\n      optionsBar.element.style.left = (hostButtonPosition.x - 5) + 'px';\n\n      for (let i = 0; i < buttons.length; ++i) {\n        buttons[i].element.addEventListener('mousemove', mouseOver, false);\n        buttons[i].element.addEventListener('mouseout', mouseOut, false);\n        optionsBar.appendToolbarItem(buttons[i]);\n      }\n      const hostButtonIndex = topNotBottom ? 0 : buttons.length - 1;\n      buttons[hostButtonIndex].element.classList.add('emulate-active');\n\n      function mouseOver(e: Event): void {\n        if ((e as MouseEvent).which !== 1) {\n          return;\n        }\n        if (e.target instanceof HTMLElement) {\n          const buttonElement = e.target.enclosingNodeOrSelfWithClass('toolbar-item');\n          buttonElement.classList.add('emulate-active');\n        }\n      }\n\n      function mouseOut(e: Event): void {\n        if ((e as MouseEvent).which !== 1) {\n          return;\n        }\n        if (e.target instanceof HTMLElement) {\n          const buttonElement = e.target.enclosingNodeOrSelfWithClass('toolbar-item');\n          buttonElement.classList.remove('emulate-active');\n        }\n      }\n\n      function mouseUp(e: Event): void {\n        if ((e as MouseEvent).which !== 1) {\n          return;\n        }\n        optionsGlassPane.hide();\n        document.documentElement.removeEventListener('mouseup', mouseUp, false);\n\n        for (let i = 0; i < buttons.length; ++i) {\n          if (buttons[i].element.classList.contains('emulate-active')) {\n            buttons[i].element.classList.remove('emulate-active');\n            buttons[i]._clicked(e);\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  static createActionButton(action: Action, options: ToolbarButtonOptions|undefined = TOOLBAR_BUTTON_DEFAULT_OPTIONS):\n      ToolbarButton {\n    const button = action.toggleable() ? makeToggle() : makeButton();\n\n    if (options.showLabel) {\n      button.setText(action.title());\n    }\n\n    let handler = (_event: {\n      // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      data: any,\n    }): void => {\n      action.execute();\n    };\n    if (options.userActionCode) {\n      const actionCode = options.userActionCode;\n      handler = (): void => {\n        Host.userMetrics.actionTaken(actionCode);\n        action.execute();\n      };\n    }\n    button.addEventListener(ToolbarButton.Events.Click, handler, action);\n    action.addEventListener(ActionEvents.Enabled, enabledChanged);\n    button.setEnabled(action.enabled());\n    return button;\n\n    // @empty-line\n    function makeButton(): ToolbarButton {\n      const button = new ToolbarButton(action.title(), action.icon());\n      if (action.title()) {\n        Tooltip.install(button.element, action.title(), action.id(), {\n          anchorTooltipAtElement: true,\n        });\n      }\n      return button;\n    }\n\n    function makeToggle(): ToolbarToggle {\n      const toggleButton = new ToolbarToggle(action.title(), action.icon(), action.toggledIcon());\n      toggleButton.setToggleWithRedColor(action.toggleWithRedColor());\n      action.addEventListener(ActionEvents.Toggled, toggled);\n      toggled();\n      return toggleButton;\n\n      function toggled(): void {\n        toggleButton.setToggled(action.toggled());\n        if (action.title()) {\n          toggleButton.setTitle(action.title());\n          Tooltip.install(toggleButton.element, action.title(), action.id(), {\n            anchorTooltipAtElement: true,\n          });\n        }\n      }\n    }\n\n    function enabledChanged(event: Common.EventTarget.EventTargetEvent): void {\n      button.setEnabled((event.data as boolean));\n    }\n  }\n\n  static createActionButtonForId(\n      actionId: string, options: ToolbarButtonOptions|undefined = TOOLBAR_BUTTON_DEFAULT_OPTIONS): ToolbarButton {\n    const action = ActionRegistry.instance().action(actionId);\n    return Toolbar.createActionButton((action as Action), options);\n  }\n\n  gripElementForResize(): Element {\n    return this._contentElement;\n  }\n\n  makeWrappable(growVertically?: boolean): void {\n    this._contentElement.classList.add('wrappable');\n    if (growVertically) {\n      this._contentElement.classList.add('toolbar-grow-vertical');\n    }\n  }\n\n  makeVertical(): void {\n    this._contentElement.classList.add('vertical');\n  }\n\n  makeBlueOnHover(): void {\n    this._contentElement.classList.add('toolbar-blue-on-hover');\n  }\n\n  makeToggledGray(): void {\n    this._contentElement.classList.add('toolbar-toggled-gray');\n  }\n\n  renderAsLinks(): void {\n    this._contentElement.classList.add('toolbar-render-as-links');\n  }\n\n  empty(): boolean {\n    return !this._items.length;\n  }\n\n  setEnabled(enabled: boolean): void {\n    this._enabled = enabled;\n    for (const item of this._items) {\n      item._applyEnabledState(this._enabled && item._enabled);\n    }\n  }\n\n  appendToolbarItem(item: ToolbarItem): void {\n    this._items.push(item);\n    item.toolbar = this;\n    if (!this._enabled) {\n      item._applyEnabledState(false);\n    }\n    this._contentElement.insertBefore(item.element, this._insertionPoint);\n    this._hideSeparatorDupes();\n  }\n\n  appendSeparator(): void {\n    this.appendToolbarItem(new ToolbarSeparator());\n  }\n\n  appendSpacer(): void {\n    this.appendToolbarItem(new ToolbarSeparator(true));\n  }\n\n  appendText(text: string): void {\n    this.appendToolbarItem(new ToolbarText(text));\n  }\n\n  removeToolbarItems(): void {\n    for (const item of this._items) {\n      item.toolbar = null;\n    }\n    this._items = [];\n    this._contentElement.removeChildren();\n    this._insertionPoint = this._contentElement.createChild('slot');\n  }\n\n  setColor(color: string): void {\n    const style = document.createElement('style');\n    style.textContent = '.toolbar-glyph { background-color: ' + color + ' !important }';\n    this._shadowRoot.appendChild(style);\n  }\n\n  setToggledColor(color: string): void {\n    const style = document.createElement('style');\n    style.textContent =\n        '.toolbar-button.toolbar-state-on .toolbar-glyph { background-color: ' + color + ' !important }';\n    this._shadowRoot.appendChild(style);\n  }\n\n  _hideSeparatorDupes(): void {\n    if (!this._items.length) {\n      return;\n    }\n    // Don't hide first and last separators if they were added explicitly.\n    let previousIsSeparator = false;\n    let lastSeparator;\n    let nonSeparatorVisible = false;\n    for (let i = 0; i < this._items.length; ++i) {\n      if (this._items[i] instanceof ToolbarSeparator) {\n        this._items[i].setVisible(!previousIsSeparator);\n        previousIsSeparator = true;\n        lastSeparator = this._items[i];\n        continue;\n      }\n      if (this._items[i].visible()) {\n        previousIsSeparator = false;\n        lastSeparator = null;\n        nonSeparatorVisible = true;\n      }\n    }\n    if (lastSeparator && lastSeparator !== this._items[this._items.length - 1]) {\n      lastSeparator.setVisible(false);\n    }\n\n    this.element.classList.toggle(\n        'hidden',\n        lastSeparator !== null && lastSeparator !== undefined && lastSeparator.visible() && !nonSeparatorVisible);\n  }\n\n  async appendItemsAtLocation(location: string): Promise<void> {\n    const extensions: ToolbarItemRegistration[] = getRegisteredToolbarItems();\n\n    extensions.sort((extension1, extension2) => {\n      const order1 = extension1.order || 0;\n      const order2 = extension2.order || 0;\n      return order1 - order2;\n    });\n\n    const filtered = extensions.filter(e => e.location === location);\n    const items = await Promise.all(filtered.map(extension => {\n      const {separator, actionId, showLabel, loadItem} = extension;\n      if (separator) {\n        return new ToolbarSeparator();\n      }\n      if (actionId) {\n        return Toolbar.createActionButtonForId(actionId, {showLabel: Boolean(showLabel), userActionCode: undefined});\n      }\n      // TODO(crbug.com/1134103) constratint the case checked with this if using TS type definitions once UI is TS-authored.\n      if (!loadItem) {\n        throw new Error('Could not load a toolbar item registration with no loadItem function');\n      }\n      return loadItem().then(p => (p as Provider).item());\n    }));\n\n    for (const item of items) {\n      if (item) {\n        this.appendToolbarItem(item);\n      }\n    }\n  }\n}\nexport interface ToolbarButtonOptions {\n  showLabel: boolean;\n  userActionCode?: Host.UserMetrics.Action;\n}\n\nconst TOOLBAR_BUTTON_DEFAULT_OPTIONS: ToolbarButtonOptions = {\n  showLabel: false,\n  userActionCode: undefined,\n};\n\nexport class ToolbarItem extends Common.ObjectWrapper.ObjectWrapper {\n  element: HTMLElement;\n  _visible: boolean;\n  _enabled: boolean;\n  toolbar: Toolbar|null;\n  _title?: string;\n  constructor(element: Element) {\n    super();\n    this.element = (element as HTMLElement);\n    this.element.classList.add('toolbar-item');\n    this._visible = true;\n    this._enabled = true;\n\n    /**\n     * Set by the parent toolbar during appending.\n     */\n    this.toolbar = null;\n  }\n\n  setTitle(title: string, actionId: string|undefined = undefined): void {\n    if (this._title === title) {\n      return;\n    }\n    this._title = title;\n    ARIAUtils.setAccessibleName(this.element, title);\n    Tooltip.install(this.element, title, actionId, {\n      anchorTooltipAtElement: true,\n    });\n  }\n\n  setEnabled(value: boolean): void {\n    if (this._enabled === value) {\n      return;\n    }\n    this._enabled = value;\n    this._applyEnabledState(this._enabled && (!this.toolbar || this.toolbar._enabled));\n  }\n\n  _applyEnabledState(enabled: boolean): void {\n    // @ts-ignore: Ignoring in favor of an `instanceof` check for all the different\n    //             kind of HTMLElement classes that have a disabled attribute.\n    this.element.disabled = !enabled;\n  }\n\n  /** x\n     */\n  visible(): boolean {\n    return this._visible;\n  }\n\n  setVisible(x: boolean): void {\n    if (this._visible === x) {\n      return;\n    }\n    this.element.classList.toggle('hidden', !x);\n    this._visible = x;\n    if (this.toolbar && !(this instanceof ToolbarSeparator)) {\n      this.toolbar._hideSeparatorDupes();\n    }\n  }\n\n  setRightAligned(alignRight: boolean): void {\n    this.element.classList.toggle('toolbar-item-right-aligned', alignRight);\n  }\n}\n\nexport class ToolbarText extends ToolbarItem {\n  constructor(text?: string) {\n    const element = document.createElement('div');\n    element.classList.add('toolbar-text');\n    super(element);\n    this.element.classList.add('toolbar-text');\n    this.setText(text || '');\n  }\n\n  text(): string {\n    return this.element.textContent || '';\n  }\n\n  setText(text: string): void {\n    this.element.textContent = text;\n  }\n}\n\nexport class ToolbarButton extends ToolbarItem {\n  _glyphElement: Icon;\n  _textElement: HTMLElement;\n  _title: string;\n  _text?: string;\n  _glyph?: string;\n  /**\n   * TODO(crbug.com/1126026): remove glyph parameter in favor of icon.\n   */\n  constructor(title: string, glyphOrIcon?: string|HTMLElement, text?: string) {\n    const element = document.createElement('button');\n    element.classList.add('toolbar-button');\n    super(element);\n    this.element.addEventListener('click', this._clicked.bind(this), false);\n    this.element.addEventListener('mousedown', this._mouseDown.bind(this), false);\n\n    this._glyphElement = Icon.create('', 'toolbar-glyph hidden');\n    this.element.appendChild(this._glyphElement);\n    this._textElement = this.element.createChild('div', 'toolbar-text hidden');\n\n    this.setTitle(title);\n    if (glyphOrIcon instanceof HTMLElement) {\n      glyphOrIcon.classList.add('toolbar-icon');\n      this.element.append(glyphOrIcon);\n    } else if (glyphOrIcon) {\n      this.setGlyph(glyphOrIcon);\n    }\n    this.setText(text || '');\n    this._title = '';\n  }\n\n  focus(): void {\n    this.element.focus();\n  }\n\n  setText(text: string): void {\n    if (this._text === text) {\n      return;\n    }\n    this._textElement.textContent = text;\n    this._textElement.classList.toggle('hidden', !text);\n    this._text = text;\n  }\n\n  setGlyph(glyph: string): void {\n    if (this._glyph === glyph) {\n      return;\n    }\n    this._glyphElement.setIconType(glyph);\n    this._glyphElement.classList.toggle('hidden', !glyph);\n    this.element.classList.toggle('toolbar-has-glyph', Boolean(glyph));\n    this._glyph = glyph;\n  }\n\n  setBackgroundImage(iconURL: string): void {\n    this.element.style.backgroundImage = 'url(' + iconURL + ')';\n  }\n\n  setSecondary(): void {\n    this.element.classList.add('toolbar-button-secondary');\n  }\n\n  setDarkText(): void {\n    this.element.classList.add('dark-text');\n  }\n\n  turnIntoSelect(shrinkable: boolean|undefined = false): void {\n    this.element.classList.add('toolbar-has-dropdown');\n    if (shrinkable) {\n      this.element.classList.add('toolbar-has-dropdown-shrinkable');\n    }\n    const dropdownArrowIcon = Icon.create('smallicon-triangle-down', 'toolbar-dropdown-arrow');\n    this.element.appendChild(dropdownArrowIcon);\n  }\n\n  _clicked(event: Event): void {\n    if (!this._enabled) {\n      return;\n    }\n    this.dispatchEventToListeners(ToolbarButton.Events.Click, event);\n    event.consume();\n  }\n\n  _mouseDown(event: Event): void {\n    if (!this._enabled) {\n      return;\n    }\n    this.dispatchEventToListeners(ToolbarButton.Events.MouseDown, event);\n  }\n}\n\nexport namespace ToolbarButton {\n  // TODO(crbug.com/1167717): Make this a const enum again\n  // eslint-disable-next-line rulesdir/const_enum\n  export enum Events {\n    Click = 'Click',\n    MouseDown = 'MouseDown',\n  }\n}\n\nexport class ToolbarInput extends ToolbarItem {\n  _prompt: TextPrompt;\n  _proxyElement: Element;\n\n  constructor(\n      placeholder: string, accessiblePlaceholder?: string, growFactor?: number, shrinkFactor?: number, tooltip?: string,\n      completions?: ((arg0: string, arg1: string, arg2?: boolean|undefined) => Promise<Suggestion[]>),\n      dynamicCompletions?: boolean) {\n    const element = document.createElement('div');\n    element.classList.add('toolbar-input');\n    super(element);\n\n    const internalPromptElement = this.element.createChild('div', 'toolbar-input-prompt');\n    ARIAUtils.setAccessibleName(internalPromptElement, placeholder);\n    internalPromptElement.addEventListener('focus', () => this.element.classList.add('focused'));\n    internalPromptElement.addEventListener('blur', () => this.element.classList.remove('focused'));\n\n    this._prompt = new TextPrompt();\n    this._proxyElement = this._prompt.attach(internalPromptElement);\n    this._proxyElement.classList.add('toolbar-prompt-proxy');\n    this._proxyElement.addEventListener('keydown', (event: Event) => this._onKeydownCallback(event));\n    this._prompt.initialize(completions || ((): Promise<never[]> => Promise.resolve([])), ' ', dynamicCompletions);\n    if (tooltip) {\n      this._prompt.setTitle(tooltip);\n    }\n    this._prompt.setPlaceholder(placeholder, accessiblePlaceholder);\n    this._prompt.addEventListener(TextPromptEvents.TextChanged, this._onChangeCallback.bind(this));\n\n    if (growFactor) {\n      this.element.style.flexGrow = String(growFactor);\n    }\n    if (shrinkFactor) {\n      this.element.style.flexShrink = String(shrinkFactor);\n    }\n\n    const clearButton = this.element.createChild('div', 'toolbar-input-clear-button');\n    clearButton.appendChild(Icon.create('mediumicon-gray-cross-hover', 'search-cancel-button'));\n    clearButton.addEventListener('click', () => {\n      this.setValue('', true);\n      this._prompt.focus();\n    });\n\n    this._updateEmptyStyles();\n  }\n\n  _applyEnabledState(enabled: boolean): void {\n    this._prompt.setEnabled(enabled);\n  }\n\n  setValue(value: string, notify?: boolean): void {\n    this._prompt.setText(value);\n    if (notify) {\n      this._onChangeCallback();\n    }\n    this._updateEmptyStyles();\n  }\n\n  value(): string {\n    return this._prompt.textWithCurrentSuggestion();\n  }\n\n  _onKeydownCallback(event: Event): void {\n    if ((event as KeyboardEvent).key === 'Enter' && this._prompt.text()) {\n      this.dispatchEventToListeners(ToolbarInput.Event.EnterPressed, this._prompt.text());\n    }\n    if (!isEscKey(event) || !this._prompt.text()) {\n      return;\n    }\n    this.setValue('', true);\n    event.consume(true);\n  }\n\n  _onChangeCallback(): void {\n    this._updateEmptyStyles();\n    this.dispatchEventToListeners(ToolbarInput.Event.TextChanged, this._prompt.text());\n  }\n\n  _updateEmptyStyles(): void {\n    this.element.classList.toggle('toolbar-input-empty', !this._prompt.text());\n  }\n}\n\nexport namespace ToolbarInput {\n  // TODO(crbug.com/1167717): Make this a const enum again\n  // eslint-disable-next-line rulesdir/const_enum\n  export enum Event {\n    TextChanged = 'TextChanged',\n    EnterPressed = 'EnterPressed',\n  }\n}\n\nexport class ToolbarToggle extends ToolbarButton {\n  _toggled: boolean;\n  _untoggledGlyph: string|undefined;\n  _toggledGlyph: string|undefined;\n\n  constructor(title: string, glyph?: string, toggledGlyph?: string) {\n    super(title, glyph, '');\n    this._toggled = false;\n    this._untoggledGlyph = glyph;\n    this._toggledGlyph = toggledGlyph;\n    this.element.classList.add('toolbar-state-off');\n    ARIAUtils.setPressed(this.element, false);\n  }\n\n  toggled(): boolean {\n    return this._toggled;\n  }\n\n  setToggled(toggled: boolean): void {\n    if (this._toggled === toggled) {\n      return;\n    }\n    this._toggled = toggled;\n    this.element.classList.toggle('toolbar-state-on', toggled);\n    this.element.classList.toggle('toolbar-state-off', !toggled);\n    ARIAUtils.setPressed(this.element, toggled);\n    if (this._toggledGlyph && this._untoggledGlyph) {\n      this.setGlyph(toggled ? this._toggledGlyph : this._untoggledGlyph);\n    }\n  }\n\n  setDefaultWithRedColor(withRedColor: boolean): void {\n    this.element.classList.toggle('toolbar-default-with-red-color', withRedColor);\n  }\n\n  setToggleWithRedColor(toggleWithRedColor: boolean): void {\n    this.element.classList.toggle('toolbar-toggle-with-red-color', toggleWithRedColor);\n  }\n}\n\nexport class ToolbarMenuButton extends ToolbarButton {\n  _contextMenuHandler: (arg0: ContextMenu) => void;\n  _useSoftMenu: boolean;\n  _triggerTimeout?: number;\n  _lastTriggerTime?: number;\n  constructor(contextMenuHandler: (arg0: ContextMenu) => void, useSoftMenu?: boolean) {\n    super('', 'largeicon-menu');\n    this._contextMenuHandler = contextMenuHandler;\n    this._useSoftMenu = Boolean(useSoftMenu);\n    ARIAUtils.markAsMenuButton(this.element);\n  }\n\n  _mouseDown(event: Event): void {\n    if ((event as MouseEvent).buttons !== 1) {\n      super._mouseDown(event);\n      return;\n    }\n\n    if (!this._triggerTimeout) {\n      this._triggerTimeout = window.setTimeout(this._trigger.bind(this, event), 200);\n    }\n  }\n\n  _trigger(event: Event): void {\n    delete this._triggerTimeout;\n\n    // Throttling avoids entering a bad state on Macs when rapidly triggering context menus just\n    // after the window gains focus. See crbug.com/655556\n    if (this._lastTriggerTime && Date.now() - this._lastTriggerTime < 300) {\n      return;\n    }\n    const contextMenu = new ContextMenu(\n        event, this._useSoftMenu, this.element.totalOffsetLeft(),\n        this.element.totalOffsetTop() + this.element.offsetHeight);\n    this._contextMenuHandler(contextMenu);\n    contextMenu.show();\n    this._lastTriggerTime = Date.now();\n  }\n\n  _clicked(event: Event): void {\n    if (this._triggerTimeout) {\n      clearTimeout(this._triggerTimeout);\n    }\n    this._trigger(event);\n  }\n}\n\nexport class ToolbarSettingToggle extends ToolbarToggle {\n  _defaultTitle: string;\n  _setting: Common.Settings.Setting<boolean>;\n  _willAnnounceState: boolean;\n\n  constructor(setting: Common.Settings.Setting<boolean>, glyph: string, title: string) {\n    super(title, glyph);\n    this._defaultTitle = title;\n    this._setting = setting;\n    this._settingChanged();\n    this._setting.addChangeListener(this._settingChanged, this);\n\n    // Determines whether the toggle state will be announced to a screen reader\n    this._willAnnounceState = false;\n  }\n\n  _settingChanged(): void {\n    const toggled = this._setting.get();\n    this.setToggled(toggled);\n    const toggleAnnouncement = toggled ? i18nString(UIStrings.pressed) : i18nString(UIStrings.notPressed);\n    if (this._willAnnounceState) {\n      ARIAUtils.alert(toggleAnnouncement);\n    }\n    this._willAnnounceState = false;\n    this.setTitle(this._defaultTitle);\n  }\n\n  _clicked(event: Event): void {\n    this._willAnnounceState = true;\n    this._setting.set(!this.toggled());\n    super._clicked(event);\n  }\n}\n\nexport class ToolbarSeparator extends ToolbarItem {\n  constructor(spacer?: boolean) {\n    const element = document.createElement('div');\n    element.classList.add(spacer ? 'toolbar-spacer' : 'toolbar-divider');\n    super(element);\n  }\n}\n\nexport interface Provider {\n  item(): ToolbarItem|null;\n}\n\nexport interface ItemsProvider {\n  toolbarItems(): ToolbarItem[];\n}\n\nexport class ToolbarComboBox extends ToolbarItem {\n  _selectElement: HTMLSelectElement;\n\n  constructor(changeHandler: ((arg0: Event) => void)|null, title: string, className?: string) {\n    const element = document.createElement('span');\n    element.classList.add('toolbar-select-container');\n    super(element);\n    this._selectElement = (this.element.createChild('select', 'toolbar-item') as HTMLSelectElement);\n    const dropdownArrowIcon = Icon.create('smallicon-triangle-down', 'toolbar-dropdown-arrow');\n    this.element.appendChild(dropdownArrowIcon);\n    if (changeHandler) {\n      this._selectElement.addEventListener('change', changeHandler, false);\n    }\n    ARIAUtils.setAccessibleName(this._selectElement, title);\n    super.setTitle(title);\n    if (className) {\n      this._selectElement.classList.add(className);\n    }\n  }\n\n  selectElement(): HTMLSelectElement {\n    return this._selectElement;\n  }\n\n  size(): number {\n    return this._selectElement.childElementCount;\n  }\n\n  options(): HTMLOptionElement[] {\n    return Array.prototype.slice.call(this._selectElement.children, 0);\n  }\n\n  addOption(option: Element): void {\n    this._selectElement.appendChild(option);\n  }\n\n  createOption(label: string, value?: string): Element {\n    const option = (this._selectElement.createChild('option') as HTMLOptionElement);\n    option.text = label;\n    if (typeof value !== 'undefined') {\n      option.value = value;\n    }\n    return option;\n  }\n\n  _applyEnabledState(enabled: boolean): void {\n    super._applyEnabledState(enabled);\n    this._selectElement.disabled = !enabled;\n  }\n\n  removeOption(option: Element): void {\n    this._selectElement.removeChild(option);\n  }\n\n  removeOptions(): void {\n    this._selectElement.removeChildren();\n  }\n\n  selectedOption(): HTMLOptionElement|null {\n    if (this._selectElement.selectedIndex >= 0) {\n      return this._selectElement[this._selectElement.selectedIndex] as HTMLOptionElement;\n    }\n    return null;\n  }\n\n  select(option: Element): void {\n    // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this._selectElement.selectedIndex = Array.prototype.indexOf.call((this._selectElement as any), option);\n  }\n\n  setSelectedIndex(index: number): void {\n    this._selectElement.selectedIndex = index;\n  }\n\n  selectedIndex(): number {\n    return this._selectElement.selectedIndex;\n  }\n\n  setMaxWidth(width: number): void {\n    this._selectElement.style.maxWidth = width + 'px';\n  }\n\n  setMinWidth(width: number): void {\n    this._selectElement.style.minWidth = width + 'px';\n  }\n}\n\nexport interface Option {\n  value: string;\n  label: string;\n}\n\nexport class ToolbarSettingComboBox extends ToolbarComboBox {\n  _options: Option[];\n  _setting: Common.Settings.Setting<string>;\n  _muteSettingListener?: boolean;\n  constructor(options: Option[], setting: Common.Settings.Setting<string>, accessibleName: string) {\n    super(null, accessibleName);\n    this._options = options;\n    this._setting = setting;\n    this._selectElement.addEventListener('change', this._valueChanged.bind(this), false);\n    this.setOptions(options);\n    setting.addChangeListener(this._settingChanged, this);\n  }\n\n  setOptions(options: Option[]): void {\n    this._options = options;\n    this._selectElement.removeChildren();\n    for (let i = 0; i < options.length; ++i) {\n      const dataOption = options[i];\n      const option = this.createOption(dataOption.label, dataOption.value);\n      this._selectElement.appendChild(option);\n      if (this._setting.get() === dataOption.value) {\n        this.setSelectedIndex(i);\n      }\n    }\n  }\n\n  value(): string {\n    return this._options[this.selectedIndex()].value;\n  }\n\n  _settingChanged(): void {\n    if (this._muteSettingListener) {\n      return;\n    }\n\n    const value = this._setting.get();\n    for (let i = 0; i < this._options.length; ++i) {\n      if (value === this._options[i].value) {\n        this.setSelectedIndex(i);\n        break;\n      }\n    }\n  }\n\n  _valueChanged(_event: Event): void {\n    const option = this._options[this.selectedIndex()];\n    this._muteSettingListener = true;\n    this._setting.set(option.value);\n    this._muteSettingListener = false;\n  }\n}\n\nexport class ToolbarCheckbox extends ToolbarItem {\n  inputElement: HTMLInputElement;\n\n  constructor(text: string, tooltip?: string, listener?: ((arg0: MouseEvent) => void)) {\n    super(CheckboxLabel.create(text));\n    this.element.classList.add('checkbox');\n    this.inputElement = (this.element as CheckboxLabel).checkboxElement;\n    if (tooltip) {\n      // install on the checkbox\n      Tooltip.install(this.inputElement, tooltip, undefined, {\n        anchorTooltipAtElement: true,\n      });\n      Tooltip.install((this.element as CheckboxLabel).textElement, tooltip, undefined, {\n        anchorTooltipAtElement: true,\n      });\n    }\n    if (listener) {\n      this.inputElement.addEventListener('click', listener, false);\n    }\n  }\n\n  checked(): boolean {\n    return this.inputElement.checked;\n  }\n\n  setChecked(value: boolean): void {\n    this.inputElement.checked = value;\n  }\n\n  _applyEnabledState(enabled: boolean): void {\n    super._applyEnabledState(enabled);\n    this.inputElement.disabled = !enabled;\n  }\n}\n\nexport class ToolbarSettingCheckbox extends ToolbarCheckbox {\n  constructor(setting: Common.Settings.Setting<boolean>, tooltip?: string, alternateTitle?: string) {\n    super(alternateTitle || setting.title() || '', tooltip);\n    bindCheckbox(this.inputElement, setting);\n  }\n}\n\nconst registeredToolbarItems: ToolbarItemRegistration[] = [];\n\nexport function registerToolbarItem(registration: ToolbarItemRegistration): void {\n  registeredToolbarItems.push(registration);\n}\n\nfunction getRegisteredToolbarItems(): ToolbarItemRegistration[] {\n  return registeredToolbarItems.filter(\n      item => Root.Runtime.Runtime.isDescriptorEnabled({experiment: undefined, condition: item.condition}));\n}\n\nexport interface ToolbarItemRegistration {\n  order?: number;\n  location: ToolbarItemLocation;\n  separator?: boolean;\n  showLabel?: boolean;\n  actionId?: string;\n  condition?: string;\n  loadItem?: (() => Promise<Provider>);\n}\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum ToolbarItemLocation {\n  FILES_NAVIGATION_TOOLBAR = 'files-navigator-toolbar',\n  MAIN_TOOLBAR_RIGHT = 'main-toolbar-right',\n  MAIN_TOOLBAR_LEFT = 'main-toolbar-left',\n  STYLES_SIDEBARPANE_TOOLBAR = 'styles-sidebarpane-toolbar',\n}\n"]}