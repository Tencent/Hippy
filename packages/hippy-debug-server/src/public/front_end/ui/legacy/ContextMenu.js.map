{"version":3,"file":"ContextMenu.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/ContextMenu.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2009 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport type * as Common from '../../core/common/common.js'; // eslint-disable-line no-unused-vars\nimport * as Host from '../../core/host/host.js';\nimport * as Root from '../../core/root/root.js';\n\nimport {ActionRegistry} from './ActionRegistry.js';\nimport {ShortcutRegistry} from './ShortcutRegistry.js';\nimport type {SoftContextMenuDescriptor} from './SoftContextMenu.js';\nimport {SoftContextMenu} from './SoftContextMenu.js';  // eslint-disable-line no-unused-vars\nimport {deepElementFromEvent} from './UIUtils.js';\n\nexport class Item {\n  _type: string;\n  _label: string|undefined;\n  _disabled: boolean|undefined;\n  _checked: boolean|undefined;\n  _contextMenu: ContextMenu|null;\n  _id: number|undefined;\n  _customElement?: Element;\n  _shortcut?: string;\n\n  constructor(contextMenu: ContextMenu|null, type: string, label?: string, disabled?: boolean, checked?: boolean) {\n    this._type = type;\n    this._label = label;\n    this._disabled = disabled;\n    this._checked = checked;\n    this._contextMenu = contextMenu;\n    this._id = undefined;\n    if (type === 'item' || type === 'checkbox') {\n      this._id = contextMenu ? contextMenu._nextId() : 0;\n    }\n  }\n\n  id(): number {\n    if (this._id === undefined) {\n      throw new Error('Tried to access a ContextMenu Item ID but none was set.');\n    }\n    return this._id;\n  }\n\n  type(): string {\n    return this._type;\n  }\n\n  isEnabled(): boolean {\n    return !this._disabled;\n  }\n\n  setEnabled(enabled: boolean): void {\n    this._disabled = !enabled;\n  }\n\n  _buildDescriptor(): SoftContextMenuDescriptor|Host.InspectorFrontendHostAPI.ContextMenuDescriptor {\n    switch (this._type) {\n      case 'item': {\n        const result = {\n          type: 'item',\n          id: this._id,\n          label: this._label,\n          enabled: !this._disabled,\n          checked: undefined,\n          subItems: undefined,\n        };\n        if (this._customElement) {\n          const resultAsSoftContextMenuItem = (result as SoftContextMenuDescriptor);\n          resultAsSoftContextMenuItem.element = (this._customElement as Element);\n        }\n        if (this._shortcut) {\n          const resultAsSoftContextMenuItem = (result as SoftContextMenuDescriptor);\n          resultAsSoftContextMenuItem.shortcut = this._shortcut;\n        }\n        return result;\n      }\n      case 'separator': {\n        return {\n          type: 'separator',\n          id: undefined,\n          label: undefined,\n          enabled: undefined,\n          checked: undefined,\n          subItems: undefined,\n        };\n      }\n      case 'checkbox': {\n        return {\n          type: 'checkbox',\n          id: this._id,\n          label: this._label,\n          checked: Boolean(this._checked),\n          enabled: !this._disabled,\n          subItems: undefined,\n        };\n      }\n    }\n    throw new Error('Invalid item type:' + this._type);\n  }\n\n  setShortcut(shortcut: string): void {\n    this._shortcut = shortcut;\n  }\n}\n\nexport class Section {\n  _contextMenu: ContextMenu|null;\n  _items: Item[];\n  constructor(contextMenu: ContextMenu|null) {\n    this._contextMenu = contextMenu;\n    this._items = [];\n  }\n\n  appendItem(label: string, handler: () => void, disabled?: boolean): Item {\n    const item = new Item(this._contextMenu, 'item', label, disabled);\n    this._items.push(item);\n    if (this._contextMenu) {\n      this._contextMenu._setHandler(item.id(), handler);\n    }\n    return item;\n  }\n\n  appendCustomItem(element: Element): Item {\n    const item = new Item(this._contextMenu, 'item', '<custom>');\n    item._customElement = element;\n    this._items.push(item);\n    return item;\n  }\n\n  appendSeparator(): Item {\n    const item = new Item(this._contextMenu, 'separator');\n    this._items.push(item);\n    return item;\n  }\n\n  appendAction(actionId: string, label?: string, optional?: boolean): void {\n    const action = ActionRegistry.instance().action(actionId);\n    if (!action) {\n      if (!optional) {\n        console.error(`Action ${actionId} was not defined`);\n      }\n      return;\n    }\n    if (!label) {\n      label = action.title();\n    }\n    const result = this.appendItem(label, action.execute.bind(action));\n    const shortcut = ShortcutRegistry.instance().shortcutTitleForAction(actionId);\n    if (shortcut) {\n      result.setShortcut(shortcut);\n    }\n  }\n\n  appendSubMenuItem(label: string, disabled?: boolean): SubMenu {\n    const item = new SubMenu(this._contextMenu, label, disabled);\n    item._init();\n    this._items.push(item);\n    return item;\n  }\n\n  appendCheckboxItem(label: string, handler: () => void, checked?: boolean, disabled?: boolean): Item {\n    const item = new Item(this._contextMenu, 'checkbox', label, disabled, checked);\n    this._items.push(item);\n    if (this._contextMenu) {\n      this._contextMenu._setHandler(item.id(), handler);\n    }\n    return item;\n  }\n}\n\nexport class SubMenu extends Item {\n  _sections: Map<string, Section>;\n  _sectionList: Section[];\n\n  constructor(contextMenu: ContextMenu|null, label?: string, disabled?: boolean) {\n    super(contextMenu, 'subMenu', label, disabled);\n    this._sections = new Map();\n    this._sectionList = [];\n  }\n\n  _init(): void {\n    ContextMenu._groupWeights.forEach(name => this.section(name));\n  }\n\n  section(name?: string): Section {\n    let section: Section|(Section | null | undefined) = name ? this._sections.get(name) : null;\n    if (!section) {\n      section = new Section(this._contextMenu);\n      if (name) {\n        this._sections.set(name, section);\n        this._sectionList.push(section);\n      } else {\n        this._sectionList.splice(ContextMenu._groupWeights.indexOf('default'), 0, section);\n      }\n    }\n    return section;\n  }\n\n  headerSection(): Section {\n    return this.section('header');\n  }\n\n  newSection(): Section {\n    return this.section('new');\n  }\n\n  revealSection(): Section {\n    return this.section('reveal');\n  }\n\n  clipboardSection(): Section {\n    return this.section('clipboard');\n  }\n\n  editSection(): Section {\n    return this.section('edit');\n  }\n\n  debugSection(): Section {\n    return this.section('debug');\n  }\n\n  viewSection(): Section {\n    return this.section('view');\n  }\n\n  defaultSection(): Section {\n    return this.section('default');\n  }\n\n  saveSection(): Section {\n    return this.section('save');\n  }\n\n  footerSection(): Section {\n    return this.section('footer');\n  }\n\n  _buildDescriptor(): SoftContextMenuDescriptor|Host.InspectorFrontendHostAPI.ContextMenuDescriptor {\n    const result: Host.InspectorFrontendHostAPI.ContextMenuDescriptor|SoftContextMenuDescriptor = {\n      type: 'subMenu',\n      label: this._label,\n      enabled: !this._disabled,\n      subItems: [],\n      id: undefined,\n      checked: undefined,\n    };\n\n    const nonEmptySections = this._sectionList.filter(section => Boolean(section._items.length));\n    for (const section of nonEmptySections) {\n      for (const item of section._items) {\n        if (!result.subItems) {\n          result.subItems = [];\n        }\n        result.subItems.push(item._buildDescriptor());\n      }\n      if (section !== nonEmptySections[nonEmptySections.length - 1]) {\n        if (!result.subItems) {\n          result.subItems = [];\n        }\n        result.subItems.push({\n          type: 'separator',\n          id: undefined,\n          subItems: undefined,\n          checked: undefined,\n          enabled: undefined,\n          label: undefined,\n        });\n      }\n    }\n    return result;\n  }\n\n  appendItemsAtLocation(location: string): void {\n    const items: ContextMenuItemRegistration[] = getRegisteredItems();\n    items.sort((firstItem, secondItem) => {\n      const order1 = firstItem.order || 0;\n      const order2 = secondItem.order || 0;\n      return order1 - order2;\n    });\n    for (const item of items) {\n      if (item.experiment && !Root.Runtime.experiments.isEnabled(item.experiment)) {\n        continue;\n      }\n\n      const itemLocation = item.location;\n      const actionId = item.actionId;\n      if (!itemLocation || !itemLocation.startsWith(location + '/')) {\n        continue;\n      }\n\n      const section = itemLocation.substr(location.length + 1);\n      if (!section || section.includes('/')) {\n        continue;\n      }\n\n      if (actionId) {\n        this.section(section).appendAction(actionId);\n      }\n    }\n  }\n\n  static _uniqueSectionName: number = 0;\n}\n\nexport class ContextMenu extends SubMenu {\n  _contextMenu: this;\n  _defaultSection: Section;\n  _pendingPromises: Promise<Provider[]>[];\n  _pendingTargets: Object[];\n  _event: MouseEvent;\n  _useSoftMenu: boolean;\n  _x: number;\n  _y: number;\n  _handlers: Map<number, () => void>;\n  _id: number;\n  _softMenu?: SoftContextMenu;\n\n  constructor(event: Event, useSoftMenu?: boolean, x?: number, y?: number) {\n    super(null);\n    const mouseEvent = (event as MouseEvent);\n    this._contextMenu = this;\n    super._init();\n    this._defaultSection = this.defaultSection();\n    this._pendingPromises = [];\n    this._pendingTargets = [];\n    this._event = mouseEvent;\n    this._useSoftMenu = Boolean(useSoftMenu);\n    this._x = x === undefined ? mouseEvent.x : x;\n    this._y = y === undefined ? mouseEvent.y : y;\n    this._handlers = new Map();\n    this._id = 0;\n\n    const target = deepElementFromEvent(event);\n    if (target) {\n      this.appendApplicableItems((target as Object));\n    }\n  }\n\n  static initialize(): void {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n        Host.InspectorFrontendHostAPI.Events.SetUseSoftMenu, setUseSoftMenu);\n    function setUseSoftMenu(event: Common.EventTarget.EventTargetEvent): void {\n      ContextMenu._useSoftMenu = (event.data as boolean);\n    }\n  }\n\n  static installHandler(doc: Document): void {\n    doc.body.addEventListener('contextmenu', handler, false);\n\n    function handler(event: Event): void {\n      const contextMenu = new ContextMenu(event);\n      contextMenu.show();\n    }\n  }\n\n  _nextId(): number {\n    return this._id++;\n  }\n\n  async show(): Promise<void> {\n    ContextMenu._pendingMenu = this;\n    this._event.consume(true);\n    const loadedProviders: Provider[][] = await Promise.all(this._pendingPromises);\n\n    // After loading all providers, the contextmenu might be hidden again, so bail out.\n    if (ContextMenu._pendingMenu !== this) {\n      return;\n    }\n    ContextMenu._pendingMenu = null;\n\n    for (let i = 0; i < loadedProviders.length; ++i) {\n      const providers = loadedProviders[i];\n      const target = this._pendingTargets[i];\n\n      for (const provider of providers) {\n        provider.appendApplicableItems(this._event, this, target);\n      }\n    }\n\n    this._pendingPromises = [];\n    this._pendingTargets = [];\n\n    this._innerShow();\n  }\n\n  discard(): void {\n    if (this._softMenu) {\n      this._softMenu.discard();\n    }\n  }\n\n  _innerShow(): void {\n    const menuObject = this._buildMenuDescriptors();\n    const eventTarget = this._event.target;\n    if (!eventTarget) {\n      return;\n    }\n    const ownerDocument = (eventTarget as HTMLElement).ownerDocument;\n    if (this._useSoftMenu || ContextMenu._useSoftMenu ||\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.isHostedMode()) {\n      this._softMenu = new SoftContextMenu((menuObject as SoftContextMenuDescriptor[]), this._itemSelected.bind(this));\n      this._softMenu.show((ownerDocument as Document), new AnchorBox(this._x, this._y, 0, 0));\n    } else {\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.showContextMenuAtPoint(\n          this._x, this._y, menuObject, (ownerDocument as Document));\n\n      function listenToEvents(this: ContextMenu): void {\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n            Host.InspectorFrontendHostAPI.Events.ContextMenuCleared, this._menuCleared, this);\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n            Host.InspectorFrontendHostAPI.Events.ContextMenuItemSelected, this._onItemSelected, this);\n      }\n\n      // showContextMenuAtPoint call above synchronously issues a clear event for previous context menu (if any),\n      // so we skip it before subscribing to the clear event.\n      queueMicrotask(listenToEvents.bind(this));\n    }\n  }\n\n  setX(x: number): void {\n    this._x = x;\n  }\n\n  setY(y: number): void {\n    this._y = y;\n  }\n\n  _setHandler(id: number, handler: () => void): void {\n    if (handler) {\n      this._handlers.set(id, handler);\n    }\n  }\n\n  _buildMenuDescriptors(): (SoftContextMenuDescriptor|Host.InspectorFrontendHostAPI.ContextMenuDescriptor)[] {\n    return /** @type {!Array.<!Host.InspectorFrontendHostAPI.ContextMenuDescriptor|!SoftContextMenuDescriptor>} */ super\n               ._buildDescriptor()\n               .subItems as (SoftContextMenuDescriptor | Host.InspectorFrontendHostAPI.ContextMenuDescriptor)[];\n  }\n\n  _onItemSelected(event: Common.EventTarget.EventTargetEvent): void {\n    this._itemSelected((event.data as number));\n  }\n\n  _itemSelected(id: number): void {\n    const handler = this._handlers.get(id);\n    if (handler) {\n      handler.call(this);\n    }\n    this._menuCleared();\n  }\n\n  _menuCleared(): void {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.removeEventListener(\n        Host.InspectorFrontendHostAPI.Events.ContextMenuCleared, this._menuCleared, this);\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.removeEventListener(\n        Host.InspectorFrontendHostAPI.Events.ContextMenuItemSelected, this._onItemSelected, this);\n  }\n\n  containsTarget(target: Object): boolean {\n    return this._pendingTargets.indexOf(target) >= 0;\n  }\n\n  appendApplicableItems(target: Object): void {\n    this._pendingPromises.push(loadApplicableRegisteredProviders(target));\n    this._pendingTargets.push(target);\n  }\n\n  static _pendingMenu: ContextMenu|null = null;\n  static _useSoftMenu = false;\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  static readonly _groupWeights =\n      ['header', 'new', 'reveal', 'edit', 'clipboard', 'debug', 'view', 'default', 'save', 'footer'];\n}\n\nexport interface Provider {\n  appendApplicableItems(event: Event, contextMenu: ContextMenu, target: Object): void;\n}\n\nconst registeredProviders: ProviderRegistration[] = [];\n\nexport function registerProvider(registration: ProviderRegistration): void {\n  registeredProviders.push(registration);\n}\n\nasync function loadApplicableRegisteredProviders(target: Object): Promise<Provider[]> {\n  return Promise.all(\n      registeredProviders.filter(isProviderApplicableToContextTypes).map(registration => registration.loadProvider()));\n\n  function isProviderApplicableToContextTypes(providerRegistration: ProviderRegistration): boolean {\n    if (!Root.Runtime.Runtime.isDescriptorEnabled(\n            {experiment: providerRegistration.experiment, condition: undefined})) {\n      return false;\n    }\n    if (!providerRegistration.contextTypes) {\n      return true;\n    }\n    for (const contextType of providerRegistration.contextTypes()) {\n      // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n      // @ts-expect-error\n      if (target instanceof contextType) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nconst registeredItemsProviders: ContextMenuItemRegistration[] = [];\n\nexport function registerItem(registration: ContextMenuItemRegistration): void {\n  registeredItemsProviders.push(registration);\n}\n\nexport function maybeRemoveItem(registration: ContextMenuItemRegistration): boolean {\n  const itemIndex = registeredItemsProviders.findIndex(\n      item => item.actionId === registration.actionId && item.location === registration.location);\n  if (itemIndex < 0) {\n    return false;\n  }\n  registeredItemsProviders.splice(itemIndex, 1);\n  return true;\n}\n\nfunction getRegisteredItems(): ContextMenuItemRegistration[] {\n  return registeredItemsProviders;\n}\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum ItemLocation {\n  DEVICE_MODE_MENU_SAVE = 'deviceModeMenu/save',\n  MAIN_MENU = 'mainMenu',\n  MAIN_MENU_DEFAULT = 'mainMenu/default',\n  MAIN_MENU_FOOTER = 'mainMenu/footer',\n  MAIN_MENU_HELP_DEFAULT = 'mainMenuHelp/default',\n  NAVIGATOR_MENU_DEFAULT = 'navigatorMenu/default',\n  TIMELINE_MENU_OPEN = 'timelineMenu/open',\n}\n\nexport interface ProviderRegistration {\n  contextTypes: () => unknown[];\n  loadProvider: () => Promise<Provider>;\n  experiment?: Root.Runtime.ExperimentName;\n}\n\nexport interface ContextMenuItemRegistration {\n  location: ItemLocation;\n  actionId: string;\n  order?: number;\n  experiment?: Root.Runtime.ExperimentName;\n}\n"]}