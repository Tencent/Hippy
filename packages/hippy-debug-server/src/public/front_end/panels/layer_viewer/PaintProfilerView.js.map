{"version":3,"file":"PaintProfilerView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/layer_viewer/PaintProfilerView.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA4BG;AAEH,uDAAuD;AAEvD,OAAO,KAAK,IAAI,MAAM,yBAAyB,CAAC;AAChD,OAAO,KAAK,QAAQ,MAAM,iCAAiC,CAAC;AAC5D,OAAO,KAAK,MAAM,MAAM,+CAA+C,CAAC;AAIxE,OAAO,KAAK,EAAE,MAAM,2BAA2B,CAAC;AAEhD,MAAM,SAAS,GAAG;IAChB;;MAEE;IACF,SAAS,EAAE,YAAY;IACvB;;MAEE;IACF,MAAM,EAAE,QAAQ;IAChB;;MAEE;IACF,MAAM,EAAE,QAAQ;IAChB;;MAEE;IACF,IAAI,EAAE,MAAM;IACZ;;MAEE;IACF,IAAI,EAAE,MAAM;IACZ;;MAEE;IACF,gBAAgB,EAAE,mBAAmB;IACrC;;MAEE;IACF,UAAU,EAAE,aAAa;CAC1B,CAAC;AACF,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,0CAA0C,EAAE,SAAS,CAAC,CAAC;AAChG,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AACtE,IAAI,UAAU,GAA8C,IAAI,CAAC;AAEjE,IAAI,oBAAoB,GAA8C,IAAI,CAAC;AAE3E,MAAM,OAAO,iBAAkB,SAAQ,EAAE,CAAC,MAAM,CAAC,IAAI;IACnD,gBAAgB,CAAc;IAC9B,eAAe,CAAc;IAC7B,SAAS,CAA2B;IACpC,kBAAkB,CAAoC;IACtD,OAAO,CAAoB;IAC3B,QAAQ,CAA2B;IACnC,gBAAgB,CAA6B;IAC7C,cAAc,CAAS;IACvB,aAAa,CAAS;IACtB,gBAAgB,CAAS;IACzB,cAAc,CAAS;IACvB,aAAa,CAAS;IACtB,MAAM,CAAS;IACf,cAAc,CAAS;IACvB,IAAI,CAA2C;IAC/C,SAAS,CAAgD;IACzD,cAAc,CAA2B;IACzC,SAAS,CAA0C;IACnD,iBAAiB,CAAU;IAE3B,YAAY,iBAAoD;QAC9D,KAAK,CAAC,IAAI,CAAC,CAAC;QACZ,IAAI,CAAC,mBAAmB,CAAC,uCAAuC,EAAE,EAAC,oBAAoB,EAAE,KAAK,EAAC,CAAC,CAAC;QACjG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;QAC7D,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,KAAK,EAAE,iCAAiC,CAAC,CAAC;QAClG,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,KAAK,EAAE,kCAAkC,CAAC,CAAC;QAClG,IAAI,CAAC,eAAe,CAAC,WAAW,GAAG,UAAU,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QACnE,IAAI,CAAC,SAAS,GAAG,IAAI,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;QAChD,IAAI,CAAC,iBAAiB,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QAC9B,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;QACzD,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAEhD,IAAI,CAAC,kBAAkB,GAAG,iBAAiB,CAAC;QAC5C,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAsB,CAAC;QACxF,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAA6B,CAAC;QAC1E,IAAI,CAAC,gBAAgB,GAAG,IAAI,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAC9E,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;QAE9G,IAAI,CAAC,cAAc,GAAG,CAAC,GAAG,MAAM,CAAC,gBAAgB,CAAC;QAClD,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC,gBAAgB,CAAC;QAC7C,IAAI,CAAC,gBAAgB,GAAG,CAAC,GAAG,MAAM,CAAC,gBAAgB,CAAC;QACpD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAClE,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC;QACjC,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QACxB,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QAEf,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAED,MAAM,CAAC,UAAU;QACf,IAAI,CAAC,UAAU,EAAE;YACf,UAAU,GAAG;gBACX,MAAM,EAAE,IAAI,qBAAqB,CAAC,QAAQ,EAAE,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,oBAAoB,CAAC;gBAC/F,MAAM,EAAE,IAAI,qBAAqB,CAAC,QAAQ,EAAE,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,oBAAoB,CAAC;gBAC/F,IAAI,EAAE,IAAI,qBAAqB,CAAC,MAAM,EAAE,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,oBAAoB,CAAC;gBACzF,IAAI,EAAE,IAAI,qBAAqB,CAAC,MAAM,EAAE,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,oBAAoB,CAAC;aAC1F,CAAC;SACH;QACD,OAAO,UAAU,CAAC;IACpB,CAAC;IAED,MAAM,CAAC,sBAAsB;QAC3B,IAAI,CAAC,oBAAoB,EAAE;YACzB,MAAM,UAAU,GAAG,iBAAiB,CAAC,UAAU,EAAE,CAAC;YAElD,MAAM,iBAAiB,GAAyC,EAAE,CAAC;YACnE,iBAAiB,CAAC,OAAO,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YAChD,iBAAiB,CAAC,WAAW,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YACpD,iBAAiB,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YACnD,iBAAiB,CAAC,WAAW,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YACpD,iBAAiB,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YACnD,iBAAiB,CAAC,SAAS,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YAClD,iBAAiB,CAAC,WAAW,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YACpD,iBAAiB,CAAC,OAAO,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YAChD,iBAAiB,CAAC,QAAQ,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YACjD,iBAAiB,CAAC,SAAS,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YAClD,iBAAiB,CAAC,WAAW,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YACpD,iBAAiB,CAAC,MAAM,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YAC/C,iBAAiB,CAAC,mBAAmB,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YAC5D,iBAAiB,CAAC,YAAY,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YACrD,iBAAiB,CAAC,iBAAiB,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YAC1D,iBAAiB,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YACnD,iBAAiB,CAAC,WAAW,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YACpD,iBAAiB,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YACnD,iBAAiB,CAAC,YAAY,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YACrD,iBAAiB,CAAC,YAAY,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;YACvD,iBAAiB,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;YACrD,iBAAiB,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;YACrD,iBAAiB,CAAC,WAAW,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;YACtD,iBAAiB,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;YACrD,iBAAiB,CAAC,cAAc,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;YACzD,iBAAiB,CAAC,YAAY,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;YACvD,iBAAiB,CAAC,YAAY,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;YACvD,iBAAiB,CAAC,sBAAsB,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;YACjE,iBAAiB,CAAC,kBAAkB,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;YAC7D,iBAAiB,CAAC,gBAAgB,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;YAC3D,iBAAiB,CAAC,YAAY,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;YACvD,iBAAiB,CAAC,aAAa,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;YACxD,iBAAiB,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YACnD,iBAAiB,CAAC,aAAa,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YACtD,iBAAiB,CAAC,cAAc,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YACvD,iBAAiB,CAAC,gBAAgB,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YAEzD,oBAAoB,GAAG,iBAAiB,CAAC;SAC1C;QAED,OAAO,oBAAoB,CAAC;IAC9B,CAAC;IAED,MAAM,CAAC,mBAAmB,CAAC,OAA+C;QACxE,MAAM,MAAM,GAAG,QAAQ,CAAC,eAAe,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAEpE,MAAM,iBAAiB,GAAG,iBAAiB,CAAC,sBAAsB,EAAE,CAAC;QACrE,IAAI,MAAM,GAA0B,iBAAiB,CAAC,MAAM,CAAC,CAAC;QAC9D,IAAI,CAAC,MAAM,EAAE;YACX,MAAM,GAAG,iBAAiB,CAAC,UAAU,EAAE,CAAC,MAAM,CAAC,CAAC;YAChD,iBAAiB,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC;SACpC;QACD,OAAO,MAAM,CAAC;IAChB,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAED,KAAK,CAAC,iBAAiB,CACnB,QAAsD,EAAE,GAA6C,EACrG,QAAgC;QAClC,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,CAAC;SAC/B;QACD,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;QAChB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,CAAC;QAE3E,IAAI,CAAC,QAAQ,EAAE;YACb,IAAI,CAAC,OAAO,EAAE,CAAC;YACf,IAAI,CAAC,iBAAiB,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;YAC9B,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YACxC,OAAO;SACR;QAED,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACvC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAChD,IAAI,CAAC,YAAY,EAAE,CAAC;QAEpB,MAAM,QAAQ,GAAG,MAAM,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAElD,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC7C,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,QAAQ,CAAC,KAAa;QACpB,MAAM,WAAW,GAAG,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QACxC,MAAM,sBAAsB,GAAG,CAAC,CAAC;QACjC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,GAAG,sBAAsB,CAAC,CAAC;QACjE,IAAI,WAAW,IAAI,IAAI,CAAC,SAAS,EAAE;YACjC,IAAI,CAAC,YAAY,EAAE,CAAC;SACrB;IACH,CAAC;IAED,OAAO;QACL,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC,WAAW,GAAG,MAAM,CAAC,gBAAgB,CAAC;QACjF,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,gBAAgB,CAAC,YAAY,GAAG,MAAM,CAAC,gBAAgB,CAAC;QACnF,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QACxB,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YACrE,OAAO;SACR;QAED,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,CAAC;QACnG,MAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;QACrC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,CAAC;QAEvD,IAAI,UAAU,GAAG,CAAC,CAAC;QACnB,MAAM,QAAQ,GAAG,EAAE,CAAC;QACpB,MAAM,mBAAmB,GAAG,EAAE,CAAC;QAC/B,IAAI,gBAAgB,GAAiC,EAAE,CAAC;QACxD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,YAAY,GAAG,CAAC,EAAE,WAAW,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,GAAG;YACnE,IAAI,YAAY,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC;YACrF,MAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC;YAC9C,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE;gBACpD,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,WAAW,CAAC,CAAC;gBAChD,WAAW,IAAI,MAAM,CAAC;gBACtB,gBAAgB,CAAC,YAAY,CAAC,GAAG,CAAC,gBAAgB,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC;aACjF;YACD,EAAE,CAAC,CAAC;YACJ,IAAI,CAAC,GAAG,YAAY,KAAK,IAAI,CAAC,cAAc,IAAI,CAAC,KAAK,WAAW,EAAE;gBACjE,oDAAoD;gBACpD,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,YAAY,CAAC,CAAC;gBAC1D,WAAW,IAAI,MAAM,CAAC;gBACtB,KAAK,YAAY,IAAI,gBAAgB,EAAE;oBACrC,gBAAgB,CAAC,YAAY,CAAC,IAAI,MAAM,CAAC;iBAC1C;gBAED,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;gBAC3B,mBAAmB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;gBAE3C,IAAI,WAAW,GAAG,UAAU,EAAE;oBAC5B,UAAU,GAAG,WAAW,CAAC;iBAC1B;gBACD,WAAW,GAAG,CAAC,CAAC;gBAChB,gBAAgB,GAAG,EAAE,CAAC;gBACtB,YAAY,GAAG,CAAC,CAAC;aAClB;SACF;QAED,MAAM,aAAa,GAAG,CAAC,GAAG,MAAM,CAAC,gBAAgB,CAAC;QAClD,MAAM,KAAK,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,UAAU,CAAC;QACtF,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YACxC,KAAK,MAAM,YAAY,IAAI,mBAAmB,CAAC,CAAC,CAAC,EAAE;gBACjD,mBAAmB,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;aAClG;YACD,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;SAC5C;IACH,CAAC;IAED,UAAU,CAAC,KAAa,EAAE,gBAAuC;QAC/D,MAAM,UAAU,GAAG,iBAAiB,CAAC,UAAU,EAAE,CAAC;QAClD,IAAI,aAAa,GAAG,CAAC,CAAC;QACtB,MAAM,CAAC,GAAG,IAAI,CAAC,gBAAgB,GAAG,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC;QAC9D,KAAK,MAAM,YAAY,IAAI,UAAU,EAAE;YACrC,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,EAAE;gBACnC,SAAS;aACV;YACD,aAAa,IAAI,gBAAgB,CAAC,YAAY,CAAC,CAAC;YAChD,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,aAAa,CAAC;YAC9C,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,UAAU,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC;YACzD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,cAAc,EAAE,gBAAgB,CAAC,YAAY,CAAC,CAAC,CAAC;SACnF;IACH,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;QACpD,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,IAAI,CAAC,iBAAiB,EAAE;YAC1B,OAAO;SACR;QACD,IAAI,CAAC,iBAAiB,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;IAChF,CAAC;IAED,eAAe;QACb,MAAM,EAAC,KAAK,EAAE,MAAM,EAAC,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAClD,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;IACxC,CAAC;IAED,kBAAkB;QAChB,MAAM,MAAM,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QACtC,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,CAAC,MAAM,EAAE;YACxD,OAAO,EAAC,KAAK,EAAE,CAAC,EAAE,MAAM,EAAE,EAAE,EAAC,CAAC;SAC/B;QACD,IAAI,SAAS,GAAG,CAAC,CAAC;QAClB,MAAM,cAAc,GAA0B,EAAE,CAAC;QACjD,KAAK,IAAI,CAAC,GAAG,MAAM,CAAC,IAAI,EAAE,CAAC,GAAG,MAAM,CAAC,KAAK,EAAE,EAAE,CAAC,EAAE;YAC/C,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAC9B,MAAM,QAAQ,GAAG,iBAAiB,CAAC,mBAAmB,CAAC,QAAQ,CAAC,CAAC;YACjE,cAAc,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,cAAc,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YACrE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;gBAC9C,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;gBACtD,SAAS,IAAI,IAAI,CAAC;gBAClB,cAAc,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC;aACxC;SACF;QACD,MAAM,MAAM,GAA4B,EAAE,CAAC;QAC3C,KAAK,MAAM,KAAK,IAAI,cAAc,EAAE;YAClC,MAAM,CAAC,IAAI,CAAC,EAAC,KAAK,EAAE,cAAc,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,EAAC,CAAC,CAAC;SACvF;QACD,OAAO,EAAC,KAAK,EAAE,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,MAAM,EAAC,CAAC;IAC5D,CAAC;IAED,iBAAiB,CAAC,KAAa,EAAE,MAA+B;QAC9D,IAAI,CAAC,SAAS,CAAC,IAAI,GAAG;YACpB,SAAS,EAAE,UAAU,CAAC,SAAS,CAAC,gBAAgB,CAAC;YACjD,IAAI,EAAE,EAAE;YACR,SAAS,EAAE,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC;YAC9C,UAAU,EAAE,KAAK;YACjB,KAAK;YACL,MAAM;SACP,CAAC;IACJ,CAAC;IAED,mBAAmB,CAAC,KAAa;QAC/B,OAAO,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,GAAG,IAAI,EAAE,IAAI,CAAC,CAAC;IACtD,CAAC;IAED,eAAe;QACb,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;YACd,OAAO,IAAI,CAAC;SACb;QAED,MAAM,UAAU,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;QAChF,MAAM,WAAW,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;QAClF,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,CAAC;QAC7D,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,CAAC;QACnH,MAAM,QAAQ,GAAG,QAAQ,CAAC,eAAe,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QACxG,MAAM,SAAS,GAAG,QAAQ,CAAC,eAAe,CAAC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAEtG,OAAO,EAAC,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAC,CAAC;IAC5C,CAAC;IAED,YAAY;QACV,OAAO,IAAI,CAAC,iBAAiB,CAAC;QAC9B,IAAI,IAAI,CAAC;QACT,IAAI,KAAK,CAAC;QACV,MAAM,MAAM,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QACtC,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,MAAM,EAAE;YACrD,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC;YAC3C,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,YAAY,CAAC;SAClD;QACD,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC;QACjC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACnB,OAAO;SACR;QACD,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;YACrD,IAAI,CAAC,KAAK,EAAE;gBACV,OAAO;aACR;YACD,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,MAAM;QACJ,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;SAC1B;QACD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,CAAC;QAC9B,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;IAC1C,CAAC;CACF;AAED,wDAAwD;AACxD,+CAA+C;AAC/C,MAAM,CAAN,IAAY,MAEX;AAFD,WAAY,MAAM;IAChB,yCAA+B,CAAA;AACjC,CAAC,EAFW,MAAM,KAAN,MAAM,QAEjB;AAED,MAAM,OAAO,2BAA4B,SAAQ,EAAE,CAAC,eAAe,CAAC,eAAe;IACjF,YAAY,CAAqC;IACjD,IAAI,CAA2C;IAC/C,cAAc,CAA8D;IAC5E,gBAAgB,CAAsC;IACtD;QACE,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,cAAc,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;QAC7B,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QAE5C,IAAI,CAAC,YAAY,GAAG,IAAI,EAAE,CAAC,WAAW,CAAC,mBAAmB,EAAE,CAAC;QAC7D,EAAE,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE,UAAU,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;QACnG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QACpD,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;QAEhE,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,IAAI,CAAC,cAAc,GAAG,IAAI,GAAG,EAAE,CAAC;IAClC,CAAC;IAED,aAAa,CAAC,GAA6C;QACzD,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;QAEhB,IAAI,CAAC,YAAY,CAAC,EAAC,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,EAAC,CAAC,CAAC;IACxD,CAAC;IAED,cAAc,CAAC,OAA+C;QAC5D,IAAI,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACnD,IAAI,CAAC,WAAW,EAAE;YAChB,WAAW,GAAG,IAAI,cAAc,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;YAChD,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;SAC/C;aAAM,IAAI,WAAW,CAAC,MAAM,EAAE;YAC7B,OAAO;SACR;QACD,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;IAC7C,CAAC;IAED,YAAY,CAAC,eAAmD;QAC9D,IAAI,CAAC,gBAAgB,GAAG,eAAe,CAAC;QACxC,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,IAAI,CAAC,gBAAgB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YAC/C,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE,CAAC;YACnC,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;SAC1B;QACD,MAAM,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;QAC7C,SAAS;YACP,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,EAAoB,CAAC;YAClD,IAAI,CAAC,KAAK,IAAI,KAAK,CAAC,QAAQ,CAAC,YAAY,IAAI,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE;gBACvE,MAAM;aACP;YACD,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;SAC5B;QACD,SAAS;YACP,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,EAAoB,CAAC;YACjD,IAAI,CAAC,KAAK,IAAI,KAAK,CAAC,QAAQ,CAAC,YAAY,GAAG,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE;gBACvE,MAAM;aACP;YACD,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;SACrD;QACD,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,CAAC,GAAG,KAAK,EAAE,EAAE,CAAC,EAAE;YAC5F,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;SACnC;QACD,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;IAC3B,CAAC;CACF;AAED,MAAM,OAAO,cAAe,SAAQ,EAAE,CAAC,WAAW,CAAC,WAAW;IAC5D,QAAQ,CAAyC;IACjD,UAAU,CAA8B;IACxC,OAAO,CAAU;IAEjB,YAAY,SAAsC,EAAE,OAA+C;QACjG,KAAK,CAAC,EAAE,EAAE,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;QACnC,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;QAC5B,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IACvB,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAED,KAAK,CAAC,UAAU;QACd,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;YACxC,sBAAsB,CAAC,sBAAsB,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;SACzF;IACH,CAAC;IAED,cAAc,CAAC,KAA0D,EAAE,IAAY;QACrF,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;YAC7B,OAAO,OAAO,KAAK,KAAK,QAAQ,IAAI,KAAK,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;SACvF;QACD,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,IAAI,QAAQ,GAAG,CAAC,CAAC;QACjB,KAAK,MAAM,GAAG,IAAI,KAAK,EAAE;YACvB,IAAI,EAAE,QAAQ,GAAG,CAAC,IAAI,OAAO,KAAK,CAAC,GAAG,CAAC,KAAK,QAAQ;gBAChD,CAAC,OAAO,KAAK,CAAC,GAAG,CAAC,KAAK,QAAQ,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,GAAG,CAAC,EAAE;gBAC/D,OAAO,IAAI,CAAC;aACb;YACD,IAAI,GAAG,EAAE;gBACP,GAAG,IAAI,IAAI,CAAC;aACb;YACD,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC;SACnB;QACD,OAAO,GAAG,CAAC;IACb,CAAC;IAED,eAAe,CAAC,MAA4D;QAC1E,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,KAAK,MAAM,GAAG,IAAI,MAAM,EAAE;YACxB,IAAI,GAAG,EAAE;gBACP,GAAG,IAAI,IAAI,CAAC;aACb;YACD,GAAG,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;SAC9C;QACD,OAAO,GAAG,CAAC;IACb,CAAC;IAED,OAAO;QACL,MAAM,KAAK,GAAG,QAAQ,CAAC,sBAAsB,EAAE,CAAC;QAChD,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC;QACjH,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACrB,CAAC;CACF;AAED,MAAM,OAAO,sBAAuB,SAAQ,EAAE,CAAC,WAAW,CAAC,WAAW;IACpE,SAAS,CAA6E;IAEtF,YAAY,QAAoF;QAC9F,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;IAC5B,CAAC;IAED,MAAM,CAAC,sBAAsB,CACzB,OAAmC,EAAE,IAAY,EACjD,KAA0D;QAC5D,MAAM,WAAW,GAAG,IAAI,sBAAsB,CAAC,EAAC,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAC,CAAC,CAAC;QAC3E,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;QACjC,IAAI,KAAK,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;YACtC,KAAK,MAAM,QAAQ,IAAI,KAAK,EAAE;gBAC5B,sBAAsB,CAAC,sBAAsB,CAAC,WAAW,EAAE,QAAQ,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;aACvF;SACF;IACH,CAAC;IAED,QAAQ;QACN,MAAM,KAAK,GAAG,QAAQ,CAAC,sBAAsB,EAAE,CAAC;QAChD,MAAM,WAAW,GAAG,KAAK,CAAC,WAAW,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACtD,WAAW,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;QAC9C,MAAM,gBAAgB,GAAG,KAAK,CAAC,WAAW,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;QAChE,gBAAgB,CAAC,WAAW,GAAG,IAAI,CAAC;QACpC,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,KAAK,IAAI,IAAI,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,KAAK,QAAQ,EAAE;YAC7E,MAAM,YAAY,GAAG,KAAK,CAAC,WAAW,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;YACxD,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YAChE,YAAY,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;SAC/G;QACD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACrB,CAAC;CACF;AAED,MAAM,OAAO,qBAAqB;IAChC,IAAI,CAAS;IACb,KAAK,CAAS;IACd,KAAK,CAAS;IAEd,YAAY,IAAY,EAAE,KAAa,EAAE,KAAa;QACpD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACrB,CAAC;CACF","sourcesContent":["/*\n * Copyright (C) 2013 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as PerfUI from '../../ui/legacy/components/perf_ui/perf_ui.js';\nimport type * as Protocol from '../../generated/protocol.js';\n\nimport type * as SDK from '../../core/sdk/sdk.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nconst UIStrings = {\n  /**\n  *@description Text to indicate the progress of a profile\n  */\n  profiling: 'Profiling…',\n  /**\n  *@description Text in Paint Profiler View of the Layers panel\n  */\n  shapes: 'Shapes',\n  /**\n  *@description Text in Paint Profiler View of the Layers panel\n  */\n  bitmap: 'Bitmap',\n  /**\n  *@description Generic label for any text\n  */\n  text: 'Text',\n  /**\n  *@description Text in Paint Profiler View of the Layers panel\n  */\n  misc: 'Misc',\n  /**\n  *@description ARIA label for a pie chart that shows the results of the paint profiler\n  */\n  profilingResults: 'Profiling results',\n  /**\n  *@description Label for command log tree in the Profiler tab\n  */\n  commandLog: 'Command Log',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/layer_viewer/PaintProfilerView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nlet categories: {[x: string]: PaintProfilerCategory}|null = null;\n\nlet logItemCategoriesMap: {[x: string]: PaintProfilerCategory}|null = null;\n\nexport class PaintProfilerView extends UI.Widget.HBox {\n  _canvasContainer: HTMLElement;\n  _progressBanner: HTMLElement;\n  _pieChart: PerfUI.PieChart.PieChart;\n  _showImageCallback: (arg0?: string|undefined) => void;\n  _canvas: HTMLCanvasElement;\n  _context: CanvasRenderingContext2D;\n  _selectionWindow: PerfUI.OverviewGrid.Window;\n  _innerBarWidth: number;\n  _minBarHeight: number;\n  _barPaddingWidth: number;\n  _outerBarWidth: number;\n  _pendingScale: number;\n  _scale: number;\n  _samplesPerBar: number;\n  _log: SDK.PaintProfiler.PaintProfilerLogItem[];\n  _snapshot?: SDK.PaintProfiler.PaintProfilerSnapshot|null;\n  _logCategories?: PaintProfilerCategory[];\n  _profiles?: Protocol.LayerTree.PaintProfile[]|null;\n  _updateImageTimer?: number;\n\n  constructor(showImageCallback: (arg0?: string|undefined) => void) {\n    super(true);\n    this.registerRequiredCSS('panels/layer_viewer/paintProfiler.css', {enableLegacyPatching: false});\n    this.contentElement.classList.add('paint-profiler-overview');\n    this._canvasContainer = this.contentElement.createChild('div', 'paint-profiler-canvas-container');\n    this._progressBanner = this.contentElement.createChild('div', 'full-widget-dimmed-banner hidden');\n    this._progressBanner.textContent = i18nString(UIStrings.profiling);\n    this._pieChart = new PerfUI.PieChart.PieChart();\n    this._populatePieChart(0, []);\n    this._pieChart.classList.add('paint-profiler-pie-chart');\n    this.contentElement.appendChild(this._pieChart);\n\n    this._showImageCallback = showImageCallback;\n    this._canvas = this._canvasContainer.createChild('canvas', 'fill') as HTMLCanvasElement;\n    this._context = this._canvas.getContext('2d') as CanvasRenderingContext2D;\n    this._selectionWindow = new PerfUI.OverviewGrid.Window(this._canvasContainer);\n    this._selectionWindow.addEventListener(PerfUI.OverviewGrid.Events.WindowChanged, this._onWindowChanged, this);\n\n    this._innerBarWidth = 4 * window.devicePixelRatio;\n    this._minBarHeight = window.devicePixelRatio;\n    this._barPaddingWidth = 2 * window.devicePixelRatio;\n    this._outerBarWidth = this._innerBarWidth + this._barPaddingWidth;\n    this._pendingScale = 1;\n    this._scale = this._pendingScale;\n    this._samplesPerBar = 0;\n    this._log = [];\n\n    this._reset();\n  }\n\n  static categories(): {[x: string]: PaintProfilerCategory} {\n    if (!categories) {\n      categories = {\n        shapes: new PaintProfilerCategory('shapes', i18nString(UIStrings.shapes), 'rgb(255, 161, 129)'),\n        bitmap: new PaintProfilerCategory('bitmap', i18nString(UIStrings.bitmap), 'rgb(136, 196, 255)'),\n        text: new PaintProfilerCategory('text', i18nString(UIStrings.text), 'rgb(180, 255, 137)'),\n        misc: new PaintProfilerCategory('misc', i18nString(UIStrings.misc), 'rgb(206, 160, 255)'),\n      };\n    }\n    return categories;\n  }\n\n  static _initLogItemCategories(): {[x: string]: PaintProfilerCategory} {\n    if (!logItemCategoriesMap) {\n      const categories = PaintProfilerView.categories();\n\n      const logItemCategories: {[x: string]: PaintProfilerCategory} = {};\n      logItemCategories['Clear'] = categories['misc'];\n      logItemCategories['DrawPaint'] = categories['misc'];\n      logItemCategories['DrawData'] = categories['misc'];\n      logItemCategories['SetMatrix'] = categories['misc'];\n      logItemCategories['PushCull'] = categories['misc'];\n      logItemCategories['PopCull'] = categories['misc'];\n      logItemCategories['Translate'] = categories['misc'];\n      logItemCategories['Scale'] = categories['misc'];\n      logItemCategories['Concat'] = categories['misc'];\n      logItemCategories['Restore'] = categories['misc'];\n      logItemCategories['SaveLayer'] = categories['misc'];\n      logItemCategories['Save'] = categories['misc'];\n      logItemCategories['BeginCommentGroup'] = categories['misc'];\n      logItemCategories['AddComment'] = categories['misc'];\n      logItemCategories['EndCommentGroup'] = categories['misc'];\n      logItemCategories['ClipRect'] = categories['misc'];\n      logItemCategories['ClipRRect'] = categories['misc'];\n      logItemCategories['ClipPath'] = categories['misc'];\n      logItemCategories['ClipRegion'] = categories['misc'];\n      logItemCategories['DrawPoints'] = categories['shapes'];\n      logItemCategories['DrawRect'] = categories['shapes'];\n      logItemCategories['DrawOval'] = categories['shapes'];\n      logItemCategories['DrawRRect'] = categories['shapes'];\n      logItemCategories['DrawPath'] = categories['shapes'];\n      logItemCategories['DrawVertices'] = categories['shapes'];\n      logItemCategories['DrawDRRect'] = categories['shapes'];\n      logItemCategories['DrawBitmap'] = categories['bitmap'];\n      logItemCategories['DrawBitmapRectToRect'] = categories['bitmap'];\n      logItemCategories['DrawBitmapMatrix'] = categories['bitmap'];\n      logItemCategories['DrawBitmapNine'] = categories['bitmap'];\n      logItemCategories['DrawSprite'] = categories['bitmap'];\n      logItemCategories['DrawPicture'] = categories['bitmap'];\n      logItemCategories['DrawText'] = categories['text'];\n      logItemCategories['DrawPosText'] = categories['text'];\n      logItemCategories['DrawPosTextH'] = categories['text'];\n      logItemCategories['DrawTextOnPath'] = categories['text'];\n\n      logItemCategoriesMap = logItemCategories;\n    }\n\n    return logItemCategoriesMap;\n  }\n\n  static _categoryForLogItem(logItem: SDK.PaintProfiler.PaintProfilerLogItem): PaintProfilerCategory {\n    const method = Platform.StringUtilities.toTitleCase(logItem.method);\n\n    const logItemCategories = PaintProfilerView._initLogItemCategories();\n    let result: PaintProfilerCategory = logItemCategories[method];\n    if (!result) {\n      result = PaintProfilerView.categories()['misc'];\n      logItemCategories[method] = result;\n    }\n    return result;\n  }\n\n  onResize(): void {\n    this._update();\n  }\n\n  async setSnapshotAndLog(\n      snapshot: SDK.PaintProfiler.PaintProfilerSnapshot|null, log: SDK.PaintProfiler.PaintProfilerLogItem[],\n      clipRect: Protocol.DOM.Rect|null): Promise<void> {\n    this._reset();\n    this._snapshot = snapshot;\n    if (this._snapshot) {\n      this._snapshot.addReference();\n    }\n    this._log = log;\n    this._logCategories = this._log.map(PaintProfilerView._categoryForLogItem);\n\n    if (!snapshot) {\n      this._update();\n      this._populatePieChart(0, []);\n      this._selectionWindow.setEnabled(false);\n      return;\n    }\n\n    this._selectionWindow.setEnabled(true);\n    this._progressBanner.classList.remove('hidden');\n    this._updateImage();\n\n    const profiles = await snapshot.profile(clipRect);\n\n    this._progressBanner.classList.add('hidden');\n    this._profiles = profiles;\n    this._update();\n    this._updatePieChart();\n  }\n\n  setScale(scale: number): void {\n    const needsUpdate = scale > this._scale;\n    const predictiveGrowthFactor = 2;\n    this._pendingScale = Math.min(1, scale * predictiveGrowthFactor);\n    if (needsUpdate && this._snapshot) {\n      this._updateImage();\n    }\n  }\n\n  _update(): void {\n    this._canvas.width = this._canvasContainer.clientWidth * window.devicePixelRatio;\n    this._canvas.height = this._canvasContainer.clientHeight * window.devicePixelRatio;\n    this._samplesPerBar = 0;\n    if (!this._profiles || !this._profiles.length || !this._logCategories) {\n      return;\n    }\n\n    const maxBars = Math.floor((this._canvas.width - 2 * this._barPaddingWidth) / this._outerBarWidth);\n    const sampleCount = this._log.length;\n    this._samplesPerBar = Math.ceil(sampleCount / maxBars);\n\n    let maxBarTime = 0;\n    const barTimes = [];\n    const barHeightByCategory = [];\n    let heightByCategory: {[category: string]: number} = {};\n    for (let i = 0, lastBarIndex = 0, lastBarTime = 0; i < sampleCount;) {\n      let categoryName = (this._logCategories[i] && this._logCategories[i].name) || 'misc';\n      const sampleIndex = this._log[i].commandIndex;\n      for (let row = 0; row < this._profiles.length; row++) {\n        const sample = this._profiles[row][sampleIndex];\n        lastBarTime += sample;\n        heightByCategory[categoryName] = (heightByCategory[categoryName] || 0) + sample;\n      }\n      ++i;\n      if (i - lastBarIndex === this._samplesPerBar || i === sampleCount) {\n        // Normalize by total number of samples accumulated.\n        const factor = this._profiles.length * (i - lastBarIndex);\n        lastBarTime /= factor;\n        for (categoryName in heightByCategory) {\n          heightByCategory[categoryName] /= factor;\n        }\n\n        barTimes.push(lastBarTime);\n        barHeightByCategory.push(heightByCategory);\n\n        if (lastBarTime > maxBarTime) {\n          maxBarTime = lastBarTime;\n        }\n        lastBarTime = 0;\n        heightByCategory = {};\n        lastBarIndex = i;\n      }\n    }\n\n    const paddingHeight = 4 * window.devicePixelRatio;\n    const scale = (this._canvas.height - paddingHeight - this._minBarHeight) / maxBarTime;\n    for (let i = 0; i < barTimes.length; ++i) {\n      for (const categoryName in barHeightByCategory[i]) {\n        barHeightByCategory[i][categoryName] *= (barTimes[i] * scale + this._minBarHeight) / barTimes[i];\n      }\n      this._renderBar(i, barHeightByCategory[i]);\n    }\n  }\n\n  _renderBar(index: number, heightByCategory: {[x: string]: number}): void {\n    const categories = PaintProfilerView.categories();\n    let currentHeight = 0;\n    const x = this._barPaddingWidth + index * this._outerBarWidth;\n    for (const categoryName in categories) {\n      if (!heightByCategory[categoryName]) {\n        continue;\n      }\n      currentHeight += heightByCategory[categoryName];\n      const y = this._canvas.height - currentHeight;\n      this._context.fillStyle = categories[categoryName].color;\n      this._context.fillRect(x, y, this._innerBarWidth, heightByCategory[categoryName]);\n    }\n  }\n\n  _onWindowChanged(): void {\n    this.dispatchEventToListeners(Events.WindowChanged);\n    this._updatePieChart();\n    if (this._updateImageTimer) {\n      return;\n    }\n    this._updateImageTimer = window.setTimeout(this._updateImage.bind(this), 100);\n  }\n\n  _updatePieChart(): void {\n    const {total, slices} = this._calculatePieChart();\n    this._populatePieChart(total, slices);\n  }\n\n  _calculatePieChart(): {total: number, slices: Array<{value: number, color: string, title: string}>} {\n    const window = this.selectionWindow();\n    if (!this._profiles || !this._profiles.length || !window) {\n      return {total: 0, slices: []};\n    }\n    let totalTime = 0;\n    const timeByCategory: {[x: string]: number} = {};\n    for (let i = window.left; i < window.right; ++i) {\n      const logEntry = this._log[i];\n      const category = PaintProfilerView._categoryForLogItem(logEntry);\n      timeByCategory[category.color] = timeByCategory[category.color] || 0;\n      for (let j = 0; j < this._profiles.length; ++j) {\n        const time = this._profiles[j][logEntry.commandIndex];\n        totalTime += time;\n        timeByCategory[category.color] += time;\n      }\n    }\n    const slices: PerfUI.PieChart.Slice[] = [];\n    for (const color in timeByCategory) {\n      slices.push({value: timeByCategory[color] / this._profiles.length, color, title: ''});\n    }\n    return {total: totalTime / this._profiles.length, slices};\n  }\n\n  _populatePieChart(total: number, slices: PerfUI.PieChart.Slice[]): void {\n    this._pieChart.data = {\n      chartName: i18nString(UIStrings.profilingResults),\n      size: 55,\n      formatter: this._formatPieChartTime.bind(this),\n      showLegend: false,\n      total,\n      slices,\n    };\n  }\n\n  _formatPieChartTime(value: number): string {\n    return i18n.i18n.millisToString(value * 1000, true);\n  }\n\n  selectionWindow(): {left: number, right: number}|null {\n    if (!this._log) {\n      return null;\n    }\n\n    const screenLeft = (this._selectionWindow.windowLeft || 0) * this._canvas.width;\n    const screenRight = (this._selectionWindow.windowRight || 0) * this._canvas.width;\n    const barLeft = Math.floor(screenLeft / this._outerBarWidth);\n    const barRight = Math.floor((screenRight + this._innerBarWidth - this._barPaddingWidth / 2) / this._outerBarWidth);\n    const stepLeft = Platform.NumberUtilities.clamp(barLeft * this._samplesPerBar, 0, this._log.length - 1);\n    const stepRight = Platform.NumberUtilities.clamp(barRight * this._samplesPerBar, 0, this._log.length);\n\n    return {left: stepLeft, right: stepRight};\n  }\n\n  _updateImage(): void {\n    delete this._updateImageTimer;\n    let left;\n    let right;\n    const window = this.selectionWindow();\n    if (this._profiles && this._profiles.length && window) {\n      left = this._log[window.left].commandIndex;\n      right = this._log[window.right - 1].commandIndex;\n    }\n    const scale = this._pendingScale;\n    if (!this._snapshot) {\n      return;\n    }\n    this._snapshot.replay(scale, left, right).then(image => {\n      if (!image) {\n        return;\n      }\n      this._scale = scale;\n      this._showImageCallback(image);\n    });\n  }\n\n  _reset(): void {\n    if (this._snapshot) {\n      this._snapshot.release();\n    }\n    this._snapshot = null;\n    this._profiles = null;\n    this._selectionWindow.reset();\n    this._selectionWindow.setEnabled(false);\n  }\n}\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum Events {\n  WindowChanged = 'WindowChanged',\n}\n\nexport class PaintProfilerCommandLogView extends UI.ThrottledWidget.ThrottledWidget {\n  _treeOutline: UI.TreeOutline.TreeOutlineInShadow;\n  _log: SDK.PaintProfiler.PaintProfilerLogItem[];\n  _treeItemCache: Map<SDK.PaintProfiler.PaintProfilerLogItem, LogTreeElement>;\n  _selectionWindow?: {left: number, right: number}|null;\n  constructor() {\n    super();\n    this.setMinimumSize(100, 25);\n    this.element.classList.add('overflow-auto');\n\n    this._treeOutline = new UI.TreeOutline.TreeOutlineInShadow();\n    UI.ARIAUtils.setAccessibleName(this._treeOutline.contentElement, i18nString(UIStrings.commandLog));\n    this.element.appendChild(this._treeOutline.element);\n    this.setDefaultFocusedElement(this._treeOutline.contentElement);\n\n    this._log = [];\n    this._treeItemCache = new Map();\n  }\n\n  setCommandLog(log: SDK.PaintProfiler.PaintProfilerLogItem[]): void {\n    this._log = log;\n\n    this.updateWindow({left: 0, right: this._log.length});\n  }\n\n  _appendLogItem(logItem: SDK.PaintProfiler.PaintProfilerLogItem): void {\n    let treeElement = this._treeItemCache.get(logItem);\n    if (!treeElement) {\n      treeElement = new LogTreeElement(this, logItem);\n      this._treeItemCache.set(logItem, treeElement);\n    } else if (treeElement.parent) {\n      return;\n    }\n    this._treeOutline.appendChild(treeElement);\n  }\n\n  updateWindow(selectionWindow: {left: number, right: number}|null): void {\n    this._selectionWindow = selectionWindow;\n    this.update();\n  }\n\n  doUpdate(): Promise<void> {\n    if (!this._selectionWindow || !this._log.length) {\n      this._treeOutline.removeChildren();\n      return Promise.resolve();\n    }\n    const root = this._treeOutline.rootElement();\n    for (;;) {\n      const child = root.firstChild() as LogTreeElement;\n      if (!child || child._logItem.commandIndex >= this._selectionWindow.left) {\n        break;\n      }\n      root.removeChildAtIndex(0);\n    }\n    for (;;) {\n      const child = root.lastChild() as LogTreeElement;\n      if (!child || child._logItem.commandIndex < this._selectionWindow.right) {\n        break;\n      }\n      root.removeChildAtIndex(root.children().length - 1);\n    }\n    for (let i = this._selectionWindow.left, right = this._selectionWindow.right; i < right; ++i) {\n      this._appendLogItem(this._log[i]);\n    }\n    return Promise.resolve();\n  }\n}\n\nexport class LogTreeElement extends UI.TreeOutline.TreeElement {\n  _logItem: SDK.PaintProfiler.PaintProfilerLogItem;\n  _ownerView: PaintProfilerCommandLogView;\n  _filled: boolean;\n\n  constructor(ownerView: PaintProfilerCommandLogView, logItem: SDK.PaintProfiler.PaintProfilerLogItem) {\n    super('', Boolean(logItem.params));\n    this._logItem = logItem;\n    this._ownerView = ownerView;\n    this._filled = false;\n  }\n\n  onattach(): void {\n    this._update();\n  }\n\n  async onpopulate(): Promise<void> {\n    for (const param in this._logItem.params) {\n      LogPropertyTreeElement._appendLogPropertyItem(this, param, this._logItem.params[param]);\n    }\n  }\n\n  _paramToString(param: SDK.PaintProfiler.RawPaintProfilerLogItemParamValue, name: string): string {\n    if (typeof param !== 'object') {\n      return typeof param === 'string' && param.length > 100 ? name : JSON.stringify(param);\n    }\n    let str = '';\n    let keyCount = 0;\n    for (const key in param) {\n      if (++keyCount > 4 || typeof param[key] === 'object' ||\n          (typeof param[key] === 'string' && param[key].length > 100)) {\n        return name;\n      }\n      if (str) {\n        str += ', ';\n      }\n      str += param[key];\n    }\n    return str;\n  }\n\n  _paramsToString(params: SDK.PaintProfiler.RawPaintProfilerLogItemParams|null): string {\n    let str = '';\n    for (const key in params) {\n      if (str) {\n        str += ', ';\n      }\n      str += this._paramToString(params[key], key);\n    }\n    return str;\n  }\n\n  _update(): void {\n    const title = document.createDocumentFragment();\n    UI.UIUtils.createTextChild(title, this._logItem.method + '(' + this._paramsToString(this._logItem.params) + ')');\n    this.title = title;\n  }\n}\n\nexport class LogPropertyTreeElement extends UI.TreeOutline.TreeElement {\n  _property: {name: string, value: SDK.PaintProfiler.RawPaintProfilerLogItemParamValue};\n\n  constructor(property: {name: string, value: SDK.PaintProfiler.RawPaintProfilerLogItemParamValue}) {\n    super();\n    this._property = property;\n  }\n\n  static _appendLogPropertyItem(\n      element: UI.TreeOutline.TreeElement, name: string,\n      value: SDK.PaintProfiler.RawPaintProfilerLogItemParamValue): void {\n    const treeElement = new LogPropertyTreeElement({name: name, value: value});\n    element.appendChild(treeElement);\n    if (value && typeof value === 'object') {\n      for (const property in value) {\n        LogPropertyTreeElement._appendLogPropertyItem(treeElement, property, value[property]);\n      }\n    }\n  }\n\n  onattach(): void {\n    const title = document.createDocumentFragment();\n    const nameElement = title.createChild('span', 'name');\n    nameElement.textContent = this._property.name;\n    const separatorElement = title.createChild('span', 'separator');\n    separatorElement.textContent = ': ';\n    if (this._property.value === null || typeof this._property.value !== 'object') {\n      const valueElement = title.createChild('span', 'value');\n      valueElement.textContent = JSON.stringify(this._property.value);\n      valueElement.classList.add('cm-js-' + (this._property.value === null ? 'null' : typeof this._property.value));\n    }\n    this.title = title;\n  }\n}\n\nexport class PaintProfilerCategory {\n  name: string;\n  title: string;\n  color: string;\n\n  constructor(name: string, title: string, color: string) {\n    this.name = name;\n    this.title = title;\n    this.color = color;\n  }\n}\n"]}