{"version":3,"file":"ConsolePrompt.js","sourceRoot":"","sources":["../../../../../../front_end/panels/console/ConsolePrompt.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as ObjectUI from '../../ui/legacy/components/object_ui/object_ui.js';\nimport * as TextEditor from '../../ui/legacy/components/text_editor/text_editor.js';  // eslint-disable-line no-unused-vars\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {ConsolePanel} from './ConsolePanel.js';\n\nconst UIStrings = {\n  /**\n  *@description Text in Console Prompt of the Console panel\n  */\n  consolePrompt: 'Console prompt',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/console/ConsolePrompt.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class ConsolePrompt extends UI.Widget.Widget {\n  _addCompletionsFromHistory: boolean;\n  _history: ConsoleHistoryManager;\n  _initialText: string;\n  _editor: UI.TextEditor.TextEditor|null;\n  _eagerPreviewElement: HTMLDivElement;\n  _textChangeThrottler: Common.Throttler.Throttler;\n  _formatter: ObjectUI.RemoteObjectPreviewFormatter.RemoteObjectPreviewFormatter;\n  _requestPreviewBound: () => Promise<void>;\n  _innerPreviewElement: HTMLElement;\n  _promptIcon: UI.Icon.Icon;\n  _iconThrottler: Common.Throttler.Throttler;\n  _eagerEvalSetting: Common.Settings.Setting<boolean>;\n  _previewRequestForTest: Promise<void>|null;\n  _defaultAutocompleteConfig: UI.TextEditor.AutocompleteConfig|null;\n  _highlightingNode: boolean;\n\n  constructor() {\n    super();\n    this.registerRequiredCSS('panels/console/consolePrompt.css', {enableLegacyPatching: false});\n    this._addCompletionsFromHistory = true;\n    this._history = new ConsoleHistoryManager();\n\n    this._initialText = '';\n    this._editor = null;\n    this._eagerPreviewElement = document.createElement('div');\n    this._eagerPreviewElement.classList.add('console-eager-preview');\n    this._textChangeThrottler = new Common.Throttler.Throttler(150);\n    this._formatter = new ObjectUI.RemoteObjectPreviewFormatter.RemoteObjectPreviewFormatter();\n    this._requestPreviewBound = this._requestPreview.bind(this);\n    this._innerPreviewElement = this._eagerPreviewElement.createChild('div', 'console-eager-inner-preview');\n    this._eagerPreviewElement.appendChild(UI.Icon.Icon.create('smallicon-command-result', 'preview-result-icon'));\n\n    const editorContainerElement = this.element.createChild('div', 'console-prompt-editor-container');\n    this.element.appendChild(this._eagerPreviewElement);\n\n    this._promptIcon = UI.Icon.Icon.create('smallicon-text-prompt', 'console-prompt-icon');\n    this.element.appendChild(this._promptIcon);\n    this._iconThrottler = new Common.Throttler.Throttler(0);\n\n    this._eagerEvalSetting = Common.Settings.Settings.instance().moduleSetting('consoleEagerEval');\n    this._eagerEvalSetting.addChangeListener(this._eagerSettingChanged.bind(this));\n    this._eagerPreviewElement.classList.toggle('hidden', !this._eagerEvalSetting.get());\n\n    this.element.tabIndex = 0;\n    this._previewRequestForTest = null;\n\n    this._defaultAutocompleteConfig = null;\n\n    this._highlightingNode = false;\n\n    const factory = TextEditor.CodeMirrorTextEditor.CodeMirrorTextEditorFactory.instance();\n\n    const options = {\n      devtoolsAccessibleName: (i18nString(UIStrings.consolePrompt) as string),\n      lineNumbers: false,\n      lineWrapping: true,\n      mimeType: 'javascript',\n      autoHeight: true,\n    };\n    this._editor = factory.createEditor((options as UI.TextEditor.Options));\n\n    this._defaultAutocompleteConfig =\n        ObjectUI.JavaScriptAutocomplete.JavaScriptAutocompleteConfig.createConfigForEditor(this._editor);\n    this._editor.configureAutocomplete(Object.assign({}, this._defaultAutocompleteConfig, {\n      suggestionsCallback: this._wordsWithQuery.bind(this),\n      anchorBehavior: UI.GlassPane.AnchorBehavior.PreferTop,\n    }));\n    this._editor.widget().element.addEventListener('keydown', this._editorKeyDown.bind(this), true);\n    this._editor.widget().show(editorContainerElement);\n    this._editor.addEventListener(UI.TextEditor.Events.CursorChanged, this._updatePromptIcon, this);\n    this._editor.addEventListener(UI.TextEditor.Events.TextChanged, this._onTextChanged, this);\n    this._editor.addEventListener(UI.TextEditor.Events.SuggestionChanged, this._onTextChanged, this);\n\n    this.setText(this._initialText);\n    this._initialText = '';\n    if (this.hasFocus()) {\n      this.focus();\n    }\n    this.element.removeAttribute('tabindex');\n    this._editor.widget().element.tabIndex = -1;\n\n    this._editorSetForTest();\n\n    // Record the console tool load time after the console prompt constructor is complete.\n    Host.userMetrics.panelLoaded('console', 'DevTools.Launch.Console');\n  }\n\n  _eagerSettingChanged(): void {\n    const enabled = this._eagerEvalSetting.get();\n    this._eagerPreviewElement.classList.toggle('hidden', !enabled);\n    if (enabled) {\n      this._requestPreview();\n    }\n  }\n\n  belowEditorElement(): Element {\n    return this._eagerPreviewElement;\n  }\n\n  _onTextChanged(): void {\n    // ConsoleView and prompt both use a throttler, so we clear the preview\n    // ASAP to avoid inconsistency between a fresh viewport and stale preview.\n    if (this._eagerEvalSetting.get()) {\n      const asSoonAsPossible = !this._editor || !this._editor.textWithCurrentSuggestion();\n      this._previewRequestForTest = this._textChangeThrottler.schedule(this._requestPreviewBound, asSoonAsPossible);\n    }\n    this._updatePromptIcon();\n    this.dispatchEventToListeners(Events.TextChanged);\n  }\n\n  async _requestPreview(): Promise<void> {\n    if (!this._editor) {\n      return;\n    }\n    const text = this._editor.textWithCurrentSuggestion().trim();\n    const executionContext = UI.Context.Context.instance().flavor(SDK.RuntimeModel.ExecutionContext);\n    const {preview, result} =\n        await ObjectUI.JavaScriptREPL.JavaScriptREPL.evaluateAndBuildPreview(text, true /* throwOnSideEffect */, 500);\n    this._innerPreviewElement.removeChildren();\n    if (preview.deepTextContent() !== this._editor.textWithCurrentSuggestion().trim()) {\n      this._innerPreviewElement.appendChild(preview);\n    }\n    if (result && 'object' in result && result.object && result.object.subtype === 'node') {\n      this._highlightingNode = true;\n      SDK.OverlayModel.OverlayModel.highlightObjectAsDOMNode(result.object);\n    } else if (this._highlightingNode) {\n      this._highlightingNode = false;\n      SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n    }\n    if (result && executionContext) {\n      executionContext.runtimeModel.releaseEvaluationResult(result);\n    }\n  }\n\n  willHide(): void {\n    if (this._highlightingNode) {\n      this._highlightingNode = false;\n      SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n    }\n  }\n\n  history(): ConsoleHistoryManager {\n    return this._history;\n  }\n\n  clearAutocomplete(): void {\n    if (this._editor) {\n      this._editor.clearAutocomplete();\n    }\n  }\n\n  _isCaretAtEndOfPrompt(): boolean {\n    return this._editor !== null &&\n        this._editor.selection().collapseToEnd().equal(this._editor.fullRange().collapseToEnd());\n  }\n\n  moveCaretToEndOfPrompt(): void {\n    if (this._editor) {\n      this._editor.setSelection(TextUtils.TextRange.TextRange.createFromLocation(Infinity, Infinity));\n    }\n  }\n\n  setText(text: string): void {\n    if (this._editor) {\n      this._editor.setText(text);\n    } else {\n      this._initialText = text;\n    }\n    this.dispatchEventToListeners(Events.TextChanged);\n  }\n\n  text(): string {\n    return this._editor ? this._editor.text() : this._initialText;\n  }\n\n  setAddCompletionsFromHistory(value: boolean): void {\n    this._addCompletionsFromHistory = value;\n  }\n\n  _editorKeyDown(event: Event): void {\n    if (!this._editor) {\n      return;\n    }\n    const keyboardEvent = (event as KeyboardEvent);\n    let newText;\n    let isPrevious;\n    // Check against visual coordinates in case lines wrap.\n    const selection = this._editor.selection();\n    const cursorY = this._editor.visualCoordinates(selection.endLine, selection.endColumn).y;\n\n    switch (keyboardEvent.keyCode) {\n      case UI.KeyboardShortcut.Keys.Up.code: {\n        const startY = this._editor.visualCoordinates(0, 0).y;\n        if (keyboardEvent.shiftKey || !selection.isEmpty() || cursorY !== startY) {\n          break;\n        }\n        newText = this._history.previous(this.text());\n        isPrevious = true;\n        break;\n      }\n      case UI.KeyboardShortcut.Keys.Down.code: {\n        const fullRange = this._editor.fullRange();\n        const endY = this._editor.visualCoordinates(fullRange.endLine, fullRange.endColumn).y;\n        if (keyboardEvent.shiftKey || !selection.isEmpty() || cursorY !== endY) {\n          break;\n        }\n        newText = this._history.next();\n        break;\n      }\n      case UI.KeyboardShortcut.Keys.P.code: {  // Ctrl+P = Previous\n        if (Host.Platform.isMac() && keyboardEvent.ctrlKey && !keyboardEvent.metaKey && !keyboardEvent.altKey &&\n            !keyboardEvent.shiftKey) {\n          newText = this._history.previous(this.text());\n          isPrevious = true;\n        }\n        break;\n      }\n      case UI.KeyboardShortcut.Keys.N.code: {  // Ctrl+N = Next\n        if (Host.Platform.isMac() && keyboardEvent.ctrlKey && !keyboardEvent.metaKey && !keyboardEvent.altKey &&\n            !keyboardEvent.shiftKey) {\n          newText = this._history.next();\n        }\n        break;\n      }\n      case UI.KeyboardShortcut.Keys.Enter.code: {\n        this._enterKeyPressed(keyboardEvent);\n        break;\n      }\n      case UI.KeyboardShortcut.Keys.Tab.code: {\n        if (!this.text()) {\n          keyboardEvent.consume();\n        }\n        break;\n      }\n    }\n\n    if (newText === undefined) {\n      return;\n    }\n    keyboardEvent.consume(true);\n    this.setText(newText);\n\n    if (isPrevious) {\n      this._editor.setSelection(TextUtils.TextRange.TextRange.createFromLocation(0, Infinity));\n    } else {\n      this.moveCaretToEndOfPrompt();\n    }\n  }\n\n  async _enterWillEvaluate(): Promise<boolean> {\n    if (!this._isCaretAtEndOfPrompt()) {\n      return true;\n    }\n    return await ObjectUI.JavaScriptAutocomplete.JavaScriptAutocomplete.isExpressionComplete(this.text());\n  }\n\n  _updatePromptIcon(): void {\n    this._iconThrottler.schedule(async () => {\n      const canComplete = await this._enterWillEvaluate();\n      this._promptIcon.classList.toggle('console-prompt-incomplete', !canComplete);\n    });\n  }\n\n  async _enterKeyPressed(event: KeyboardEvent): Promise<void> {\n    if (event.altKey || event.ctrlKey || event.shiftKey) {\n      return;\n    }\n\n    event.consume(true);\n\n    // Since we prevent default, manually emulate the native \"scroll on key input\" behavior.\n    this.element.scrollIntoView();\n    this.clearAutocomplete();\n\n    const str = this.text();\n    if (!str.length) {\n      return;\n    }\n\n    if (await this._enterWillEvaluate()) {\n      await this._appendCommand(str, true);\n    } else if (this._editor) {\n      this._editor.newlineAndIndent();\n    }\n    this._enterProcessedForTest();\n  }\n\n  async _appendCommand(text: string, useCommandLineAPI: boolean): Promise<void> {\n    this.setText('');\n    const currentExecutionContext = UI.Context.Context.instance().flavor(SDK.RuntimeModel.ExecutionContext);\n    if (currentExecutionContext) {\n      const executionContext = currentExecutionContext;\n      const message = SDK.ConsoleModel.ConsoleModel.instance().addCommandMessage(executionContext, text);\n      const expression = ObjectUI.JavaScriptREPL.JavaScriptREPL.preprocessExpression(text);\n      SDK.ConsoleModel.ConsoleModel.instance().evaluateCommandInConsole(\n          executionContext, message, expression, useCommandLineAPI);\n      if (ConsolePanel.instance().isShowing()) {\n        Host.userMetrics.actionTaken(Host.UserMetrics.Action.CommandEvaluatedInConsolePanel);\n      }\n    }\n  }\n\n  _enterProcessedForTest(): void {\n  }\n\n  _historyCompletions(prefix: string, force?: boolean): UI.SuggestBox.Suggestions {\n    const text = this.text();\n    if (!this._addCompletionsFromHistory || !this._isCaretAtEndOfPrompt() || (!text && !force)) {\n      return [];\n    }\n    const result = [];\n    const set = new Set<string>();\n    const data = this._history.historyData();\n    for (let i = data.length - 1; i >= 0 && result.length < 50; --i) {\n      const item = data[i];\n      if (!item.startsWith(text)) {\n        continue;\n      }\n      if (set.has(item)) {\n        continue;\n      }\n      set.add(item);\n      result.push(\n          {text: item.substring(text.length - prefix.length), iconType: 'smallicon-text-prompt', isSecondary: true});\n    }\n    return result as UI.SuggestBox.Suggestions;\n  }\n\n  focus(): void {\n    if (this._editor) {\n      this._editor.widget().focus();\n    } else {\n      this.element.focus();\n    }\n  }\n\n  async _wordsWithQuery(\n      queryRange: TextUtils.TextRange.TextRange, substituteRange: TextUtils.TextRange.TextRange,\n      force?: boolean): Promise<UI.SuggestBox.Suggestions> {\n    if (!this._editor || !this._defaultAutocompleteConfig || !this._defaultAutocompleteConfig.suggestionsCallback) {\n      return [];\n    }\n    const query = this._editor.text(queryRange);\n    const words = await this._defaultAutocompleteConfig.suggestionsCallback(queryRange, substituteRange, force);\n    const historyWords = this._historyCompletions(query, force);\n    return words ? words.concat(historyWords) : historyWords;\n  }\n\n  _editorSetForTest(): void {\n  }\n}\n\nexport class ConsoleHistoryManager {\n  _data: string[];\n  _historyOffset: number;\n  _uncommittedIsTop?: boolean;\n  constructor() {\n    this._data = [];\n\n    /**\n     * 1-based entry in the history stack.\n     */\n    this._historyOffset = 1;\n  }\n\n  historyData(): string[] {\n    return this._data;\n  }\n\n  setHistoryData(data: string[]): void {\n    this._data = data.slice();\n    this._historyOffset = 1;\n  }\n\n  /**\n   * Pushes a committed text into the history.\n   */\n  pushHistoryItem(text: string): void {\n    if (this._uncommittedIsTop) {\n      this._data.pop();\n      delete this._uncommittedIsTop;\n    }\n\n    this._historyOffset = 1;\n    if (text === this._currentHistoryItem()) {\n      return;\n    }\n    this._data.push(text);\n  }\n\n  /**\n   * Pushes the current (uncommitted) text into the history.\n   */\n  _pushCurrentText(currentText: string): void {\n    if (this._uncommittedIsTop) {\n      this._data.pop();\n    }  // Throw away obsolete uncommitted text.\n    this._uncommittedIsTop = true;\n    this._data.push(currentText);\n  }\n\n  previous(currentText: string): string|undefined {\n    if (this._historyOffset > this._data.length) {\n      return undefined;\n    }\n    if (this._historyOffset === 1) {\n      this._pushCurrentText(currentText);\n    }\n    ++this._historyOffset;\n    return this._currentHistoryItem();\n  }\n\n  next(): string|undefined {\n    if (this._historyOffset === 1) {\n      return undefined;\n    }\n    --this._historyOffset;\n    return this._currentHistoryItem();\n  }\n\n  _currentHistoryItem(): string|undefined {\n    return this._data[this._data.length - this._historyOffset];\n  }\n}\n\nexport const enum Events {\n  TextChanged = 'TextChanged',\n}\n"]}