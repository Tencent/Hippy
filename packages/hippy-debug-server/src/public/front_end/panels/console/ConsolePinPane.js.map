{"version":3,"file":"ConsolePinPane.js","sourceRoot":"","sources":["../../../../../../front_end/panels/console/ConsolePinPane.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2018 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as ObjectUI from '../../ui/legacy/components/object_ui/object_ui.js';\nimport * as TextEditor from '../../ui/legacy/components/text_editor/text_editor.js';  // eslint-disable-line no-unused-vars\nimport * as UI from '../../ui/legacy/legacy.js';\n\nconst UIStrings = {\n  /**\n  *@description A context menu item in the Console Pin Pane of the Console panel\n  */\n  removeExpression: 'Remove expression',\n  /**\n  *@description A context menu item in the Console Pin Pane of the Console panel\n  */\n  removeAllExpressions: 'Remove all expressions',\n  /**\n  *@description Screen reader label for delete button on a non-blank live expression\n  *@example {document} PH1\n  */\n  removeExpressionS: 'Remove expression: {PH1}',\n  /**\n  *@description Screen reader label for delete button on a blank live expression\n  */\n  removeBlankExpression: 'Remove blank expression',\n  /**\n  *@description Text in Console Pin Pane of the Console panel\n  */\n  liveExpressionEditor: 'Live expression editor',\n  /**\n  *@description Text in Console Pin Pane of the Console panel\n  */\n  expression: 'Expression',\n  /**\n  *@description Side effect label title in Console Pin Pane of the Console panel\n  */\n  evaluateAllowingSideEffects: 'Evaluate, allowing side effects',\n  /**\n  *@description Text of a DOM element in Console Pin Pane of the Console panel\n  */\n  notAvailable: 'not available',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/console/ConsolePinPane.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst elementToConsolePin = new WeakMap<Element, ConsolePin>();\n\nexport class ConsolePinPane extends UI.ThrottledWidget.ThrottledWidget {\n  _liveExpressionButton: UI.Toolbar.ToolbarButton;\n  _pins: Set<ConsolePin>;\n  _pinsSetting: Common.Settings.Setting<string[]>;\n  constructor(liveExpressionButton: UI.Toolbar.ToolbarButton) {\n    super(true, 250);\n    this._liveExpressionButton = liveExpressionButton;\n    this.registerRequiredCSS('panels/console/consolePinPane.css', {enableLegacyPatching: false});\n    this.registerRequiredCSS('ui/legacy/components/object_ui/objectValue.css', {enableLegacyPatching: false});\n    this.contentElement.classList.add('console-pins', 'monospace');\n    this.contentElement.addEventListener('contextmenu', this._contextMenuEventFired.bind(this), false);\n\n    this._pins = new Set();\n    this._pinsSetting = Common.Settings.Settings.instance().createLocalSetting('consolePins', []);\n    for (const expression of this._pinsSetting.get()) {\n      this.addPin(expression);\n    }\n  }\n\n  willHide(): void {\n    for (const pin of this._pins) {\n      pin.setHovered(false);\n    }\n  }\n\n  _savePins(): void {\n    const toSave = Array.from(this._pins).map(pin => pin.expression());\n    this._pinsSetting.set(toSave);\n  }\n\n  _contextMenuEventFired(event: Event): void {\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    const target = UI.UIUtils.deepElementFromEvent(event);\n    if (target) {\n      const targetPinElement = target.enclosingNodeOrSelfWithClass('console-pin');\n      if (targetPinElement) {\n        const targetPin = elementToConsolePin.get(targetPinElement);\n        if (targetPin) {\n          contextMenu.editSection().appendItem(\n              i18nString(UIStrings.removeExpression), this._removePin.bind(this, targetPin));\n          targetPin.appendToContextMenu(contextMenu);\n        }\n      }\n    }\n    contextMenu.editSection().appendItem(i18nString(UIStrings.removeAllExpressions), this._removeAllPins.bind(this));\n    contextMenu.show();\n  }\n\n  _removeAllPins(): void {\n    for (const pin of this._pins) {\n      this._removePin(pin);\n    }\n  }\n\n  _removePin(pin: ConsolePin): void {\n    pin.element().remove();\n    const newFocusedPin = this._focusedPinAfterDeletion(pin);\n    this._pins.delete(pin);\n    this._savePins();\n    if (newFocusedPin) {\n      newFocusedPin.focus();\n    } else {\n      this._liveExpressionButton.focus();\n    }\n  }\n\n  addPin(expression: string, userGesture?: boolean): void {\n    const pin = new ConsolePin(expression, this);\n    this.contentElement.appendChild(pin.element());\n    this._pins.add(pin);\n    this._savePins();\n    if (userGesture) {\n      pin.focus();\n    }\n    this.update();\n  }\n\n  _focusedPinAfterDeletion(deletedPin: ConsolePin): ConsolePin|null {\n    const pinArray = Array.from(this._pins);\n    for (let i = 0; i < pinArray.length; i++) {\n      if (pinArray[i] === deletedPin) {\n        if (pinArray.length === 1) {\n          return null;\n        }\n        if (i === pinArray.length - 1) {\n          return pinArray[i - 1];\n        }\n        return pinArray[i + 1];\n      }\n    }\n    return null;\n  }\n\n  async doUpdate(): Promise<void> {\n    if (!this._pins.size || !this.isShowing()) {\n      return;\n    }\n    if (this.isShowing()) {\n      this.update();\n    }\n    const updatePromises = Array.from(this._pins, pin => pin.updatePreview());\n    await Promise.all(updatePromises);\n    this._updatedForTest();\n  }\n\n  _updatedForTest(): void {\n  }\n}\n\nlet consolePinNumber = 0;\n\nexport class ConsolePin extends Common.ObjectWrapper.ObjectWrapper {\n  _pinElement: Element;\n  _pinPreview: HTMLElement;\n  _lastResult: SDK.RuntimeModel.EvaluationResult|null;\n  _lastExecutionContext: SDK.RuntimeModel.ExecutionContext|null;\n  _editor: UI.TextEditor.TextEditor|null;\n  _committedExpression: string;\n  _hovered: boolean;\n  _lastNode: SDK.RemoteObject.RemoteObject|null;\n  _editorPromise: Promise<UI.TextEditor.TextEditor>;\n  private consolePinNumber: number;\n\n  constructor(expression: string, pinPane: ConsolePinPane) {\n    super();\n    this.consolePinNumber = ++consolePinNumber;\n    const deletePinIcon = (document.createElement('div', {is: 'dt-close-button'}) as UI.UIUtils.DevToolsCloseButton);\n    deletePinIcon.gray = true;\n    deletePinIcon.classList.add('close-button');\n    deletePinIcon.setTabbable(true);\n    if (expression.length) {\n      deletePinIcon.setAccessibleName(i18nString(UIStrings.removeExpressionS, {PH1: expression}));\n    } else {\n      deletePinIcon.setAccessibleName(i18nString(UIStrings.removeBlankExpression));\n    }\n    self.onInvokeElement(deletePinIcon, event => {\n      pinPane._removePin(this);\n      event.consume(true);\n    });\n\n    const fragment = UI.Fragment.Fragment.build`\n  <div class='console-pin'>\n  ${deletePinIcon}\n  <div class='console-pin-name' $='name'></div>\n  <div class='console-pin-preview' $='preview'></div>\n  </div>`;\n    this._pinElement = fragment.element();\n    this._pinPreview = (fragment.$('preview') as HTMLElement);\n    const nameElement = (fragment.$('name') as HTMLElement);\n    UI.Tooltip.Tooltip.install(nameElement, expression);\n    elementToConsolePin.set(this._pinElement, this);\n\n    this._lastResult = null;\n    this._lastExecutionContext = null;\n    this._editor = null;\n    this._committedExpression = expression;\n    this._hovered = false;\n    this._lastNode = null;\n\n    this._pinPreview.addEventListener('mouseenter', this.setHovered.bind(this, true), false);\n    this._pinPreview.addEventListener('mouseleave', this.setHovered.bind(this, false), false);\n    this._pinPreview.addEventListener('click', (event: Event) => {\n      if (this._lastNode) {\n        Common.Revealer.reveal(this._lastNode);\n        event.consume();\n      }\n    }, false);\n\n    const createTextEditor = (factory: UI.TextEditor.TextEditorFactory): UI.TextEditor.TextEditor => {\n      this._editor = factory.createEditor({\n        devtoolsAccessibleName: i18nString(UIStrings.liveExpressionEditor),\n        lineNumbers: false,\n        lineWrapping: true,\n        mimeType: 'javascript',\n        autoHeight: true,\n        placeholder: i18nString(UIStrings.expression),\n        bracketMatchingSetting: undefined,\n        lineWiseCopyCut: undefined,\n        maxHighlightLength: undefined,\n        padBottom: undefined,\n        inputStyle: undefined,\n      });\n      this._editor.configureAutocomplete(\n          ObjectUI.JavaScriptAutocomplete.JavaScriptAutocompleteConfig.createConfigForEditor(this._editor));\n      this._editor.widget().show(nameElement);\n      this._editor.widget().element.classList.add('console-pin-editor');\n      this._editor.widget().element.tabIndex = -1;\n      this._editor.setText(expression);\n      this._editor.widget().element.addEventListener('keydown', event => {\n        if (!this._editor) {\n          return;\n        }\n        if (event.key === 'Tab' && !this._editor.text()) {\n          event.consume();\n          return;\n        }\n        if (event.keyCode === UI.KeyboardShortcut.Keys.Esc.code) {\n          this._editor.setText(this._committedExpression);\n        }\n      }, true);\n      this._editor.widget().element.addEventListener('focusout', _event => {\n        if (!this._editor) {\n          return;\n        }\n        const text = this._editor.text();\n        const trimmedText = text.trim();\n        if (text.length !== trimmedText.length) {\n          this._editor.setText(trimmedText);\n        }\n        this._committedExpression = trimmedText;\n        pinPane._savePins();\n        if (this._committedExpression.length) {\n          deletePinIcon.setAccessibleName(i18nString(UIStrings.removeExpressionS, {PH1: this._committedExpression}));\n        } else {\n          deletePinIcon.setAccessibleName(i18nString(UIStrings.removeBlankExpression));\n        }\n        this._editor.setSelection(TextUtils.TextRange.TextRange.createFromLocation(Infinity, Infinity));\n      });\n      return this._editor;\n    };\n\n    const factory = TextEditor.CodeMirrorTextEditor.CodeMirrorTextEditorFactory.instance();\n    this._editorPromise = Promise.resolve().then(() => createTextEditor(factory));\n  }\n\n  setHovered(hovered: boolean): void {\n    if (this._hovered === hovered) {\n      return;\n    }\n    this._hovered = hovered;\n    if (!hovered && this._lastNode) {\n      SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n    }\n  }\n\n  expression(): string {\n    return this._committedExpression;\n  }\n\n  element(): Element {\n    return this._pinElement;\n  }\n\n  async focus(): Promise<void> {\n    const editor = await this._editorPromise;\n    editor.widget().focus();\n    editor.setSelection(TextUtils.TextRange.TextRange.createFromLocation(Infinity, Infinity));\n  }\n\n  appendToContextMenu(contextMenu: UI.ContextMenu.ContextMenu): void {\n    if (this._lastResult && !('error' in this._lastResult) && this._lastResult.object) {\n      contextMenu.appendApplicableItems(this._lastResult.object);\n      // Prevent result from being released manually. It will release along with 'console' group.\n      this._lastResult = null;\n    }\n  }\n\n  async updatePreview(): Promise<void> {\n    if (!this._editor) {\n      return;\n    }\n    const text = this._editor.textWithCurrentSuggestion().trim();\n    const isEditing = this._pinElement.hasFocus();\n    const throwOnSideEffect = isEditing && text !== this._committedExpression;\n    const timeout = throwOnSideEffect ? 250 : undefined;\n    const executionContext = UI.Context.Context.instance().flavor(SDK.RuntimeModel.ExecutionContext);\n    const {preview, result} = await ObjectUI.JavaScriptREPL.JavaScriptREPL.evaluateAndBuildPreview(\n        `${text}\\n//# sourceURL=watch-expression-${this.consolePinNumber}.devtools`, throwOnSideEffect, timeout,\n        !isEditing /* allowErrors */, 'console');\n    if (this._lastResult && this._lastExecutionContext) {\n      this._lastExecutionContext.runtimeModel.releaseEvaluationResult(this._lastResult);\n    }\n    this._lastResult = result || null;\n    this._lastExecutionContext = executionContext || null;\n\n    const previewText = preview.deepTextContent();\n    if (!previewText || previewText !== this._pinPreview.deepTextContent()) {\n      this._pinPreview.removeChildren();\n      if (result && SDK.RuntimeModel.RuntimeModel.isSideEffectFailure(result)) {\n        const sideEffectLabel =\n            (this._pinPreview.createChild('span', 'object-value-calculate-value-button') as HTMLElement);\n        sideEffectLabel.textContent = '(â€¦)';\n        UI.Tooltip.Tooltip.install(sideEffectLabel, i18nString(UIStrings.evaluateAllowingSideEffects));\n      } else if (previewText) {\n        this._pinPreview.appendChild(preview);\n      } else if (!isEditing) {\n        UI.UIUtils.createTextChild(this._pinPreview, i18nString(UIStrings.notAvailable));\n      }\n      UI.Tooltip.Tooltip.install(this._pinPreview, previewText);\n    }\n\n    let node: SDK.RemoteObject.RemoteObject|null = null;\n    if (result && !('error' in result) && result.object.type === 'object' && result.object.subtype === 'node') {\n      node = result.object;\n    }\n    if (this._hovered) {\n      if (node) {\n        SDK.OverlayModel.OverlayModel.highlightObjectAsDOMNode(node);\n      } else if (this._lastNode) {\n        SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n      }\n    }\n    this._lastNode = node || null;\n\n    const isError = result && !('error' in result) && result.exceptionDetails &&\n        !SDK.RuntimeModel.RuntimeModel.isSideEffectFailure(result);\n    this._pinElement.classList.toggle('error-level', Boolean(isError));\n  }\n}\n"]}