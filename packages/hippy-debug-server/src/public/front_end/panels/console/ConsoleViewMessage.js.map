{"version":3,"file":"ConsoleViewMessage.js","sourceRoot":"","sources":["../../../../../../front_end/panels/console/ConsoleViewMessage.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2011 Google Inc.  All rights reserved.\n * Copyright (C) 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2009 Joseph Pecoraro\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport * as Logs from '../../models/logs/logs.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport * as DataGrid from '../../ui/legacy/components/data_grid/data_grid.js';\nimport * as ObjectUI from '../../ui/legacy/components/object_ui/object_ui.js';\nimport * as TextEditor from '../../ui/legacy/components/text_editor/text_editor.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as ThemeSupport from '../../ui/legacy/theme_support/theme_support.js';\n\nimport type {ConsoleViewportElement} from './ConsoleViewport.js';\n\nconst UIStrings = {\n  /**\n  * @description Message element text content in Console View Message of the Console panel. Shown\n  * when the user tried to run console.clear() but the 'Preserve log' option is enabled, which stops\n  * the log from being cleared.\n  */\n  consoleclearWasPreventedDueTo: '`console.clear()` was prevented due to \\'Preserve log\\'',\n  /**\n  * @description Text shown in the Console panel after the user has cleared the console, which\n  * removes all messages from the console so that it is empty.\n  */\n  consoleWasCleared: 'Console was cleared',\n  /**\n  *@description Message element title in Console View Message of the Console panel\n  *@example {Ctrl+L} PH1\n  */\n  clearAllMessagesWithS: 'Clear all messages with {PH1}',\n  /**\n  *@description Message prefix in Console View Message of the Console panel\n  */\n  assertionFailed: 'Assertion failed: ',\n  /**\n  *@description Message text in Console View Message of the Console panel\n  *@example {console.log(1)} PH1\n  */\n  violationS: '`[Violation]` {PH1}',\n  /**\n  *@description Message text in Console View Message of the Console panel\n  *@example {console.log(1)} PH1\n  */\n  interventionS: '`[Intervention]` {PH1}',\n  /**\n  *@description Message text in Console View Message of the Console panel\n  *@example {console.log(1)} PH1\n  */\n  deprecationS: '`[Deprecation]` {PH1}',\n  /**\n  *@description Note title in Console View Message of the Console panel\n  */\n  thisValueWillNotBeCollectedUntil: 'This value will not be collected until console is cleared.',\n  /**\n  *@description Note title in Console View Message of the Console panel\n  */\n  thisValueWasEvaluatedUponFirst: 'This value was evaluated upon first expanding. It may have changed since then.',\n  /**\n  *@description Note title in Console View Message of the Console panel\n  */\n  functionWasResolvedFromBound: 'Function was resolved from bound function.',\n  /**\n  * @description Shown in the Console panel when an exception is thrown when trying to access a\n  * property on an object. Should be translated.\n  */\n  exception: '<exception>',\n  /**\n  *@description Text to indicate an item is a warning\n  */\n  warning: 'Warning',\n  /**\n  *@description Text for errors\n  */\n  error: 'Error',\n  /**\n  * @description Announced by the screen reader to indicate how many times a particular message in\n  * the console was repeated.\n  */\n  repeatS: '{n, plural, =1 {Repeated # time} other {Repeated # times}}',\n  /**\n  * @description Announced by the screen reader to indicate how many times a particular warning\n  * message in the console was repeated.\n  */\n  warningS: '{n, plural, =1 {Warning, Repeated # time} other {Warning, Repeated # times}}',\n  /**\n  * @description Announced by the screen reader to indicate how many times a particular error\n  * message in the console was repeated.\n  */\n  errorS: '{n, plural, =1 {Error, Repeated # time} other {Error, Repeated # times}}',\n  /**\n  *@description Text appended to grouped console messages that are related to URL requests\n  */\n  url: '<URL>',\n  /**\n  *@description Text appended to grouped console messages about tasks that took longer than N ms\n  */\n  tookNms: 'took <N>ms',\n  /**\n  *@description Text appended to grouped console messages about tasks that are related to some DOM event\n  */\n  someEvent: '<some> event',\n  /**\n  *@description Text appended to grouped console messages about tasks that are related to a particular milestone\n  */\n  Mxx: ' M<XX>',\n  /**\n  *@description Text appended to grouped console messages about tasks that are related to autofill completions\n  */\n  attribute: '<attribute>',\n  /**\n  *@description Text for the index of something\n  */\n  index: '(index)',\n  /**\n  *@description Text for the value of something\n  */\n  value: 'Value',\n  /**\n  *@description Title of the Console tool\n  */\n  console: 'Console',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/console/ConsoleViewMessage.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst elementToMessage = new WeakMap<Element, ConsoleViewMessage>();\n\nexport const getMessageForElement = (element: Element): ConsoleViewMessage|undefined => {\n  return elementToMessage.get(element);\n};\n\n// This value reflects the 18px min-height of .console-message, plus the\n// 1px border of .console-message-wrapper. Keep in sync with consoleView.css.\nconst defaultConsoleRowHeight = 19;\n\nconst parameterToRemoteObject = (runtimeModel: SDK.RuntimeModel.RuntimeModel|null): (\n    parameter?: SDK.RemoteObject.RemoteObject|Protocol.Runtime.RemoteObject|string) => SDK.RemoteObject.RemoteObject =>\n    (parameter?: string|SDK.RemoteObject.RemoteObject|Protocol.Runtime.RemoteObject): SDK.RemoteObject.RemoteObject => {\n      if (parameter instanceof SDK.RemoteObject.RemoteObject) {\n        return parameter;\n      }\n      if (!runtimeModel) {\n        return SDK.RemoteObject.RemoteObject.fromLocalObject(parameter);\n      }\n      if (typeof parameter === 'object') {\n        return runtimeModel.createRemoteObject(parameter);\n      }\n      return runtimeModel.createRemoteObjectFromPrimitiveValue(parameter);\n    };\n\nexport class ConsoleViewMessage implements ConsoleViewportElement {\n  _message: SDK.ConsoleModel.ConsoleMessage;\n  _linkifier: Components.Linkifier.Linkifier;\n  _repeatCount: number;\n  _closeGroupDecorationCount: number;\n  _nestingLevel: number;\n  _selectableChildren: {\n    element: HTMLElement,\n    forceSelect: () => void,\n  }[];\n  _messageResized: (arg0: Common.EventTarget.EventTargetEvent) => void;\n  _element: HTMLElement|null;\n  _previewFormatter: ObjectUI.RemoteObjectPreviewFormatter.RemoteObjectPreviewFormatter;\n  _searchRegex: RegExp|null;\n  _messageLevelIcon: UI.Icon.Icon|null;\n  _traceExpanded: boolean;\n  _expandTrace: ((arg0: boolean) => void)|null;\n  _anchorElement: HTMLElement|null;\n  _contentElement: HTMLElement|null;\n  _nestingLevelMarkers: HTMLElement[]|null;\n  _searchHighlightNodes: Element[];\n  _searchHighlightNodeChanges: UI.UIUtils.HighlightChange[];\n  _isVisible: boolean;\n  _cachedHeight: number;\n  _messagePrefix: string;\n  _timestampElement: HTMLElement|null;\n  _inSimilarGroup: boolean;\n  _similarGroupMarker: HTMLElement|null;\n  _lastInSimilarGroup: boolean;\n  _groupKey: string;\n  _repeatCountElement: UI.UIUtils.DevToolsSmallBubble|null;\n\n  constructor(\n      consoleMessage: SDK.ConsoleModel.ConsoleMessage, linkifier: Components.Linkifier.Linkifier, nestingLevel: number,\n      onResize: (arg0: Common.EventTarget.EventTargetEvent) => void) {\n    this._message = consoleMessage;\n    this._linkifier = linkifier;\n    this._repeatCount = 1;\n    this._closeGroupDecorationCount = 0;\n    this._nestingLevel = nestingLevel;\n    this._selectableChildren = [];\n    this._messageResized = onResize;\n    this._element = null;\n\n    this._previewFormatter = new ObjectUI.RemoteObjectPreviewFormatter.RemoteObjectPreviewFormatter();\n    this._searchRegex = null;\n    this._messageLevelIcon = null;\n    this._traceExpanded = false;\n    this._expandTrace = null;\n    this._anchorElement = null;\n    this._contentElement = null;\n    this._nestingLevelMarkers = null;\n    this._searchHighlightNodes = [];\n    this._searchHighlightNodeChanges = [];\n    this._isVisible = false;\n    this._cachedHeight = 0;\n    this._messagePrefix = '';\n    this._timestampElement = null;\n    this._inSimilarGroup = false;\n    this._similarGroupMarker = null;\n    this._lastInSimilarGroup = false;\n    this._groupKey = '';\n    this._repeatCountElement = null;\n  }\n\n  element(): HTMLElement {\n    return this.toMessageElement();\n  }\n\n  wasShown(): void {\n    this._isVisible = true;\n  }\n\n  onResize(): void {\n  }\n\n  willHide(): void {\n    this._isVisible = false;\n    this._cachedHeight = this.element().offsetHeight;\n  }\n\n  isVisible(): boolean {\n    return this._isVisible;\n  }\n\n  fastHeight(): number {\n    if (this._cachedHeight) {\n      return this._cachedHeight;\n    }\n    return this.approximateFastHeight();\n  }\n\n  approximateFastHeight(): number {\n    return defaultConsoleRowHeight;\n  }\n\n  consoleMessage(): SDK.ConsoleModel.ConsoleMessage {\n    return this._message;\n  }\n\n  _buildMessage(): HTMLElement {\n    let messageElement;\n    let messageText: Common.UIString.LocalizedString|string = this._message.messageText;\n    if (this._message.source === SDK.ConsoleModel.FrontendMessageSource.ConsoleAPI) {\n      switch (this._message.type) {\n        case Protocol.Runtime.ConsoleAPICalledEventType.Trace:\n          messageElement = this._format(this._message.parameters || ['console.trace']);\n          break;\n        case Protocol.Runtime.ConsoleAPICalledEventType.Clear:\n          messageElement = document.createElement('span');\n          messageElement.classList.add('console-info');\n          if (Common.Settings.Settings.instance().moduleSetting('preserveConsoleLog').get()) {\n            messageElement.textContent = i18nString(UIStrings.consoleclearWasPreventedDueTo);\n          } else {\n            messageElement.textContent = i18nString(UIStrings.consoleWasCleared);\n          }\n          UI.Tooltip.Tooltip.install(\n              messageElement, i18nString(UIStrings.clearAllMessagesWithS, {\n                PH1: UI.ShortcutRegistry.ShortcutRegistry.instance().shortcutTitleForAction('console.clear'),\n              }));\n          break;\n        case Protocol.Runtime.ConsoleAPICalledEventType.Dir: {\n          const obj = this._message.parameters ? this._message.parameters[0] : undefined;\n          const args = ['%O', obj];\n          messageElement = this._format(args);\n          break;\n        }\n        case Protocol.Runtime.ConsoleAPICalledEventType.Profile:\n        case Protocol.Runtime.ConsoleAPICalledEventType.ProfileEnd:\n          messageElement = this._format([messageText]);\n          break;\n        default: {\n          if (this._message.type === Protocol.Runtime.ConsoleAPICalledEventType.Assert) {\n            this._messagePrefix = i18nString(UIStrings.assertionFailed);\n          }\n          if (this._message.parameters && this._message.parameters.length === 1) {\n            const parameter = this._message.parameters[0];\n            if (typeof parameter !== 'string' && parameter.type === 'string') {\n              messageElement = this._tryFormatAsError((parameter.value as string));\n            }\n          }\n          const args = this._message.parameters || [messageText];\n          messageElement = messageElement || this._format(args);\n        }\n      }\n    } else {\n      if (this._message.source === Protocol.Log.LogEntrySource.Network) {\n        messageElement = this._formatAsNetworkRequest() || this._format([messageText]);\n      } else {\n        const messageInParameters = this._message.parameters && messageText === (this._message.parameters[0] as string);\n        // These terms are locked because the console message will not be translated anyway.\n        if (this._message.source === Protocol.Log.LogEntrySource.Violation) {\n          messageText = i18nString(UIStrings.violationS, {PH1: messageText});\n        } else if (this._message.source === Protocol.Log.LogEntrySource.Intervention) {\n          messageText = i18nString(UIStrings.interventionS, {PH1: messageText});\n        } else if (this._message.source === Protocol.Log.LogEntrySource.Deprecation) {\n          messageText = i18nString(UIStrings.deprecationS, {PH1: messageText});\n        }\n        const args = this._message.parameters || [messageText];\n        if (messageInParameters) {\n          args[0] = messageText;\n        }\n        messageElement = this._format(args);\n      }\n    }\n    messageElement.classList.add('console-message-text');\n\n    const formattedMessage = (document.createElement('span') as HTMLElement);\n    formattedMessage.classList.add('source-code');\n    this._anchorElement = this._buildMessageAnchor();\n    if (this._anchorElement) {\n      formattedMessage.appendChild(this._anchorElement);\n    }\n    formattedMessage.appendChild(messageElement);\n    return formattedMessage;\n  }\n\n  _formatAsNetworkRequest(): HTMLElement|null {\n    const request = Logs.NetworkLog.NetworkLog.requestForConsoleMessage(this._message);\n    if (!request) {\n      return null;\n    }\n    const messageElement = (document.createElement('span') as HTMLElement);\n    if (this._message.level === Protocol.Log.LogEntryLevel.Error) {\n      UI.UIUtils.createTextChild(messageElement, request.requestMethod + ' ');\n      const linkElement = Components.Linkifier.Linkifier.linkifyRevealable(request, request.url(), request.url());\n      // Focus is handled by the viewport.\n      linkElement.tabIndex = -1;\n      this._selectableChildren.push({element: linkElement, forceSelect: (): void => linkElement.focus()});\n      messageElement.appendChild(linkElement);\n      if (request.failed) {\n        UI.UIUtils.createTextChildren(messageElement, ' ', request.localizedFailDescription || '');\n      }\n      if (request.statusCode !== 0) {\n        UI.UIUtils.createTextChildren(messageElement, ' ', String(request.statusCode));\n      }\n      if (request.statusText) {\n        UI.UIUtils.createTextChildren(messageElement, ' (', request.statusText, ')');\n      }\n    } else {\n      const messageText = this._message.messageText;\n      const fragment = this._linkifyWithCustomLinkifier(messageText, (text, url, lineNumber, columnNumber) => {\n        const linkElement = url === request.url() ?\n            Components.Linkifier.Linkifier.linkifyRevealable(\n                (request as SDK.NetworkRequest.NetworkRequest), url, request.url()) :\n            Components.Linkifier.Linkifier.linkifyURL(\n                url, ({text, lineNumber, columnNumber} as Components.Linkifier.LinkifyURLOptions));\n        linkElement.tabIndex = -1;\n        this._selectableChildren.push({element: linkElement, forceSelect: (): void => linkElement.focus()});\n        return linkElement;\n      });\n      messageElement.appendChild(fragment);\n    }\n    return messageElement;\n  }\n\n  _buildMessageAnchor(): HTMLElement|null {\n    const linkify = (message: SDK.ConsoleModel.ConsoleMessage): HTMLElement|null => {\n      if (message.scriptId) {\n        return this._linkifyScriptId(message.scriptId, message.url || '', message.line, message.column);\n      }\n      if (message.stackTrace && message.stackTrace.callFrames.length) {\n        return this._linkifyStackTraceTopFrame(message.stackTrace);\n      }\n      if (message.url && message.url !== 'undefined') {\n        return this._linkifyLocation(message.url, message.line, message.column);\n      }\n      return null;\n    };\n    const anchorElement = linkify(this._message);\n    // Append a space to prevent the anchor text from being glued to the console message when the user selects and copies the console messages.\n    if (anchorElement) {\n      anchorElement.tabIndex = -1;\n      this._selectableChildren.push({\n        element: anchorElement,\n        forceSelect: (): void => anchorElement.focus(),\n      });\n      const anchorWrapperElement = (document.createElement('span') as HTMLElement);\n      anchorWrapperElement.classList.add('console-message-anchor');\n      anchorWrapperElement.appendChild(anchorElement);\n      UI.UIUtils.createTextChild(anchorWrapperElement, ' ');\n      return anchorWrapperElement;\n    }\n    return null;\n  }\n\n  _buildMessageWithStackTrace(runtimeModel: SDK.RuntimeModel.RuntimeModel): HTMLElement {\n    const toggleElement = (document.createElement('div') as HTMLElement);\n    toggleElement.classList.add('console-message-stack-trace-toggle');\n    const contentElement = toggleElement.createChild('div', 'console-message-stack-trace-wrapper');\n    UI.ARIAUtils.markAsTree(contentElement);\n\n    const messageElement = this._buildMessage();\n    const icon = UI.Icon.Icon.create('smallicon-triangle-right', 'console-message-expand-icon');\n    const clickableElement = contentElement.createChild('div');\n    UI.ARIAUtils.markAsTreeitem(clickableElement);\n    UI.ARIAUtils.setExpanded(clickableElement, false);\n    clickableElement.appendChild(icon);\n    // Intercept focus to avoid highlight on click.\n    clickableElement.tabIndex = -1;\n    clickableElement.appendChild(messageElement);\n    const stackTraceElement = contentElement.createChild('div');\n    const stackTracePreview = Components.JSPresentationUtils.buildStackTracePreviewContents(\n        runtimeModel.target(), this._linkifier, {stackTrace: this._message.stackTrace, tabStops: undefined});\n    stackTraceElement.appendChild(stackTracePreview.element);\n    for (const linkElement of stackTracePreview.links) {\n      this._selectableChildren.push({element: linkElement, forceSelect: (): void => linkElement.focus()});\n    }\n    stackTraceElement.classList.add('hidden');\n    UI.ARIAUtils.markAsGroup(stackTraceElement);\n    this._expandTrace = (expand: boolean): void => {\n      icon.setIconType(expand ? 'smallicon-triangle-down' : 'smallicon-triangle-right');\n      stackTraceElement.classList.toggle('hidden', !expand);\n      UI.ARIAUtils.setExpanded(clickableElement, expand);\n      this._traceExpanded = expand;\n    };\n\n    const toggleStackTrace = (event: Event): void => {\n      if (UI.UIUtils.isEditing() || contentElement.hasSelection()) {\n        return;\n      }\n      this._expandTrace && this._expandTrace(stackTraceElement.classList.contains('hidden'));\n      event.consume();\n    };\n\n    clickableElement.addEventListener('click', toggleStackTrace, false);\n    if (this._message.type === Protocol.Runtime.ConsoleAPICalledEventType.Trace) {\n      this._expandTrace(true);\n    }\n\n    // @ts-ignore\n    toggleElement._expandStackTraceForTest = this._expandTrace.bind(this, true);\n    return toggleElement;\n  }\n\n  _linkifyLocation(url: string, lineNumber: number, columnNumber: number): HTMLElement|null {\n    const runtimeModel = this._message.runtimeModel();\n    if (!runtimeModel) {\n      return null;\n    }\n    return this._linkifier.linkifyScriptLocation(\n        runtimeModel.target(), /* scriptId */ null, url, lineNumber,\n        {columnNumber, className: undefined, tabStop: undefined, inlineFrameIndex: 0});\n  }\n\n  _linkifyStackTraceTopFrame(stackTrace: Protocol.Runtime.StackTrace): HTMLElement|null {\n    const runtimeModel = this._message.runtimeModel();\n    if (!runtimeModel) {\n      return null;\n    }\n    return this._linkifier.linkifyStackTraceTopFrame(runtimeModel.target(), stackTrace);\n  }\n\n  _linkifyScriptId(scriptId: string, url: string, lineNumber: number, columnNumber: number): HTMLElement|null {\n    const runtimeModel = this._message.runtimeModel();\n    if (!runtimeModel) {\n      return null;\n    }\n    return this._linkifier.linkifyScriptLocation(\n        runtimeModel.target(), scriptId, url, lineNumber,\n        {columnNumber, className: undefined, tabStop: undefined, inlineFrameIndex: 0});\n  }\n\n  _format(rawParameters: (string|SDK.RemoteObject.RemoteObject|Protocol.Runtime.RemoteObject|undefined)[]):\n      HTMLElement {\n    // This node is used like a Builder. Values are continually appended onto it.\n    const formattedResult = (document.createElement('span') as HTMLElement);\n    if (this._messagePrefix) {\n      formattedResult.createChild('span').textContent = this._messagePrefix;\n    }\n    if (!rawParameters.length) {\n      return formattedResult;\n    }\n\n    // Formatting code below assumes that parameters are all wrappers whereas frontend console\n    // API allows passing arbitrary values as messages (strings, numbers, etc.). Wrap them here.\n    // FIXME: Only pass runtime wrappers here.\n    let parameters = rawParameters.map(parameterToRemoteObject(this._message.runtimeModel()));\n\n    // There can be string log and string eval result. We distinguish between them based on message type.\n    const shouldFormatMessage =\n        SDK.RemoteObject.RemoteObject.type((parameters as SDK.RemoteObject.RemoteObject[])[0]) === 'string' &&\n        (this._message.type !== SDK.ConsoleModel.FrontendMessageType.Result ||\n         this._message.level === Protocol.Log.LogEntryLevel.Error);\n\n    // Multiple parameters with the first being a format string. Save unused substitutions.\n    if (shouldFormatMessage) {\n      const result = this._formatWithSubstitutionString(\n          (parameters[0].description as string), parameters.slice(1), formattedResult);\n      parameters = Array.from(result.unusedSubstitutions || []);\n      if (parameters.length) {\n        UI.UIUtils.createTextChild(formattedResult, ' ');\n      }\n    }\n\n    // Single parameter, or unused substitutions from above.\n    for (let i = 0; i < parameters.length; ++i) {\n      // Inline strings when formatting.\n      if (shouldFormatMessage && parameters[i].type === 'string') {\n        formattedResult.appendChild(this._linkifyStringAsFragment(parameters[i].description || ''));\n      } else {\n        formattedResult.appendChild(this._formatParameter(parameters[i], false, true));\n      }\n      if (i < parameters.length - 1) {\n        UI.UIUtils.createTextChild(formattedResult, ' ');\n      }\n    }\n    return formattedResult;\n  }\n\n  _formatParameter(output: SDK.RemoteObject.RemoteObject, forceObjectFormat?: boolean, includePreview?: boolean):\n      HTMLElement {\n    if (output.customPreview()) {\n      return new ObjectUI.CustomPreviewComponent.CustomPreviewComponent(output).element as HTMLElement;\n    }\n\n    const outputType = forceObjectFormat ? 'object' : (output.subtype || output.type);\n    let element;\n    switch (outputType) {\n      case 'error':\n        element = this._formatParameterAsError(output);\n        break;\n      case 'function':\n        element = this._formatParameterAsFunction(output, includePreview);\n        break;\n      case 'array':\n      case 'arraybuffer':\n      case 'blob':\n      case 'dataview':\n      case 'generator':\n      case 'iterator':\n      case 'map':\n      case 'object':\n      case 'promise':\n      case 'proxy':\n      case 'set':\n      case 'typedarray':\n      case 'wasmvalue':\n      case 'weakmap':\n      case 'weakset':\n      case 'webassemblymemory':\n        element = this._formatParameterAsObject(output, includePreview);\n        break;\n      case 'node':\n        element = output.isNode() ? this._formatParameterAsNode(output) : this._formatParameterAsObject(output, false);\n        break;\n      case 'trustedtype':\n        element = this._formatParameterAsObject(output, false);\n        break;\n      case 'string':\n        element = this._formatParameterAsString(output);\n        break;\n      case 'boolean':\n      case 'date':\n      case 'null':\n      case 'number':\n      case 'regexp':\n      case 'symbol':\n      case 'undefined':\n      case 'bigint':\n        element = this._formatParameterAsValue(output);\n        break;\n      default:\n        element = this._formatParameterAsValue(output);\n        console.error(`Tried to format remote object of unknown type ${outputType}.`);\n    }\n    element.classList.add(`object-value-${outputType}`);\n    element.classList.add('source-code');\n    return element;\n  }\n\n  _formatParameterAsValue(obj: SDK.RemoteObject.RemoteObject): HTMLElement {\n    const result = (document.createElement('span') as HTMLElement);\n    const description = obj.description || '';\n    if (description.length > getMaxTokenizableStringLength()) {\n      const propertyValue = new ObjectUI.ObjectPropertiesSection.ExpandableTextPropertyValue(\n          document.createElement('span'), description, getLongStringVisibleLength());\n      result.appendChild(propertyValue.element);\n    } else {\n      UI.UIUtils.createTextChild(result, description);\n    }\n    if (obj.objectId) {\n      result.addEventListener('contextmenu', this._contextMenuEventFired.bind(this, obj), false);\n    }\n    return result;\n  }\n\n  _formatParameterAsTrustedType(obj: SDK.RemoteObject.RemoteObject): HTMLElement {\n    const result = (document.createElement('span') as HTMLElement);\n    const trustedContentSpan = document.createElement('span');\n    trustedContentSpan.appendChild(this._formatParameterAsString(obj));\n    trustedContentSpan.classList.add('object-value-string');\n    UI.UIUtils.createTextChild(result, `${obj.className} `);\n    result.appendChild(trustedContentSpan);\n    return result;\n  }\n\n  _formatParameterAsObject(obj: SDK.RemoteObject.RemoteObject, includePreview?: boolean): HTMLElement {\n    const titleElement = (document.createElement('span') as HTMLElement);\n    titleElement.classList.add('console-object');\n    if (includePreview && obj.preview) {\n      titleElement.classList.add('console-object-preview');\n      this._previewFormatter.appendObjectPreview(titleElement, obj.preview, false /* isEntry */);\n    } else if (obj.type === 'function') {\n      const functionElement = titleElement.createChild('span');\n      ObjectUI.ObjectPropertiesSection.ObjectPropertiesSection.formatObjectAsFunction(obj, functionElement, false);\n      titleElement.classList.add('object-value-function');\n    } else if (obj.subtype === 'trustedtype') {\n      titleElement.appendChild(this._formatParameterAsTrustedType(obj));\n    } else {\n      UI.UIUtils.createTextChild(titleElement, obj.description || '');\n    }\n\n    if (!obj.hasChildren || obj.customPreview()) {\n      return titleElement;\n    }\n\n    const note = titleElement.createChild('span', 'object-state-note info-note');\n    if (this._message.type === SDK.ConsoleModel.FrontendMessageType.QueryObjectResult) {\n      UI.Tooltip.Tooltip.install(note, i18nString(UIStrings.thisValueWillNotBeCollectedUntil));\n    } else {\n      UI.Tooltip.Tooltip.install(note, i18nString(UIStrings.thisValueWasEvaluatedUponFirst));\n    }\n\n    const section = new ObjectUI.ObjectPropertiesSection.ObjectPropertiesSection(obj, titleElement, this._linkifier);\n    section.element.classList.add('console-view-object-properties-section');\n    section.enableContextMenu();\n    section.setShowSelectionOnKeyboardFocus(true, true);\n    this._selectableChildren.push(section);\n    section.addEventListener(UI.TreeOutline.Events.ElementAttached, this._messageResized);\n    section.addEventListener(UI.TreeOutline.Events.ElementExpanded, this._messageResized);\n    section.addEventListener(UI.TreeOutline.Events.ElementCollapsed, this._messageResized);\n    return section.element;\n  }\n\n  _formatParameterAsFunction(func: SDK.RemoteObject.RemoteObject, includePreview?: boolean): HTMLElement {\n    const result = (document.createElement('span') as HTMLElement);\n    SDK.RemoteObject.RemoteFunction.objectAsFunction(func).targetFunction().then(formatTargetFunction.bind(this));\n    return result;\n\n    function formatTargetFunction(this: ConsoleViewMessage, targetFunction: SDK.RemoteObject.RemoteObject): void {\n      const functionElement = document.createElement('span');\n      const promise = ObjectUI.ObjectPropertiesSection.ObjectPropertiesSection.formatObjectAsFunction(\n          targetFunction, functionElement, true, includePreview);\n      result.appendChild(functionElement);\n      if (targetFunction !== func) {\n        const note = result.createChild('span', 'object-info-state-note');\n        UI.Tooltip.Tooltip.install(note, i18nString(UIStrings.functionWasResolvedFromBound));\n      }\n      result.addEventListener('contextmenu', this._contextMenuEventFired.bind(this, targetFunction), false);\n      promise.then(() => this._formattedParameterAsFunctionForTest());\n    }\n  }\n\n  _formattedParameterAsFunctionForTest(): void {\n  }\n\n  _contextMenuEventFired(obj: SDK.RemoteObject.RemoteObject, event: Event): void {\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    contextMenu.appendApplicableItems(obj);\n    contextMenu.show();\n  }\n\n  _renderPropertyPreviewOrAccessor(\n      object: SDK.RemoteObject.RemoteObject|null, property: Protocol.Runtime.PropertyPreview, propertyPath: {\n        name: (string|symbol),\n      }[]): HTMLElement {\n    if (property.type === 'accessor') {\n      return this._formatAsAccessorProperty(object, propertyPath.map(property => property.name.toString()), false);\n    }\n    return this._previewFormatter.renderPropertyPreview(\n        property.type, 'subtype' in property ? property.subtype : undefined, null, property.value);\n  }\n\n  _formatParameterAsNode(remoteObject: SDK.RemoteObject.RemoteObject): HTMLElement {\n    const result = document.createElement('span');\n\n    const domModel = remoteObject.runtimeModel().target().model(SDK.DOMModel.DOMModel);\n    if (!domModel) {\n      return result;\n    }\n    domModel.pushObjectAsNodeToFrontend(remoteObject).then(async (node: SDK.DOMModel.DOMNode|null) => {\n      if (!node) {\n        result.appendChild(this._formatParameterAsObject(remoteObject, false));\n        return;\n      }\n      const renderResult = await UI.UIUtils.Renderer.render((node as Object));\n      if (renderResult) {\n        if (renderResult.tree) {\n          this._selectableChildren.push(renderResult.tree);\n          renderResult.tree.addEventListener(UI.TreeOutline.Events.ElementAttached, this._messageResized);\n          renderResult.tree.addEventListener(UI.TreeOutline.Events.ElementExpanded, this._messageResized);\n          renderResult.tree.addEventListener(UI.TreeOutline.Events.ElementCollapsed, this._messageResized);\n        }\n        result.appendChild(renderResult.node);\n      } else {\n        result.appendChild(this._formatParameterAsObject(remoteObject, false));\n      }\n      this._formattedParameterAsNodeForTest();\n    });\n\n    return result;\n  }\n\n  _formattedParameterAsNodeForTest(): void {\n  }\n\n  _formatParameterAsString(output: SDK.RemoteObject.RemoteObject): HTMLElement {\n    // Properly escape double quotes here, so users don't get surprised\n    // when they copy strings from the console (https://crbug.com/1178530).\n    const description = output.description ?? '';\n    const text = JSON.stringify(description);\n    const result = (document.createElement('span') as HTMLElement);\n    result.appendChild(this._linkifyStringAsFragment(text));\n    return result;\n  }\n\n  _formatParameterAsError(output: SDK.RemoteObject.RemoteObject): HTMLElement {\n    const result = (document.createElement('span') as HTMLElement);\n    const errorSpan = this._tryFormatAsError(output.description || '');\n    result.appendChild(errorSpan ? errorSpan : this._linkifyStringAsFragment(output.description || ''));\n    return result;\n  }\n\n  _formatAsArrayEntry(output: SDK.RemoteObject.RemoteObject): HTMLElement {\n    return this._previewFormatter.renderPropertyPreview(\n        output.type, output.subtype, output.className, output.description);\n  }\n\n  _formatAsAccessorProperty(object: SDK.RemoteObject.RemoteObject|null, propertyPath: string[], isArrayEntry: boolean):\n      HTMLElement {\n    const rootElement =\n        ObjectUI.ObjectPropertiesSection.ObjectPropertyTreeElement.createRemoteObjectAccessorPropertySpan(\n            object, propertyPath, onInvokeGetterClick.bind(this));\n\n    function onInvokeGetterClick(this: ConsoleViewMessage, result: SDK.RemoteObject.CallFunctionResult): void {\n      const wasThrown = result.wasThrown;\n      const object = result.object;\n      if (!object) {\n        return;\n      }\n      rootElement.removeChildren();\n      if (wasThrown) {\n        const element = rootElement.createChild('span');\n        element.textContent = i18nString(UIStrings.exception);\n        UI.Tooltip.Tooltip.install(element, (object.description as string));\n      } else if (isArrayEntry) {\n        rootElement.appendChild(this._formatAsArrayEntry(object));\n      } else {\n        // Make a PropertyPreview from the RemoteObject similar to the backend logic.\n        const maxLength = 100;\n        const type = object.type;\n        const subtype = object.subtype;\n        let description = '';\n        if (type !== 'function' && object.description) {\n          if (type === 'string' || subtype === 'regexp' || subtype === 'trustedtype') {\n            description = Platform.StringUtilities.trimMiddle(object.description, maxLength);\n          } else {\n            description = Platform.StringUtilities.trimEndWithMaxLength(object.description, maxLength);\n          }\n        }\n        rootElement.appendChild(\n            this._previewFormatter.renderPropertyPreview(type, subtype, object.className, description));\n      }\n    }\n\n    return rootElement;\n  }\n\n  _formatWithSubstitutionString(\n      format: string, parameters: SDK.RemoteObject.RemoteObject[], formattedResult: HTMLElement): {\n    formattedResult: Element,\n    unusedSubstitutions: ArrayLike<SDK.RemoteObject.RemoteObject>|null,\n  } {\n    function parameterFormatter(\n        this: ConsoleViewMessage, force: boolean, includePreview: boolean,\n        obj?: string|SDK.RemoteObject.RemoteObject): string|HTMLElement|undefined {\n      if (obj instanceof SDK.RemoteObject.RemoteObject) {\n        return this._formatParameter(obj, force, includePreview);\n      }\n      return stringFormatter(obj);\n    }\n\n    function stringFormatter(obj?: string|SDK.RemoteObject.RemoteObject): string|undefined {\n      if (obj === undefined) {\n        return undefined;\n      }\n      if (typeof obj === 'string') {\n        return obj;\n      }\n      return obj.description;\n    }\n\n    function floatFormatter(obj?: string|SDK.RemoteObject.RemoteObject): number|string|undefined {\n      if (obj instanceof SDK.RemoteObject.RemoteObject) {\n        if (typeof obj.value !== 'number') {\n          return 'NaN';\n        }\n        return obj.value;\n      }\n      return undefined;\n    }\n\n    function integerFormatter(obj?: string|SDK.RemoteObject.RemoteObject): string|number|undefined {\n      if (obj instanceof SDK.RemoteObject.RemoteObject) {\n        if (obj.type === 'bigint') {\n          return obj.description;\n        }\n        if (typeof obj.value !== 'number') {\n          return 'NaN';\n        }\n        return Math.floor(obj.value);\n      }\n      return undefined;\n    }\n\n    function bypassFormatter(obj?: string|SDK.RemoteObject.RemoteObject): Node|string {\n      return (obj instanceof Node) ? obj : '';\n    }\n\n    let currentStyle: Map<string, {value: string, priority: string}>|null = null;\n    function styleFormatter(obj?: string|SDK.RemoteObject.RemoteObject): void {\n      currentStyle = new Map();\n      const buffer = document.createElement('span');\n      if (obj === undefined) {\n        return;\n      }\n      if (typeof obj === 'string' || !obj.description) {\n        return;\n      }\n      buffer.setAttribute('style', obj.description);\n      for (const property of buffer.style) {\n        if (isAllowedProperty(property)) {\n          const info = {\n            value: buffer.style.getPropertyValue(property),\n            priority: buffer.style.getPropertyPriority(property),\n          };\n          currentStyle.set(property, info);\n        }\n      }\n    }\n\n    function isAllowedProperty(property: string): boolean {\n      // Make sure that allowed properties do not interfere with link visibility.\n      const prefixes = [\n        'background',\n        'border',\n        'color',\n        'font',\n        'line',\n        'margin',\n        'padding',\n        'text',\n        '-webkit-background',\n        '-webkit-border',\n        '-webkit-font',\n        '-webkit-margin',\n        '-webkit-padding',\n        '-webkit-text',\n      ];\n      for (const prefix of prefixes) {\n        if (property.startsWith(prefix)) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration)\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const formatters: Record<string, Platform.StringUtilities.FormatterFunction<any>> = {};\n    // Firebug uses %o for formatting objects.\n    formatters.o = parameterFormatter.bind(this, false /* force */, true /* includePreview */);\n    formatters.s = stringFormatter;\n    formatters.f = floatFormatter;\n    // Firebug allows both %i and %d for formatting integers.\n    formatters.i = integerFormatter;\n    formatters.d = integerFormatter;\n\n    // Firebug uses %c for styling the message.\n    formatters.c = styleFormatter;\n\n    // Support %O to force object formatting, instead of the type-based %o formatting.\n    formatters.O = parameterFormatter.bind(this, true /* force */, false /* includePreview */);\n\n    formatters._ = bypassFormatter;\n\n    function append(this: ConsoleViewMessage, a: HTMLElement, b?: string|Node): HTMLElement {\n      if (b instanceof Node) {\n        a.appendChild(b);\n        return a;\n      }\n      if (typeof b === 'undefined') {\n        return a;\n      }\n      if (!currentStyle) {\n        a.appendChild(this._linkifyStringAsFragment(String(b)));\n        return a;\n      }\n      const lines = String(b).split('\\n');\n      for (let i = 0; i < lines.length; i++) {\n        const line = lines[i];\n        const lineFragment = this._linkifyStringAsFragment(line);\n        const wrapper = (document.createElement('span') as HTMLElement);\n        wrapper.style.setProperty('contain', 'paint');\n        wrapper.style.setProperty('display', 'inline-block');\n        wrapper.style.setProperty('max-width', '100%');\n        wrapper.appendChild(lineFragment);\n        applyCurrentStyle(wrapper);\n        for (const child of wrapper.children) {\n          if (child.classList.contains('devtools-link') && child instanceof HTMLElement) {\n            this._applyForcedVisibleStyle(child);\n          }\n        }\n        a.appendChild(wrapper);\n        if (i < lines.length - 1) {\n          a.appendChild(document.createElement('br'));\n        }\n      }\n      return a;\n    }\n\n    function applyCurrentStyle(element: HTMLElement): void {\n      if (!currentStyle) {\n        return;\n      }\n      for (const [property, {value, priority}] of currentStyle.entries()) {\n        element.style.setProperty((property as string), value, priority);\n      }\n    }\n\n    // Platform.StringUtilities.format does treat formattedResult like a Builder, result is an object.\n    return Platform.StringUtilities.format(format, parameters, formatters, formattedResult, append.bind(this));\n  }\n\n  _applyForcedVisibleStyle(element: HTMLElement): void {\n    element.style.setProperty('-webkit-text-stroke', '0', 'important');\n    element.style.setProperty('text-decoration', 'underline', 'important');\n\n    const themedColor = ThemeSupport.ThemeSupport.instance().patchColorText(\n        'rgb(33%, 33%, 33%)', ThemeSupport.ThemeSupport.ColorUsage.Foreground);\n    element.style.setProperty('color', themedColor, 'important');\n\n    let backgroundColor = 'hsl(0, 0%, 100%)';\n    if (this._message.level === Protocol.Log.LogEntryLevel.Error) {\n      backgroundColor = 'hsl(0, 100%, 97%)';\n    } else if (this._message.level === Protocol.Log.LogEntryLevel.Warning || this._shouldRenderAsWarning()) {\n      backgroundColor = 'hsl(50, 100%, 95%)';\n    }\n    const themedBackgroundColor = ThemeSupport.ThemeSupport.instance().patchColorText(\n        backgroundColor, ThemeSupport.ThemeSupport.ColorUsage.Background);\n    element.style.setProperty('background-color', themedBackgroundColor, 'important');\n  }\n\n  matchesFilterRegex(regexObject: RegExp): boolean {\n    regexObject.lastIndex = 0;\n    const contentElement = this.contentElement();\n    const anchorText = this._anchorElement ? this._anchorElement.deepTextContent() : '';\n    return (Boolean(anchorText) && regexObject.test(anchorText.trim())) ||\n        regexObject.test(contentElement.deepTextContent().slice(anchorText.length));\n  }\n\n  matchesFilterText(filter: string): boolean {\n    const text = this.contentElement().deepTextContent();\n    return text.toLowerCase().includes(filter.toLowerCase());\n  }\n\n  updateTimestamp(): void {\n    if (!this._contentElement) {\n      return;\n    }\n\n    if (Common.Settings.Settings.instance().moduleSetting('consoleTimestampsEnabled').get()) {\n      if (!this._timestampElement) {\n        this._timestampElement = (document.createElement('span') as HTMLElement);\n        this._timestampElement.classList.add('console-timestamp');\n      }\n      this._timestampElement.textContent = UI.UIUtils.formatTimestamp(this._message.timestamp, false) + ' ';\n      UI.Tooltip.Tooltip.install(this._timestampElement, UI.UIUtils.formatTimestamp(this._message.timestamp, true));\n      this._contentElement.insertBefore(this._timestampElement, this._contentElement.firstChild);\n    } else if (this._timestampElement) {\n      this._timestampElement.remove();\n      this._timestampElement = null;\n    }\n  }\n\n  nestingLevel(): number {\n    return this._nestingLevel;\n  }\n\n  setInSimilarGroup(inSimilarGroup: boolean, isLast?: boolean): void {\n    this._inSimilarGroup = inSimilarGroup;\n    this._lastInSimilarGroup = inSimilarGroup && Boolean(isLast);\n    if (this._similarGroupMarker && !inSimilarGroup) {\n      this._similarGroupMarker.remove();\n      this._similarGroupMarker = null;\n    } else if (this._element && !this._similarGroupMarker && inSimilarGroup) {\n      this._similarGroupMarker = (document.createElement('div') as HTMLElement);\n      this._similarGroupMarker.classList.add('nesting-level-marker');\n      this._element.insertBefore(this._similarGroupMarker, this._element.firstChild);\n      this._similarGroupMarker.classList.toggle('group-closed', this._lastInSimilarGroup);\n    }\n  }\n\n  isLastInSimilarGroup(): boolean {\n    return Boolean(this._inSimilarGroup) && Boolean(this._lastInSimilarGroup);\n  }\n\n  resetCloseGroupDecorationCount(): void {\n    if (!this._closeGroupDecorationCount) {\n      return;\n    }\n    this._closeGroupDecorationCount = 0;\n    this._updateCloseGroupDecorations();\n  }\n\n  incrementCloseGroupDecorationCount(): void {\n    ++this._closeGroupDecorationCount;\n    this._updateCloseGroupDecorations();\n  }\n\n  _updateCloseGroupDecorations(): void {\n    if (!this._nestingLevelMarkers) {\n      return;\n    }\n    for (let i = 0, n = this._nestingLevelMarkers.length; i < n; ++i) {\n      const marker = this._nestingLevelMarkers[i];\n      marker.classList.toggle('group-closed', n - i <= this._closeGroupDecorationCount);\n    }\n  }\n\n  _focusedChildIndex(): number {\n    if (!this._selectableChildren.length) {\n      return -1;\n    }\n    return this._selectableChildren.findIndex(child => child.element.hasFocus());\n  }\n\n  _onKeyDown(event: KeyboardEvent): void {\n    if (UI.UIUtils.isEditing() || !this._element || !this._element.hasFocus() || this._element.hasSelection()) {\n      return;\n    }\n    if (this.maybeHandleOnKeyDown(event)) {\n      event.consume(true);\n    }\n  }\n\n  maybeHandleOnKeyDown(event: KeyboardEvent): boolean {\n    // Handle trace expansion.\n    const focusedChildIndex = this._focusedChildIndex();\n    const isWrapperFocused = focusedChildIndex === -1;\n    if (this._expandTrace && isWrapperFocused) {\n      if ((event.key === 'ArrowLeft' && this._traceExpanded) || (event.key === 'ArrowRight' && !this._traceExpanded)) {\n        this._expandTrace(!this._traceExpanded);\n        return true;\n      }\n    }\n    if (!this._selectableChildren.length) {\n      return false;\n    }\n\n    if (event.key === 'ArrowLeft') {\n      this._element && this._element.focus();\n      return true;\n    }\n    if (event.key === 'ArrowRight') {\n      if (isWrapperFocused && this._selectNearestVisibleChild(0)) {\n        return true;\n      }\n    }\n    if (event.key === 'ArrowUp') {\n      const firstVisibleChild = this._nearestVisibleChild(0);\n      if (this._selectableChildren[focusedChildIndex] === firstVisibleChild && firstVisibleChild) {\n        this._element && this._element.focus();\n        return true;\n      }\n      if (this._selectNearestVisibleChild(focusedChildIndex - 1, true /* backwards */)) {\n        return true;\n      }\n    }\n    if (event.key === 'ArrowDown') {\n      if (isWrapperFocused && this._selectNearestVisibleChild(0)) {\n        return true;\n      }\n      if (!isWrapperFocused && this._selectNearestVisibleChild(focusedChildIndex + 1)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  _selectNearestVisibleChild(fromIndex: number, backwards?: boolean): boolean {\n    const nearestChild = this._nearestVisibleChild(fromIndex, backwards);\n    if (nearestChild) {\n      nearestChild.forceSelect();\n      return true;\n    }\n    return false;\n  }\n\n  _nearestVisibleChild(fromIndex: number, backwards?: boolean): {\n    element: Element,\n    forceSelect: () => void,\n  }|null {\n    const childCount = this._selectableChildren.length;\n    if (fromIndex < 0 || fromIndex >= childCount) {\n      return null;\n    }\n    const direction = backwards ? -1 : 1;\n    let index = fromIndex;\n\n    while (!this._selectableChildren[index].element.offsetParent) {\n      index += direction;\n      if (index < 0 || index >= childCount) {\n        return null;\n      }\n    }\n    return this._selectableChildren[index];\n  }\n\n  focusLastChildOrSelf(): void {\n    if (this._element && !this._selectNearestVisibleChild(this._selectableChildren.length - 1, true /* backwards */)) {\n      this._element.focus();\n    }\n  }\n\n  setContentElement(element: HTMLElement): void {\n    console.assert(!this._contentElement, 'Cannot set content element twice');\n    this._contentElement = element;\n  }\n\n  getContentElement(): HTMLElement|null {\n    return this._contentElement;\n  }\n\n  contentElement(): HTMLElement {\n    if (this._contentElement) {\n      return this._contentElement;\n    }\n\n    const contentElement = (document.createElement('div') as HTMLElement);\n    contentElement.classList.add('console-message');\n    if (this._messageLevelIcon) {\n      contentElement.appendChild(this._messageLevelIcon);\n    }\n    this._contentElement = contentElement;\n\n    const runtimeModel = this._message.runtimeModel();\n    let formattedMessage;\n    const shouldIncludeTrace = Boolean(this._message.stackTrace) &&\n        (this._message.source === Protocol.Log.LogEntrySource.Network ||\n         this._message.source === Protocol.Log.LogEntrySource.Violation ||\n         this._message.level === Protocol.Log.LogEntryLevel.Error ||\n         this._message.level === Protocol.Log.LogEntryLevel.Warning ||\n         this._message.type === Protocol.Runtime.ConsoleAPICalledEventType.Trace);\n    if (runtimeModel && shouldIncludeTrace) {\n      formattedMessage = this._buildMessageWithStackTrace(runtimeModel);\n    } else {\n      formattedMessage = this._buildMessage();\n    }\n    contentElement.appendChild(formattedMessage);\n\n    this.updateTimestamp();\n    return this._contentElement;\n  }\n\n  toMessageElement(): HTMLElement {\n    if (this._element) {\n      return this._element;\n    }\n    this._element = (document.createElement('div') as HTMLElement);\n    this._element.tabIndex = -1;\n    this._element.addEventListener('keydown', (this._onKeyDown.bind(this) as EventListener));\n    this.updateMessageElement();\n    return this._element;\n  }\n\n  updateMessageElement(): void {\n    if (!this._element) {\n      return;\n    }\n\n    this._element.className = 'console-message-wrapper';\n    this._element.removeChildren();\n    if (this._message.isGroupStartMessage()) {\n      this._element.classList.add('console-group-title');\n    }\n    if (this._message.source === SDK.ConsoleModel.FrontendMessageSource.ConsoleAPI) {\n      this._element.classList.add('console-from-api');\n    }\n    if (this._inSimilarGroup) {\n      this._similarGroupMarker = (this._element.createChild('div', 'nesting-level-marker') as HTMLElement);\n      this._similarGroupMarker.classList.toggle('group-closed', this._lastInSimilarGroup);\n    }\n\n    this._nestingLevelMarkers = [];\n    for (let i = 0; i < this._nestingLevel; ++i) {\n      this._nestingLevelMarkers.push(this._element.createChild('div', 'nesting-level-marker'));\n    }\n    this._updateCloseGroupDecorations();\n    elementToMessage.set(this._element, this);\n\n    switch (this._message.level) {\n      case Protocol.Log.LogEntryLevel.Verbose:\n        this._element.classList.add('console-verbose-level');\n        break;\n      case Protocol.Log.LogEntryLevel.Info:\n        this._element.classList.add('console-info-level');\n        if (this._message.type === SDK.ConsoleModel.FrontendMessageType.System) {\n          this._element.classList.add('console-system-type');\n        }\n        break;\n      case Protocol.Log.LogEntryLevel.Warning:\n        this._element.classList.add('console-warning-level');\n        break;\n      case Protocol.Log.LogEntryLevel.Error:\n        this._element.classList.add('console-error-level');\n        break;\n    }\n    this._updateMessageLevelIcon();\n    if (this._shouldRenderAsWarning()) {\n      this._element.classList.add('console-warning-level');\n    }\n\n    this._element.appendChild(this.contentElement());\n    if (this._repeatCount > 1) {\n      this._showRepeatCountElement();\n    }\n  }\n\n  _shouldRenderAsWarning(): boolean {\n    return (this._message.level === Protocol.Log.LogEntryLevel.Verbose ||\n            this._message.level === Protocol.Log.LogEntryLevel.Info) &&\n        (this._message.source === Protocol.Log.LogEntrySource.Violation ||\n         this._message.source === Protocol.Log.LogEntrySource.Deprecation ||\n         this._message.source === Protocol.Log.LogEntrySource.Intervention ||\n         this._message.source === Protocol.Log.LogEntrySource.Recommendation);\n  }\n\n  _updateMessageLevelIcon(): void {\n    let iconType = '';\n    let accessibleName = '';\n    if (this._message.level === Protocol.Log.LogEntryLevel.Warning) {\n      iconType = 'smallicon-warning';\n      accessibleName = i18nString(UIStrings.warning);\n    } else if (this._message.level === Protocol.Log.LogEntryLevel.Error) {\n      iconType = 'smallicon-error';\n      accessibleName = i18nString(UIStrings.error);\n    }\n    if (!this._messageLevelIcon) {\n      if (!iconType) {\n        return;\n      }\n      this._messageLevelIcon = UI.Icon.Icon.create('', 'message-level-icon');\n      if (this._contentElement) {\n        this._contentElement.insertBefore(this._messageLevelIcon, this._contentElement.firstChild);\n      }\n    }\n    this._messageLevelIcon.setIconType(iconType);\n    UI.ARIAUtils.setAccessibleName(this._messageLevelIcon, accessibleName);\n  }\n\n  repeatCount(): number {\n    return this._repeatCount || 1;\n  }\n\n  resetIncrementRepeatCount(): void {\n    this._repeatCount = 1;\n    if (!this._repeatCountElement) {\n      return;\n    }\n\n    this._repeatCountElement.remove();\n    if (this._contentElement) {\n      this._contentElement.classList.remove('repeated-message');\n    }\n    this._repeatCountElement = null;\n  }\n\n  incrementRepeatCount(): void {\n    this._repeatCount++;\n    this._showRepeatCountElement();\n  }\n\n  setRepeatCount(repeatCount: number): void {\n    this._repeatCount = repeatCount;\n    this._showRepeatCountElement();\n  }\n  _showRepeatCountElement(): void {\n    if (!this._element) {\n      return;\n    }\n\n    if (!this._repeatCountElement) {\n      this._repeatCountElement =\n          (document.createElement('span', {is: 'dt-small-bubble'}) as UI.UIUtils.DevToolsSmallBubble);\n      this._repeatCountElement.classList.add('console-message-repeat-count');\n      switch (this._message.level) {\n        case Protocol.Log.LogEntryLevel.Warning:\n          this._repeatCountElement.type = 'warning';\n          break;\n        case Protocol.Log.LogEntryLevel.Error:\n          this._repeatCountElement.type = 'error';\n          break;\n        case Protocol.Log.LogEntryLevel.Verbose:\n          this._repeatCountElement.type = 'verbose';\n          break;\n        default:\n          this._repeatCountElement.type = 'info';\n      }\n      if (this._shouldRenderAsWarning()) {\n        this._repeatCountElement.type = 'warning';\n      }\n\n      this._element.insertBefore(this._repeatCountElement, this._contentElement);\n      this.contentElement().classList.add('repeated-message');\n    }\n    this._repeatCountElement.textContent = `${this._repeatCount}`;\n\n    let accessibleName;\n    if (this._message.level === Protocol.Log.LogEntryLevel.Warning) {\n      accessibleName = i18nString(UIStrings.warningS, {n: this._repeatCount});\n    } else if (this._message.level === Protocol.Log.LogEntryLevel.Error) {\n      accessibleName = i18nString(UIStrings.errorS, {n: this._repeatCount});\n    } else {\n      accessibleName = i18nString(UIStrings.repeatS, {n: this._repeatCount});\n    }\n    UI.ARIAUtils.setAccessibleName(this._repeatCountElement, accessibleName);\n  }\n\n  get text(): string {\n    return this._message.messageText;\n  }\n\n  toExportString(): string {\n    const lines = [];\n    const nodes = this.contentElement().childTextNodes();\n    const messageContent = nodes.map(Components.Linkifier.Linkifier.untruncatedNodeText).join('');\n    for (let i = 0; i < this.repeatCount(); ++i) {\n      lines.push(messageContent);\n    }\n    return lines.join('\\n');\n  }\n\n  setSearchRegex(regex: RegExp|null): void {\n    if (this._searchHighlightNodeChanges && this._searchHighlightNodeChanges.length) {\n      UI.UIUtils.revertDomChanges(this._searchHighlightNodeChanges);\n    }\n    this._searchRegex = regex;\n    this._searchHighlightNodes = [];\n    this._searchHighlightNodeChanges = [];\n    if (!this._searchRegex) {\n      return;\n    }\n\n    const text = this.contentElement().deepTextContent();\n    let match;\n    this._searchRegex.lastIndex = 0;\n    const sourceRanges = [];\n    while ((match = this._searchRegex.exec(text)) && match[0]) {\n      sourceRanges.push(new TextUtils.TextRange.SourceRange(match.index, match[0].length));\n    }\n\n    if (sourceRanges.length) {\n      this._searchHighlightNodes =\n          UI.UIUtils.highlightSearchResults(this.contentElement(), sourceRanges, this._searchHighlightNodeChanges);\n    }\n  }\n\n  searchRegex(): RegExp|null {\n    return this._searchRegex;\n  }\n\n  searchCount(): number {\n    return this._searchHighlightNodes.length;\n  }\n\n  searchHighlightNode(index: number): Element {\n    return this._searchHighlightNodes[index];\n  }\n\n  async _getInlineFrames(\n      debuggerModel: SDK.DebuggerModel.DebuggerModel, url: string, lineNumber: number|undefined,\n      columnNumber: number|undefined): Promise<{frames: Bindings.DebuggerLanguagePlugins.FunctionInfo[]}> {\n    const debuggerWorkspaceBinding = Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance();\n    if (debuggerWorkspaceBinding.pluginManager) {\n      const projects = Workspace.Workspace.WorkspaceImpl.instance().projects();\n      const uiSourceCodes = projects.map(project => project.uiSourceCodeForURL(url)).flat().filter(f => Boolean(f)) as\n          Workspace.UISourceCode.UISourceCode[];\n      const scripts =\n          uiSourceCodes.map(uiSourceCode => debuggerWorkspaceBinding.scriptsForUISourceCode(uiSourceCode)).flat();\n      if (scripts.length) {\n        const location =\n            new SDK.DebuggerModel.Location(debuggerModel, scripts[0].scriptId, lineNumber || 0, columnNumber);\n        return debuggerWorkspaceBinding.pluginManager.getFunctionInfo(scripts[0], location);\n      }\n    }\n\n    return {frames: []};\n  }\n\n  // Expand inline stack frames in the formatted error in the stackTrace element, inserting new elements before the\n  // insertBefore anchor.\n  async _expandInlineStackFrames(\n      debuggerModel: SDK.DebuggerModel.DebuggerModel, prefix: string, suffix: string, url: string,\n      lineNumber: number|undefined, columnNumber: number|undefined, stackTrace: HTMLElement,\n      insertBefore: HTMLElement): Promise<boolean> {\n    const {frames} = await this._getInlineFrames(debuggerModel, url, lineNumber, columnNumber);\n    if (!frames.length) {\n      return false;\n    }\n\n    for (let f = 0; f < frames.length; ++f) {\n      const {name} = frames[f];\n      const formattedLine = document.createElement('span');\n      formattedLine.appendChild(this._linkifyStringAsFragment(`${prefix} ${name} (`));\n      const scriptLocationLink = this._linkifier.linkifyScriptLocation(\n          debuggerModel.target(), null, url, lineNumber,\n          {columnNumber, className: undefined, tabStop: undefined, inlineFrameIndex: f});\n      scriptLocationLink.tabIndex = -1;\n      this._selectableChildren.push({element: scriptLocationLink, forceSelect: (): void => scriptLocationLink.focus()});\n      formattedLine.appendChild(scriptLocationLink);\n      formattedLine.appendChild(this._linkifyStringAsFragment(suffix));\n      stackTrace.insertBefore(formattedLine, insertBefore);\n    }\n    return true;\n  }\n\n  _tryFormatAsError(string: string): HTMLElement|null {\n    function startsWith(prefix: string): boolean {\n      return string.startsWith(prefix);\n    }\n\n    const runtimeModel = this._message.runtimeModel();\n    // TODO: Consider removing these in favor of a simpler regex.\n    const errorPrefixes = [\n      'AggregateError',\n      'Error',\n      'EvalError',\n      'RangeError',\n      'ReferenceError',\n      'SyntaxError',\n      'TypeError',\n      'URIError',\n    ];\n    if (!runtimeModel || !errorPrefixes.some(startsWith) && !/^[\\w.]+Error\\b/.test(string)) {\n      return null;\n    }\n    const debuggerModel = runtimeModel.debuggerModel();\n    const baseURL = runtimeModel.target().inspectedURL();\n\n    const lines = string.split('\\n');\n    const linkInfos = [];\n    for (const line of lines) {\n      const isCallFrameLine = /^\\s*at\\s/.test(line);\n      if (!isCallFrameLine && linkInfos.length && linkInfos[linkInfos.length - 1].link) {\n        return null;\n      }\n\n      if (!isCallFrameLine) {\n        linkInfos.push({line});\n        continue;\n      }\n\n      let openBracketIndex = -1;\n      let closeBracketIndex = -1;\n      const inBracketsWithLineAndColumn = /\\([^\\)\\(]+:\\d+:\\d+\\)/g;\n      const inBrackets = /\\([^\\)\\(]+\\)/g;\n      let lastMatch: RegExpExecArray|null = null;\n      let currentMatch;\n      while ((currentMatch = inBracketsWithLineAndColumn.exec(line))) {\n        lastMatch = currentMatch;\n      }\n      if (!lastMatch) {\n        while ((currentMatch = inBrackets.exec(line))) {\n          lastMatch = currentMatch;\n        }\n      }\n      if (lastMatch) {\n        openBracketIndex = lastMatch.index;\n        closeBracketIndex = lastMatch.index + lastMatch[0].length - 1;\n      }\n      const hasOpenBracket = openBracketIndex !== -1;\n      let left = hasOpenBracket ? openBracketIndex + 1 : line.indexOf('at') + 3;\n      if (!hasOpenBracket && line.indexOf('async ') === left) {\n        left += 6;\n      }\n      const right = hasOpenBracket ? closeBracketIndex : line.length;\n      const linkCandidate = line.substring(left, right);\n      const splitResult = Common.ParsedURL.ParsedURL.splitLineAndColumn(linkCandidate);\n      if (!splitResult) {\n        return null;\n      }\n\n      if (splitResult.url === '<anonymous>') {\n        linkInfos.push({line});\n        continue;\n      }\n      let url = parseOrScriptMatch(splitResult.url);\n      if (!url && Common.ParsedURL.ParsedURL.isRelativeURL(splitResult.url)) {\n        url = parseOrScriptMatch(Common.ParsedURL.ParsedURL.completeURL(baseURL, splitResult.url));\n      }\n      if (!url) {\n        return null;\n      }\n\n      linkInfos.push({\n        line,\n        link: {\n          url,\n          enclosedInBraces: hasOpenBracket,\n          positionLeft: left,\n          positionRight: right,\n          lineNumber: splitResult.lineNumber,\n          columnNumber: splitResult.columnNumber,\n        },\n      });\n    }\n\n    if (!linkInfos.length) {\n      return null;\n    }\n\n    const formattedResult = document.createElement('span');\n    for (let i = 0; i < linkInfos.length; ++i) {\n      const newline = i < linkInfos.length - 1 ? '\\n' : '';\n      const {line, link} = linkInfos[i];\n      if (!link) {\n        formattedResult.appendChild(this._linkifyStringAsFragment(`${line}${newline}`));\n        continue;\n      }\n      const formattedLine = document.createElement('span');\n      const prefix = line.substring(0, link.positionLeft);\n      const suffix = `${line.substring(link.positionRight)}${newline}`;\n\n      formattedLine.appendChild(this._linkifyStringAsFragment(prefix));\n      const scriptLocationLink = this._linkifier.linkifyScriptLocation(\n          debuggerModel.target(), null, link.url, link.lineNumber,\n          {columnNumber: link.columnNumber, className: undefined, tabStop: undefined, inlineFrameIndex: 0});\n      scriptLocationLink.tabIndex = -1;\n      this._selectableChildren.push({element: scriptLocationLink, forceSelect: (): void => scriptLocationLink.focus()});\n      formattedLine.appendChild(scriptLocationLink);\n      formattedLine.appendChild(this._linkifyStringAsFragment(suffix));\n      formattedResult.appendChild(formattedLine);\n\n      if (!link.enclosedInBraces) {\n        continue;\n      }\n\n      const prefixWithoutFunction = prefix.substring(0, prefix.lastIndexOf(' ', prefix.length - 3));\n\n      // If we were able to parse the function name from the stack trace line, try to replace it with an expansion of\n      // any inline frames.\n      const selectableChildIndex = this._selectableChildren.length - 1;\n      this._expandInlineStackFrames(\n              debuggerModel, prefixWithoutFunction, suffix, link.url, link.lineNumber, link.columnNumber,\n              formattedResult, formattedLine)\n          .then(modified => {\n            if (modified) {\n              formattedResult.removeChild(formattedLine);\n              this._selectableChildren.splice(selectableChildIndex, 1);\n            }\n          });\n    }\n\n    return formattedResult;\n\n    function parseOrScriptMatch(url: string|null): string|null {\n      if (!url) {\n        return null;\n      }\n      const parsedURL = Common.ParsedURL.ParsedURL.fromString(url);\n      if (parsedURL) {\n        return parsedURL.url;\n      }\n      if (debuggerModel.scriptsForSourceURL(url).length) {\n        return url;\n      }\n      return null;\n    }\n  }\n\n  _linkifyWithCustomLinkifier(\n      string: string, linkifier: (arg0: string, arg1: string, arg2?: number, arg3?: number) => Node): DocumentFragment {\n    if (string.length > getMaxTokenizableStringLength()) {\n      const propertyValue = new ObjectUI.ObjectPropertiesSection.ExpandableTextPropertyValue(\n          document.createElement('span'), string, getLongStringVisibleLength());\n      const fragment = document.createDocumentFragment();\n      fragment.appendChild(propertyValue.element);\n      return fragment;\n    }\n    const container = document.createDocumentFragment();\n    const tokens = ConsoleViewMessage._tokenizeMessageText(string);\n    for (const token of tokens) {\n      if (!token.text) {\n        continue;\n      }\n      switch (token.type) {\n        case 'url': {\n          const realURL = (token.text.startsWith('www.') ? 'http://' + token.text : token.text);\n          const splitResult = Common.ParsedURL.ParsedURL.splitLineAndColumn(realURL);\n          const sourceURL = Common.ParsedURL.ParsedURL.removeWasmFunctionInfoFromURL(splitResult.url);\n          let linkNode;\n          if (splitResult) {\n            linkNode = linkifier(token.text, sourceURL, splitResult.lineNumber, splitResult.columnNumber);\n          } else {\n            linkNode = linkifier(token.text, '');\n          }\n          container.appendChild(linkNode);\n          break;\n        }\n        default:\n          container.appendChild(document.createTextNode(token.text));\n          break;\n      }\n    }\n    return container;\n  }\n\n  _linkifyStringAsFragment(string: string): DocumentFragment {\n    return this._linkifyWithCustomLinkifier(string, (text, url, lineNumber, columnNumber) => {\n      const options = {text, lineNumber, columnNumber};\n      const linkElement =\n          Components.Linkifier.Linkifier.linkifyURL(url, (options as Components.Linkifier.LinkifyURLOptions));\n      linkElement.tabIndex = -1;\n      this._selectableChildren.push({element: linkElement, forceSelect: (): void => linkElement.focus()});\n      return linkElement;\n    });\n  }\n\n  static _tokenizeMessageText(string: string): {\n    type?: string, text: string,\n  }[] {\n    const {tokenizerRegexes, tokenizerTypes} = getOrCreateTokenizers();\n    if (string.length > getMaxTokenizableStringLength()) {\n      return [{text: string, type: undefined}];\n    }\n    const results = TextUtils.TextUtils.Utils.splitStringByRegexes(string, tokenizerRegexes);\n    return results.map(result => ({text: result.value, type: tokenizerTypes[result.regexIndex]}));\n  }\n\n  groupKey(): string {\n    if (!this._groupKey) {\n      this._groupKey = this._message.groupCategoryKey() + ':' + this.groupTitle();\n    }\n    return this._groupKey;\n  }\n\n  groupTitle(): string {\n    const tokens = ConsoleViewMessage._tokenizeMessageText(this._message.messageText);\n    const result = tokens.reduce((acc, token) => {\n      let text: Common.UIString.LocalizedString|string = token.text;\n      if (token.type === 'url') {\n        text = i18nString(UIStrings.url);\n      } else if (token.type === 'time') {\n        text = i18nString(UIStrings.tookNms);\n      } else if (token.type === 'event') {\n        text = i18nString(UIStrings.someEvent);\n      } else if (token.type === 'milestone') {\n        text = i18nString(UIStrings.Mxx);\n      } else if (token.type === 'autofill') {\n        text = i18nString(UIStrings.attribute);\n      }\n      return acc + text;\n    }, '');\n    return result.replace(/[%]o/g, '');\n  }\n}\n\nlet tokenizerRegexes: RegExp[]|null = null;\nlet tokenizerTypes: string[]|null = null;\n\nfunction getOrCreateTokenizers(): {\n  tokenizerRegexes: Array<RegExp>,\n  tokenizerTypes: Array<string>,\n} {\n  if (!tokenizerRegexes || !tokenizerTypes) {\n    const controlCodes = '\\\\u0000-\\\\u0020\\\\u007f-\\\\u009f';\n    const linkStringRegex = new RegExp(\n        '(?:[a-zA-Z][a-zA-Z0-9+.-]{2,}:\\\\/\\\\/|data:|www\\\\.)[^\\\\s' + controlCodes + '\"]{2,}[^\\\\s' + controlCodes +\n            '\"\\')}\\\\],:;.!?]',\n        'u');\n    const pathLineRegex = /(?:\\/[\\w\\.-]*)+\\:[\\d]+/;\n    const timeRegex = /took [\\d]+ms/;\n    const eventRegex = /'\\w+' event/;\n    const milestoneRegex = /\\sM[6-7]\\d/;\n    const autofillRegex = /\\(suggested: \\\"[\\w-]+\\\"\\)/;\n    const handlers = new Map<RegExp, string>();\n    handlers.set(linkStringRegex, 'url');\n    handlers.set(pathLineRegex, 'url');\n    handlers.set(timeRegex, 'time');\n    handlers.set(eventRegex, 'event');\n    handlers.set(milestoneRegex, 'milestone');\n    handlers.set(autofillRegex, 'autofill');\n    tokenizerRegexes = Array.from(handlers.keys());\n    tokenizerTypes = Array.from(handlers.values());\n    return {tokenizerRegexes, tokenizerTypes};\n  }\n  return {tokenizerRegexes, tokenizerTypes};\n}\n\nexport class ConsoleGroupViewMessage extends ConsoleViewMessage {\n  _collapsed: boolean;\n  _expandGroupIcon: UI.Icon.Icon|null;\n  _onToggle: () => void;\n\n  constructor(\n      consoleMessage: SDK.ConsoleModel.ConsoleMessage, linkifier: Components.Linkifier.Linkifier, nestingLevel: number,\n      onToggle: () => void, onResize: (arg0: Common.EventTarget.EventTargetEvent) => void) {\n    console.assert(consoleMessage.isGroupStartMessage());\n    super(consoleMessage, linkifier, nestingLevel, onResize);\n    this._collapsed = consoleMessage.type === Protocol.Runtime.ConsoleAPICalledEventType.StartGroupCollapsed;\n    this._expandGroupIcon = null;\n    this._onToggle = onToggle;\n  }\n\n  _setCollapsed(collapsed: boolean): void {\n    this._collapsed = collapsed;\n    if (this._expandGroupIcon) {\n      this._expandGroupIcon.setIconType(this._collapsed ? 'smallicon-triangle-right' : 'smallicon-triangle-down');\n    }\n    this._onToggle.call(null);\n  }\n\n  collapsed(): boolean {\n    return this._collapsed;\n  }\n\n  maybeHandleOnKeyDown(event: KeyboardEvent): boolean {\n    const focusedChildIndex = this._focusedChildIndex();\n    if (focusedChildIndex === -1) {\n      if ((event.key === 'ArrowLeft' && !this._collapsed) || (event.key === 'ArrowRight' && this._collapsed)) {\n        this._setCollapsed(!this._collapsed);\n        return true;\n      }\n    }\n    return super.maybeHandleOnKeyDown(event);\n  }\n\n  toMessageElement(): HTMLElement {\n    let element: HTMLElement|null = this._element || null;\n    if (!element) {\n      element = super.toMessageElement();\n      const iconType = this._collapsed ? 'smallicon-triangle-right' : 'smallicon-triangle-down';\n      this._expandGroupIcon = UI.Icon.Icon.create(iconType, 'expand-group-icon');\n      // Intercept focus to avoid highlight on click.\n      this.contentElement().tabIndex = -1;\n      if (this._repeatCountElement) {\n        this._repeatCountElement.insertBefore(this._expandGroupIcon, this._repeatCountElement.firstChild);\n      } else {\n        element.insertBefore(this._expandGroupIcon, this._contentElement);\n      }\n      element.addEventListener('click', () => this._setCollapsed(!this._collapsed));\n    }\n    return element;\n  }\n\n  _showRepeatCountElement(): void {\n    super._showRepeatCountElement();\n    if (this._repeatCountElement && this._expandGroupIcon) {\n      this._repeatCountElement.insertBefore(this._expandGroupIcon, this._repeatCountElement.firstChild);\n    }\n  }\n}\n\nexport class ConsoleCommand extends ConsoleViewMessage {\n  _formattedCommand: HTMLElement|null;\n\n  constructor(\n      consoleMessage: SDK.ConsoleModel.ConsoleMessage, linkifier: Components.Linkifier.Linkifier, nestingLevel: number,\n      onResize: (arg0: Common.EventTarget.EventTargetEvent) => void) {\n    super(consoleMessage, linkifier, nestingLevel, onResize);\n    this._formattedCommand = null;\n  }\n\n  contentElement(): HTMLElement {\n    const contentElement = this.getContentElement();\n    if (contentElement) {\n      return contentElement;\n    }\n    const newContentElement = (document.createElement('div') as HTMLElement);\n    this.setContentElement(newContentElement);\n    newContentElement.classList.add('console-user-command');\n    const icon = UI.Icon.Icon.create('smallicon-user-command', 'command-result-icon');\n    newContentElement.appendChild(icon);\n\n    elementToMessage.set(newContentElement, this);\n    this._formattedCommand = (document.createElement('span') as HTMLElement);\n    this._formattedCommand.classList.add('source-code');\n    this._formattedCommand.textContent = Platform.StringUtilities.replaceControlCharacters(this.text);\n    newContentElement.appendChild(this._formattedCommand);\n\n    if (this._formattedCommand.textContent.length < MaxLengthToIgnoreHighlighter) {\n      const javascriptSyntaxHighlighter = new TextEditor.SyntaxHighlighter.SyntaxHighlighter('text/javascript', true);\n      javascriptSyntaxHighlighter.syntaxHighlightNode(this._formattedCommand).then(this._updateSearch.bind(this));\n    } else {\n      this._updateSearch();\n    }\n\n    this.updateTimestamp();\n    return newContentElement;\n  }\n\n  _updateSearch(): void {\n    this.setSearchRegex(this.searchRegex());\n  }\n}\n\nexport class ConsoleCommandResult extends ConsoleViewMessage {\n  contentElement(): HTMLElement {\n    const element = super.contentElement();\n    if (!element.classList.contains('console-user-command-result')) {\n      element.classList.add('console-user-command-result');\n      if (this.consoleMessage().level === Protocol.Log.LogEntryLevel.Info) {\n        const icon = UI.Icon.Icon.create('smallicon-command-result', 'command-result-icon');\n        element.insertBefore(icon, element.firstChild);\n      }\n    }\n    return element;\n  }\n}\n\nexport class ConsoleTableMessageView extends ConsoleViewMessage {\n  _dataGrid: DataGrid.SortableDataGrid.SortableDataGrid<unknown>|null;\n\n  constructor(\n      consoleMessage: SDK.ConsoleModel.ConsoleMessage, linkifier: Components.Linkifier.Linkifier, nestingLevel: number,\n      onResize: (arg0: Common.EventTarget.EventTargetEvent) => void) {\n    super(consoleMessage, linkifier, nestingLevel, onResize);\n    console.assert(consoleMessage.type === Protocol.Runtime.ConsoleAPICalledEventType.Table);\n    this._dataGrid = null;\n  }\n\n  wasShown(): void {\n    if (this._dataGrid) {\n      this._dataGrid.updateWidths();\n    }\n    super.wasShown();\n  }\n\n  onResize(): void {\n    if (!this.isVisible()) {\n      return;\n    }\n    if (this._dataGrid) {\n      this._dataGrid.onResize();\n    }\n  }\n\n  contentElement(): HTMLElement {\n    const contentElement = this.getContentElement();\n    if (contentElement) {\n      return contentElement;\n    }\n\n    const newContentElement = (document.createElement('div') as HTMLElement);\n    newContentElement.classList.add('console-message');\n    if (this._messageLevelIcon) {\n      newContentElement.appendChild(this._messageLevelIcon);\n    }\n    this.setContentElement(newContentElement);\n\n    newContentElement.appendChild(this._buildTableMessage());\n    this.updateTimestamp();\n    return newContentElement;\n  }\n\n  _buildTableMessage(): HTMLElement {\n    const formattedMessage = (document.createElement('span') as HTMLElement);\n    formattedMessage.classList.add('source-code');\n    this._anchorElement = this._buildMessageAnchor();\n    if (this._anchorElement) {\n      formattedMessage.appendChild(this._anchorElement);\n    }\n\n    const table = this._message.parameters && this._message.parameters.length ? this._message.parameters[0] : null;\n    if (!table) {\n      return this._buildMessage();\n    }\n    const actualTable = parameterToRemoteObject(this._message.runtimeModel())(table);\n    if (!actualTable || !actualTable.preview) {\n      return this._buildMessage();\n    }\n\n    const rawValueColumnSymbol = Symbol('rawValueColumn');\n    const columnNames: (string|symbol)[] = [];\n    const preview = actualTable.preview;\n    const rows = [];\n    for (let i = 0; i < preview.properties.length; ++i) {\n      const rowProperty = preview.properties[i];\n      let rowSubProperties: Protocol.Runtime.PropertyPreview[];\n      if (rowProperty.valuePreview && rowProperty.valuePreview.properties.length) {\n        rowSubProperties = rowProperty.valuePreview.properties;\n      } else if (rowProperty.value) {\n        rowSubProperties =\n            [{name: rawValueColumnSymbol as unknown as string, type: rowProperty.type, value: rowProperty.value}];\n      } else {\n        continue;\n      }\n\n      const rowValue = new Map<string|symbol, HTMLElement>();\n      const maxColumnsToRender = 20;\n      for (let j = 0; j < rowSubProperties.length; ++j) {\n        const cellProperty = rowSubProperties[j];\n        let columnRendered: true|boolean = columnNames.indexOf(cellProperty.name) !== -1;\n        if (!columnRendered) {\n          if (columnNames.length === maxColumnsToRender) {\n            continue;\n          }\n          columnRendered = true;\n          columnNames.push(cellProperty.name);\n        }\n\n        if (columnRendered) {\n          const cellElement =\n              this._renderPropertyPreviewOrAccessor(actualTable, cellProperty, [rowProperty, cellProperty]);\n          cellElement.classList.add('console-message-nowrap-below');\n          rowValue.set(cellProperty.name, cellElement);\n        }\n      }\n      rows.push({rowName: rowProperty.name, rowValue});\n    }\n\n    const flatValues = [];\n    for (const {rowName, rowValue} of rows) {\n      flatValues.push(rowName);\n      for (let j = 0; j < columnNames.length; ++j) {\n        flatValues.push(rowValue.get(columnNames[j]));\n      }\n    }\n    columnNames.unshift(i18nString(UIStrings.index));\n    const columnDisplayNames =\n        columnNames.map(name => name === rawValueColumnSymbol ? i18nString(UIStrings.value) : name.toString());\n\n    if (flatValues.length) {\n      this._dataGrid = DataGrid.SortableDataGrid.SortableDataGrid.create(\n          columnDisplayNames, flatValues, i18nString(UIStrings.console));\n      if (this._dataGrid) {\n        this._dataGrid.setStriped(true);\n        this._dataGrid.setFocusable(false);\n\n        const formattedResult = document.createElement('span');\n        formattedResult.classList.add('console-message-text');\n        const tableElement = formattedResult.createChild('div', 'console-message-formatted-table');\n        const dataGridContainer = tableElement.createChild('span');\n        tableElement.appendChild(this._formatParameter(actualTable, true, false));\n        dataGridContainer.appendChild(this._dataGrid.element);\n        formattedMessage.appendChild(formattedResult);\n        this._dataGrid.renderInline();\n      }\n    }\n    return formattedMessage;\n  }\n\n  approximateFastHeight(): number {\n    const table = this._message.parameters && this._message.parameters[0];\n    if (table && typeof table !== 'string' && table.preview) {\n      return defaultConsoleRowHeight * table.preview.properties.length;\n    }\n    return defaultConsoleRowHeight;\n  }\n}\n\n/**\n * The maximum length before strings are considered too long for syntax highlighting.\n * @const\n */\nconst MaxLengthToIgnoreHighlighter: number = 10000;\n\n/**\n * @const\n */\nexport const MaxLengthForLinks: number = 40;\n\nlet maxTokenizableStringLength = 10000;\nlet longStringVisibleLength = 5000;\n\nexport const getMaxTokenizableStringLength = (): number => {\n  return maxTokenizableStringLength;\n};\n\nexport const setMaxTokenizableStringLength = (length: number): void => {\n  maxTokenizableStringLength = length;\n};\n\nexport const getLongStringVisibleLength = (): number => {\n  return longStringVisibleLength;\n};\n\nexport const setLongStringVisibleLength = (length: number): void => {\n  longStringVisibleLength = length;\n};\n"]}