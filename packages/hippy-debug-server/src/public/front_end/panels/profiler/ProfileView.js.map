{"version":3,"file":"ProfileView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/profiler/ProfileView.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,uDAAuD;AAEvD,OAAO,KAAK,MAAM,MAAM,6BAA6B,CAAC;AACtD,OAAO,KAAK,IAAI,MAAM,yBAAyB,CAAC;AAChD,OAAO,KAAK,IAAI,MAAM,yBAAyB,CAAC;AAChD,OAAO,KAAK,QAAQ,MAAM,iCAAiC,CAAC;AAC5D,OAAO,KAAK,QAAQ,MAAM,mCAAmC,CAAC;AAC9D,OAAO,KAAK,QAAQ,MAAM,mDAAmD,CAAC;AAC9E,OAAO,KAAK,MAAM,MAAM,+CAA+C,CAAC;AACxE,OAAO,KAAK,UAAU,MAAM,2CAA2C,CAAC;AAIxE,OAAO,KAAK,EAAE,MAAM,2BAA2B,CAAC;AAEhD,OAAO,EAAC,2BAA2B,EAAC,MAAM,8BAA8B,CAAC;AAEzE,OAAO,EAAC,oBAAoB,EAAC,MAAM,2BAA2B,CAAC;AAE/D,OAAO,EAAC,mBAAmB,EAAC,MAAM,sBAAsB,CAAC;AAEzD,OAAO,EAAC,MAAM,EAAE,aAAa,EAAC,MAAM,oBAAoB,CAAC;AACzD,OAAO,EAAC,yBAAyB,EAAC,MAAM,gCAAgC,CAAC;AACzE,OAAO,EAAC,0BAA0B,EAAC,MAAM,6BAA6B,CAAC;AAEvE,MAAM,SAAS,GAAG;IAChB;;MAEE;IACF,OAAO,EAAE,SAAS;IAClB;;;MAGE;IACF,sBAAsB,EAAE,oCAAoC;IAC5D;;MAEE;IACF,QAAQ,EAAE,UAAU;IACpB;;MAEE;IACF,QAAQ,EAAE,UAAU;IACpB;;MAEE;IACF,eAAe,EAAE,mBAAmB;IACpC;;MAEE;IACF,qBAAqB,EAAE,yBAAyB;IAChD;;MAEE;IACF,uBAAuB,EAAE,2BAA2B;IACpD;;MAEE;IACF,mBAAmB,EAAE,uBAAuB;IAC5C;;MAEE;IACF,KAAK,EAAE,OAAO;IACd;;MAEE;IACF,aAAa,EAAE,mBAAmB;IAClC;;MAEE;IACF,WAAW,EAAE,iBAAiB;IAC9B;;;MAGE;IACF,QAAQ,EAAE,eAAe;IACzB;;;MAGE;IACF,QAAQ,EAAE,iBAAiB;IAC3B;;;;MAIE;IACF,eAAe,EAAE,kCAAkC;IACnD;;MAEE;IACF,OAAO,EAAE,UAAU;IACnB;;MAEE;IACF,gBAAgB,EAAE,qBAAqB;IACvC;;MAEE;IACF,OAAO,EAAE,UAAU;IACnB;;;MAGE;IACF,MAAM,EAAE,QAAQ;CACjB,CAAC;AACF,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,gCAAgC,EAAE,SAAS,CAAC,CAAC;AACtF,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AACtE,MAAM,OAAO,WAAY,SAAQ,EAAE,CAAC,IAAI,CAAC,UAAU;IACjD,QAAQ,CAA6C;IACrD,eAAe,CAAmC;IAClD,QAAQ,CAA0C;IAClD,kBAAkB,CAA6B;IAC/C,WAAW,CAA2B;IACtC,aAAa,CAA2B;IACxC,WAAW,CAA2B;IACtC,UAAU,CAAiC;IAC3C,cAAc,CAAa;IAC3B,SAAS,CAAsC;IAC/C,aAAa,CAAU;IACvB,aAAa,CAAyB;IACtC,4BAA4B,CAAoC;IAChE,2BAA2B,CAAmC;IAC9D,yBAAyB,CAAU;IACnC,aAAa,CAAiC;IAC9C,WAAW,CAAwB;IACnC,YAAY,CAAkE;IAC9E,kBAAkB,CAA4C;IAC9D,mBAAmB,CAAuB;IAC1C;QACE,KAAK,CAAC,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;QAErC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QAErB,IAAI,CAAC,eAAe,GAAG,IAAI,EAAE,CAAC,cAAc,CAAC,cAAc,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QACxE,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,UAAU,CAAC,SAAS,CAAC,sBAAsB,CAAC,CAAC,CAAC;QAClF,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAExC,MAAM,OAAO,GAAI,EAA2C,CAAC;QAC7D,OAAO,CAAC,IAAI,CAAC;YACX,EAAE,EAAE,MAAM;YACV,KAAK,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;YAChC,KAAK,EAAE,OAAO;YACd,UAAU,EAAE,IAAI;YAChB,QAAQ,EAAE,IAAI;YACd,IAAI,EAAE,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,UAAU;YACxC,gBAAgB,EAAE,SAAS;YAC3B,KAAK,EAAE,SAAS;YAChB,QAAQ,EAAE,SAAS;YACnB,aAAa,EAAE,SAAS;YACxB,QAAQ,EAAE,SAAS;YACnB,UAAU,EAAE,SAAS;YACrB,MAAM,EAAE,SAAS;YACjB,2BAA2B,EAAE,SAAS;YACtC,QAAQ,EAAE,SAAS;YACnB,aAAa,EAAE,SAAS;SACzB,CAAC,CAAC;QACH,OAAO,CAAC,IAAI,CAAC;YACX,EAAE,EAAE,OAAO;YACX,KAAK,EAAE,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC;YACjC,KAAK,EAAE,OAAO;YACd,UAAU,EAAE,IAAI;YAChB,QAAQ,EAAE,IAAI;YACd,IAAI,EAAE,SAAS;YACf,gBAAgB,EAAE,SAAS;YAC3B,KAAK,EAAE,SAAS;YAChB,QAAQ,EAAE,SAAS;YACnB,aAAa,EAAE,SAAS;YACxB,QAAQ,EAAE,SAAS;YACnB,UAAU,EAAE,SAAS;YACrB,MAAM,EAAE,SAAS;YACjB,2BAA2B,EAAE,SAAS;YACtC,QAAQ,EAAE,SAAS;YACnB,aAAa,EAAE,SAAS;SACzB,CAAC,CAAC;QACH,OAAO,CAAC,IAAI,CAAC;YACX,EAAE,EAAE,UAAU;YACd,KAAK,EAAE,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAC;YACrC,UAAU,EAAE,IAAI;YAChB,QAAQ,EAAE,IAAI;YACd,IAAI,EAAE,SAAS;YACf,gBAAgB,EAAE,SAAS;YAC3B,KAAK,EAAE,SAAS;YAChB,QAAQ,EAAE,SAAS;YACnB,aAAa,EAAE,SAAS;YACxB,QAAQ,EAAE,SAAS;YACnB,MAAM,EAAE,SAAS;YACjB,2BAA2B,EAAE,SAAS;YACtC,QAAQ,EAAE,SAAS;YACnB,aAAa,EAAE,SAAS;YACxB,KAAK,EAAE,SAAS;YAChB,UAAU,EAAE,SAAS;SACtB,CAAC,CAAC;QAEH,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ,CAAC,QAAQ,CAAC,YAAY,CAAC;YACjD,WAAW,EAAE,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAC;YAC3C,OAAO;YACP,YAAY,EAAE,SAAS;YACvB,cAAc,EAAE,SAAS;YACzB,eAAe,EAAE,SAAS;SAC3B,CAAC,CAAC;QACH,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,cAAc,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QACjG,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;QAC3G,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,cAAc,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;QAC9G,IAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAE9E,IAAI,CAAC,kBAAkB;YACnB,IAAI,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,UAAU,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC,CAAC;QAEvG,IAAI,CAAC,WAAW;YACZ,IAAI,EAAE,CAAC,OAAO,CAAC,aAAa,CAAC,UAAU,CAAC,SAAS,CAAC,qBAAqB,CAAC,EAAE,sBAAsB,CAAC,CAAC;QACtG,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QACnC,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,EAAE,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;QAEnG,IAAI,CAAC,aAAa;YACd,IAAI,EAAE,CAAC,OAAO,CAAC,aAAa,CAAC,UAAU,CAAC,SAAS,CAAC,uBAAuB,CAAC,EAAE,kBAAkB,CAAC,CAAC;QACpG,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QACrC,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,EAAE,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QAEvG,IAAI,CAAC,WAAW,GAAG,IAAI,EAAE,CAAC,OAAO,CAAC,aAAa,CAAC,UAAU,CAAC,SAAS,CAAC,mBAAmB,CAAC,EAAE,mBAAmB,CAAC,CAAC;QAChH,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QACnC,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,EAAE,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;QAEnG,IAAI,CAAC,UAAU,GAAG,IAAI,UAAU,CAAC,SAAS,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;IACtE,CAAC;IAED,MAAM,CAAC,iBAAiB,CAAC,SAGtB;QACD,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QAC9C,KAAK,MAAM,KAAK,IAAI,SAAS,EAAE;YAC7B,MAAM,GAAG,GAAG,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YACpC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,WAAW,GAAG,KAAK,CAAC,KAAK,CAAC;YAChD,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,WAAW,GAAG,KAAK,CAAC,KAAK,CAAC;SACjD;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IAED,UAAU,CAAC,OAA8C;QACvD,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,IAAI,CAAC,4BAA4B,GAAG,IAAI,CAAC;QACzC,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC;QACxC,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAED,OAAO;QACL,OAAO,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAED,UAAU,CAAC,aAAwB;QACjC,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;QAEpC,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,aAAa,sBAAkB,CAAC;QACnG,MAAM,SAAS,GAAG,6DAAkD,CAAC;QAErE,MAAM,WAAW,GAAG,IAAI,GAAG,CAAC;YAC1B,sBAAkB,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YAC9C,sBAAkB,UAAU,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;YACtD,oBAAiB,UAAU,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;SACpD,CAAC,CAAC;QAEH,MAAM,OAAO,GAAG,IAAI,GAAG,CACnB,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAE,WAAW,CAAC,GAAG,CAAC,IAAI,CAAY,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;QAClH,MAAM,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,IAAI,SAAS,CAAC,CAAC,CAAC,CAAC;QACxD,MAAM,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;QACpE,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAE,MAAkB,CAAC,CAAC;QAEpD,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;SAC3B;IACH,CAAC;IAED,KAAK;QACH,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC;SAC1B;aAAM;YACL,KAAK,CAAC,KAAK,EAAE,CAAC;SACf;IACH,CAAC;IAED,YAAY,CAAC,SAAiB;QAC5B,MAAM,iBAAiB,CAAC;IAC1B,CAAC;IAED,WAAW,CAAC,QAAgB,EAAE,SAAiB;QAC7C,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,OAAO;SACR;QACD,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;IACpD,CAAC;IAED,KAAK,CAAC,YAAY;QAChB,OAAO,CAAC,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;IAC3F,CAAC;IAED,+BAA+B;QAC7B,IAAI,CAAC,IAAI,CAAC,4BAA4B,EAAE;YACtC,IAAI,CAAC,4BAA4B,GAAG,IAAI,2BAA2B,CAC/D,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,eAAe,EAAG,IAAI,CAAC,QAAkD,CAAC,IAAI,EACxG,IAAI,CAAC,aAAa,CAAC,CAAC;SACzB;QACD,OAAO,IAAI,CAAC,4BAA4B,CAAC;IAC3C,CAAC;IAED,8BAA8B;QAC5B,IAAI,CAAC,IAAI,CAAC,2BAA2B,EAAE;YACrC,IAAI,CAAC,2BAA2B,GAAG,IAAI,0BAA0B,CAC7D,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,eAAe,EAAG,IAAI,CAAC,QAAkD,CAAC,IAAI,EACxG,IAAI,CAAC,aAAa,CAAC,CAAC;SACzB;QACD,OAAO,IAAI,CAAC,2BAA2B,CAAC;IAC1C,CAAC;IAED,oBAAoB,CAAC,WAAuC,EAAE,QAAiD;QAE7G,MAAM,IAAI,GAAI,QAAgC,CAAC;QAC/C,IAAI,IAAI,CAAC,WAAW,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE;YACrE,WAAW,CAAC,qBAAqB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SACrD;IACH,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,yBAAyB,GAAG,CAAC,CAAC,CAAC;IACtC,CAAC;IAED,OAAO;QACL,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE;YAC7B,OAAO;SACR;QACD,MAAM,mBAAmB,GACrB,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAE,IAAI,CAAC,QAAQ,CAAC,YAAoC,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;QAExG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,cAAc,EAAE,CAAC;QAE1C,MAAM,QAAQ,GAAG,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC;QACnD,MAAM,KAAK,GAAG,QAAQ,CAAC,MAAM,CAAC;QAE9B,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,KAAK,EAAE,EAAE,KAAK,EAAE;YAC1C,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,WAAW,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;SACvD;QAED,IAAI,mBAAmB,EAAE;YACvB,oFAAoF;YACpF,aAAa;YACb,mBAAmB,CAAC,QAAQ,GAAG,IAAI,CAAC;SACrC;IACH,CAAC;IAED,kBAAkB;QAChB,IAAI,KAAK,GAAmD,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QACjG,OAAO,KAAK,EAAE;YACZ,KAAK,CAAC,OAAO,EAAE,CAAC;YAChB,KAAK,GAAG,KAAK,CAAC,gBAAgB,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;SACnD;IACH,CAAC;IAED,cAAc;QACZ,OAAO,IAAI,CAAC,eAAe,CAAC;IAC9B,CAAC;IAED,2BAA2B;QACzB,OAAO,IAAI,CAAC;IACd,CAAC;IAED,mBAAmB;QACjB,OAAO,KAAK,CAAC;IACf,CAAC;IAED,cAAc;QACZ,IAAI,IAAI,CAAC,kBAAkB,EAAE;YAC3B,IAAI,CAAC,kBAAkB,CAAC,cAAc,EAAE,CAAC;SAC1C;IACH,CAAC;IAED,aAAa,CAAC,YAA4C,EAAE,UAAmB,EAAE,aAAuB;QACtG,IAAI,IAAI,CAAC,kBAAkB,EAAE;YAC3B,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC,YAAY,EAAE,UAAU,EAAE,aAAa,CAAC,CAAC;SAChF;IACH,CAAC;IAED,sBAAsB;QACpB,IAAI,IAAI,CAAC,kBAAkB,EAAE;YAC3B,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,EAAE,CAAC;SAClD;IACH,CAAC;IAED,0BAA0B;QACxB,IAAI,IAAI,CAAC,kBAAkB,EAAE;YAC3B,IAAI,CAAC,kBAAkB,CAAC,0BAA0B,EAAE,CAAC;SACtD;IACH,CAAC;IAED,SAAS;QACP,OAAO,IAAI,CAAC,UAAU,CAAC;IACzB,CAAC;IAED,4BAA4B;QAC1B,MAAM,iBAAiB,CAAC;IAC1B,CAAC;IAED,wBAAwB;QACtB,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,OAAO;SACR;QACD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,4BAA4B,EAAE,CAAC;QACzD,IAAI,CAAC,WAAW,GAAG,IAAI,oBAAoB,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QACtF,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,YAAY,EAAE,KAAK,CAAC,EAAE;YAC/E,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;QAC9B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,KAAK,CAAC,eAAe,CAAC,KAA0C;QAC9D,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;YACvB,OAAO;SACR;QACD,MAAM,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC;QAC9B,MAAM,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;QACvD,MAAM,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC;QACxD,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,aAAa,EAAE;YAC7C,OAAO;SACR;QACD,MAAM,MAAM,GAAG,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACxD,IAAI,CAAC,MAAM,EAAE;YACX,OAAO;SACR;QACD,MAAM,QAAQ,GACT,aAAa,CAAC,iBAAiB,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,YAAY,CAAgC,CAAC;QAChH,MAAM,UAAU,GACZ,MAAM,QAAQ,CAAC,wBAAwB,CAAC,wBAAwB,CAAC,QAAQ,EAAE,CAAC,uBAAuB,CAAC,QAAQ,CAAC,CAAC;QAClH,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;IACrC,CAAC;IAED,WAAW;QACT,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAClB,OAAO;SACR;QAED,IAAI,CAAC,eAAe,CAAC,WAAW,EAAE,CAAC;QAEnC,IAAI,IAAI,CAAC,YAAY,EAAE;YACrB,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC;SAC5B;QACD,IAAI,CAAC,SAAS,CAAC,GAAG,CAAE,IAAI,CAAC,kBAAkB,CAAC,cAAc,EAAwB,CAAC,KAAkB,CAAC,CAAC;QACvG,QAAQ,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE;YAC5B;gBACE,IAAI,CAAC,wBAAwB,EAAE,CAAC;gBAChC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC;gBACrC,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,WAAW,CAAC;gBAC3C,MAAM;YACR;gBACE,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,8BAA8B,EAAE,CAAC;gBACjE,IAAI,CAAC,YAAY,EAAE,CAAC;gBACpB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;gBAC7C,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,mBAAmB,CAAC;gBACnD,MAAM;YACR;gBACE,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,+BAA+B,EAAE,CAAC;gBAClE,IAAI,CAAC,YAAY,EAAE,CAAC;gBACpB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;gBAC7C,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,mBAAmB,CAAC;gBACnD,MAAM;SACT;QAED,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,wBAAoB,CAAC;QACzD,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,CAAC;QACtC,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,CAAC;QACxC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,CAAC;QAEtC,IAAI,IAAI,CAAC,YAAY,EAAE;YACrB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;SACtD;IACH,CAAC;IAED,aAAa,CAAC,QAAiB;QAC7B,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;QACtC,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;IAC1C,CAAC;IAED,aAAa,CAAC,MAA2C;QACvD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE;YAC/B,OAAO;SACR;QAED,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACjC,IAAI,CAAC,WAAW,CAAC,OAAuB,CAAC,KAAK,EAAE,CAAC;QAClD,IAAI,IAAI,CAAC,mBAAmB,EAAE;YAC5B,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAE,IAAI,CAAC,QAAQ,CAAC,YAAoC,CAAC,CAAC;SACrF;QACD,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;IAC9E,CAAC;IAED,eAAe,CAAC,MAA2C;QACzD,MAAM,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC;QAEhD,IAAI,CAAC,YAAY,EAAE;YACjB,OAAO;SACR;QAED,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACjC,IAAI,CAAC,WAAW,CAAC,OAAuB,CAAC,KAAK,EAAE,CAAC;QAElD,YAAY,CAAC,QAAQ,EAAE,CAAC;QAExB,IAAI,IAAI,CAAC,mBAAmB,EAAE;YAC5B,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAE,YAAoC,CAAC,CAAC;SACzE;QACD,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,sBAAsB,CAAC,CAAC;IAC/E,CAAC;IAED,aAAa,CAAC,MAA2C;QACvD,IAAI,CAAC,kBAAkB,CAAC,aAAa,EAAE,CAAC,KAAK,EAAE,CAAC;QAChD,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QACnC,IAAI,IAAI,CAAC,mBAAmB,EAAE;YAC5B,IAAI,CAAC,mBAAmB,CAAC,OAAO,EAAE,CAAC;SACpC;QACD,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;QACxB,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC5B,CAAC;IAED,YAAY;QACV,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE;YAC7B,OAAO;SACR;QACD,MAAM,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,oBAAoB,EAAE,CAAC;QAC3D,MAAM,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC;QAClD,MAAM,YAAY,GAAG,YAAY,KAAK,UAAU,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,YAAY,IAAI,EAAE,CAAC;QACvF,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,mBAAmB,CAAC,kBAAkB,CAAC,YAAY,EAAE,aAAa,CAAC,EAAE,KAAK,CAAC,CAAC;QAE1G,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;CACF;AAED,MAAM,CAAC,MAAM,aAAa,GAAG,EAAE,CAAC;AAShC,MAAM,OAAO,qBAAsB,SAAQ,aAAa;IACtD,cAAc,CAAuC;IACrD,SAAS,CAAU;IACnB,iBAAiB,CAAe;IAChC,QAAQ,CAA6B;IACrC,gBAAgB,CAA6B;IAE7C,YAAY,aAAmD,EAAE,IAAiB,EAAE,KAAc;QAChG,KAAK,CAAC,IAAI,EAAE,KAAK,IAAI,UAAU,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAC,GAAG,EAAE,IAAI,CAAC,cAAc,EAAE,EAAC,CAAC,CAAC,CAAC;QACnF,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;IACtC,CAAC;IAED,mBAAmB,CAAC,OAAyC;QAC3D,IAAI,IAAI,CAAC,iBAAiB,EAAE;YAC1B,6EAA6E;YAC7E,IAAI,CAAC,YAAY,CACb,UAAU,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAC,GAAG,EAAE,QAAQ,CAAC,eAAe,CAAC,aAAa,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,EAAC,CAAC,CAAC,CAAC;SACnH;IACH,CAAC;IAED,QAAQ,CAAC,MAAwC;QAC/C,MAAM,KAAK,GAAI,MAAM,CAAC,KAAK,EAAY,CAAC;QACxC,IAAI,KAAK,EAAE;YACT,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,SAAS,CAAC,eAAe,EAAE,EAAC,GAAG,EAAE,MAAM,CAAC,QAAQ,EAAE,EAAE,GAAG,EAAE,KAAK,CAAC,OAAO,EAAC,CAAC,CAAC,CAAC;SACxG;IACH,CAAC;IAED,KAAK,CAAC,KAAK,CAAC,IAAY;QACtB,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC;IACjC,CAAC;IAED,KAAK,CAAC,KAAK;IACX,CAAC;IAED,OAAO;QACL,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAED,wBAAwB,CAAC,KAA0B;QACjD,OAAO,IAAI,yBAAyB,CAAC,KAAK,EAAE,IAAI,EAAE,2BAA2B,CAAC,CAAC;IACjF,CAAC;IAED,aAAa;QACX,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;IAC5D,CAAC;IAED,KAAK,CAAC,UAAU;QACd,MAAM,gBAAgB,GAAG,IAAI,QAAQ,CAAC,SAAS,CAAC,gBAAgB,EAAE,CAAC;QACnE,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACnB,MAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,gBAAgB,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;YAChE,MAAM,aAAa,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,aAAa,EAAE,CAAC;YAEzD,IAAI,CAAC,SAAS,GAAG,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,QAAQ,EAAE,IAAI,GAAG,GAAG,aAAa,EAAE,CAAC;SAC5E;QAED,MAAM,QAAQ,GAAG,MAAM,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC7D,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAC/B,OAAO;SACR;QACD,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;QACxC,IAAI,IAAI,EAAE;YACR,MAAM,gBAAgB,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;SACpC;QACD,gBAAgB,CAAC,KAAK,EAAE,CAAC;IAC3B,CAAC;IAED,KAAK,CAAC,YAAY,CAAC,IAAU;QAC3B,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,CAAC;QACvD,MAAM,UAAU,GAAG,IAAI,QAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACjH,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;QAE5B,MAAM,OAAO,GAAG,MAAM,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5C,IAAI,CAAC,OAAO,EAAE;YACZ,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;YAC1B,OAAO,IAAI,KAAK,CAAC,UAAU,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC,CAAC;SAC1D;QAED,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,CAAC;QACvD,IAAI,KAAK,GAAS,IAAI,CAAC;QACvB,IAAI;YACF,IAAI,CAAC,QAAQ,GAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,iBAAiB,CAA+B,CAAC;YAClF,IAAI,CAAC,UAAU,CAAE,IAAI,CAAC,QAAsC,CAAC,CAAC;YAC9D,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;SACxD;QAAC,OAAO,CAAC,EAAE;YACV,KAAK,GAAG,CAAC,CAAC;YACV,IAAI,CAAC,WAAW,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;SACxC;QACD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAE9B,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC,oBAAoB,EAAE,KAAK,IAAI,EAAE;YACtD,IAAI,CAAC,WAAW,EAAE,CAAC,uBAAuB,CAAC,IAAI,CAAC,CAAC;SAClD;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IAED,kBAAkB,CAAC,OAAkC;QACnD,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QACzB,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC;QAChC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;QACjD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAC/C,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;YACxB,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;SACvD;IACH,CAAC;CACF","sourcesContent":["// Copyright 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport * as DataGrid from '../../ui/legacy/components/data_grid/data_grid.js';\nimport * as PerfUI from '../../ui/legacy/components/perf_ui/perf_ui.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport type * as Protocol from '../../generated/protocol.js';\n\nimport type * as SDK from '../../core/sdk/sdk.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {BottomUpProfileDataGridTree} from './BottomUpProfileDataGrid.js';\nimport type {ProfileFlameChartDataProvider} from './CPUProfileFlameChart.js';\nimport {CPUProfileFlameChart} from './CPUProfileFlameChart.js';\nimport type {Formatter, ProfileDataGridNode} from './ProfileDataGrid.js';\nimport {ProfileDataGridTree} from './ProfileDataGrid.js';\nimport type {DataDisplayDelegate, ProfileType} from './ProfileHeader.js';\nimport {Events, ProfileHeader} from './ProfileHeader.js';\nimport {ProfileSidebarTreeElement} from './ProfileSidebarTreeElement.js';\nimport {TopDownProfileDataGridTree} from './TopDownProfileDataGrid.js';\n\nconst UIStrings = {\n  /**\n  *@description Text in Profile View of a profiler tool\n  */\n  profile: 'Profile',\n  /**\n  *@description Placeholder text in the search box of the JavaScript profiler tool. Users can search\n  *the results by the cost in milliseconds, the name of the function, or the file name.\n  */\n  findByCostMsNameOrFile: 'Find by cost (>50ms), name or file',\n  /**\n  *@description Text for a programming function\n  */\n  function: 'Function',\n  /**\n  *@description Title of the Profiler tool\n  */\n  profiler: 'Profiler',\n  /**\n  *@description Aria-label for profiles view combobox in memory tool\n  */\n  profileViewMode: 'Profile view mode',\n  /**\n  *@description Tooltip text that appears when hovering over the largeicon visibility button in the Profile View of a profiler tool\n  */\n  focusSelectedFunction: 'Focus selected function',\n  /**\n  *@description Tooltip text that appears when hovering over the largeicon delete button in the Profile View of a profiler tool\n  */\n  excludeSelectedFunction: 'Exclude selected function',\n  /**\n  *@description Tooltip text that appears when hovering over the largeicon refresh button in the Profile View of a profiler tool\n  */\n  restoreAllFunctions: 'Restore all functions',\n  /**\n  *@description Text in Profile View of a profiler tool\n  */\n  chart: 'Chart',\n  /**\n  *@description Text in Profile View of a profiler tool\n  */\n  heavyBottomUp: 'Heavy (Bottom Up)',\n  /**\n  *@description Text for selecting different profile views in the JS profiler tool. This option is a tree view.\n  */\n  treeTopDown: 'Tree (Top Down)',\n  /**\n  * @description Name of a profile\n  * @example {2} PH1\n  */\n  profileD: 'Profile {PH1}',\n  /**\n   *@description Text in Profile View of a profiler tool\n  *@example {4 MB} PH1\n  */\n  loadingD: 'Loading… {PH1}%',\n  /**\n  *@description Text in Profile View of a profiler tool\n  *@example {example.file} PH1\n  *@example {cannot open file} PH2\n  */\n  fileSReadErrorS: 'File \\'{PH1}\\' read error: {PH2}',\n  /**\n  *@description Text when something is loading\n  */\n  loading: 'Loading…',\n  /**\n  *@description Text in Profile View of a profiler tool\n  */\n  failedToReadFile: 'Failed to read file',\n  /**\n  *@description Text in Profile View of a profiler tool\n  */\n  parsing: 'Parsing…',\n  /**\n  * @description Status indicator in the JS Profiler to show that a file has been successfully loaded\n  * from file, as opposed to a profile that has been captured locally.\n  */\n  loaded: 'Loaded',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/profiler/ProfileView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class ProfileView extends UI.View.SimpleView implements UI.SearchableView.Searchable {\n  _profile: SDK.ProfileTreeModel.ProfileTreeModel|null;\n  _searchableView: UI.SearchableView.SearchableView;\n  dataGrid: DataGrid.DataGrid.DataGridImpl<unknown>;\n  viewSelectComboBox: UI.Toolbar.ToolbarComboBox;\n  focusButton: UI.Toolbar.ToolbarButton;\n  excludeButton: UI.Toolbar.ToolbarButton;\n  resetButton: UI.Toolbar.ToolbarButton;\n  _linkifier: Components.Linkifier.Linkifier;\n  _nodeFormatter!: Formatter;\n  _viewType!: Common.Settings.Setting<ViewTypes>;\n  adjustedTotal!: number;\n  profileHeader!: WritableProfileHeader;\n  _bottomUpProfileDataGridTree?: BottomUpProfileDataGridTree|null;\n  _topDownProfileDataGridTree?: TopDownProfileDataGridTree|null;\n  _currentSearchResultIndex?: number;\n  _dataProvider?: ProfileFlameChartDataProvider;\n  _flameChart?: CPUProfileFlameChart;\n  _visibleView?: CPUProfileFlameChart|DataGrid.DataGrid.DataGridWidget<unknown>;\n  _searchableElement?: ProfileDataGridTree|CPUProfileFlameChart;\n  profileDataGridTree?: ProfileDataGridTree;\n  constructor() {\n    super(i18nString(UIStrings.profile));\n\n    this._profile = null;\n\n    this._searchableView = new UI.SearchableView.SearchableView(this, null);\n    this._searchableView.setPlaceholder(i18nString(UIStrings.findByCostMsNameOrFile));\n    this._searchableView.show(this.element);\n\n    const columns = ([] as DataGrid.DataGrid.ColumnDescriptor[]);\n    columns.push({\n      id: 'self',\n      title: this.columnHeader('self'),\n      width: '120px',\n      fixedWidth: true,\n      sortable: true,\n      sort: DataGrid.DataGrid.Order.Descending,\n      titleDOMFragment: undefined,\n      align: undefined,\n      editable: undefined,\n      nonSelectable: undefined,\n      longText: undefined,\n      disclosure: undefined,\n      weight: undefined,\n      allowInSortByEvenWhenHidden: undefined,\n      dataType: undefined,\n      defaultWeight: undefined,\n    });\n    columns.push({\n      id: 'total',\n      title: this.columnHeader('total'),\n      width: '120px',\n      fixedWidth: true,\n      sortable: true,\n      sort: undefined,\n      titleDOMFragment: undefined,\n      align: undefined,\n      editable: undefined,\n      nonSelectable: undefined,\n      longText: undefined,\n      disclosure: undefined,\n      weight: undefined,\n      allowInSortByEvenWhenHidden: undefined,\n      dataType: undefined,\n      defaultWeight: undefined,\n    });\n    columns.push({\n      id: 'function',\n      title: i18nString(UIStrings.function),\n      disclosure: true,\n      sortable: true,\n      sort: undefined,\n      titleDOMFragment: undefined,\n      align: undefined,\n      editable: undefined,\n      nonSelectable: undefined,\n      longText: undefined,\n      weight: undefined,\n      allowInSortByEvenWhenHidden: undefined,\n      dataType: undefined,\n      defaultWeight: undefined,\n      width: undefined,\n      fixedWidth: undefined,\n    });\n\n    this.dataGrid = new DataGrid.DataGrid.DataGridImpl({\n      displayName: i18nString(UIStrings.profiler),\n      columns,\n      editCallback: undefined,\n      deleteCallback: undefined,\n      refreshCallback: undefined,\n    });\n    this.dataGrid.addEventListener(DataGrid.DataGrid.Events.SortingChanged, this._sortProfile, this);\n    this.dataGrid.addEventListener(DataGrid.DataGrid.Events.SelectedNode, this._nodeSelected.bind(this, true));\n    this.dataGrid.addEventListener(DataGrid.DataGrid.Events.DeselectedNode, this._nodeSelected.bind(this, false));\n    this.dataGrid.setRowContextMenuCallback(this._populateContextMenu.bind(this));\n\n    this.viewSelectComboBox =\n        new UI.Toolbar.ToolbarComboBox(this._changeView.bind(this), i18nString(UIStrings.profileViewMode));\n\n    this.focusButton =\n        new UI.Toolbar.ToolbarButton(i18nString(UIStrings.focusSelectedFunction), 'largeicon-visibility');\n    this.focusButton.setEnabled(false);\n    this.focusButton.addEventListener(UI.Toolbar.ToolbarButton.Events.Click, this._focusClicked, this);\n\n    this.excludeButton =\n        new UI.Toolbar.ToolbarButton(i18nString(UIStrings.excludeSelectedFunction), 'largeicon-delete');\n    this.excludeButton.setEnabled(false);\n    this.excludeButton.addEventListener(UI.Toolbar.ToolbarButton.Events.Click, this._excludeClicked, this);\n\n    this.resetButton = new UI.Toolbar.ToolbarButton(i18nString(UIStrings.restoreAllFunctions), 'largeicon-refresh');\n    this.resetButton.setEnabled(false);\n    this.resetButton.addEventListener(UI.Toolbar.ToolbarButton.Events.Click, this._resetClicked, this);\n\n    this._linkifier = new Components.Linkifier.Linkifier(maxLinkLength);\n  }\n\n  static buildPopoverTable(entryInfo: {\n    title: string,\n    value: string,\n  }[]): Element {\n    const table = document.createElement('table');\n    for (const entry of entryInfo) {\n      const row = table.createChild('tr');\n      row.createChild('td').textContent = entry.title;\n      row.createChild('td').textContent = entry.value;\n    }\n    return table;\n  }\n\n  setProfile(profile: SDK.ProfileTreeModel.ProfileTreeModel): void {\n    this._profile = profile;\n    this._bottomUpProfileDataGridTree = null;\n    this._topDownProfileDataGridTree = null;\n    this._changeView();\n    this.refresh();\n  }\n\n  profile(): SDK.ProfileTreeModel.ProfileTreeModel|null {\n    return this._profile;\n  }\n\n  initialize(nodeFormatter: Formatter): void {\n    this._nodeFormatter = nodeFormatter;\n\n    this._viewType = Common.Settings.Settings.instance().createSetting('profileView', ViewTypes.Heavy);\n    const viewTypes = [ViewTypes.Flame, ViewTypes.Heavy, ViewTypes.Tree];\n\n    const optionNames = new Map([\n      [ViewTypes.Flame, i18nString(UIStrings.chart)],\n      [ViewTypes.Heavy, i18nString(UIStrings.heavyBottomUp)],\n      [ViewTypes.Tree, i18nString(UIStrings.treeTopDown)],\n    ]);\n\n    const options = new Map(\n        viewTypes.map(type => [type, this.viewSelectComboBox.createOption((optionNames.get(type) as string), type)]));\n    const optionName = this._viewType.get() || viewTypes[0];\n    const option = options.get(optionName) || options.get(viewTypes[0]);\n    this.viewSelectComboBox.select((option as Element));\n\n    this._changeView();\n    if (this._flameChart) {\n      this._flameChart.update();\n    }\n  }\n\n  focus(): void {\n    if (this._flameChart) {\n      this._flameChart.focus();\n    } else {\n      super.focus();\n    }\n  }\n\n  columnHeader(_columnId: string): Common.UIString.LocalizedString {\n    throw 'Not implemented';\n  }\n\n  selectRange(timeLeft: number, timeRight: number): void {\n    if (!this._flameChart) {\n      return;\n    }\n    this._flameChart.selectRange(timeLeft, timeRight);\n  }\n\n  async toolbarItems(): Promise<UI.Toolbar.ToolbarItem[]> {\n    return [this.viewSelectComboBox, this.focusButton, this.excludeButton, this.resetButton];\n  }\n\n  _getBottomUpProfileDataGridTree(): ProfileDataGridTree {\n    if (!this._bottomUpProfileDataGridTree) {\n      this._bottomUpProfileDataGridTree = new BottomUpProfileDataGridTree(\n          this._nodeFormatter, this._searchableView, (this._profile as SDK.ProfileTreeModel.ProfileTreeModel).root,\n          this.adjustedTotal);\n    }\n    return this._bottomUpProfileDataGridTree;\n  }\n\n  _getTopDownProfileDataGridTree(): ProfileDataGridTree {\n    if (!this._topDownProfileDataGridTree) {\n      this._topDownProfileDataGridTree = new TopDownProfileDataGridTree(\n          this._nodeFormatter, this._searchableView, (this._profile as SDK.ProfileTreeModel.ProfileTreeModel).root,\n          this.adjustedTotal);\n    }\n    return this._topDownProfileDataGridTree;\n  }\n\n  _populateContextMenu(contextMenu: UI.ContextMenu.ContextMenu, gridNode: DataGrid.DataGrid.DataGridNode<unknown>):\n      void {\n    const node = (gridNode as ProfileDataGridNode);\n    if (node.linkElement && !contextMenu.containsTarget(node.linkElement)) {\n      contextMenu.appendApplicableItems(node.linkElement);\n    }\n  }\n\n  willHide(): void {\n    this._currentSearchResultIndex = -1;\n  }\n\n  refresh(): void {\n    if (!this.profileDataGridTree) {\n      return;\n    }\n    const selectedProfileNode =\n        this.dataGrid.selectedNode ? (this.dataGrid.selectedNode as ProfileDataGridNode).profileNode : null;\n\n    this.dataGrid.rootNode().removeChildren();\n\n    const children = this.profileDataGridTree.children;\n    const count = children.length;\n\n    for (let index = 0; index < count; ++index) {\n      this.dataGrid.rootNode().appendChild(children[index]);\n    }\n\n    if (selectedProfileNode) {\n      // TODO(crbug.com/1011811): Cleanup the added `selected` property to this SDK class.\n      // @ts-ignore\n      selectedProfileNode.selected = true;\n    }\n  }\n\n  refreshVisibleData(): void {\n    let child: (DataGrid.DataGrid.DataGridNode<unknown>|null) = this.dataGrid.rootNode().children[0];\n    while (child) {\n      child.refresh();\n      child = child.traverseNextNode(false, null, true);\n    }\n  }\n\n  searchableView(): UI.SearchableView.SearchableView {\n    return this._searchableView;\n  }\n\n  supportsCaseSensitiveSearch(): boolean {\n    return true;\n  }\n\n  supportsRegexSearch(): boolean {\n    return false;\n  }\n\n  searchCanceled(): void {\n    if (this._searchableElement) {\n      this._searchableElement.searchCanceled();\n    }\n  }\n\n  performSearch(searchConfig: UI.SearchableView.SearchConfig, shouldJump: boolean, jumpBackwards?: boolean): void {\n    if (this._searchableElement) {\n      this._searchableElement.performSearch(searchConfig, shouldJump, jumpBackwards);\n    }\n  }\n\n  jumpToNextSearchResult(): void {\n    if (this._searchableElement) {\n      this._searchableElement.jumpToNextSearchResult();\n    }\n  }\n\n  jumpToPreviousSearchResult(): void {\n    if (this._searchableElement) {\n      this._searchableElement.jumpToPreviousSearchResult();\n    }\n  }\n\n  linkifier(): Components.Linkifier.Linkifier {\n    return this._linkifier;\n  }\n\n  createFlameChartDataProvider(): ProfileFlameChartDataProvider {\n    throw 'Not implemented';\n  }\n\n  _ensureFlameChartCreated(): void {\n    if (this._flameChart) {\n      return;\n    }\n    this._dataProvider = this.createFlameChartDataProvider();\n    this._flameChart = new CPUProfileFlameChart(this._searchableView, this._dataProvider);\n    this._flameChart.addEventListener(PerfUI.FlameChart.Events.EntryInvoked, event => {\n      this._onEntryInvoked(event);\n    });\n  }\n\n  async _onEntryInvoked(event: Common.EventTarget.EventTargetEvent): Promise<void> {\n    if (!this._dataProvider) {\n      return;\n    }\n    const entryIndex = event.data;\n    const node = this._dataProvider.entryNodes[entryIndex];\n    const debuggerModel = this.profileHeader._debuggerModel;\n    if (!node || !node.scriptId || !debuggerModel) {\n      return;\n    }\n    const script = debuggerModel.scriptForId(node.scriptId);\n    if (!script) {\n      return;\n    }\n    const location =\n        (debuggerModel.createRawLocation(script, node.lineNumber, node.columnNumber) as SDK.DebuggerModel.Location);\n    const uiLocation =\n        await Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().rawLocationToUILocation(location);\n    Common.Revealer.reveal(uiLocation);\n  }\n\n  _changeView(): void {\n    if (!this._profile) {\n      return;\n    }\n\n    this._searchableView.closeSearch();\n\n    if (this._visibleView) {\n      this._visibleView.detach();\n    }\n    this._viewType.set((this.viewSelectComboBox.selectedOption() as HTMLOptionElement).value as ViewTypes);\n    switch (this._viewType.get()) {\n      case ViewTypes.Flame:\n        this._ensureFlameChartCreated();\n        this._visibleView = this._flameChart;\n        this._searchableElement = this._flameChart;\n        break;\n      case ViewTypes.Tree:\n        this.profileDataGridTree = this._getTopDownProfileDataGridTree();\n        this._sortProfile();\n        this._visibleView = this.dataGrid.asWidget();\n        this._searchableElement = this.profileDataGridTree;\n        break;\n      case ViewTypes.Heavy:\n        this.profileDataGridTree = this._getBottomUpProfileDataGridTree();\n        this._sortProfile();\n        this._visibleView = this.dataGrid.asWidget();\n        this._searchableElement = this.profileDataGridTree;\n        break;\n    }\n\n    const isFlame = this._viewType.get() === ViewTypes.Flame;\n    this.focusButton.setVisible(!isFlame);\n    this.excludeButton.setVisible(!isFlame);\n    this.resetButton.setVisible(!isFlame);\n\n    if (this._visibleView) {\n      this._visibleView.show(this._searchableView.element);\n    }\n  }\n\n  _nodeSelected(selected: boolean): void {\n    this.focusButton.setEnabled(selected);\n    this.excludeButton.setEnabled(selected);\n  }\n\n  _focusClicked(_event: Common.EventTarget.EventTargetEvent): void {\n    if (!this.dataGrid.selectedNode) {\n      return;\n    }\n\n    this.resetButton.setEnabled(true);\n    (this.resetButton.element as HTMLElement).focus();\n    if (this.profileDataGridTree) {\n      this.profileDataGridTree.focus((this.dataGrid.selectedNode as ProfileDataGridNode));\n    }\n    this.refresh();\n    this.refreshVisibleData();\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.CpuProfileNodeFocused);\n  }\n\n  _excludeClicked(_event: Common.EventTarget.EventTargetEvent): void {\n    const selectedNode = this.dataGrid.selectedNode;\n\n    if (!selectedNode) {\n      return;\n    }\n\n    this.resetButton.setEnabled(true);\n    (this.resetButton.element as HTMLElement).focus();\n\n    selectedNode.deselect();\n\n    if (this.profileDataGridTree) {\n      this.profileDataGridTree.exclude((selectedNode as ProfileDataGridNode));\n    }\n    this.refresh();\n    this.refreshVisibleData();\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.CpuProfileNodeExcluded);\n  }\n\n  _resetClicked(_event: Common.EventTarget.EventTargetEvent): void {\n    this.viewSelectComboBox.selectElement().focus();\n    this.resetButton.setEnabled(false);\n    if (this.profileDataGridTree) {\n      this.profileDataGridTree.restore();\n    }\n    this._linkifier.reset();\n    this.refresh();\n    this.refreshVisibleData();\n  }\n\n  _sortProfile(): void {\n    if (!this.profileDataGridTree) {\n      return;\n    }\n    const sortAscending = this.dataGrid.isSortOrderAscending();\n    const sortColumnId = this.dataGrid.sortColumnId();\n    const sortProperty = sortColumnId === 'function' ? 'functionName' : sortColumnId || '';\n    this.profileDataGridTree.sort(ProfileDataGridTree.propertyComparator(sortProperty, sortAscending), false);\n\n    this.refresh();\n  }\n}\n\nexport const maxLinkLength = 30;\n\nexport const enum ViewTypes {\n  Flame = 'Flame',\n  Tree = 'Tree',\n  Heavy = 'Heavy',\n}\n\n\nexport class WritableProfileHeader extends ProfileHeader implements Common.StringOutputStream.OutputStream {\n  _debuggerModel: SDK.DebuggerModel.DebuggerModel|null;\n  _fileName?: string;\n  _jsonifiedProfile?: string|null;\n  _profile?: Protocol.Profiler.Profile;\n  _protocolProfile?: Protocol.Profiler.Profile;\n\n  constructor(debuggerModel: SDK.DebuggerModel.DebuggerModel|null, type: ProfileType, title?: string) {\n    super(type, title || i18nString(UIStrings.profileD, {PH1: type.nextProfileUid()}));\n    this._debuggerModel = debuggerModel;\n  }\n\n  _onChunkTransferred(_reader: Bindings.FileUtils.ChunkedReader): void {\n    if (this._jsonifiedProfile) {\n      // TODO(l10n): Is the '%' at the end of this string correct? 4MB% looks wrong\n      this.updateStatus(\n          i18nString(UIStrings.loadingD, {PH1: Platform.NumberUtilities.bytesToString(this._jsonifiedProfile.length)}));\n    }\n  }\n\n  _onError(reader: Bindings.FileUtils.ChunkedReader): void {\n    const error = (reader.error() as Error);\n    if (error) {\n      this.updateStatus(i18nString(UIStrings.fileSReadErrorS, {PH1: reader.fileName(), PH2: error.message}));\n    }\n  }\n\n  async write(text: string): Promise<void> {\n    this._jsonifiedProfile += text;\n  }\n\n  async close(): Promise<void> {\n  }\n\n  dispose(): void {\n    this.removeTempFile();\n  }\n\n  createSidebarTreeElement(panel: DataDisplayDelegate): ProfileSidebarTreeElement {\n    return new ProfileSidebarTreeElement(panel, this, 'profile-sidebar-tree-item');\n  }\n\n  canSaveToFile(): boolean {\n    return !this.fromFile() && Boolean(this._protocolProfile);\n  }\n\n  async saveToFile(): Promise<void> {\n    const fileOutputStream = new Bindings.FileUtils.FileOutputStream();\n    if (!this._fileName) {\n      const now = Platform.DateUtilities.toISO8601Compact(new Date());\n      const fileExtension = this.profileType().fileExtension();\n\n      this._fileName = `${this.profileType().typeName()}-${now}${fileExtension}`;\n    }\n\n    const accepted = await fileOutputStream.open(this._fileName);\n    if (!accepted || !this.tempFile) {\n      return;\n    }\n    const data = await this.tempFile.read();\n    if (data) {\n      await fileOutputStream.write(data);\n    }\n    fileOutputStream.close();\n  }\n\n  async loadFromFile(file: File): Promise<Error|null> {\n    this.updateStatus(i18nString(UIStrings.loading), true);\n    const fileReader = new Bindings.FileUtils.ChunkedFileReader(file, 10000000, this._onChunkTransferred.bind(this));\n    this._jsonifiedProfile = '';\n\n    const success = await fileReader.read(this);\n    if (!success) {\n      this._onError(fileReader);\n      return new Error(i18nString(UIStrings.failedToReadFile));\n    }\n\n    this.updateStatus(i18nString(UIStrings.parsing), true);\n    let error: null = null;\n    try {\n      this._profile = (JSON.parse(this._jsonifiedProfile) as Protocol.Profiler.Profile);\n      this.setProfile((this._profile as Protocol.Profiler.Profile));\n      this.updateStatus(i18nString(UIStrings.loaded), false);\n    } catch (e) {\n      error = e;\n      this.profileType().removeProfile(this);\n    }\n    this._jsonifiedProfile = null;\n\n    if (this.profileType().profileBeingRecorded() === this) {\n      this.profileType().setProfileBeingRecorded(null);\n    }\n    return error;\n  }\n\n  setProtocolProfile(profile: Protocol.Profiler.Profile): void {\n    this.setProfile(profile);\n    this._protocolProfile = profile;\n    this.tempFile = new Bindings.TempFile.TempFile();\n    this.tempFile.write([JSON.stringify(profile)]);\n    if (this.canSaveToFile()) {\n      this.dispatchEventToListeners(Events.ProfileReceived);\n    }\n  }\n}\n"]}