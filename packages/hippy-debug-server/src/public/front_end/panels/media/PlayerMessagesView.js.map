{"version":3,"file":"PlayerMessagesView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/media/PlayerMessagesView.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,uDAAuD;AAEvD,OAAO,KAAK,MAAM,MAAM,6BAA6B,CAAC;AACtD,OAAO,KAAK,IAAI,MAAM,yBAAyB,CAAC;AAChD,OAAO,KAAK,EAAE,MAAM,2BAA2B,CAAC;AAGhD,MAAM,SAAS,GAAG;IAChB;;MAEE;IACF,OAAO,EAAE,SAAS;IAClB;;MAEE;IACF,MAAM,EAAE,QAAQ;IAChB;;MAEE;IACF,GAAG,EAAE,KAAK;IACV;;MAEE;IACF,KAAK,EAAE,OAAO;IACd;;MAEE;IACF,OAAO,EAAE,SAAS;IAClB;;MAEE;IACF,IAAI,EAAE,MAAM;IACZ;;MAEE;IACF,KAAK,EAAE,OAAO;IACd;;MAEE;IACF,QAAQ,EAAE,YAAY;IACtB;;MAEE;IACF,iBAAiB,EAAE,qBAAqB;CACzC,CAAC;AACF,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,oCAAoC,EAAE,SAAS,CAAC,CAAC;AAC1F,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAqBtE,MAAM,oBAAqB,SAAQ,MAAM,CAAC,aAAa,CAAC,aAAa;IAEnE,MAAM,CAA0C;IAChD,KAAK,CAAqB;IAC1B,QAAQ,CAA+B;IACvC,aAAa,CAAW;IACxB,cAAc,CAAuB;IACrC,mBAAmB,CAAuB;IAC1C,aAAa,CAAkC;IAC/C,YAAY,CAAkC;IAC9C,SAAS,CAAkC;IAC3C,gBAAgB,CAAwC;IAExD,YAAY,KAA8C,EAAE,IAAwB;QAClF,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,GAAG,EAAE,CAAC;QAE1B,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;QAExB,IAAI,CAAC,cAAc,kBAA+B,CAAC;QACnD,IAAI,CAAC,mBAAmB,kBAA+B,CAAC;QAExD,IAAI,CAAC,aAAa,GAAG,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;QACnD,IAAI,CAAC,YAAY,GAAG,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;QACjD,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;QAE3C,IAAI,CAAC,gBAAgB,GAAG,IAAI,OAAO,EAAE,CAAC;IACxC,CAAC;IAED,YAAY;QACV,OAAO,IAAI,CAAC,aAAa,CAAC;IAC5B,CAAC;IAED,UAAU,CAAC,QAAuD;QAChE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACzC,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;YACrC,KAAK,EAAE,IAAI,CAAC,aAAa;YACzB,SAAS,EAAE,IAAI;YACf,WAAW,EAAE,EAAE;YACf,KAAK,iBAA8B;YACnC,UAAU,EAAE,SAAS;SACtB,CAAC,CAAC;QAEH,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;YACrC,KAAK,EAAE,IAAI,CAAC,SAAS;YACrB,SAAS,EAAE,IAAI;YACf,WAAW,EAAE,EAAE;YACf,KAAK,cAA0B;YAC/B,UAAU,EAAE,SAAS;SACtB,CAAC,CAAC;QAEH,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;YACrC,KAAK,EAAE,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC;YAClC,SAAS,EAAE,KAAK;YAChB,WAAW,EAAE,OAAO;YACpB,KAAK,eAA4B;YACjC,UAAU,EAAE,SAAS;SACtB,CAAC,CAAC;QAEH,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;YACrC,KAAK,EAAE,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC;YACpC,SAAS,EAAE,KAAK;YAChB,WAAW,EAAE,SAAS;YACtB,KAAK,iBAA8B;YACnC,UAAU,EAAE,SAAS;SACtB,CAAC,CAAC;QAEH,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;YACrC,KAAK,EAAE,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC;YACjC,SAAS,EAAE,KAAK;YAChB,WAAW,EAAE,MAAM;YACnB,KAAK,cAA2B;YAChC,UAAU,EAAE,SAAS;SACtB,CAAC,CAAC;QAEH,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;YACrC,KAAK,EAAE,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC;YAClC,SAAS,EAAE,KAAK;YAChB,WAAW,EAAE,OAAO;YACpB,KAAK,eAA4B;YACjC,UAAU,EAAE,SAAS;SACtB,CAAC,CAAC;IACL,CAAC;IAED,iBAAiB;QACf,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;QACxB,KAAK,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,EAAE;YACvC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBACnB,MAAM,cAAc,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAuB,CAAC,CAAC;gBAC1E,IAAI,cAAc,IAAI,cAAc,CAAC,UAAU,EAAE;oBAC/C,cAAc,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;iBACpC;gBACD,IAAI,cAAc,IAAI,GAAG,GAAG,IAAI,CAAC,cAAc,EAAE;oBAC/C,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,cAAc,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,GAAG,CAAC,CAAC;iBACpE;qBAAM;oBACL,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;iBAC3C;aACF;SACF;IACH,CAAC;IAED,QAAQ,CAAC,IAAqB;QAC5B,uEAAuE;QACvE,4BAA4B;QAC5B,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC;SAClC;aAAM;YACL,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,KAAK,CAAC;SACnC;QAED,IAAI,IAAI,CAAC,cAAc,oBAAiC,EAAE;YACxD,OAAO,IAAI,CAAC,aAAa,CAAC;SAC3B;QAED,IAAI,IAAI,CAAC,cAAc,iBAA6B,EAAE;YACpD,OAAO,IAAI,CAAC,SAAS,CAAC;SACvB;QAED,MAAM,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAC9D,IAAI,cAAc,EAAE;YAClB,OAAO,cAAc,CAAC,KAAK,CAAC;SAC7B;QAED,OAAO,IAAI,CAAC,YAAY,CAAC;IAC3B,CAAC;IAED,oBAAoB,CAAC,IAAqB;QACxC,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC9C,MAAM,UAAU,GAAG,EAAE,CAAC,KAAK,CAAC,8BAA8B,CACtD,OAAO,EACP,EAAC,OAAO,EAAE,qCAAqC,EAAE,oBAAoB,EAAE,KAAK,EAAE,cAAc,EAAE,SAAS,EAAC,CAAC,CAAC;QAC9G,MAAM,SAAS,GAAG,UAAU,CAAC,WAAW,CAAC,KAAK,EAAE,uCAAuC,CAAC,CAAC;QACzF,MAAM,QAAQ,GAAG,SAAS,CAAC,WAAW,CAAC,KAAK,EAAE,wCAAwC,CAAgB,CAAC;QACvG,MAAM,IAAI,GAAG,SAAS,CAAC,WAAW,CAAC,MAAM,EAAE,oCAAoC,CAAC,CAAC;QACjF,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAC7C,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;QAC1C,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QACpC,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI,CAAC,KAAK,CAAC,2BAA2B,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC3D,OAAO,OAAO,CAAC;IACjB,CAAC;IAED,gBAAgB,CAAC,KAAsB;QACrC,OAAO,IAAI,CAAC;IACd,CAAC;IAED,YAAY,CAAC,KAA2B;QACtC,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI,CAAC,KAAK,CAAC,2BAA2B,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IAC7D,CAAC;IAED,sBAAsB,CAClB,KAA2B,EAAE,GAAyB,EAAE,YAA0B,EAClF,UAAwB;IAC5B,CAAC;CACF;AAED,MAAM,OAAO,kBAAmB,SAAQ,EAAE,CAAC,MAAM,CAAC,IAAI;IACpD,YAAY,CAAc;IAC1B,UAAU,CAAc;IACxB,qBAAqB,CAAwB;IAE7C;QACE,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,mBAAmB,CAAC,qCAAqC,EAAE,EAAC,oBAAoB,EAAE,KAAK,EAAC,CAAC,CAAC;QAE/F,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,KAAK,EAAE,uBAAuB,CAAC,CAAC;QACpF,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,KAAK,EAAE,qBAAqB,CAAC,CAAC;QAEhF,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,aAAa;QACX,MAAM,OAAO,GAAG,IAAI,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,wBAAwB,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QACpF,OAAO,CAAC,UAAU,CAAC,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;QACnD,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC;QAClD,OAAO,CAAC,eAAe,EAAE,CAAC;QAC1B,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC;IACvD,CAAC;IAED,eAAe;QACb,MAAM,KAAK,GAAG,IAAI,EAAE,CAAC,SAAS,CAAC,SAAS,EAAmB,CAAC;QAC5D,IAAI,CAAC,qBAAqB,GAAG,IAAI,oBAAoB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QACnE,MAAM,QAAQ,GAAG,IAAI,EAAE,CAAC,YAAY,CAAC,YAAY,CAAkB,KAAK,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;QACtG,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;QAE1B,IAAI,CAAC,qBAAqB,CAAC,QAAQ,EAAE,CAAC;QACtC,IAAI,CAAC,qBAAqB,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;QAEhD,MAAM,YAAY,GAAG,IAAI,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QAClE,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;QAC3D,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAC9B,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,qBAAqB,CAAC,YAAY,EAAE,CAAC,CAAC;QACjE,OAAO,YAAY,CAAC;IACtB,CAAC;IAED,kBAAkB;QAChB,MAAM,WAAW,GAAG,IAAI,EAAE,CAAC,OAAO,CAAC,YAAY,CAAC,UAAU,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC,CAAC;QACzF,WAAW,CAAC,gBAAgB,CAAC,EAAE,CAAC,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,IAAoB,EAAE,EAAE;YAC/F,IAAI,CAAC,eAAe,CAAC,IAEpB,CAAC,CAAC;QACL,CAAC,EAAE,IAAI,CAAC,CAAC;QACT,OAAO,WAAW,CAAC;IACrB,CAAC;IAED,2BAA2B,CAAC,YAAsB;QAChD,MAAM,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,kCAAkC,CAAC,CAAC;QAC5F,KAAK,MAAM,OAAO,IAAI,QAAQ,EAAE;YAC9B,IAAI,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,YAAY,CAAC,EAAE;gBACpD,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAC;aAC5D;iBAAM;gBACL,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,mCAAmC,CAAC,CAAC;aAC/D;SACF;IACH,CAAC;IAED,oBAAoB,CAAC,OAAgB,EAAE,YAAsB;QAC3D,KAAK,MAAM,KAAK,IAAI,YAAY,EAAE;YAChC,IAAI,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,GAAG,KAAK,CAAC,EAAE;gBACxD,OAAO,IAAI,CAAC;aACb;SACF;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IAED,eAAe,CAAC,cAA8B;QAC5C,MAAM,UAAU,GAAG,cAAc,CAAC,IAAI,CAAC;QACvC,MAAM,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,kCAAkC,CAAC,CAAC;QAE5F,KAAK,MAAM,OAAO,IAAI,QAAQ,EAAE;YAC9B,IAAI,UAAU,KAAK,EAAE,EAAE;gBACrB,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,iCAAiC,CAAC,CAAC;aAC7D;iBAAM,IAAI,OAAO,CAAC,WAAW,IAAI,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE;gBAC1E,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,iCAAiC,CAAC,CAAC;aAC7D;iBAAM;gBACL,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,iCAAiC,CAAC,CAAC;aAC1D;SACF;IACH,CAAC;IAED,UAAU,CAAC,OAAqC;QAC9C,MAAM,SAAS,GACX,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,KAAK,EAAE,iDAAiD,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;QAC1G,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,SAAS,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC;IACzD,CAAC;CACF","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport type * as Protocol from '../../generated/protocol.js';\n\nconst UIStrings = {\n  /**\n  *@description A context menu item in the Console View of the Console panel\n  */\n  default: 'Default',\n  /**\n  *@description Text in Network Throttling Selector of the Network panel\n  */\n  custom: 'Custom',\n  /**\n  *@description Text for everything\n  */\n  all: 'All',\n  /**\n  *@description Text for errors\n  */\n  error: 'Error',\n  /**\n  *@description Text to indicate an item is a warning\n  */\n  warning: 'Warning',\n  /**\n  *@description Sdk console message message level info of level Labels in Console View of the Console panel\n  */\n  info: 'Info',\n  /**\n  *@description Debug log level\n  */\n  debug: 'Debug',\n  /**\n  *@description Label for selecting between the set of log levels to show.\n  */\n  logLevel: 'Log level:',\n  /**\n  *@description Default text for user-text-entry for searching log messages.\n  */\n  filterLogMessages: 'Filter log messages',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/media/PlayerMessagesView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst enum MessageLevelBitfield {\n  Error = 0b0001,\n  Warning = 0b0010,\n  Info = 0b0100,\n  Debug = 0b1000,\n\n  Default = 0b0111,  // Error, Warning, Info\n  All = 0b1111,      // Error, Warning, Info, Debug\n  Custom = 0,\n}\n\ninterface SelectableLevel {\n  title: string;\n  value: MessageLevelBitfield;\n  stringValue: string;\n  selectable?: boolean;\n  overwrite?: boolean;\n}\n\nclass MessageLevelSelector extends Common.ObjectWrapper.ObjectWrapper implements\n    UI.SoftDropDown.Delegate<SelectableLevel> {\n  _items: UI.ListModel.ListModel<SelectableLevel>;\n  _view: PlayerMessagesView;\n  _itemMap: Map<number, SelectableLevel>;\n  _hiddenLevels: string[];\n  _bitFieldValue: MessageLevelBitfield;\n  _savedBitFieldValue: MessageLevelBitfield;\n  _defaultTitle: Common.UIString.LocalizedString;\n  _customTitle: Common.UIString.LocalizedString;\n  _allTitle: Common.UIString.LocalizedString;\n  elementsForItems: WeakMap<SelectableLevel, HTMLElement>;\n\n  constructor(items: UI.ListModel.ListModel<SelectableLevel>, view: PlayerMessagesView) {\n    super();\n    this._items = items;\n    this._view = view;\n    this._itemMap = new Map();\n\n    this._hiddenLevels = [];\n\n    this._bitFieldValue = MessageLevelBitfield.Default;\n    this._savedBitFieldValue = MessageLevelBitfield.Default;\n\n    this._defaultTitle = i18nString(UIStrings.default);\n    this._customTitle = i18nString(UIStrings.custom);\n    this._allTitle = i18nString(UIStrings.all);\n\n    this.elementsForItems = new WeakMap();\n  }\n\n  defaultTitle(): Common.UIString.LocalizedString {\n    return this._defaultTitle;\n  }\n\n  setDefault(dropdown: UI.SoftDropDown.SoftDropDown<SelectableLevel>): void {\n    dropdown.selectItem(this._items.at(0));\n  }\n\n  populate(): void {\n    this._items.insert(this._items.length, {\n      title: this._defaultTitle,\n      overwrite: true,\n      stringValue: '',\n      value: MessageLevelBitfield.Default,\n      selectable: undefined,\n    });\n\n    this._items.insert(this._items.length, {\n      title: this._allTitle,\n      overwrite: true,\n      stringValue: '',\n      value: MessageLevelBitfield.All,\n      selectable: undefined,\n    });\n\n    this._items.insert(this._items.length, {\n      title: i18nString(UIStrings.error),\n      overwrite: false,\n      stringValue: 'error',\n      value: MessageLevelBitfield.Error,\n      selectable: undefined,\n    });\n\n    this._items.insert(this._items.length, {\n      title: i18nString(UIStrings.warning),\n      overwrite: false,\n      stringValue: 'warning',\n      value: MessageLevelBitfield.Warning,\n      selectable: undefined,\n    });\n\n    this._items.insert(this._items.length, {\n      title: i18nString(UIStrings.info),\n      overwrite: false,\n      stringValue: 'info',\n      value: MessageLevelBitfield.Info,\n      selectable: undefined,\n    });\n\n    this._items.insert(this._items.length, {\n      title: i18nString(UIStrings.debug),\n      overwrite: false,\n      stringValue: 'debug',\n      value: MessageLevelBitfield.Debug,\n      selectable: undefined,\n    });\n  }\n\n  _updateCheckMarks(): void {\n    this._hiddenLevels = [];\n    for (const [key, item] of this._itemMap) {\n      if (!item.overwrite) {\n        const elementForItem = this.elementsForItems.get(item as SelectableLevel);\n        if (elementForItem && elementForItem.firstChild) {\n          elementForItem.firstChild.remove();\n        }\n        if (elementForItem && key & this._bitFieldValue) {\n          UI.UIUtils.createTextChild(elementForItem.createChild('div'), '✓');\n        } else {\n          this._hiddenLevels.push(item.stringValue);\n        }\n      }\n    }\n  }\n\n  titleFor(item: SelectableLevel): string {\n    // This would make a lot more sense to have in |itemSelected|, but this\n    // method gets called first.\n    if (item.overwrite) {\n      this._bitFieldValue = item.value;\n    } else {\n      this._bitFieldValue ^= item.value;\n    }\n\n    if (this._bitFieldValue === MessageLevelBitfield.Default) {\n      return this._defaultTitle;\n    }\n\n    if (this._bitFieldValue === MessageLevelBitfield.All) {\n      return this._allTitle;\n    }\n\n    const potentialMatch = this._itemMap.get(this._bitFieldValue);\n    if (potentialMatch) {\n      return potentialMatch.title;\n    }\n\n    return this._customTitle;\n  }\n\n  createElementForItem(item: SelectableLevel): Element {\n    const element = document.createElement('div');\n    const shadowRoot = UI.Utils.createShadowRootWithCoreStyles(\n        element,\n        {cssFile: 'panels/media/playerMessagesView.css', enableLegacyPatching: false, delegatesFocus: undefined});\n    const container = shadowRoot.createChild('div', 'media-messages-level-dropdown-element');\n    const checkBox = container.createChild('div', 'media-messages-level-dropdown-checkbox') as HTMLElement;\n    const text = container.createChild('span', 'media-messages-level-dropdown-text');\n    UI.UIUtils.createTextChild(text, item.title);\n    this.elementsForItems.set(item, checkBox);\n    this._itemMap.set(item.value, item);\n    this._updateCheckMarks();\n    this._view.regenerateMessageDisplayCss(this._hiddenLevels);\n    return element;\n  }\n\n  isItemSelectable(_item: SelectableLevel): boolean {\n    return true;\n  }\n\n  itemSelected(_item: SelectableLevel|null): void {\n    this._updateCheckMarks();\n    this._view.regenerateMessageDisplayCss(this._hiddenLevels);\n  }\n\n  highlightedItemChanged(\n      _from: SelectableLevel|null, _to: SelectableLevel|null, _fromElement: Element|null,\n      _toElement: Element|null): void {\n  }\n}\n\nexport class PlayerMessagesView extends UI.Widget.VBox {\n  _headerPanel: HTMLElement;\n  _bodyPanel: HTMLElement;\n  _messageLevelSelector?: MessageLevelSelector;\n\n  constructor() {\n    super();\n    this.registerRequiredCSS('panels/media/playerMessagesView.css', {enableLegacyPatching: false});\n\n    this._headerPanel = this.contentElement.createChild('div', 'media-messages-header');\n    this._bodyPanel = this.contentElement.createChild('div', 'media-messages-body');\n\n    this._buildToolbar();\n  }\n\n  _buildToolbar(): void {\n    const toolbar = new UI.Toolbar.Toolbar('media-messages-toolbar', this._headerPanel);\n    toolbar.appendText(i18nString(UIStrings.logLevel));\n    toolbar.appendToolbarItem(this._createDropdown());\n    toolbar.appendSeparator();\n    toolbar.appendToolbarItem(this._createFilterInput());\n  }\n\n  _createDropdown(): UI.Toolbar.ToolbarItem {\n    const items = new UI.ListModel.ListModel<SelectableLevel>();\n    this._messageLevelSelector = new MessageLevelSelector(items, this);\n    const dropDown = new UI.SoftDropDown.SoftDropDown<SelectableLevel>(items, this._messageLevelSelector);\n    dropDown.setRowHeight(18);\n\n    this._messageLevelSelector.populate();\n    this._messageLevelSelector.setDefault(dropDown);\n\n    const dropDownItem = new UI.Toolbar.ToolbarItem(dropDown.element);\n    dropDownItem.element.classList.add('toolbar-has-dropdown');\n    dropDownItem.setEnabled(true);\n    dropDownItem.setTitle(this._messageLevelSelector.defaultTitle());\n    return dropDownItem;\n  }\n\n  _createFilterInput(): UI.Toolbar.ToolbarInput {\n    const filterInput = new UI.Toolbar.ToolbarInput(i18nString(UIStrings.filterLogMessages));\n    filterInput.addEventListener(UI.Toolbar.ToolbarInput.Event.TextChanged, (data: {data: string}) => {\n      this._filterByString(data as {\n        data: string,\n      });\n    }, this);\n    return filterInput;\n  }\n\n  regenerateMessageDisplayCss(hiddenLevels: string[]): void {\n    const messages = this._bodyPanel.getElementsByClassName('media-messages-message-container');\n    for (const message of messages) {\n      if (this._matchesHiddenLevels(message, hiddenLevels)) {\n        message.classList.add('media-messages-message-unselected');\n      } else {\n        message.classList.remove('media-messages-message-unselected');\n      }\n    }\n  }\n\n  _matchesHiddenLevels(element: Element, hiddenLevels: string[]): boolean {\n    for (const level of hiddenLevels) {\n      if (element.classList.contains('media-message-' + level)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  _filterByString(userStringData: {data: string}): void {\n    const userString = userStringData.data;\n    const messages = this._bodyPanel.getElementsByClassName('media-messages-message-container');\n\n    for (const message of messages) {\n      if (userString === '') {\n        message.classList.remove('media-messages-message-filtered');\n      } else if (message.textContent && message.textContent.includes(userString)) {\n        message.classList.remove('media-messages-message-filtered');\n      } else {\n        message.classList.add('media-messages-message-filtered');\n      }\n    }\n  }\n\n  addMessage(message: Protocol.Media.PlayerMessage): void {\n    const container =\n        this._bodyPanel.createChild('div', 'media-messages-message-container media-message-' + message.level);\n    UI.UIUtils.createTextChild(container, message.message);\n  }\n}\n"]}