{"version":3,"file":"AffectedResourcesView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/issues/AffectedResourcesView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as IssuesManager from '../../models/issues_manager/issues_manager.js';\nimport * as Logs from '../../models/logs/logs.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Network from '../network/network.js';\nimport type * as Protocol from '../../generated/protocol.js';\n\nimport type {IssueView} from './IssueView.js';\n\nconst UIStrings = {\n  /**\n  *@description Text in Object Properties Section\n  */\n  unknown: 'unknown',\n  /**\n  *@description Tooltip for button linking to the Elements panel\n  */\n  clickToRevealTheFramesDomNodeIn: 'Click to reveal the frame\\'s DOM node in the Elements panel',\n  /**\n  *@description Title for a link to a request in the network panel\n  */\n  clickToShowRequestInTheNetwork: 'Click to show request in the network panel',\n  /**\n  *@description Title for an unavailable link a request in the network panel\n  */\n  requestUnavailableInTheNetwork: 'Request unavailable in the network panel, try reloading the inspected page',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedResourcesView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport const enum AffectedItem {\n  Cookie = 'Cookie',\n  Directive = 'Directive',\n  Element = 'Element',\n  LearnMore = 'LearnMore',\n  Request = 'Request',\n  Source = 'Source',\n}\n\nexport const extractShortPath = (path: string): string => {\n  // 1st regex matches everything after last '/'\n  // if path ends with '/', 2nd regex returns everything between the last two '/'\n  return (/[^/]+$/.exec(path) || /[^/]+\\/$/.exec(path) || [''])[0];\n};\n\nexport interface CreateRequestCellOptions {\n  linkToPreflight?: boolean;\n  highlightHeader?: {section: Network.NetworkSearchScope.UIHeaderSection, name: string};\n}\n\n\n/**\n * The base class for all affected resource views. It provides basic scaffolding\n * as well as machinery for resolving request and frame ids to SDK objects.\n */\nexport abstract class AffectedResourcesView extends UI.TreeOutline.TreeElement {\n  private readonly parentView: IssueView;\n  protected affectedResourcesCountElement: HTMLElement;\n  protected affectedResources: HTMLElement;\n  private affectedResourcesCount: number;\n  private networkListener: Common.EventTarget.EventDescriptor|null;\n  private frameListeners: Common.EventTarget.EventDescriptor[];\n  private unresolvedRequestIds: Set<string>;\n  private unresolvedFrameIds: Set<string>;\n\n  /**\n   * @param resourceName - Singular and plural of the affected resource name.\n   */\n  constructor(parent: IssueView) {\n    super();\n    this.toggleOnClick = true;\n    this.parentView = parent;\n    this.affectedResourcesCountElement = this.createAffectedResourcesCounter();\n\n    this.affectedResources = this.createAffectedResources();\n    this.affectedResourcesCount = 0;\n    this.networkListener = null;\n    this.frameListeners = [];\n    this.unresolvedRequestIds = new Set();\n    this.unresolvedFrameIds = new Set();\n  }\n\n  createAffectedResourcesCounter(): HTMLElement {\n    const counterLabel = document.createElement('div');\n    counterLabel.classList.add('affected-resource-label');\n    this.listItemElement.appendChild(counterLabel);\n    return counterLabel;\n  }\n\n  createAffectedResources(): HTMLElement {\n    const body = new UI.TreeOutline.TreeElement();\n    const affectedResources = document.createElement('table');\n    affectedResources.classList.add('affected-resource-list');\n    body.listItemElement.appendChild(affectedResources);\n    this.appendChild(body);\n\n    return affectedResources;\n  }\n\n  protected abstract getResourceNameWithCount(count: number): string;\n\n  protected updateAffectedResourceCount(count: number): void {\n    this.affectedResourcesCount = count;\n    this.affectedResourcesCountElement.textContent = this.getResourceNameWithCount(count);\n    this.hidden = this.affectedResourcesCount === 0;\n    this.parentView.updateAffectedResourceVisibility();\n  }\n\n  isEmpty(): boolean {\n    return this.affectedResourcesCount === 0;\n  }\n\n  clear(): void {\n    this.affectedResources.textContent = '';\n  }\n\n  expandIfOneResource(): void {\n    if (this.affectedResourcesCount === 1) {\n      this.expand();\n    }\n  }\n\n  /**\n   * This function resolves a requestId to network requests. If the requestId does not resolve, a listener is installed\n   * that takes care of updating the view if the network request is added. This is useful if the issue is added before\n   * the network request gets reported.\n   */\n  protected resolveRequestId(requestId: string): SDK.NetworkRequest.NetworkRequest[] {\n    const requests = Logs.NetworkLog.NetworkLog.instance().requestsForId(requestId);\n    if (!requests.length) {\n      this.unresolvedRequestIds.add(requestId);\n      if (!this.networkListener) {\n        this.networkListener = Logs.NetworkLog.NetworkLog.instance().addEventListener(\n            Logs.NetworkLog.Events.RequestAdded, this.onRequestAdded, this);\n      }\n    }\n    return requests;\n  }\n\n  private onRequestAdded(event: Common.EventTarget.EventTargetEvent): void {\n    const request = event.data as SDK.NetworkRequest.NetworkRequest;\n    const requestWasUnresolved = this.unresolvedRequestIds.delete(request.requestId());\n    if (this.unresolvedRequestIds.size === 0 && this.networkListener) {\n      // Stop listening once all requests are resolved.\n      Common.EventTarget.EventTarget.removeEventListeners([this.networkListener]);\n      this.networkListener = null;\n    }\n    if (requestWasUnresolved) {\n      this.update();\n    }\n  }\n\n  /**\n   * This function resolves a frameId to a ResourceTreeFrame. If the frameId does not resolve, or hasn't navigated yet,\n   * a listener is installed that takes care of updating the view if the frame is added. This is useful if the issue is\n   * added before the frame gets reported.\n   */\n  private resolveFrameId(frameId: Protocol.Page.FrameId): SDK.ResourceTreeModel.ResourceTreeFrame|null {\n    const frame = SDK.FrameManager.FrameManager.instance().getFrame(frameId);\n    if (!frame || !frame.url) {\n      this.unresolvedFrameIds.add(frameId);\n      if (!this.frameListeners.length) {\n        const addListener = SDK.FrameManager.FrameManager.instance().addEventListener(\n            SDK.FrameManager.Events.FrameAddedToTarget, this.onFrameChanged, this);\n        const navigateListener = SDK.FrameManager.FrameManager.instance().addEventListener(\n            SDK.FrameManager.Events.FrameNavigated, this.onFrameChanged, this);\n        this.frameListeners = [addListener, navigateListener];\n      }\n    }\n    return frame;\n  }\n\n  private onFrameChanged(event: Common.EventTarget.EventTargetEvent): void {\n    const frame = event.data.frame as SDK.ResourceTreeModel.ResourceTreeFrame;\n    if (!frame.url) {\n      return;\n    }\n    const frameWasUnresolved = this.unresolvedFrameIds.delete(frame.id);\n    if (this.unresolvedFrameIds.size === 0 && this.frameListeners.length) {\n      // Stop listening once all requests are resolved.\n      Common.EventTarget.EventTarget.removeEventListeners(this.frameListeners);\n      this.frameListeners = [];\n    }\n    if (frameWasUnresolved) {\n      this.update();\n    }\n  }\n\n  protected createFrameCell(frameId: Protocol.Page.FrameId, issue: IssuesManager.Issue.Issue): HTMLElement {\n    const frame = this.resolveFrameId(frameId);\n    const url = frame && (frame.unreachableUrl() || frame.url) || i18nString(UIStrings.unknown);\n\n    const frameCell = document.createElement('td');\n    frameCell.classList.add('affected-resource-cell');\n    if (frame) {\n      const icon = new IconButton.Icon.Icon();\n      icon.data = {iconName: 'elements_panel_icon', color: 'var(--color-link)', width: '16px', height: '16px'};\n      icon.classList.add('link', 'elements-panel');\n      icon.onclick = async(): Promise<void> => {\n        Host.userMetrics.issuesPanelResourceOpened(issue.getCategory(), AffectedItem.Element);\n        const frame = SDK.FrameManager.FrameManager.instance().getFrame(frameId);\n        if (frame) {\n          const ownerNode = await frame.getOwnerDOMNodeOrDocument();\n          if (ownerNode) {\n            Common.Revealer.reveal(ownerNode);\n          }\n        }\n      };\n      UI.Tooltip.Tooltip.install(icon, i18nString(UIStrings.clickToRevealTheFramesDomNodeIn));\n      frameCell.appendChild(icon);\n    }\n    frameCell.appendChild(document.createTextNode(url));\n    frameCell.onmouseenter = (): void => {\n      const frame = SDK.FrameManager.FrameManager.instance().getFrame(frameId);\n      if (frame) {\n        frame.highlight();\n      }\n    };\n    frameCell.onmouseleave = (): void => SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n    return frameCell;\n  }\n\n  protected createRequestCell(request: Protocol.Audits.AffectedRequest, options: CreateRequestCellOptions = {}):\n      HTMLElement {\n    let url = request.url;\n    let filename = url ? extractShortPath(url) : '';\n    const requestCell = document.createElement('td');\n    requestCell.classList.add('affected-resource-cell');\n    const icon = new IconButton.Icon.Icon();\n    icon.data = {iconName: 'network_panel_icon', color: 'var(--color-link)', width: '16px', height: '16px'};\n    icon.classList.add('network-panel');\n    requestCell.appendChild(icon);\n\n    const requests = this.resolveRequestId(request.requestId);\n    if (requests.length) {\n      const linkToPreflight = options.linkToPreflight ?? false;\n      const request = requests[0];\n      requestCell.onclick = (): void => {\n        const linkedRequest = linkToPreflight ? request.preflightRequest() : request;\n        if (!linkedRequest) {\n          return;\n        }\n        if (options.highlightHeader) {\n          const requestLocation = Network.NetworkSearchScope.UIRequestLocation.header(\n              linkedRequest, options.highlightHeader.section, options.highlightHeader.name);\n          Network.NetworkPanel.RequestLocationRevealer.instance().reveal(requestLocation);\n        } else {\n          Network.NetworkPanel.NetworkPanel.selectAndShowRequest(linkedRequest, Network.NetworkItemView.Tabs.Headers);\n        }\n      };\n      requestCell.classList.add('link');\n      url = request.url();\n      filename = extractShortPath(url);\n      UI.Tooltip.Tooltip.install(icon, i18nString(UIStrings.clickToShowRequestInTheNetwork));\n    } else {\n      UI.Tooltip.Tooltip.install(icon, i18nString(UIStrings.requestUnavailableInTheNetwork));\n      icon.data = {...icon.data, color: 'var(--issue-color-yellow)'};\n    }\n    if (url) {\n      UI.Tooltip.Tooltip.install(requestCell, url);\n    }\n    requestCell.appendChild(document.createTextNode(filename));\n    return requestCell;\n  }\n\n  protected appendSourceLocation(\n      element: HTMLElement,\n      sourceLocation: {url: string, scriptId?: string, lineNumber: number, columnNumber?: number}|undefined,\n      target: SDK.Target.Target|null|undefined): void {\n    const sourceCodeLocation = document.createElement('td');\n    sourceCodeLocation.classList.add('affected-source-location');\n    if (sourceLocation) {\n      const maxLengthForDisplayedURLs = 40;  // Same as console messages.\n      // TODO(crbug.com/1108503): Add some mechanism to be able to add telemetry to this element.\n      const linkifier = new Components.Linkifier.Linkifier(maxLengthForDisplayedURLs);\n      const sourceAnchor = linkifier.linkifyScriptLocation(\n          target || null, sourceLocation.scriptId || null, sourceLocation.url, sourceLocation.lineNumber,\n          {columnNumber: sourceLocation.columnNumber, inlineFrameIndex: 0, className: undefined, tabStop: undefined});\n      sourceCodeLocation.appendChild(sourceAnchor);\n    }\n    element.appendChild(sourceCodeLocation);\n  }\n\n  protected appendColumnTitle(header: HTMLElement, title: string, additionalClass: string|null = null): void {\n    const info = document.createElement('td');\n    info.classList.add('affected-resource-header');\n    if (additionalClass) {\n      info.classList.add(additionalClass);\n    }\n    info.textContent = title;\n    header.appendChild(info);\n  }\n\n  protected createIssueDetailCell(textContent: string, additionalClass: string|null = null): HTMLTableDataCellElement {\n    const cell = document.createElement('td');\n    cell.textContent = textContent;\n    if (additionalClass) {\n      cell.classList.add(additionalClass);\n    }\n    return cell;\n  }\n\n  protected appendIssueDetailCell(element: HTMLElement, textContent: string, additionalClass: string|null = null):\n      HTMLTableDataCellElement {\n    const cell = this.createIssueDetailCell(textContent, additionalClass);\n    element.appendChild(cell);\n    return cell;\n  }\n\n  abstract update(): void;\n}\n"]}