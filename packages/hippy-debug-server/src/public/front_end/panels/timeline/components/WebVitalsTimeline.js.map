{"version":3,"file":"WebVitalsTimeline.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/timeline/components/WebVitalsTimeline.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Host from '../../../core/host/host.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport * as Coordinator from '../../../ui/components/render_coordinator/render_coordinator.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\n\nconst coordinator = Coordinator.RenderCoordinator.RenderCoordinator.instance();\n\nimport {WebVitalsEventLane, WebVitalsTimeboxLane} from './WebVitalsLane.js';\nimport type {WebVitalsTooltip} from './WebVitalsTooltip.js';\n\nconst UIStrings = {\n  /**\n  *@description Label for the First Contentful Paint lane\n  */\n  fcp: 'FCP',\n  /**\n  *@description Label for the Largest Contentful Paint lane\n  */\n  lcp: 'LCP',\n  /**\n  *@description Label for the Layout Shifts lane\n  */\n  ls: 'LS',\n  /**\n  *@description Label for the Long Tasks lane\n  */\n  longTasks: 'Long Tasks',\n  /**\n  *@description Label for the Long Tasks overlay\n  */\n  longTask: 'Long Task',\n  /**\n  *@description Label for the First Contentful Paint overlay\n  */\n  firstContentfulPaint: 'First Contentful Paint',\n  /**\n  *@description Label for the Largest Contentful Paint overlay\n  */\n  largestContentfulPaint: 'Largest Contentful Paint',\n  /**\n  *@description Label to describe the range in which the rating for the value is considered good\n  */\n  good: 'Good',\n  /**\n  *@description Label to describe the range in which the rating for the value is considered to need improvement\n  */\n  needsImprovement: 'Needs improvement',\n  /**\n  *@description Label to describe the range in which the rating for the value is considered poor\n  */\n  poor: 'Poor',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/timeline/components/WebVitalsTimeline.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ndeclare global {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  interface HTMLElementTagNameMap {\n    'devtools-timeline-webvitals': WebVitalsTimeline;\n  }\n}\n\nexport interface Event {\n  timestamp: number;\n}\n\nexport interface Timebox {\n  start: number;\n  duration: number;\n}\n\nexport interface WebVitalsFCPEvent {\n  timestamp: number;\n}\n\nexport interface WebVitalsLCPEvent {\n  timestamp: number;\n}\n\nexport interface WebVitalsLayoutShiftEvent {\n  timestamp: number;\n}\n\ninterface WebVitalsTimelineTask {\n  start: number;\n  duration: number;\n}\n\ninterface WebVitalsTimelineData {\n  startTime: number;\n  duration: number;\n  fcps?: WebVitalsFCPEvent[];\n  lcps?: WebVitalsLCPEvent[];\n  layoutShifts?: WebVitalsLayoutShiftEvent[];\n  longTasks?: WebVitalsTimelineTask[];\n  mainFrameNavigations?: number[];\n  maxDuration?: number;\n}\n\nexport interface Marker {\n  type: MarkerType;\n  timestamp: number;\n  timestampLabel: string;\n  timestampMetrics: TextMetrics;\n  widthIncludingLabel: number;\n  widthIncludingTimestamp: number;\n}\n\nexport const enum MarkerType {\n  Good = 'Good',\n  Medium = 'Medium',\n  Bad = 'Bad',\n}\n\nexport const LINE_HEIGHT = 24;\nconst NUMBER_OF_LANES = 5;\nconst FCP_GOOD_TIMING = 2000;\nconst FCP_MEDIUM_TIMING = 4000;\nconst LCP_GOOD_TIMING = 2500;\nconst LCP_MEDIUM_TIMING = 4000;\nexport const LONG_TASK_THRESHOLD = 50;\n\ntype Constructor<T> = {\n  new (...args: unknown[]): T,\n};\n\n//  eslint-disable-next-line\nexport function assertInstanceOf<T>(instance: any, constructor: Constructor<T>): asserts instance is T {\n  if (!(instance instanceof constructor)) {\n    throw new TypeError(`Instance expected to be of type ${constructor.name} but got ${instance.constructor.name}`);\n  }\n}\n\nexport class WebVitalsTimeline extends HTMLElement {\n  private readonly shadow = this.attachShadow({mode: 'open'});\n  private mainFrameNavigations: readonly number[] = [];\n  private startTime = 0;\n  private duration = 1000;\n  private maxDuration = 1000;\n  private width = 0;\n  private height = 0;\n  private canvas: HTMLCanvasElement;\n  private hoverLane: number|null = null;\n\n  private fcpLane: WebVitalsEventLane;\n  private lcpLane: WebVitalsEventLane;\n  private layoutShiftsLane: WebVitalsEventLane;\n  private longTasksLane: WebVitalsTimeboxLane;\n\n  private context: CanvasRenderingContext2D;\n  private animationFrame: number|null = null;\n\n  private overlay: WebVitalsTooltip;\n\n  constructor() {\n    super();\n\n    this.canvas = document.createElement('canvas');\n    this.canvas.style.width = '100%';\n    this.canvas.style.height = `${Math.max(LINE_HEIGHT * NUMBER_OF_LANES, 120)}px`;\n    this.shadow.appendChild(this.canvas);\n    this.canvas.addEventListener('pointermove', this.handlePointerMove.bind(this));\n    this.canvas.addEventListener('pointerout', this.handlePointerOut.bind(this));\n    this.canvas.addEventListener('click', this.handleClick.bind(this));\n\n    const context = this.canvas.getContext('2d');\n\n    assertInstanceOf(context, CanvasRenderingContext2D);\n\n    this.context = context;\n\n    this.fcpLane = new WebVitalsEventLane(\n        this, i18nString(UIStrings.fcp), e => this.getMarkerTypeForFCPEvent(e), this.getFCPMarkerOverlay);\n    this.lcpLane = new WebVitalsEventLane(\n        this, i18nString(UIStrings.lcp), e => this.getMarkerTypeForLCPEvent(e), this.getLCPMarkerOverlay);\n    this.layoutShiftsLane = new WebVitalsEventLane(this, i18nString(UIStrings.ls), _ => MarkerType.Bad);\n    this.longTasksLane = new WebVitalsTimeboxLane(this, i18nString(UIStrings.longTasks), this.getLongTaskOverlay);\n\n    this.overlay = document.createElement('devtools-timeline-webvitals-tooltip');\n    this.overlay.style.position = 'absolute';\n    this.overlay.style.visibility = 'hidden';\n\n    this.ownerDocument.body.appendChild(this.overlay);\n  }\n\n  set data(data: WebVitalsTimelineData) {\n    this.startTime = data.startTime || this.startTime;\n    this.duration = data.duration || this.duration;\n    this.maxDuration = data.maxDuration || this.maxDuration;\n    this.mainFrameNavigations = data.mainFrameNavigations || this.mainFrameNavigations;\n\n    if (data.fcps) {\n      this.fcpLane.setEvents(data.fcps);\n    }\n\n    if (data.lcps) {\n      this.lcpLane.setEvents(data.lcps);\n    }\n\n    if (data.layoutShifts) {\n      this.layoutShiftsLane.setEvents(data.layoutShifts);\n    }\n\n    if (data.longTasks) {\n      this.longTasksLane.setTimeboxes(data.longTasks);\n    }\n\n    this.scheduleRender();\n  }\n\n  getContext(): CanvasRenderingContext2D {\n    return this.context;\n  }\n\n  getLineHeight(): number {\n    return LINE_HEIGHT;\n  }\n\n  hideOverlay(): void {\n    this.overlay.style.visibility = 'hidden';\n  }\n\n  showOverlay(content: LitHtml.TemplateResult): void {\n    this.overlay.data = {content};\n    this.overlay.style.visibility = 'visible';\n  }\n\n  private handlePointerMove(e: MouseEvent): void {\n    this.updateOverlayPosition(e.clientX, e.clientY);\n\n    const x = e.offsetX, y = e.offsetY;\n    const lane = Math.floor(y / LINE_HEIGHT);\n\n    this.hoverLane = lane;\n    this.fcpLane.handlePointerMove(this.hoverLane === 1 ? x : null);\n    this.lcpLane.handlePointerMove(this.hoverLane === 2 ? x : null);\n    this.layoutShiftsLane.handlePointerMove(this.hoverLane === 3 ? x : null);\n    this.longTasksLane.handlePointerMove(this.hoverLane === 4 ? x : null);\n\n\n    this.scheduleRender();\n  }\n\n  private updateOverlayPosition(clientX: number, clientY: number): void {\n    coordinator.read(() => {\n      const bb1 = this.getBoundingClientRect();\n      const bb2 = this.overlay.getBoundingClientRect();\n\n      const x = clientX + 10 + bb2.width > bb1.x + bb1.width ? clientX - bb2.width - 10 : clientX + 10;\n\n      coordinator.write(() => {\n        this.overlay.style.top = `${clientY + 10}px`;\n        this.overlay.style.left = `${x}px`;\n      });\n    });\n  }\n\n  private handlePointerOut(_: MouseEvent): void {\n    this.fcpLane.handlePointerMove(null);\n    this.lcpLane.handlePointerMove(null);\n    this.layoutShiftsLane.handlePointerMove(null);\n    this.longTasksLane.handlePointerMove(null);\n\n    this.scheduleRender();\n  }\n\n  private handleClick(e: MouseEvent): void {\n    const x = e.offsetX;\n\n    this.focus();\n    this.fcpLane.handleClick(this.hoverLane === 1 ? x : null);\n    this.lcpLane.handleClick(this.hoverLane === 2 ? x : null);\n    this.layoutShiftsLane.handleClick(this.hoverLane === 3 ? x : null);\n    this.longTasksLane.handleClick(this.hoverLane === 4 ? x : null);\n\n    this.scheduleRender();\n  }\n\n  /**\n   * Transform from time to pixel offset\n   * @param x\n   */\n  tX(x: number): number {\n    return (x - this.startTime) / this.duration * this.width;\n  }\n\n  /**\n   * Transform from duration to pixels\n   * @param duration\n   */\n  tD(duration: number): number {\n    return duration / this.duration * this.width;\n  }\n\n  setSize(width: number, height: number): void {\n    const scale = window.devicePixelRatio;\n\n    this.width = width;\n    this.height = Math.max(height, 120);\n\n    this.canvas.width = Math.floor(this.width * scale);\n    this.canvas.height = Math.floor(this.height * scale);\n    this.context.scale(scale, scale);\n\n    this.style.width = this.width + 'px';\n    this.style.height = this.height + 'px';\n    this.render();\n  }\n\n  connectedCallback(): void {\n    this.style.display = 'block';\n    this.tabIndex = 0;\n\n    const boundingClientRect = this.canvas.getBoundingClientRect();\n    const width = boundingClientRect.width;\n    const height = boundingClientRect.height;\n\n    this.setSize(width, height);\n    this.render();\n  }\n\n  disconnectedCallback(): void {\n    this.overlay.remove();\n  }\n\n  private getMarkerTypeForFCPEvent(event: WebVitalsFCPEvent): MarkerType {\n    const t = this.getTimeSinceLastMainFrameNavigation(event.timestamp);\n    if (t <= FCP_GOOD_TIMING) {\n      return MarkerType.Good;\n    }\n    if (t <= FCP_MEDIUM_TIMING) {\n      return MarkerType.Medium;\n    }\n    return MarkerType.Bad;\n  }\n\n  private getMarkerTypeForLCPEvent(event: WebVitalsLCPEvent): MarkerType {\n    const t = this.getTimeSinceLastMainFrameNavigation(event.timestamp);\n    if (t <= LCP_GOOD_TIMING) {\n      return MarkerType.Good;\n    }\n    if (t <= LCP_MEDIUM_TIMING) {\n      return MarkerType.Medium;\n    }\n    return MarkerType.Bad;\n  }\n\n  private getFCPMarkerOverlay(): LitHtml.TemplateResult {\n    return LitHtml.html`\n      <table class=\"table\">\n        <thead>\n          <td colspan=\"3\" class=\"title\">${i18nString(UIStrings.firstContentfulPaint)}</td>\n        </thead>\n        <tbody>\n          <tr>\n            <td><span class=\"good\"></span></td>\n            <td>${i18nString(UIStrings.good)}</td>\n            <td>\n              ≤ ${i18n.i18n.millisToString(FCP_GOOD_TIMING)}</td>\n          </tr>\n          <tr>\n            <td><span class=\"medium\"></span></td>\n            <td>${i18nString(UIStrings.needsImprovement)}</td>\n            <td></td>\n          </tr>\n          <tr>\n            <td><span class=\"bad\"></span></td>\n            <td>${i18nString(UIStrings.poor)}</td>\n            <td>> ${i18n.i18n.millisToString(FCP_MEDIUM_TIMING)}</td>\n          </tr>\n        </tbody>\n      </table>\n    `;\n  }\n\n  private getLCPMarkerOverlay(): LitHtml.TemplateResult {\n    return LitHtml.html`\n      <table class=\"table\">\n        <thead>\n          <td colspan=\"3\" class=\"title\">${i18nString(UIStrings.largestContentfulPaint)}</td>\n        </thead>\n        <tbody>\n          <tr>\n            <td><span class=\"good\"></span></td>\n            <td>${i18nString(UIStrings.good)}</td>\n            <td>\n            ≤ ${i18n.i18n.millisToString(LCP_GOOD_TIMING)}</td>\n          </tr>\n          <tr>\n            <td><span class=\"medium\"></span></td>\n            <td>${i18nString(UIStrings.needsImprovement)}</td>\n            <td></td>\n          </tr>\n          <tr>\n            <td><span class=\"bad\"></span></td>\n            <td>${i18nString(UIStrings.poor)}</td>\n            <td>> ${i18n.i18n.millisToString(LCP_MEDIUM_TIMING)}</td>\n          </tr>\n        </tbody>\n      </table>\n    `;\n  }\n\n  private getLongTaskOverlay(timebox: Timebox): LitHtml.TemplateResult {\n    return LitHtml.html`\n        <table class=\"table\">\n          <thead>\n            <td colspan=\"3\" class=\"title\">\n              ${i18nString(UIStrings.longTask)}\n              <span class=\"small\">\n                ${i18n.i18n.millisToString(timebox.duration)}\n              </span>\n            </td>\n          </thead>\n          <tbody>\n            <tr>\n              <td><span class=\"good\"></span></td>\n              <td>${i18nString(UIStrings.good)}</td>\n              <td>≤ ${i18n.i18n.millisToString(LONG_TASK_THRESHOLD)}</td>\n            </tr>\n            <tr>\n              <td><span class=\"bad\"></span></td>\n              <td>${i18nString(UIStrings.poor)}</td>\n              <td>> ${i18n.i18n.millisToString(LONG_TASK_THRESHOLD)}</td>\n            </tr>\n          </tbody>\n        </table>\n    `;\n  }\n\n  private renderMainFrameNavigations(markers: readonly number[]): void {\n    this.context.save();\n    this.context.strokeStyle = 'blue';\n    this.context.beginPath();\n    for (const marker of markers) {\n      this.context.moveTo(this.tX(marker), 0);\n      this.context.lineTo(this.tX(marker), this.height);\n    }\n    this.context.stroke();\n    this.context.restore();\n  }\n\n  getTimeSinceLastMainFrameNavigation(time: number): number {\n    let i = 0, prev = 0;\n    while (i < this.mainFrameNavigations.length && this.mainFrameNavigations[i] <= time) {\n      prev = this.mainFrameNavigations[i];\n      i++;\n    }\n    return time - prev;\n  }\n\n  render(): void {\n    this.context.save();\n    this.context.clearRect(0, 0, this.width, this.height);\n\n    this.context.strokeStyle = '#dadce0';\n\n    // Render the grid in the background.\n    this.context.beginPath();\n    for (let i = 0; i < NUMBER_OF_LANES; i++) {\n      this.context.moveTo(0, (i * LINE_HEIGHT) + 0.5);\n      this.context.lineTo(this.width, (i * LINE_HEIGHT) + 0.5);\n    }\n    this.context.moveTo(0, NUMBER_OF_LANES * LINE_HEIGHT - 0.5);\n    this.context.lineTo(this.width, NUMBER_OF_LANES * LINE_HEIGHT - 0.5);\n    this.context.stroke();\n    this.context.restore();\n\n    // Render the WebVitals label.\n    this.context.save();\n    this.context.font = '11px ' + Host.Platform.fontFamily();\n    const text = this.context.measureText('Web Vitals');\n    const height = text.actualBoundingBoxAscent - text.actualBoundingBoxDescent;\n    this.context.fillStyle = '#202124';\n    this.context.fillText('Web Vitals', 6, 4 + height);\n    this.context.restore();\n\n    // Render all the lanes.\n    this.context.save();\n    this.context.translate(0, Number(LINE_HEIGHT));\n    this.fcpLane.render();\n    this.context.translate(0, Number(LINE_HEIGHT));\n    this.lcpLane.render();\n    this.context.translate(0, Number(LINE_HEIGHT));\n    this.layoutShiftsLane.render();\n    this.context.translate(0, Number(LINE_HEIGHT));\n    this.longTasksLane.render();\n    this.context.restore();\n\n    this.renderMainFrameNavigations(this.mainFrameNavigations);\n  }\n\n  private scheduleRender(): void {\n    if (this.animationFrame) {\n      return;\n    }\n\n    this.animationFrame = window.requestAnimationFrame(() => {\n      this.animationFrame = null;\n      this.render();\n    });\n  }\n}\n\nComponentHelpers.CustomElements.defineComponent('devtools-timeline-webvitals', WebVitalsTimeline);\n"]}