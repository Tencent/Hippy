{"version":3,"file":"WebVitalsLane.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/timeline/components/WebVitalsLane.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Host from '../../../core/host/host.js';\nimport type * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\n\nimport type {Event, Marker, Timebox, WebVitalsTimeline} from './WebVitalsTimeline.js';\nimport {assertInstanceOf, LONG_TASK_THRESHOLD, MarkerType} from './WebVitalsTimeline.js';\n\ntype GetMarkerTypeCallback = (event: Event) => MarkerType;\ntype GetMarkerOverlayCallback = (marker: Marker) => LitHtml.TemplateResult;\ntype GetTimeboxOverlayCallback = (marker: Timebox) => LitHtml.TemplateResult;\n\nabstract class WebVitalsLane {\n  protected context: CanvasRenderingContext2D;\n  protected timeline: WebVitalsTimeline;\n  protected theme: {[key: string]: string};\n\n  constructor(timeline: WebVitalsTimeline) {\n    this.timeline = timeline;\n    this.context = timeline.getContext();\n\n    const styles = getComputedStyle(document.documentElement);\n    this.theme = {\n      good: styles.getPropertyValue('--lighthouse-green'),\n      medium: styles.getPropertyValue('--lighthouse-orange'),\n      bad: styles.getPropertyValue('--lighthouse-red'),\n      frame: styles.getPropertyValue('--color-primary'),\n      textPrimary: styles.getPropertyValue('--color-text-primary'),\n      textSecondary: styles.getPropertyValue('--color-text-secondary'),\n      background: styles.getPropertyValue('--color-background'),\n      background50: styles.getPropertyValue('--color-background-opacity-50'),\n      timeboxColor: styles.getPropertyValue('--color-primary-variant'),\n    };\n  }\n\n  abstract handlePointerMove(x: number|null): void;\n  abstract handleClick(x: number|null): void;\n\n  protected tX(x: number): number {\n    return this.timeline.tX(x);\n  }\n\n  protected tD(x: number): number {\n    return this.timeline.tD(x);\n  }\n\n  protected renderLaneLabel(label: string): void {\n    const upperCaseLabel = label.toLocaleUpperCase();\n    this.context.save();\n\n    this.context.font = '9px ' + Host.Platform.fontFamily();\n    const text = this.context.measureText(upperCaseLabel);\n    const height = text.actualBoundingBoxAscent - text.actualBoundingBoxDescent;\n    this.context.fillStyle = this.theme.background50;\n    this.context.fillRect(0, 1, text.width + 12, height + 6);\n    this.context.fillStyle = this.theme.textSecondary;\n    this.context.fillText(upperCaseLabel, 6, height + 4);\n    this.context.restore();\n  }\n\n  render(): void {\n  }\n}\n\nexport class WebVitalsEventLane extends WebVitalsLane {\n  private markers: readonly Marker[] = [];\n  private selectedMarker: Marker|null = null;\n  private hoverMarker: Marker|null = null;\n  private labelMetrics: TextMetrics;\n  private label: string;\n  private getMarkerType: GetMarkerTypeCallback;\n  private getMarkerOverlay?: GetMarkerOverlayCallback;\n\n  constructor(\n      timeline: WebVitalsTimeline, label: string, getMarkerType: GetMarkerTypeCallback,\n      getMarkerOverlay?: GetMarkerOverlayCallback) {\n    super(timeline);\n    this.context = timeline.getContext();\n    this.label = label;\n    this.getMarkerType = getMarkerType;\n    this.getMarkerOverlay = getMarkerOverlay;\n    this.labelMetrics = this.measureLabel(this.label);\n  }\n\n  handlePointerMove(x: number|null): void {\n    const prevHoverMarker = this.hoverMarker;\n    if (x === null) {\n      this.hoverMarker = null;\n    } else {\n      this.hoverMarker = this.markers.find(m => {\n        const tX = this.tX(m.timestamp);\n        return tX - 5 <= x && x <= tX + m.widthIncludingLabel;\n      }) ||\n          null;\n    }\n\n    if (prevHoverMarker !== this.hoverMarker) {\n      if (this.hoverMarker && this.getMarkerOverlay) {\n        this.timeline.showOverlay(this.getMarkerOverlay(this.hoverMarker));\n      } else {\n        this.timeline.hideOverlay();\n      }\n    }\n  }\n\n  handleClick(_: number|null): void {\n    this.selectedMarker = this.hoverMarker;\n  }\n\n  setEvents(markers: readonly Event[]): void {\n    this.hoverMarker = null;\n    this.selectedMarker = null;\n    this.markers = markers.map(e => this.getMarker(e));\n  }\n\n  private measureLabel(label: string): TextMetrics {\n    this.context.save();\n    this.context.font = '11px ' + Host.Platform.fontFamily();\n    const textMetrics = this.context.measureText(label);\n    this.context.restore();\n    return textMetrics;\n  }\n\n  private measureTimestamp(timestamp: string): TextMetrics {\n    this.context.save();\n    this.context.font = '11px ' + Host.Platform.fontFamily();\n    const textMetrics = this.context.measureText(timestamp);\n    this.context.restore();\n    return textMetrics;\n  }\n\n  private getMarker(event: Event): Marker {\n    const markerType = this.getMarkerType(event);\n    const timestamp = this.timeline.getTimeSinceLastMainFrameNavigation(event.timestamp);\n    const timestampLabel = i18n.i18n.preciseMillisToString(timestamp, 1);\n    const timestampMetrics = this.measureTimestamp(timestampLabel);\n    const widthIncludingLabel = 10 + 5 + this.labelMetrics.width + 5;\n    const widthIncludingTimestamp = widthIncludingLabel + 5 + timestampMetrics.width;\n\n    return {\n      timestamp: event.timestamp,\n      timestampLabel,\n      type: markerType,\n      timestampMetrics,\n      widthIncludingLabel,\n      widthIncludingTimestamp,\n    };\n  }\n\n  private renderLabel(position: number, label: string, textMetrics: TextMetrics): void {\n    this.context.save();\n    this.context.font = '11px ' + Host.Platform.fontFamily();\n    const height = textMetrics.actualBoundingBoxAscent - textMetrics.actualBoundingBoxDescent;\n    this.context.fillStyle = this.theme.textPrimary;\n    this.context.fillText(\n        label, this.tX(position) + this.timeline.getLineHeight() * 0.5,\n        0.5 * this.timeline.getLineHeight() + height * .5);\n    this.context.restore();\n  }\n\n  private renderTimestamp(position: number, textWidth: number, timestamp: string, textMetrics: TextMetrics): void {\n    this.context.save();\n    this.context.font = '11px ' + Host.Platform.fontFamily();\n    const height = textMetrics.actualBoundingBoxAscent - textMetrics.actualBoundingBoxDescent;\n    this.context.fillStyle = this.theme.textSecondary;\n    this.context.fillText(\n        timestamp, this.tX(position) + this.timeline.getLineHeight() * 0.5 + textWidth + 5,\n        0.5 * this.timeline.getLineHeight() + height * .5);\n    this.context.restore();\n  }\n\n  private renderGoodMarkerSymbol(timestamp: number): void {\n    const radius = 5;\n\n    this.context.save();\n    this.context.beginPath();\n    this.context.strokeStyle = this.theme.good;\n    this.context.moveTo(this.tX(timestamp), 2);\n    this.context.lineTo(this.tX(timestamp), 5);\n    this.context.moveTo(this.tX(timestamp), 19);\n    this.context.lineTo(this.tX(timestamp), 22);\n    this.context.stroke();\n\n    this.context.beginPath();\n    this.context.fillStyle = this.theme.good;\n    this.context.arc(this.tX(timestamp), 0.5 * this.timeline.getLineHeight(), radius, 0, Math.PI * 2);\n    this.context.fill();\n    this.context.restore();\n  }\n\n  private renderMediumMarkerSymbol(timestamp: number): void {\n    this.context.save();\n    this.context.beginPath();\n    this.context.strokeStyle = this.theme.medium;\n    this.context.moveTo(this.tX(timestamp), 2);\n    this.context.lineTo(this.tX(timestamp), 5);\n    this.context.moveTo(this.tX(timestamp), 19);\n    this.context.lineTo(this.tX(timestamp), 22);\n    this.context.stroke();\n\n    this.context.beginPath();\n    this.context.fillStyle = this.theme.medium;\n    this.context.rect(this.tX(timestamp) - 5, 0.5 * this.timeline.getLineHeight() - 5, 10, 10);\n    this.context.fill();\n    this.context.restore();\n  }\n\n  private renderBadMarkerSymbol(timestamp: number): void {\n    this.context.save();\n    this.context.beginPath();\n    this.context.strokeStyle = this.theme.bad;\n    this.context.moveTo(this.tX(timestamp), 2);\n    this.context.lineTo(this.tX(timestamp), 5);\n    this.context.moveTo(this.tX(timestamp), 19);\n    this.context.lineTo(this.tX(timestamp), 22);\n    this.context.stroke();\n\n    this.context.beginPath();\n    this.context.fillStyle = this.theme.bad;\n    this.context.translate(this.tX(timestamp), 0.5 * this.timeline.getLineHeight());\n    this.context.rotate(45 * Math.PI / 180);\n    this.context.rect(-4, -4, 8, 8);\n    this.context.rotate(-45 * Math.PI / 180);\n    this.context.translate(-this.tX(timestamp), -0.5 * this.timeline.getLineHeight());\n    this.context.fill();\n    this.context.restore();\n  }\n\n  private renderMarker(marker: Marker, selected: boolean, hover: boolean, nextMarker: Marker|null): void {\n    const timestampLabel = marker.timestampLabel;\n    const labelMetrics = this.labelMetrics;\n    const timestampMetrics = marker.timestampMetrics;\n\n    const showFrame = selected;\n    const showDetails = hover || selected;\n    const widthIncludingLabel = marker.widthIncludingLabel;\n    const widthIncludingTimestamp = showDetails ? marker.widthIncludingTimestamp : widthIncludingLabel;\n\n    const pixelDistance = nextMarker ? this.tD(nextMarker.timestamp - marker.timestamp) : null;\n    const showLabel = showDetails || (pixelDistance !== null && pixelDistance > widthIncludingLabel + 5);\n\n    if (showDetails) {\n      this.context.save();\n      const tX = this.tX(marker.timestamp) - 5 - 5;\n      const tY = 1;\n      const tWidth = widthIncludingTimestamp + 2 * 5;\n      const tHeight = this.timeline.getLineHeight() - 2;\n\n\n      this.context.fillStyle = this.theme.background;\n      this.context.fillRect(tX, tY, tWidth, tHeight);\n\n      if (showFrame) {\n        this.context.strokeStyle = this.theme.frame;\n        this.context.lineWidth = 2;\n        this.context.strokeRect(tX, tY, tWidth, tHeight);\n        this.context.lineWidth = 1;\n      }\n\n      this.context.restore();\n    }\n\n    if (showLabel) {\n      if (labelMetrics) {\n        this.renderLabel(marker.timestamp, this.label, labelMetrics);\n      }\n\n      if (showDetails) {\n        this.renderTimestamp(marker.timestamp, labelMetrics ? labelMetrics.width : 0, timestampLabel, timestampMetrics);\n      }\n    }\n\n    if (marker.type === MarkerType.Good) {\n      this.renderGoodMarkerSymbol(marker.timestamp);\n    } else if (marker.type === MarkerType.Medium) {\n      this.renderMediumMarkerSymbol(marker.timestamp);\n    } else {\n      this.renderBadMarkerSymbol(marker.timestamp);\n    }\n  }\n\n  render(): void {\n    for (let i = 0; i < this.markers.length; i++) {\n      const event = this.markers[i];\n      if (event === this.selectedMarker || event === this.hoverMarker) {\n        continue;\n      }\n      this.renderMarker(event, false, false, i < this.markers.length - 1 ? this.markers[i + 1] : null);\n    }\n\n    if (this.hoverMarker && this.hoverMarker !== this.selectedMarker) {\n      this.renderMarker(this.hoverMarker, false, true, null);\n    }\n\n    if (this.selectedMarker) {\n      this.renderMarker(this.selectedMarker, true, false, null);\n    }\n  }\n}\n\nexport class WebVitalsTimeboxLane extends WebVitalsLane {\n  private longTaskPattern: CanvasPattern;\n  private boxes: readonly Timebox[] = [];\n  private label: string;\n  private hoverBox: number = -1;\n  private selectedBox: number = -1;\n  private getTimeboxOverlay?: GetTimeboxOverlayCallback;\n\n  constructor(timeline: WebVitalsTimeline, label: string, getTimeboxOverlay?: GetTimeboxOverlayCallback) {\n    super(timeline);\n\n    this.label = label;\n    const patternCanvas = document.createElement('canvas');\n    const patternContext = patternCanvas.getContext('2d');\n\n    assertInstanceOf(patternContext, CanvasRenderingContext2D);\n\n    const size = 17;\n    patternCanvas.width = size;\n    patternCanvas.height = size;\n\n    // Rotate the stripe by 45deg to the right.\n    patternContext.translate(size * 0.5, size * 0.5);\n    patternContext.rotate(Math.PI * 0.25);\n    patternContext.translate(-size * 0.5, -size * 0.5);\n\n    patternContext.fillStyle = '#000';\n    for (let x = -size; x < size * 2; x += 3) {\n      patternContext.fillRect(x, -size, 1, size * 3);\n    }\n    const canvasPattern = this.context.createPattern(patternCanvas, 'repeat');\n    assertInstanceOf(canvasPattern, CanvasPattern);\n    this.longTaskPattern = canvasPattern;\n    this.getTimeboxOverlay = getTimeboxOverlay;\n  }\n\n  handlePointerMove(x: number|null): void {\n    const prevHoverBox = this.hoverBox;\n    if (x === null) {\n      this.hoverBox = -1;\n    } else {\n      this.hoverBox = this.boxes.findIndex((box): boolean => {\n        const start = this.tX(box.start);\n        const end = this.tX(box.start + box.duration);\n        return start <= x && x <= end;\n      });\n    }\n\n    if (prevHoverBox !== this.hoverBox) {\n      if (this.hoverBox !== -1 && this.getTimeboxOverlay) {\n        this.timeline.showOverlay(this.getTimeboxOverlay(this.boxes[this.hoverBox]));\n      } else {\n        this.timeline.hideOverlay();\n      }\n    }\n  }\n\n  handleClick(_: number|null): void {\n    this.selectedBox = this.hoverBox;\n  }\n\n  setTimeboxes(boxes: readonly Timebox[]): void {\n    this.selectedBox = -1;\n    this.hoverBox = -1;\n    this.boxes = boxes;\n  }\n\n  private renderTimebox(box: Timebox, hover: boolean): void {\n    const r = 2;\n\n    this.context.save();\n    this.context.beginPath();\n    this.context.fillStyle = this.theme.timeboxColor;\n    // Draw a box with rounded corners.\n    this.context.moveTo(this.tX(box.start) + r, 2);\n    this.context.lineTo(this.tX(box.start + box.duration) - r, 2);\n    this.context.quadraticCurveTo(\n        this.tX(box.start + box.duration),\n        2,\n        this.tX(box.start + box.duration),\n        2 + r,\n    );\n    this.context.lineTo(this.tX(box.start + box.duration), 22 - r);\n    this.context.quadraticCurveTo(\n        this.tX(box.start + box.duration),\n        22 - r,\n        this.tX(box.start + box.duration) - r,\n        22,\n    );\n    this.context.lineTo(this.tX(box.start) + r, 22);\n    this.context.quadraticCurveTo(\n        this.tX(box.start) + r,\n        22,\n        this.tX(box.start),\n        22 - r,\n    );\n    this.context.lineTo(this.tX(box.start), 2 + r);\n    this.context.quadraticCurveTo(\n        this.tX(box.start),\n        2 + r,\n        this.tX(box.start) + r,\n        2,\n    );\n    this.context.closePath();\n    this.context.fill();\n\n    // Fill the box with a striped pattern for everything over 50ms.\n    this.context.beginPath();\n    this.context.fillStyle = this.longTaskPattern;\n    this.context.moveTo(this.tX(box.start + LONG_TASK_THRESHOLD) + r, 2);\n    this.context.lineTo(this.tX(box.start + box.duration) - r, 2);\n    this.context.quadraticCurveTo(\n        this.tX(box.start + box.duration),\n        2,\n        this.tX(box.start + box.duration),\n        2 + r,\n    );\n    this.context.lineTo(this.tX(box.start + box.duration), 22 - r);\n    this.context.quadraticCurveTo(\n        this.tX(box.start + box.duration),\n        22 - r,\n        this.tX(box.start + box.duration) - r,\n        22,\n    );\n    this.context.lineTo(this.tX(box.start + 50), 22);\n    this.context.lineTo(this.tX(box.start + 50), 2);\n    this.context.closePath();\n    this.context.fill();\n\n    if (hover) {\n      this.context.beginPath();\n      this.context.strokeStyle = this.theme.frame;\n      this.context.rect(this.tX(box.start) - 2, 0, this.tD(box.duration) + 4, 24);\n      this.context.lineWidth = 2;\n      this.context.stroke();\n      this.context.lineWidth = 1;\n    }\n\n    this.context.restore();\n  }\n\n  render(): void {\n    for (let i = 0; i < this.boxes.length; i++) {\n      if (i === this.hoverBox || i === this.selectedBox) {\n        continue;\n      }\n      this.renderTimebox(this.boxes[i], false);\n    }\n\n    if (this.hoverBox !== -1) {\n      this.renderTimebox(this.boxes[this.hoverBox], true);\n    }\n\n    if (this.selectedBox !== -1) {\n      this.renderTimebox(this.boxes[this.selectedBox], true);\n    }\n\n    this.renderLaneLabel(this.label);\n  }\n}\n"]}