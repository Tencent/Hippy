{"version":3,"file":"TimelineFlameChartNetworkDataProvider.js","sourceRoot":"","sources":["../../../../../../front_end/panels/timeline/TimelineFlameChartNetworkDataProvider.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport type * as TimelineModel from '../../models/timeline_model/timeline_model.js'; // eslint-disable-line no-unused-vars\nimport * as PerfUI from '../../ui/legacy/components/perf_ui/perf_ui.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as ThemeSupport from '../../ui/legacy/theme_support/theme_support.js';\nimport * as Protocol from '../../generated/protocol.js';\n\nimport type {PerformanceModel} from './PerformanceModel.js'; // eslint-disable-line no-unused-vars\nimport {FlameChartStyle, Selection} from './TimelineFlameChartView.js';\nimport {TimelineSelection} from './TimelinePanel.js';\nimport {TimelineUIUtils} from './TimelineUIUtils.js';\n\nconst UIStrings = {\n  /**\n  *@description Title of the Network tool\n  */\n  network: 'Network',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/timeline/TimelineFlameChartNetworkDataProvider.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class TimelineFlameChartNetworkDataProvider implements PerfUI.FlameChart.FlameChartDataProvider {\n  _font: string;\n  _style: {\n    padding: number,\n    height: number,\n    collapsible: boolean,\n    color: string,\n    font: string,\n    backgroundColor: string,\n    nestingLevel: number,\n    useFirstLineForOverview: boolean,\n    useDecoratorsForOverview: boolean,\n    shareHeaderLine: boolean,\n  };\n  _group: PerfUI.FlameChart.Group;\n  _minimumBoundary: number;\n  _maximumBoundary: number;\n  _timeSpan: number;\n  _requests: TimelineModel.TimelineModel.NetworkRequest[];\n  _maxLevel: number;\n  _model?: TimelineModel.TimelineModel.TimelineModelImpl|null;\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  _timelineData?: any;\n  _startTime?: number;\n  _endTime?: number;\n  _lastSelection?: Selection;\n  _priorityToValue?: Map<string, number>;\n  constructor() {\n    this._font = '11px ' + Host.Platform.fontFamily();\n    this.setModel(null);\n    this._style = {\n      padding: 4,\n      height: 17,\n      collapsible: true,\n      color:\n          ThemeSupport.ThemeSupport.instance().patchColorText('#222', ThemeSupport.ThemeSupport.ColorUsage.Foreground),\n      font: this._font,\n      backgroundColor:\n          ThemeSupport.ThemeSupport.instance().patchColorText('white', ThemeSupport.ThemeSupport.ColorUsage.Background),\n      nestingLevel: 0,\n      useFirstLineForOverview: false,\n      useDecoratorsForOverview: true,\n      shareHeaderLine: false,\n    };\n    this._group =\n        ({startLevel: 0, name: i18nString(UIStrings.network), expanded: false, style: this._style} as\n         PerfUI.FlameChart.Group);\n    this._minimumBoundary = 0;\n    this._maximumBoundary = 0;\n    this._timeSpan = 0;\n    this._requests = [];\n    this._maxLevel = 0;\n  }\n\n  setModel(performanceModel: PerformanceModel|null): void {\n    this._model = performanceModel && performanceModel.timelineModel();\n    this._timelineData = null;\n  }\n\n  isEmpty(): boolean {\n    this.timelineData();\n    return !this._requests.length;\n  }\n\n  maxStackDepth(): number {\n    return this._maxLevel;\n  }\n\n  timelineData(): PerfUI.FlameChart.TimelineData {\n    if (this._timelineData) {\n      return this._timelineData;\n    }\n    /** @type {!Array<!TimelineModel.TimelineModel.NetworkRequest>} */\n    this._requests = [];\n    this._timelineData = new PerfUI.FlameChart.TimelineData([], [], [], []);\n    if (this._model) {\n      this._appendTimelineData();\n    }\n    return this._timelineData;\n  }\n\n  minimumBoundary(): number {\n    return this._minimumBoundary;\n  }\n\n  totalTime(): number {\n    return this._timeSpan;\n  }\n\n  setWindowTimes(startTime: number, endTime: number): void {\n    this._startTime = startTime;\n    this._endTime = endTime;\n    this._updateTimelineData();\n  }\n\n  createSelection(index: number): TimelineSelection|null {\n    if (index === -1) {\n      return null;\n    }\n    const request = this._requests[index];\n    this._lastSelection = new Selection(TimelineSelection.fromNetworkRequest(request), index);\n    return this._lastSelection.timelineSelection;\n  }\n\n  entryIndexForSelection(selection: TimelineSelection|null): number {\n    if (!selection) {\n      return -1;\n    }\n\n    if (this._lastSelection && this._lastSelection.timelineSelection.object() === selection.object()) {\n      return this._lastSelection.entryIndex;\n    }\n\n    if (selection.type() !== TimelineSelection.Type.NetworkRequest) {\n      return -1;\n    }\n    const request = (selection.object() as TimelineModel.TimelineModel.NetworkRequest);\n    const index = this._requests.indexOf(request);\n    if (index !== -1) {\n      this._lastSelection = new Selection(TimelineSelection.fromNetworkRequest(request), index);\n    }\n    return index;\n  }\n\n  entryColor(index: number): string {\n    const request = (this._requests[index] as TimelineModel.TimelineModel.NetworkRequest);\n    const category = TimelineUIUtils.networkRequestCategory(request);\n    return TimelineUIUtils.networkCategoryColor(category);\n  }\n\n  textColor(_index: number): string {\n    return FlameChartStyle.textColor;\n  }\n\n  entryTitle(index: number): string|null {\n    const request = (this._requests[index] as TimelineModel.TimelineModel.NetworkRequest);\n    const parsedURL = new Common.ParsedURL.ParsedURL(request.url || '');\n    return parsedURL.isValid ? `${parsedURL.displayName} (${parsedURL.host})` : request.url || null;\n  }\n\n  entryFont(_index: number): string|null {\n    return this._font;\n  }\n\n  decorateEntry(\n      index: number, context: CanvasRenderingContext2D, text: string|null, barX: number, barY: number, barWidth: number,\n      barHeight: number, unclippedBarX: number, timeToPixelRatio: number): boolean {\n    const request = (this._requests[index] as TimelineModel.TimelineModel.NetworkRequest);\n    if (!request.timing) {\n      return false;\n    }\n    // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const timing = (request.timing as any);\n\n    const beginTime = request.beginTime();\n    const timeToPixel = (time: number): number => Math.floor(unclippedBarX + (time - beginTime) * timeToPixelRatio);\n    const minBarWidthPx = 2;\n    const startTime = request.getStartTime();\n    const endTime = request.endTime;\n    const {sendStartTime, headersEndTime} = request.getSendReceiveTiming();\n    const sendStart = Math.max(timeToPixel(sendStartTime), unclippedBarX);\n    const headersEnd = Math.max(timeToPixel(headersEndTime), sendStart);\n    const finish = Math.max(timeToPixel(request.finishTime || endTime), headersEnd + minBarWidthPx);\n    const start = timeToPixel(startTime);\n    const end = Math.max(timeToPixel(endTime), finish);\n\n    // Draw waiting time.\n    context.fillStyle = 'hsla(0, 100%, 100%, 0.8)';\n    context.fillRect(sendStart + 0.5, barY + 0.5, headersEnd - sendStart - 0.5, barHeight - 2);\n    // Clear portions of initial rect to prepare for the ticks.\n    context.fillStyle =\n        ThemeSupport.ThemeSupport.instance().patchColorText('white', ThemeSupport.ThemeSupport.ColorUsage.Background);\n    context.fillRect(barX, barY - 0.5, sendStart - barX, barHeight);\n    context.fillRect(finish, barY - 0.5, barX + barWidth - finish, barHeight);\n\n    // If the request is from cache, pushStart refers to the original request, and hence cannot be used.\n    if (!request.cached() && timing.pushStart) {\n      const pushStart = timeToPixel(timing.pushStart * 1000);\n      const pushEnd = timing.pushEnd ? timeToPixel(timing.pushEnd * 1000) : start;\n      const dentSize = Platform.NumberUtilities.clamp(pushEnd - pushStart - 2, 0, 4);\n      const padding = 1;\n      context.save();\n      context.beginPath();\n      context.moveTo(pushStart + dentSize, barY + barHeight / 2);\n      context.lineTo(pushStart, barY + padding);\n      context.lineTo(pushEnd - dentSize, barY + padding);\n      context.lineTo(pushEnd, barY + barHeight / 2);\n      context.lineTo(pushEnd - dentSize, barY + barHeight - padding);\n      context.lineTo(pushStart, barY + barHeight - padding);\n      context.closePath();\n      if (timing.pushEnd) {\n        context.fillStyle = this.entryColor(index);\n      } else {\n        // Use a gradient to indicate that `pushEnd` is not known here to work\n        // around BUG(chromium:998411).\n        const gradient = context.createLinearGradient(pushStart, 0, pushEnd, 0);\n        gradient.addColorStop(0, this.entryColor(index));\n        gradient.addColorStop(1, 'white');\n        context.fillStyle = gradient;\n      }\n      context.globalAlpha = 0.3;\n      context.fill();\n      context.restore();\n    }\n\n    function drawTick(begin: number, end: number, y: number): void {\n      const /** @const */ tickHeightPx = 6;\n      context.moveTo(begin, y - tickHeightPx / 2);\n      context.lineTo(begin, y + tickHeightPx / 2);\n      context.moveTo(begin, y);\n      context.lineTo(end, y);\n    }\n\n    context.beginPath();\n    context.lineWidth = 1;\n    context.strokeStyle = '#ccc';\n    const lineY = Math.floor(barY + barHeight / 2) + 0.5;\n    const leftTick = start + 0.5;\n    const rightTick = end - 0.5;\n    drawTick(leftTick, sendStart, lineY);\n    drawTick(rightTick, finish, lineY);\n    context.stroke();\n\n    if (typeof request.priority === 'string') {\n      const color = this._colorForPriority(request.priority);\n      if (color) {\n        context.fillStyle = color;\n        context.fillRect(sendStart + 0.5, barY + 0.5, 3.5, 3.5);\n      }\n    }\n\n    const textStart = Math.max(sendStart, 0);\n    const textWidth = finish - textStart;\n    const /** @const */ minTextWidthPx = 20;\n    if (textWidth >= minTextWidthPx) {\n      text = this.entryTitle(index) || '';\n      if (request.fromServiceWorker) {\n        text = 'âš™ ' + text;\n      }\n      if (text) {\n        const /** @const */ textPadding = 4;\n        const /** @const */ textBaseline = 5;\n        const textBaseHeight = barHeight - textBaseline;\n        const trimmedText = UI.UIUtils.trimTextEnd(context, text, textWidth - 2 * textPadding);\n        context.fillStyle = '#333';\n        context.fillText(trimmedText, textStart + textPadding, barY + textBaseHeight);\n      }\n    }\n\n    return true;\n  }\n\n  forceDecoration(_index: number): boolean {\n    return true;\n  }\n\n  prepareHighlightedEntryInfo(index: number): Element|null {\n    const /** @const */ maxURLChars = 80;\n    const request = (this._requests[index] as TimelineModel.TimelineModel.NetworkRequest);\n    if (!request.url) {\n      return null;\n    }\n    const element = document.createElement('div');\n    const root = UI.Utils.createShadowRootWithCoreStyles(element, {\n      cssFile: 'panels/timeline/timelineFlamechartPopover.css',\n      enableLegacyPatching: false,\n      delegatesFocus: undefined,\n    });\n    const contents = root.createChild('div', 'timeline-flamechart-popover');\n    const startTime = request.getStartTime();\n    const duration = request.endTime - startTime;\n    if (startTime && isFinite(duration)) {\n      contents.createChild('span', 'timeline-info-network-time').textContent = i18n.i18n.millisToString(duration, true);\n    }\n    if (typeof request.priority === 'string') {\n      const div = (contents.createChild('span') as HTMLElement);\n      div.textContent =\n          PerfUI.NetworkPriorities.uiLabelForNetworkPriority((request.priority as Protocol.Network.ResourcePriority));\n      div.style.color = this._colorForPriority(request.priority) || 'black';\n    }\n    contents.createChild('span').textContent = Platform.StringUtilities.trimMiddle(request.url, maxURLChars);\n    return element;\n  }\n\n  _colorForPriority(priority: string): string|null {\n    if (!this._priorityToValue) {\n      this._priorityToValue = new Map([\n        [Protocol.Network.ResourcePriority.VeryLow, 1],\n        [Protocol.Network.ResourcePriority.Low, 2],\n        [Protocol.Network.ResourcePriority.Medium, 3],\n        [Protocol.Network.ResourcePriority.High, 4],\n        [Protocol.Network.ResourcePriority.VeryHigh, 5],\n      ]);\n    }\n    const value = this._priorityToValue.get(priority);\n    return value ? `hsla(214, 80%, 50%, ${value / 5})` : null;\n  }\n\n  _appendTimelineData(): void {\n    if (this._model) {\n      this._minimumBoundary = this._model.minimumRecordTime();\n      this._maximumBoundary = this._model.maximumRecordTime();\n      this._timeSpan = this._model.isEmpty() ? 1000 : this._maximumBoundary - this._minimumBoundary;\n      this._model.networkRequests().forEach(this._appendEntry.bind(this));\n      this._updateTimelineData();\n    }\n  }\n\n  _updateTimelineData(): void {\n    if (!this._timelineData) {\n      return;\n    }\n    const lastTimeByLevel = [];\n    let maxLevel = 0;\n    for (let i = 0; i < this._requests.length; ++i) {\n      const r = this._requests[i];\n      const beginTime = r.beginTime();\n      const startTime = (this._startTime as number);\n      const endTime = (this._endTime as number);\n      const visible = beginTime < endTime && r.endTime > startTime;\n      if (!visible) {\n        this._timelineData.entryLevels[i] = -1;\n        continue;\n      }\n      while (lastTimeByLevel.length && lastTimeByLevel[lastTimeByLevel.length - 1] <= beginTime) {\n        lastTimeByLevel.pop();\n      }\n      this._timelineData.entryLevels[i] = lastTimeByLevel.length;\n      lastTimeByLevel.push(r.endTime);\n      maxLevel = Math.max(maxLevel, lastTimeByLevel.length);\n    }\n    for (let i = 0; i < this._requests.length; ++i) {\n      if (this._timelineData.entryLevels[i] === -1) {\n        this._timelineData.entryLevels[i] = maxLevel;\n      }\n    }\n    this._timelineData = new PerfUI.FlameChart.TimelineData(\n        this._timelineData.entryLevels, this._timelineData.entryTotalTimes, this._timelineData.entryStartTimes,\n        [this._group]);\n    this._maxLevel = maxLevel;\n  }\n\n  _appendEntry(request: TimelineModel.TimelineModel.NetworkRequest): void {\n    this._requests.push(request);\n    this._timelineData.entryStartTimes.push(request.beginTime());\n    this._timelineData.entryTotalTimes.push(request.endTime - request.beginTime());\n    this._timelineData.entryLevels.push(this._requests.length - 1);\n  }\n\n  preferredHeight(): number {\n    return this._style.height * (this._group.expanded ? Platform.NumberUtilities.clamp(this._maxLevel + 1, 4, 8.5) : 1);\n  }\n\n  isExpanded(): boolean {\n    return this._group && Boolean(this._group.expanded);\n  }\n\n  formatValue(value: number, precision?: number): string {\n    return i18n.i18n.preciseMillisToString(value, precision);\n  }\n\n  canJumpToEntry(_entryIndex: number): boolean {\n    return false;\n  }\n\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  navStartTimes(): Map<any, any> {\n    if (!this._model) {\n      return new Map();\n    }\n\n    return this._model.navStartTimes();\n  }\n}\n"]}