{"version":3,"file":"AdornerSettingsPane.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/elements/components/AdornerSettingsPane.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\n\nimport type {AdornerSettingsMap} from './AdornerManager.js';\n\nconst UIStrings = {\n  /**\n    * @description Title of a list of settings to toggle badges.\n    */\n  settingsTitle: 'Show badges',\n  /**\n   * @description ARIA label of the button to close the badge settings pane\n   */\n  closeButton: 'Close',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/elements/components/AdornerSettingsPane.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst {render, html} = LitHtml;\n\nexport class AdornerSettingUpdatedEvent extends Event {\n  data: {\n    adornerName: string,\n    isEnabledNow: boolean,\n    newSettings: AdornerSettingsMap,\n  };\n\n  constructor(adornerName: string, isEnabledNow: boolean, newSettings: AdornerSettingsMap) {\n    super('adornersettingupdated', {});\n    this.data = {adornerName, isEnabledNow, newSettings};\n  }\n}\n\nexport interface AdornerSettingsPaneData {\n  settings: Readonly<AdornerSettingsMap>;\n}\n\nexport class AdornerSettingsPane extends HTMLElement {\n  private readonly shadow = this.attachShadow({mode: 'open'});\n  private settings: AdornerSettingsMap = new Map();\n\n  set data(data: AdornerSettingsPaneData) {\n    this.settings = new Map(data.settings.entries());\n    this.render();\n  }\n\n  show(): void {\n    this.classList.remove('hidden');\n    const settingsPane = this.shadow.querySelector<HTMLElement>('.adorner-settings-pane');\n    if (settingsPane) {\n      settingsPane.focus();\n    }\n  }\n\n  hide(): void {\n    this.classList.add('hidden');\n  }\n\n  private onChange(ev: Event): void {\n    const inputEl = ev.target as HTMLInputElement;\n    const adorner = inputEl.dataset.adorner;\n    if (adorner === undefined) {\n      return;\n    }\n    const isEnabledNow = inputEl.checked;\n    this.settings.set(adorner, isEnabledNow);\n    this.dispatchEvent(new AdornerSettingUpdatedEvent(adorner, isEnabledNow, this.settings));\n    this.render();\n  }\n\n  private render(): void {\n    const settingTemplates = [];\n    for (const [adorner, isEnabled] of this.settings) {\n      // Disabled until https://crbug.com/1079231 is fixed.\n      // clang-format off\n      settingTemplates.push(html`\n        <label class=\"setting\" title=${adorner}>\n          <input\n            class=\"adorner-status\"\n            type=\"checkbox\" name=${adorner}\n            .checked=${isEnabled}\n            data-adorner=${adorner}>\n          <span class=\"adorner-name\">${adorner}</span>\n        </label>\n      `);\n      // clang-format on\n    }\n\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    render(html`\n      <style>\n        .adorner-settings-pane {\n          display: flex;\n          height: 2.67em;\n          padding: 0 12px;\n          color: var(--color-text-primary);\n          font-size: 12px;\n          align-items: center;\n        }\n\n        .settings-title {\n          font-weight: 500;\n        }\n\n        .setting {\n          margin-left: 1em;\n        }\n\n        .adorner-status {\n          margin: auto 0.4em auto 0;\n        }\n\n        .adorner-status,\n        .adorner-name {\n          vertical-align: middle;\n        }\n\n        .close {\n          position: relative;\n          margin-left: auto;\n          font-size: 1em;\n          width: 1.5em;\n          height: 1.5em;\n          border: none;\n          border-radius: 50%;\n          background-color: var(--color-background-elevation-1);\n          cursor: pointer;\n        }\n\n        .close::before,\n        .close::after {\n          content: '';\n          display: inline-block;\n          position: absolute;\n          left: 0;\n          right: 0;\n          top: 0;\n          bottom: 0;\n          margin: auto;\n          width: 1em;\n          height: 0.2em;\n          background-color: var(--color-text-secondary);\n          border-radius: 2px;\n        }\n\n        .close::before {\n          transform: rotate(45deg);\n        }\n\n        .close::after {\n          transform: rotate(-45deg);\n        }\n      </style>\n\n      <div class=\"adorner-settings-pane\" tabindex=\"-1\">\n        <div class=\"settings-title\">${i18nString(UIStrings.settingsTitle)}</div>\n        <div class=\"setting-list\" @change=${this.onChange}>\n          ${settingTemplates}\n        </div>\n        <button class=\"close\" @click=${this.hide} aria-label=${i18nString(UIStrings.closeButton)}></button>\n      </div>\n    `, this.shadow, {\n      host: this,\n    });\n    // clang-format on\n  }\n}\n\nComponentHelpers.CustomElements.defineComponent('devtools-adorner-settings-pane', AdornerSettingsPane);\n\ndeclare global {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  interface HTMLElementTagNameMap {\n    'devtools-adorner-settings-pane': AdornerSettingsPane;\n  }\n}\n"]}