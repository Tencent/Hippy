{"version":3,"file":"Adorner.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/elements/components/Adorner.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Platform from '../../../core/platform/platform.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\n\nimport {AdornerCategories} from './AdornerManager.js';\n\nconst {render, html} = LitHtml;\n\nexport interface AdornerDefinition {\n  name: string;\n  category: AdornerCategories;\n}\n\nexport interface AdornerData extends AdornerDefinition {\n  content: HTMLElement;\n}\n\nexport class Adorner extends HTMLElement {\n  name = '';\n  category = AdornerCategories.DEFAULT;\n\n  private readonly shadow = this.attachShadow({mode: 'open'});\n  private isToggle = false;\n  private ariaLabelDefault?: string;\n  private ariaLabelActive?: string;\n\n  set data(data: AdornerData) {\n    this.name = data.name;\n    data.content.slot = 'content';\n    this.append(data.content);\n    this.category = data.category;\n    this.render();\n  }\n\n  connectedCallback(): void {\n    if (!this.getAttribute('aria-label')) {\n      UI.ARIAUtils.setAccessibleName(this, this.name);\n    }\n  }\n\n  isActive(): boolean {\n    return this.getAttribute('aria-pressed') === 'true';\n  }\n\n  /**\n   * Toggle the active state of the adorner. Optionally pass `true` to force-set\n   * an active state; pass `false` to force-set an inactive state.\n   */\n  toggle(forceActiveState?: boolean): void {\n    if (!this.isToggle) {\n      return;\n    }\n    const shouldBecomeActive = forceActiveState === undefined ? !this.isActive() : forceActiveState;\n    UI.ARIAUtils.setPressed(this, shouldBecomeActive);\n    UI.ARIAUtils.setAccessibleName(\n        this, (shouldBecomeActive ? this.ariaLabelActive : this.ariaLabelDefault) || this.name);\n  }\n\n  show(): void {\n    this.classList.remove('hidden');\n  }\n\n  hide(): void {\n    this.classList.add('hidden');\n  }\n\n  /**\n   * Make adorner interactive by responding to click events with the provided action\n   * and simulating ARIA-capable toggle button behavior.\n   */\n  addInteraction(action: EventListener, options: {\n    ariaLabelDefault: Platform.UIString.LocalizedString,\n    ariaLabelActive: Platform.UIString.LocalizedString,\n    isToggle?: boolean,\n    shouldPropagateOnKeydown?: boolean,\n  }): void {\n    const {isToggle = false, shouldPropagateOnKeydown = false, ariaLabelDefault, ariaLabelActive} = options;\n\n    this.isToggle = isToggle;\n    this.ariaLabelDefault = ariaLabelDefault;\n    this.ariaLabelActive = ariaLabelActive;\n    UI.ARIAUtils.setAccessibleName(this, ariaLabelDefault);\n\n    if (isToggle) {\n      this.addEventListener('click', () => {\n        this.toggle();\n      });\n      this.toggle(false /* initialize inactive state */);\n    }\n\n    this.addEventListener('click', action);\n\n    // Simulate an ARIA-capable toggle button\n    this.classList.add('clickable');\n    UI.ARIAUtils.markAsButton(this);\n    this.tabIndex = 0;\n    this.addEventListener('keydown', event => {\n      if (event.code === 'Enter' || event.code === 'Space') {\n        this.click();\n        if (!shouldPropagateOnKeydown) {\n          event.stopPropagation();\n        }\n      }\n    });\n  }\n\n  private render(): void {\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    render(html`\n      <style>\n        :host {\n          display: inline-flex;\n        }\n\n        :host(.hidden) {\n          display: none;\n        }\n\n        :host(.clickable) {\n          cursor: pointer;\n        }\n\n        slot {\n          display: inline-flex;\n          box-sizing: border-box;\n          height: 13px;\n          line-height: 13px;\n          padding: 0 6px;\n          font-size: 8.5px;\n          color: var(--override-adorner-text-color, var(--color-text-primary));\n          background-color: var(--override-adorner-background-color, var(--color-background-elevation-1));\n          border: 1px solid var(--override-adorner-border-color, var(--color-details-hairline));\n          border-radius: 10px;\n        }\n\n        :host(:focus) slot {\n          border-color: var(--override-adorner-focus-border-color, var(--color-primary));\n        }\n\n        :host([aria-pressed=true]) slot {\n          color: var(--override-adorner-active-text-color, var(--color-background));\n          background-color: var(--override-adorner-active-background-color, var(--color-primary));\n        }\n\n        ::slotted(*) {\n          height: 10px;\n        }\n      </style>\n\n      <slot name=\"content\"></slot>\n    `, this.shadow, {\n      host: this,\n    });\n  }\n}\n\nComponentHelpers.CustomElements.defineComponent('devtools-adorner', Adorner);\n\ndeclare global {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  interface HTMLElementTagNameMap {\n    'devtools-adorner': Adorner;\n  }\n}\n"]}