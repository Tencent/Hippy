{"version":3,"file":"StylePropertyTreeElement.js","sourceRoot":"","sources":["../../../../../../front_end/panels/elements/StylePropertyTreeElement.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2018 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as ColorPicker from '../../ui/legacy/components/color_picker/color_picker.js';\nimport * as InlineEditor from '../../ui/legacy/components/inline_editor/inline_editor.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {BezierPopoverIcon, ColorSwatchPopoverIcon, ShadowSwatchPopoverHelper} from './ColorSwatchPopoverIcon.js';\nimport * as ElementsComponents from './components/components.js';\nimport {ElementsPanel} from './ElementsPanel.js';\nimport {StyleEditorWidget} from './StyleEditorWidget.js';\nimport type {StylePropertiesSection} from './StylesSidebarPane.js';\nimport {CSSPropertyPrompt, StylesSidebarPane, StylesSidebarPropertyRenderer} from './StylesSidebarPane.js';  // eslint-disable-line no-unused-vars\n\nconst FlexboxEditor = ElementsComponents.StylePropertyEditor.FlexboxEditor;\nconst GridEditor = ElementsComponents.StylePropertyEditor.GridEditor;\n\nconst UIStrings = {\n  /**\n  *@description Text in Color Swatch Popover Icon of the Elements panel\n  */\n  shiftClickToChangeColorFormat: 'Shift + Click to change color format.',\n  /**\n  *@description Swatch icon element title in Color Swatch Popover Icon of the Elements panel\n  *@example {Shift + Click to change color format.} PH1\n  */\n  openColorPickerS: 'Open color picker. {PH1}',\n  /**\n  *@description The warning text shown in Elements panel when font-variation-settings don't match allowed values\n  *@example {wdth} PH1\n  *@example {100} PH2\n  *@example {10} PH3\n  *@example {20} PH4\n  *@example {Arial} PH5\n  */\n  valueForSettingSSIsOutsideThe:\n      'Value for setting “{PH1}” {PH2} is outside the supported range [{PH3}, {PH4}] for font-family “{PH5}”.',\n  /**\n  *@description Context menu item for style property in edit mode\n  */\n  togglePropertyAndContinueEditing: 'Toggle property and continue editing',\n  /**\n  *@description Context menu item for style property in edit mode\n  */\n  revealInSourcesPanel: 'Reveal in Sources panel',\n  /**\n  *@description A context menu item in Styles panel to copy CSS declaration\n  */\n  copyDeclaration: 'Copy declaration',\n  /**\n  *@description A context menu item in Styles panel to copy CSS property\n  */\n  copyProperty: 'Copy property',\n  /**\n  *@description A context menu item in the Watch Expressions Sidebar Pane of the Sources panel and Network pane request.\n  */\n  copyValue: 'Copy value',\n  /**\n  *@description A context menu item in Styles panel to copy CSS rule\n  */\n  copyRule: 'Copy rule',\n  /**\n  *@description A context menu item in Styles panel to copy all CSS declarations\n  */\n  copyAllDeclarations: 'Copy all declarations',\n  /**\n  *@description A context menu item in Styles panel to view the computed CSS property value.\n  */\n  viewComputedValue: 'View computed value',\n  /**\n  * @description Title of the button that opens the flexbox editor in the Styles panel.\n  */\n  flexboxEditorButton: 'Open `flexbox` editor',\n  /**\n  * @description Title of the button that opens the CSS Grid editor in the Styles panel.\n  */\n  gridEditorButton: 'Open `grid` editor',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/elements/StylePropertyTreeElement.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst parentMap = new WeakMap<StylesSidebarPane, StylePropertyTreeElement>();\n\nexport class StylePropertyTreeElement extends UI.TreeOutline.TreeElement {\n  _style: SDK.CSSStyleDeclaration.CSSStyleDeclaration;\n  _matchedStyles: SDK.CSSMatchedStyles.CSSMatchedStyles;\n  property: SDK.CSSProperty.CSSProperty;\n  _inherited: boolean;\n  _overloaded: boolean;\n  _parentPane: StylesSidebarPane;\n  isShorthand: boolean;\n  _applyStyleThrottler: Common.Throttler.Throttler;\n  _newProperty: boolean;\n  _expandedDueToFilter: boolean;\n  valueElement: HTMLElement|null;\n  nameElement: HTMLElement|null;\n  _expandElement: UI.Icon.Icon|null;\n  _originalPropertyText: string;\n  _hasBeenEditedIncrementally: boolean;\n  _prompt: CSSPropertyPrompt|null;\n  _lastComputedValue: string|null;\n  _contextForTest!: Context|undefined;\n\n  constructor(\n      stylesPane: StylesSidebarPane, matchedStyles: SDK.CSSMatchedStyles.CSSMatchedStyles,\n      property: SDK.CSSProperty.CSSProperty, isShorthand: boolean, inherited: boolean, overloaded: boolean,\n      newProperty: boolean) {\n    // Pass an empty title, the title gets made later in onattach.\n    super('', isShorthand);\n    this._style = property.ownerStyle;\n    this._matchedStyles = matchedStyles;\n    this.property = property;\n    this._inherited = inherited;\n    this._overloaded = overloaded;\n    this.selectable = false;\n    this._parentPane = stylesPane;\n    this.isShorthand = isShorthand;\n    this._applyStyleThrottler = new Common.Throttler.Throttler(0);\n    this._newProperty = newProperty;\n    if (this._newProperty) {\n      this.listItemElement.textContent = '';\n    }\n    this._expandedDueToFilter = false;\n    this.valueElement = null;\n    this.nameElement = null;\n    this._expandElement = null;\n    this._originalPropertyText = '';\n    this._hasBeenEditedIncrementally = false;\n    this._prompt = null;\n\n    this._lastComputedValue = null;\n  }\n\n  matchedStyles(): SDK.CSSMatchedStyles.CSSMatchedStyles {\n    return this._matchedStyles;\n  }\n\n  _editable(): boolean {\n    return Boolean(this._style.styleSheetId && this._style.range);\n  }\n\n  inherited(): boolean {\n    return this._inherited;\n  }\n\n  overloaded(): boolean {\n    return this._overloaded;\n  }\n\n  setOverloaded(x: boolean): void {\n    if (x === this._overloaded) {\n      return;\n    }\n    this._overloaded = x;\n    this._updateState();\n  }\n\n  get name(): string {\n    return this.property.name;\n  }\n\n  get value(): string {\n    return this.property.value;\n  }\n\n  updateFilter(): boolean {\n    const regex = this._parentPane.filterRegex();\n    const matches = regex !== null && (regex.test(this.property.name) || regex.test(this.property.value));\n    this.listItemElement.classList.toggle('filter-match', matches);\n\n    this.onpopulate();\n    let hasMatchingChildren = false;\n\n    for (let i = 0; i < this.childCount(); ++i) {\n      const child = (this.childAt(i) as StylePropertyTreeElement | null);\n      if (!child || (child && !child.updateFilter())) {\n        continue;\n      }\n      hasMatchingChildren = true;\n    }\n\n    if (!regex) {\n      if (this._expandedDueToFilter) {\n        this.collapse();\n      }\n      this._expandedDueToFilter = false;\n    } else if (hasMatchingChildren && !this.expanded) {\n      this.expand();\n      this._expandedDueToFilter = true;\n    } else if (!hasMatchingChildren && this.expanded && this._expandedDueToFilter) {\n      this.collapse();\n      this._expandedDueToFilter = false;\n    }\n    return matches;\n  }\n\n  _processColor(text: string, valueChild?: Node|null): Node {\n    const useUserSettingFormat = this._editable();\n    const shiftClickMessage = i18nString(UIStrings.shiftClickToChangeColorFormat);\n    const tooltip =\n        this._editable() ? i18nString(UIStrings.openColorPickerS, {PH1: shiftClickMessage}) : shiftClickMessage;\n\n    const swatch = new InlineEditor.ColorSwatch.ColorSwatch();\n    swatch.renderColor(text, useUserSettingFormat, tooltip);\n\n    if (!valueChild) {\n      valueChild = swatch.createChild('span');\n      const color = swatch.getColor();\n      valueChild.textContent = color ? color.asString(swatch.getFormat()) : text;\n    }\n    swatch.appendChild(valueChild);\n\n    const onFormatchanged = (event: Event): void => {\n      // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const {data} = (event as any);\n      swatch.firstElementChild && swatch.firstElementChild.remove();\n      swatch.createChild('span').textContent = data.text;\n    };\n\n    swatch.addEventListener('formatchanged', onFormatchanged);\n\n    if (this._editable()) {\n      this._addColorContrastInfo(swatch);\n    }\n\n    return swatch;\n  }\n\n  _processVar(text: string): Node {\n    const computedSingleValue = this._matchedStyles.computeSingleVariableValue(this._style, text);\n    if (!computedSingleValue) {\n      return document.createTextNode(text);\n    }\n\n    const {computedValue, fromFallback} = computedSingleValue;\n\n    const varSwatch = new InlineEditor.CSSVarSwatch.CSSVarSwatch();\n    UI.UIUtils.createTextChild(varSwatch, text);\n    varSwatch.data = {text, computedValue, fromFallback, onLinkActivate: this._handleVarDefinitionActivate.bind(this)};\n\n    if (!computedValue || !Common.Color.Color.parse(computedValue)) {\n      return varSwatch;\n    }\n\n    return this._processColor(computedValue, varSwatch);\n  }\n\n  _handleVarDefinitionActivate(variableName: string): void {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.CustomPropertyLinkClicked);\n    this._parentPane.jumpToProperty(variableName);\n  }\n\n  async _addColorContrastInfo(swatch: InlineEditor.ColorSwatch.ColorSwatch): Promise<void> {\n    const swatchPopoverHelper = this._parentPane.swatchPopoverHelper();\n    const swatchIcon = new ColorSwatchPopoverIcon(this, swatchPopoverHelper, swatch);\n    if (this.property.name !== 'color' || !this._parentPane.cssModel() || !this.node()) {\n      return;\n    }\n    const cssModel = this._parentPane.cssModel();\n    const node = this.node();\n    if (cssModel && node && typeof node.id !== 'undefined') {\n      const contrastInfo = new ColorPicker.ContrastInfo.ContrastInfo(await cssModel.backgroundColorsPromise(node.id));\n      swatchIcon.setContrastInfo(contrastInfo);\n    }\n  }\n\n  renderedPropertyText(): string {\n    if (!this.nameElement || !this.valueElement) {\n      return '';\n    }\n    return this.nameElement.textContent + ': ' + this.valueElement.textContent;\n  }\n\n  _processBezier(text: string): Node {\n    if (!this._editable() || !UI.Geometry.CubicBezier.parse(text)) {\n      return document.createTextNode(text);\n    }\n    const swatchPopoverHelper = this._parentPane.swatchPopoverHelper();\n    const swatch = InlineEditor.Swatches.BezierSwatch.create();\n    swatch.setBezierText(text);\n    new BezierPopoverIcon(this, swatchPopoverHelper, swatch);\n    return swatch;\n  }\n\n  _processFont(text: string): Node {\n    const section = this.section();\n    if (section) {\n      section.registerFontProperty(this);\n    }\n    return document.createTextNode(text);\n  }\n\n  _processShadow(propertyValue: string, propertyName: string): Node {\n    if (!this._editable()) {\n      return document.createTextNode(propertyValue);\n    }\n    let shadows;\n    if (propertyName === 'text-shadow') {\n      shadows = InlineEditor.CSSShadowModel.CSSShadowModel.parseTextShadow(propertyValue);\n    } else {\n      shadows = InlineEditor.CSSShadowModel.CSSShadowModel.parseBoxShadow(propertyValue);\n    }\n    if (!shadows.length) {\n      return document.createTextNode(propertyValue);\n    }\n    const container = document.createDocumentFragment();\n    const swatchPopoverHelper = this._parentPane.swatchPopoverHelper();\n    for (let i = 0; i < shadows.length; i++) {\n      if (i !== 0) {\n        container.appendChild(document.createTextNode(', '));\n      }  // Add back commas and spaces between each shadow.\n      // TODO(flandy): editing the property value should use the original value with all spaces.\n      const cssShadowSwatch = InlineEditor.Swatches.CSSShadowSwatch.create();\n      cssShadowSwatch.setCSSShadow(shadows[i]);\n      new ShadowSwatchPopoverHelper(this, swatchPopoverHelper, cssShadowSwatch);\n      const colorSwatch = cssShadowSwatch.colorSwatch();\n      if (colorSwatch) {\n        new ColorSwatchPopoverIcon(this, swatchPopoverHelper, colorSwatch);\n      }\n      container.appendChild(cssShadowSwatch);\n    }\n    return container;\n  }\n\n  _processGrid(propertyValue: string, _propertyName: string): Node {\n    const splitResult =\n        TextUtils.TextUtils.Utils.splitStringByRegexes(propertyValue, [SDK.CSSMetadata.GridAreaRowRegex]);\n    if (splitResult.length <= 1) {\n      return document.createTextNode(propertyValue);\n    }\n\n    const indent = Common.Settings.Settings.instance().moduleSetting('textEditorIndent').get();\n    const container = document.createDocumentFragment();\n    for (const result of splitResult) {\n      const value = result.value.trim();\n      const content = UI.Fragment.html`<br /><span class='styles-clipboard-only'>${indent.repeat(2)}</span>${value}`;\n      container.appendChild(content);\n    }\n    return container;\n  }\n\n  _processAngle(angleText: string): Text|InlineEditor.CSSAngle.CSSAngle {\n    if (!this._editable()) {\n      return document.createTextNode(angleText);\n    }\n    const cssAngle = new InlineEditor.CSSAngle.CSSAngle();\n    const valueElement = document.createElement('span');\n    valueElement.textContent = angleText;\n    const computedPropertyValue = this._matchedStyles.computeValue(this.property.ownerStyle, this.property.value) || '';\n    cssAngle.data = {\n      propertyName: this.property.name,\n      propertyValue: computedPropertyValue,\n      angleText,\n      containingPane: (this._parentPane.element.enclosingNodeOrSelfWithClass('style-panes-wrapper') as HTMLElement),\n    };\n    cssAngle.append(valueElement);\n\n    const popoverToggled = (event: Event): void => {\n      const section = this.section();\n      if (!section) {\n        return;\n      }\n\n      // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const {data} = (event as any);\n      if (data.open) {\n        this._parentPane.hideAllPopovers();\n        this._parentPane.activeCSSAngle = cssAngle;\n      }\n\n      section.element.classList.toggle('has-open-popover', data.open);\n      this._parentPane.setEditingStyle(data.open);\n    };\n\n    const valueChanged = async(event: Event): Promise<void> => {\n      // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const {data} = (event as any);\n\n      valueElement.textContent = data.value;\n      await this.applyStyleText(this.renderedPropertyText(), false);\n      const computedPropertyValue =\n          this._matchedStyles.computeValue(this.property.ownerStyle, this.property.value) || '';\n      cssAngle.updateProperty(this.property.name, computedPropertyValue);\n    };\n\n    const unitChanged = async(event: Event): Promise<void> => {\n      // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const {data} = (event as any);\n      valueElement.textContent = data.value;\n    };\n\n    cssAngle.addEventListener('popovertoggled', popoverToggled);\n    cssAngle.addEventListener('valuechanged', valueChanged);\n    cssAngle.addEventListener('unitchanged', unitChanged);\n\n    return cssAngle;\n  }\n\n  _updateState(): void {\n    if (!this.listItemElement) {\n      return;\n    }\n\n    if (this._style.isPropertyImplicit(this.name)) {\n      this.listItemElement.classList.add('implicit');\n    } else {\n      this.listItemElement.classList.remove('implicit');\n    }\n\n    const hasIgnorableError = !this.property.parsedOk && StylesSidebarPane.ignoreErrorsForProperty(this.property);\n    if (hasIgnorableError) {\n      this.listItemElement.classList.add('has-ignorable-error');\n    } else {\n      this.listItemElement.classList.remove('has-ignorable-error');\n    }\n\n    if (this.inherited()) {\n      this.listItemElement.classList.add('inherited');\n    } else {\n      this.listItemElement.classList.remove('inherited');\n    }\n\n    if (this.overloaded()) {\n      this.listItemElement.classList.add('overloaded');\n    } else {\n      this.listItemElement.classList.remove('overloaded');\n    }\n\n    if (this.property.disabled) {\n      this.listItemElement.classList.add('disabled');\n    } else {\n      this.listItemElement.classList.remove('disabled');\n    }\n  }\n\n  node(): SDK.DOMModel.DOMNode|null {\n    return this._parentPane.node();\n  }\n\n  parentPane(): StylesSidebarPane {\n    return this._parentPane;\n  }\n\n  section(): StylePropertiesSection|null {\n    if (!this.treeOutline) {\n      return null;\n    }\n    // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (this.treeOutline as any).section;\n  }\n\n  _updatePane(): void {\n    const section = this.section();\n    if (section) {\n      section.refreshUpdate(this);\n    }\n  }\n\n  async _toggleDisabled(disabled: boolean): Promise<void> {\n    const oldStyleRange = this._style.range;\n    if (!oldStyleRange) {\n      return;\n    }\n\n    this._parentPane.setUserOperation(true);\n    const success = await this.property.setDisabled(disabled);\n    this._parentPane.setUserOperation(false);\n\n    if (!success) {\n      return;\n    }\n    this._matchedStyles.resetActiveProperties();\n    this._updatePane();\n    this.styleTextAppliedForTest();\n  }\n\n  async onpopulate(): Promise<void> {\n    // Only populate once and if this property is a shorthand.\n    if (this.childCount() || !this.isShorthand) {\n      return;\n    }\n\n    const longhandProperties = this._style.longhandProperties(this.name);\n    const leadingProperties = this._style.leadingProperties();\n\n    for (let i = 0; i < longhandProperties.length; ++i) {\n      const name = longhandProperties[i].name;\n      let inherited = false;\n      let overloaded = false;\n\n      const section = this.section();\n      if (section) {\n        inherited = section.isPropertyInherited(name);\n        overloaded =\n            this._matchedStyles.propertyState(longhandProperties[i]) === SDK.CSSMatchedStyles.PropertyState.Overloaded;\n      }\n\n      const leadingProperty = leadingProperties.find(property => property.name === name && property.activeInStyle());\n      if (leadingProperty) {\n        overloaded = true;\n      }\n\n      const item = new StylePropertyTreeElement(\n          this._parentPane, this._matchedStyles, longhandProperties[i], false, inherited, overloaded, false);\n      this.appendChild(item);\n    }\n  }\n\n  onattach(): void {\n    this.updateTitle();\n\n    this.listItemElement.addEventListener('mousedown', event => {\n      if (event.button === 0) {\n        parentMap.set(this._parentPane, this);\n      }\n    }, false);\n    this.listItemElement.addEventListener('mouseup', this._mouseUp.bind(this));\n    this.listItemElement.addEventListener('click', event => {\n      if (!event.target) {\n        return;\n      }\n\n      const node = (event.target as HTMLElement);\n      if (!node.hasSelection() && event.target !== this.listItemElement) {\n        event.consume(true);\n      }\n    });\n\n    // Copy context menu.\n    this.listItemElement.addEventListener('contextmenu', this._handleCopyContextMenuEvent.bind(this));\n  }\n\n  onexpand(): void {\n    this._updateExpandElement();\n  }\n\n  oncollapse(): void {\n    this._updateExpandElement();\n  }\n\n  _updateExpandElement(): void {\n    if (!this._expandElement) {\n      return;\n    }\n    if (this.expanded) {\n      this._expandElement.setIconType('smallicon-triangle-down');\n    } else {\n      this._expandElement.setIconType('smallicon-triangle-right');\n    }\n  }\n\n  updateTitleIfComputedValueChanged(): void {\n    const computedValue = this._matchedStyles.computeValue(this.property.ownerStyle, this.property.value);\n    if (computedValue === this._lastComputedValue) {\n      return;\n    }\n    this._lastComputedValue = computedValue;\n    this._innerUpdateTitle();\n  }\n\n  updateTitle(): void {\n    this._lastComputedValue = this._matchedStyles.computeValue(this.property.ownerStyle, this.property.value);\n    this._innerUpdateTitle();\n  }\n\n  _innerUpdateTitle(): void {\n    this._updateState();\n    if (this.isExpandable()) {\n      this._expandElement = UI.Icon.Icon.create('smallicon-triangle-right', 'expand-icon');\n    } else {\n      this._expandElement = null;\n    }\n\n    const propertyRenderer =\n        new StylesSidebarPropertyRenderer(this._style.parentRule, this.node(), this.name, this.value);\n    if (this.property.parsedOk) {\n      propertyRenderer.setVarHandler(this._processVar.bind(this));\n      propertyRenderer.setColorHandler(this._processColor.bind(this));\n      propertyRenderer.setBezierHandler(this._processBezier.bind(this));\n      propertyRenderer.setFontHandler(this._processFont.bind(this));\n      propertyRenderer.setShadowHandler(this._processShadow.bind(this));\n      propertyRenderer.setGridHandler(this._processGrid.bind(this));\n      propertyRenderer.setAngleHandler(this._processAngle.bind(this));\n    }\n\n    this.listItemElement.removeChildren();\n    this.nameElement = (propertyRenderer.renderName() as HTMLElement);\n    if (this.property.name.startsWith('--') && this.nameElement) {\n      UI.Tooltip.Tooltip.install(\n          this.nameElement, this._matchedStyles.computeCSSVariable(this._style, this.property.name) || '');\n    }\n    this.valueElement = (propertyRenderer.renderValue() as HTMLElement);\n    if (!this.treeOutline) {\n      return;\n    }\n\n    const indent = Common.Settings.Settings.instance().moduleSetting('textEditorIndent').get();\n    UI.UIUtils.createTextChild(\n        this.listItemElement.createChild('span', 'styles-clipboard-only'),\n        indent + (this.property.disabled ? '/* ' : ''));\n    if (this.nameElement) {\n      this.listItemElement.appendChild(this.nameElement);\n    }\n    if (this.valueElement) {\n      const lineBreakValue =\n          this.valueElement.firstElementChild && this.valueElement.firstElementChild.tagName === 'BR';\n      const separator = lineBreakValue ? ':' : ': ';\n      this.listItemElement.createChild('span', 'styles-name-value-separator').textContent = separator;\n      if (this._expandElement) {\n        this.listItemElement.appendChild(this._expandElement);\n      }\n      this.listItemElement.appendChild(this.valueElement);\n      UI.UIUtils.createTextChild(this.listItemElement, ';');\n      if (this.property.disabled) {\n        UI.UIUtils.createTextChild(this.listItemElement.createChild('span', 'styles-clipboard-only'), ' */');\n      }\n    }\n\n    const section = this.section();\n    if (this.valueElement && section && section.editable && this.property.name === 'display') {\n      const propertyValue = this.property.trimmedValueWithoutImportant();\n      if (propertyValue === 'flex' || propertyValue === 'inline-flex') {\n        this.listItemElement.appendChild(StyleEditorWidget.createTriggerButton(\n            this._parentPane, section, FlexboxEditor, i18nString(UIStrings.flexboxEditorButton)));\n      }\n      if (propertyValue === 'grid' || propertyValue === 'inline-grid') {\n        this.listItemElement.appendChild(StyleEditorWidget.createTriggerButton(\n            this._parentPane, section, GridEditor, i18nString(UIStrings.gridEditorButton)));\n      }\n    }\n\n    if (!this.property.parsedOk) {\n      // Avoid having longhands under an invalid shorthand.\n      this.listItemElement.classList.add('not-parsed-ok');\n\n      // Add a separate exclamation mark IMG element with a tooltip.\n      this.listItemElement.insertBefore(\n          StylesSidebarPane.createExclamationMark(this.property, null), this.listItemElement.firstChild);\n    } else {\n      this._updateFontVariationSettingsWarning();\n    }\n\n    if (!this.property.activeInStyle()) {\n      this.listItemElement.classList.add('inactive');\n    }\n    this.updateFilter();\n\n    if (this.property.parsedOk && this.section() && this.parent && this.parent.root) {\n      const enabledCheckboxElement = document.createElement('input');\n      enabledCheckboxElement.className = 'enabled-button';\n      enabledCheckboxElement.type = 'checkbox';\n      enabledCheckboxElement.checked = !this.property.disabled;\n      enabledCheckboxElement.addEventListener('mousedown', event => event.consume(), false);\n      enabledCheckboxElement.addEventListener('click', event => {\n        this._toggleDisabled(!this.property.disabled);\n        event.consume();\n      }, false);\n      if (this.nameElement && this.valueElement) {\n        UI.ARIAUtils.setAccessibleName(\n            enabledCheckboxElement, `${this.nameElement.textContent} ${this.valueElement.textContent}`);\n      }\n      this.listItemElement.insertBefore(enabledCheckboxElement, this.listItemElement.firstChild);\n    }\n  }\n\n  async _updateFontVariationSettingsWarning(): Promise<void> {\n    if (this.property.name !== 'font-variation-settings') {\n      return;\n    }\n    const value = this.property.value;\n    const cssModel = this._parentPane.cssModel();\n    if (!cssModel) {\n      return;\n    }\n    const computedStyleModel = this._parentPane.computedStyleModel();\n    const styles = await computedStyleModel.fetchComputedStyle();\n    if (!styles) {\n      return;\n    }\n    const fontFamily = styles.computedStyle.get('font-family');\n    if (!fontFamily) {\n      return;\n    }\n    const fontFamilies = new Set<string>(SDK.CSSPropertyParser.parseFontFamily(fontFamily));\n    const matchingFontFaces = cssModel.fontFaces().filter(f => fontFamilies.has(f.getFontFamily()));\n    const variationSettings = SDK.CSSPropertyParser.parseFontVariationSettings(value);\n    const warnings = [];\n    for (const elementSetting of variationSettings) {\n      for (const font of matchingFontFaces) {\n        const fontSetting = font.getVariationAxisByTag(elementSetting.tag);\n        if (!fontSetting) {\n          continue;\n        }\n        if (elementSetting.value < fontSetting.minValue || elementSetting.value > fontSetting.maxValue) {\n          warnings.push(i18nString(UIStrings.valueForSettingSSIsOutsideThe, {\n            PH1: elementSetting.tag,\n            PH2: elementSetting.value,\n            PH3: fontSetting.minValue,\n            PH4: fontSetting.maxValue,\n            PH5: font.getFontFamily(),\n          }));\n        }\n      }\n    }\n\n    if (!warnings.length) {\n      return;\n    }\n    this.listItemElement.classList.add('has-warning');\n    this.listItemElement.insertBefore(\n        StylesSidebarPane.createExclamationMark(this.property, warnings.join(' ')), this.listItemElement.firstChild);\n  }\n\n  _mouseUp(event: Event): void {\n    const activeTreeElement = parentMap.get(this._parentPane);\n    parentMap.delete(this._parentPane);\n    if (!activeTreeElement) {\n      return;\n    }\n    if (this.listItemElement.hasSelection()) {\n      return;\n    }\n    if (UI.UIUtils.isBeingEdited((event.target as Node))) {\n      return;\n    }\n\n    event.consume(true);\n\n    if (event.target === this.listItemElement) {\n      return;\n    }\n\n    const section = this.section();\n    if (UI.KeyboardShortcut.KeyboardShortcut.eventHasCtrlOrMeta((event as MouseEvent)) && section &&\n        section.navigable) {\n      this._navigateToSource((event.target as Element));\n      return;\n    }\n    this.startEditing((event.target as Element));\n  }\n\n  _handleContextMenuEvent(context: Context, event: Event): void {\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    if (this.property.parsedOk && this.section() && this.parent && this.parent.root) {\n      contextMenu.defaultSection().appendCheckboxItem(\n          i18nString(UIStrings.togglePropertyAndContinueEditing), async () => {\n            const sectionIndex = this._parentPane.focusedSectionIndex();\n            if (this.treeOutline) {\n              const propertyIndex = this.treeOutline.rootElement().indexOfChild(this);\n              // order matters here: this.editingCancelled may invalidate this.treeOutline.\n              this.editingCancelled(null, context);\n              await this._toggleDisabled(!this.property.disabled);\n              event.consume();\n              this._parentPane.continueEditingElement(sectionIndex, propertyIndex);\n            }\n          }, !this.property.disabled);\n    }\n    const revealCallback = this._navigateToSource.bind(this) as () => void;\n    contextMenu.defaultSection().appendItem(i18nString(UIStrings.revealInSourcesPanel), revealCallback);\n    contextMenu.show();\n  }\n\n  _handleCopyContextMenuEvent(event: Event): void {\n    const target = (event.target as Element | null);\n\n    if (!target) {\n      return;\n    }\n\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    contextMenu.clipboardSection().appendItem(i18nString(UIStrings.copyDeclaration), () => {\n      const propertyText = `${this.property.name}: ${this.property.value};`;\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(propertyText);\n    });\n\n    contextMenu.clipboardSection().appendItem(i18nString(UIStrings.copyProperty), () => {\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(this.property.name);\n    });\n\n    contextMenu.clipboardSection().appendItem(i18nString(UIStrings.copyValue), () => {\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(this.property.value);\n    });\n\n    contextMenu.defaultSection().appendItem(i18nString(UIStrings.copyRule), () => {\n      const section = (this.section() as StylePropertiesSection);\n      const ruleText = StylesSidebarPane.formatLeadingProperties(section).ruleText;\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(ruleText);\n    });\n\n    contextMenu.defaultSection().appendItem(i18nString(UIStrings.copyAllDeclarations), () => {\n      const section = (this.section() as StylePropertiesSection);\n      const allDeclarationText = StylesSidebarPane.formatLeadingProperties(section).allDeclarationText;\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(allDeclarationText);\n    });\n\n    contextMenu.defaultSection().appendItem(i18nString(UIStrings.viewComputedValue), () => {\n      this._viewComputedValue();\n    });\n\n    contextMenu.show();\n  }\n\n  async _viewComputedValue(): Promise<void> {\n    const computedStyleWidget = ElementsPanel.instance().getComputedStyleWidget();\n\n    if (!computedStyleWidget.isShowing()) {\n      await UI.ViewManager.ViewManager.instance().showView('Computed');\n    }\n\n    let propertyNamePattern = '';\n    if (this.isShorthand) {\n      propertyNamePattern = '^' + this.property.name + '-';\n    } else {\n      propertyNamePattern = '^' + this.property.name + '$';\n    }\n    const regex = new RegExp(propertyNamePattern, 'i');\n    computedStyleWidget.filterComputedStyles(regex);\n\n    const filterInput = (computedStyleWidget.input as HTMLInputElement);\n    filterInput.value = this.property.name;\n    filterInput.focus();\n  }\n\n  _navigateToSource(element: Element, omitFocus?: boolean): void {\n    const section = this.section();\n    if (!section || !section.navigable) {\n      return;\n    }\n    const propertyNameClicked = element === this.nameElement;\n    const uiLocation = Bindings.CSSWorkspaceBinding.CSSWorkspaceBinding.instance().propertyUILocation(\n        this.property, propertyNameClicked);\n    if (uiLocation) {\n      Common.Revealer.reveal(uiLocation, omitFocus);\n    }\n  }\n\n  startEditing(selectElement?: Element|null): void {\n    // FIXME: we don't allow editing of longhand properties under a shorthand right now.\n    if (this.parent instanceof StylePropertyTreeElement && this.parent.isShorthand) {\n      return;\n    }\n\n    if (this._expandElement && selectElement === this._expandElement) {\n      return;\n    }\n\n    const section = this.section();\n    if (section && !section.editable) {\n      return;\n    }\n\n    if (selectElement) {\n      selectElement = selectElement.enclosingNodeOrSelfWithClass('webkit-css-property') ||\n          selectElement.enclosingNodeOrSelfWithClass('value');\n    }\n    if (!selectElement) {\n      selectElement = this.nameElement;\n    }\n\n    if (UI.UIUtils.isBeingEdited(selectElement)) {\n      return;\n    }\n\n    const isEditingName = selectElement === this.nameElement;\n    if (!isEditingName && this.valueElement) {\n      if (SDK.CSSMetadata.cssMetadata().isGridAreaDefiningProperty(this.name)) {\n        this.valueElement.textContent = restoreGridIndents(this.value);\n      }\n      this.valueElement.textContent = restoreURLs(this.valueElement.textContent || '', this.value);\n    }\n\n    function restoreGridIndents(value: string): string {\n      const splitResult = TextUtils.TextUtils.Utils.splitStringByRegexes(value, [SDK.CSSMetadata.GridAreaRowRegex]);\n      return splitResult.map(result => result.value.trim()).join('\\n');\n    }\n\n    function restoreURLs(fieldValue: string, modelValue: string): string {\n      const splitFieldValue = fieldValue.split(SDK.CSSMetadata.URLRegex);\n      if (splitFieldValue.length === 1) {\n        return fieldValue;\n      }\n      const modelUrlRegex = new RegExp(SDK.CSSMetadata.URLRegex);\n      for (let i = 1; i < splitFieldValue.length; i += 2) {\n        const match = modelUrlRegex.exec(modelValue);\n        if (match) {\n          splitFieldValue[i] = match[0];\n        }\n      }\n      return splitFieldValue.join('');\n    }\n\n    const previousContent = selectElement ? (selectElement.textContent || '') : '';\n\n    const context: Context = {\n      expanded: this.expanded,\n      hasChildren: this.isExpandable(),\n      isEditingName: isEditingName,\n      originalProperty: this.property,\n      previousContent: previousContent,\n      originalName: undefined,\n      originalValue: undefined,\n    };\n    this._contextForTest = context;\n\n    // Lie about our children to prevent expanding on double click and to collapse shorthands.\n    this.setExpandable(false);\n\n    if (selectElement) {\n      if (selectElement.parentElement) {\n        selectElement.parentElement.classList.add('child-editing');\n      }\n      selectElement.textContent = selectElement.textContent;  // remove color swatch and the like\n    }\n\n    function pasteHandler(this: StylePropertyTreeElement, context: Context, event: Event): void {\n      const clipboardEvent = (event as ClipboardEvent);\n      const clipboardData = clipboardEvent.clipboardData;\n      if (!clipboardData) {\n        return;\n      }\n\n      const data = clipboardData.getData('Text');\n      if (!data) {\n        return;\n      }\n      const colonIdx = data.indexOf(':');\n      if (colonIdx < 0) {\n        return;\n      }\n      const name = data.substring(0, colonIdx).trim();\n      const value = data.substring(colonIdx + 1).trim();\n\n      event.preventDefault();\n\n      if (typeof context.originalName === 'undefined') {\n        if (this.nameElement) {\n          context.originalName = this.nameElement.textContent || '';\n        }\n\n        if (this.valueElement) {\n          context.originalValue = this.valueElement.textContent || '';\n        }\n      }\n      this.property.name = name;\n      this.property.value = value;\n      if (this.nameElement) {\n        this.nameElement.textContent = name;\n        this.nameElement.normalize();\n      }\n\n      if (this.valueElement) {\n        this.valueElement.textContent = value;\n        this.valueElement.normalize();\n      }\n\n      const target = (event.target as HTMLElement);\n      this._editingCommitted(target.textContent || '', context, 'forward');\n    }\n\n    function blurListener(this: StylePropertyTreeElement, context: Context, event: Event): void {\n      const target = (event.target as HTMLElement);\n      let text: (string|null) = target.textContent;\n      if (!context.isEditingName) {\n        text = this.value || text;\n      }\n      this._editingCommitted(text || '', context, '');\n    }\n\n    this._originalPropertyText = this.property.propertyText || '';\n\n    this._parentPane.setEditingStyle(true, this);\n    if (selectElement && selectElement.parentElement) {\n      selectElement.parentElement.scrollIntoViewIfNeeded(false);\n    }\n\n    this._prompt = new CSSPropertyPrompt(this, isEditingName);\n    this._prompt.setAutocompletionTimeout(0);\n\n    this._prompt.addEventListener(UI.TextPrompt.Events.TextChanged, _event => {\n      this._applyFreeFlowStyleTextEdit(context);\n    });\n\n    const invalidString = this.property.getInvalidStringForInvalidProperty();\n    if (invalidString && selectElement) {\n      UI.ARIAUtils.alert(invalidString);\n    }\n\n    if (selectElement) {\n      const proxyElement = this._prompt.attachAndStartEditing(selectElement, blurListener.bind(this, context));\n      this._navigateToSource(selectElement, true);\n\n      proxyElement.addEventListener('keydown', this._editingNameValueKeyDown.bind(this, context), false);\n      proxyElement.addEventListener('keypress', this._editingNameValueKeyPress.bind(this, context), false);\n      if (isEditingName) {\n        proxyElement.addEventListener('paste', pasteHandler.bind(this, context), false);\n        proxyElement.addEventListener('contextmenu', this._handleContextMenuEvent.bind(this, context), false);\n      }\n\n      const componentSelection = selectElement.getComponentSelection();\n      if (componentSelection) {\n        componentSelection.selectAllChildren(selectElement);\n      }\n    }\n  }\n\n  _editingNameValueKeyDown(context: Context, event: Event): void {\n    if (event.handled) {\n      return;\n    }\n\n    const keyboardEvent = (event as KeyboardEvent);\n    const target = (keyboardEvent.target as HTMLElement);\n    let result;\n    if (keyboardEvent.key === 'Enter' && !keyboardEvent.shiftKey) {\n      result = 'forward';\n    } else if (keyboardEvent.keyCode === UI.KeyboardShortcut.Keys.Esc.code || keyboardEvent.key === 'Escape') {\n      result = 'cancel';\n    } else if (\n        !context.isEditingName && this._newProperty &&\n        keyboardEvent.keyCode === UI.KeyboardShortcut.Keys.Backspace.code) {\n      // For a new property, when Backspace is pressed at the beginning of new property value, move back to the property name.\n      const selection = target.getComponentSelection();\n      if (selection && selection.isCollapsed && !selection.focusOffset) {\n        event.preventDefault();\n        result = 'backward';\n      }\n    } else if (keyboardEvent.key === 'Tab') {\n      result = keyboardEvent.shiftKey ? 'backward' : 'forward';\n      event.preventDefault();\n    }\n\n    if (result) {\n      switch (result) {\n        case 'cancel':\n          this.editingCancelled(null, context);\n          break;\n        case 'forward':\n        case 'backward':\n          this._editingCommitted(target.textContent || '', context, result);\n          break;\n      }\n\n      event.consume();\n      return;\n    }\n  }\n\n  _editingNameValueKeyPress(context: Context, event: Event): void {\n    function shouldCommitValueSemicolon(text: string, cursorPosition: number): boolean {\n      // FIXME: should this account for semicolons inside comments?\n      let openQuote = '';\n      for (let i = 0; i < cursorPosition; ++i) {\n        const ch = text[i];\n        if (ch === '\\\\' && openQuote !== '') {\n          ++i;\n        }  // skip next character inside string\n        else if (!openQuote && (ch === '\"' || ch === '\\'')) {\n          openQuote = ch;\n        } else if (openQuote === ch) {\n          openQuote = '';\n        }\n      }\n      return !openQuote;\n    }\n\n    const keyboardEvent = (event as KeyboardEvent);\n    const target = (keyboardEvent.target as HTMLElement);\n    const keyChar = String.fromCharCode(keyboardEvent.charCode);\n    const selectionLeftOffset = target.selectionLeftOffset();\n    const isFieldInputTerminated =\n        (context.isEditingName ? keyChar === ':' :\n                                 keyChar === ';' && selectionLeftOffset !== null &&\n                 shouldCommitValueSemicolon(target.textContent || '', selectionLeftOffset));\n    if (isFieldInputTerminated) {\n      // Enter or colon (for name)/semicolon outside of string (for value).\n      event.consume(true);\n      this._editingCommitted(target.textContent || '', context, 'forward');\n      return;\n    }\n  }\n\n  async _applyFreeFlowStyleTextEdit(context: Context): Promise<void> {\n    if (!this._prompt || !this._parentPane.node()) {\n      return;\n    }\n\n    const enteredText = this._prompt.text();\n    if (context.isEditingName && enteredText.includes(':')) {\n      this._editingCommitted(enteredText, context, 'forward');\n      return;\n    }\n\n    const valueText = this._prompt.textWithCurrentSuggestion();\n    if (valueText.includes(';')) {\n      return;\n    }\n    // Prevent destructive side-effects during live-edit. crbug.com/433889\n    const parentNode = this._parentPane.node();\n    if (parentNode) {\n      const isPseudo = Boolean(parentNode.pseudoType());\n      if (isPseudo) {\n        if (this.name.toLowerCase() === 'content') {\n          return;\n        }\n        const lowerValueText = valueText.trim().toLowerCase();\n        if (lowerValueText.startsWith('content:') || lowerValueText === 'display: none') {\n          return;\n        }\n      }\n    }\n\n    if (context.isEditingName) {\n      if (valueText.includes(':')) {\n        await this.applyStyleText(valueText, false);\n      } else if (this._hasBeenEditedIncrementally) {\n        await this._applyOriginalStyle(context);\n      }\n    } else {\n      if (this.nameElement) {\n        await this.applyStyleText(`${this.nameElement.textContent}: ${valueText}`, false);\n      }\n    }\n  }\n\n  kickFreeFlowStyleEditForTest(): Promise<void> {\n    const context = this._contextForTest;\n    return this._applyFreeFlowStyleTextEdit((context as Context));\n  }\n\n  editingEnded(context: Context): void {\n    this.setExpandable(context.hasChildren);\n    if (context.expanded) {\n      this.expand();\n    }\n    const editedElement = context.isEditingName ? this.nameElement : this.valueElement;\n    // The proxyElement has been deleted, no need to remove listener.\n    if (editedElement && editedElement.parentElement) {\n      editedElement.parentElement.classList.remove('child-editing');\n    }\n\n    this._parentPane.setEditingStyle(false);\n  }\n\n  editingCancelled(element: Element|null, context: Context): void {\n    this._removePrompt();\n\n    if (this._hasBeenEditedIncrementally) {\n      this._applyOriginalStyle(context);\n    } else if (this._newProperty && this.treeOutline) {\n      this.treeOutline.removeChild(this);\n    }\n    this.updateTitle();\n\n    // This should happen last, as it clears the info necessary to restore the property value after [Page]Up/Down changes.\n    this.editingEnded(context);\n  }\n\n  async _applyOriginalStyle(context: Context): Promise<void> {\n    await this.applyStyleText(this._originalPropertyText, false, context.originalProperty);\n  }\n\n  _findSibling(moveDirection: string): StylePropertyTreeElement|null {\n    let target: (StylePropertyTreeElement|null)|this = this;\n    do {\n      const sibling: UI.TreeOutline.TreeElement|null =\n          moveDirection === 'forward' ? target.nextSibling : target.previousSibling;\n      target = sibling instanceof StylePropertyTreeElement ? sibling : null;\n    } while (target && target.inherited());\n\n    return target;\n  }\n\n  async _editingCommitted(userInput: string, context: Context, moveDirection: string): Promise<void> {\n    this._removePrompt();\n    this.editingEnded(context);\n    const isEditingName = context.isEditingName;\n    // If the underlying property has been ripped out, always assume that the value having been entered was\n    // a name-value pair and attempt to process it via the SDK.\n    if (!this.nameElement || !this.valueElement) {\n      return;\n    }\n\n    const nameElementValue = this.nameElement.textContent || '';\n    const nameValueEntered = (isEditingName && nameElementValue.includes(':')) || !this.property;\n\n    // Determine where to move to before making changes\n    let createNewProperty = false;\n    let moveToSelector = false;\n    const isDataPasted = typeof context.originalName !== 'undefined';\n    const isDirtyViaPaste = isDataPasted &&\n        (this.nameElement.textContent !== context.originalName ||\n         this.valueElement.textContent !== context.originalValue);\n    const isPropertySplitPaste =\n        isDataPasted && isEditingName && this.valueElement.textContent !== context.originalValue;\n    let moveTo: (StylePropertyTreeElement|null)|this = this;\n    const moveToOther = (isEditingName !== (moveDirection === 'forward'));\n    const abandonNewProperty = this._newProperty && !userInput && (moveToOther || isEditingName);\n    if (moveDirection === 'forward' && (!isEditingName || isPropertySplitPaste) ||\n        moveDirection === 'backward' && isEditingName) {\n      moveTo = moveTo._findSibling(moveDirection);\n      if (!moveTo) {\n        if (moveDirection === 'forward' && (!this._newProperty || userInput)) {\n          createNewProperty = true;\n        } else if (moveDirection === 'backward') {\n          moveToSelector = true;\n        }\n      }\n    }\n\n    // Make the Changes and trigger the moveToNextCallback after updating.\n    let moveToIndex = -1;\n    if (moveTo !== null && this.treeOutline) {\n      moveToIndex = this.treeOutline.rootElement().indexOfChild((moveTo as UI.TreeOutline.TreeElement));\n    }\n    const blankInput = Platform.StringUtilities.isWhitespace(userInput);\n    const shouldCommitNewProperty = this._newProperty &&\n        (isPropertySplitPaste || moveToOther || (!moveDirection && !isEditingName) || (isEditingName && blankInput) ||\n         nameValueEntered);\n    const section = (this.section() as StylePropertiesSection);\n    if (((userInput !== context.previousContent || isDirtyViaPaste) && !this._newProperty) || shouldCommitNewProperty) {\n      let propertyText;\n      if (nameValueEntered) {\n        propertyText = this.nameElement.textContent;\n      } else if (\n          blankInput ||\n          (this._newProperty && Platform.StringUtilities.isWhitespace(this.valueElement.textContent || ''))) {\n        propertyText = '';\n      } else {\n        if (isEditingName) {\n          propertyText = userInput + ': ' + this.property.value;\n        } else {\n          propertyText = this.property.name + ': ' + userInput;\n        }\n      }\n      await this.applyStyleText(propertyText || '', true);\n      moveToNextCallback.call(this, this._newProperty, !blankInput, section);\n    } else {\n      if (isEditingName) {\n        this.property.name = userInput;\n      } else {\n        this.property.value = userInput;\n      }\n      if (!isDataPasted && !this._newProperty) {\n        this.updateTitle();\n      }\n      moveToNextCallback.call(this, this._newProperty, false, section);\n    }\n\n    /**\n     * The Callback to start editing the next/previous property/selector.\n     */\n    function moveToNextCallback(\n        this: StylePropertyTreeElement, alreadyNew: boolean, valueChanged: boolean,\n        section: StylePropertiesSection): void {\n      if (!moveDirection) {\n        this._parentPane.resetFocus();\n        return;\n      }\n\n      // User just tabbed through without changes.\n      if (moveTo && moveTo.parent) {\n        moveTo.startEditing(!isEditingName ? moveTo.nameElement : moveTo.valueElement);\n        return;\n      }\n\n      // User has made a change then tabbed, wiping all the original treeElements.\n      // Recalculate the new treeElement for the same property we were going to edit next.\n      if (moveTo && !moveTo.parent) {\n        const rootElement = section.propertiesTreeOutline.rootElement();\n        if (moveDirection === 'forward' && blankInput && !isEditingName) {\n          --moveToIndex;\n        }\n        if (moveToIndex >= rootElement.childCount() && !this._newProperty) {\n          createNewProperty = true;\n        } else {\n          const treeElement =\n              (moveToIndex >= 0 ? rootElement.childAt(moveToIndex) : null) as StylePropertyTreeElement | null;\n          if (treeElement) {\n            let elementToEdit =\n                !isEditingName || isPropertySplitPaste ? treeElement.nameElement : treeElement.valueElement;\n            if (alreadyNew && blankInput) {\n              elementToEdit = moveDirection === 'forward' ? treeElement.nameElement : treeElement.valueElement;\n            }\n            treeElement.startEditing(elementToEdit);\n            return;\n          }\n          if (!alreadyNew) {\n            moveToSelector = true;\n          }\n        }\n      }\n\n      // Create a new attribute in this section (or move to next editable selector if possible).\n      if (createNewProperty) {\n        if (alreadyNew && !valueChanged && (isEditingName !== (moveDirection === 'backward'))) {\n          return;\n        }\n\n        section.addNewBlankProperty().startEditing();\n        return;\n      }\n\n      if (abandonNewProperty) {\n        moveTo = this._findSibling(moveDirection);\n        const sectionToEdit = (moveTo || moveDirection === 'backward') ? section : section.nextEditableSibling();\n        if (sectionToEdit) {\n          if (sectionToEdit.style().parentRule) {\n            sectionToEdit.startEditingSelector();\n          } else {\n            sectionToEdit.moveEditorFromSelector(moveDirection);\n          }\n        }\n        return;\n      }\n\n      if (moveToSelector) {\n        if (section.style().parentRule) {\n          section.startEditingSelector();\n        } else {\n          section.moveEditorFromSelector(moveDirection);\n        }\n      }\n    }\n  }\n\n  _removePrompt(): void {\n    // BUG 53242. This cannot go into editingEnded(), as it should always happen first for any editing outcome.\n    if (this._prompt) {\n      this._prompt.detach();\n      this._prompt = null;\n    }\n  }\n\n  styleTextAppliedForTest(): void {\n  }\n\n  applyStyleText(styleText: string, majorChange: boolean, property?: SDK.CSSProperty.CSSProperty|null): Promise<void> {\n    return this._applyStyleThrottler.schedule(this._innerApplyStyleText.bind(this, styleText, majorChange, property));\n  }\n\n  async _innerApplyStyleText(styleText: string, majorChange: boolean, property?: SDK.CSSProperty.CSSProperty|null):\n      Promise<void> {\n    // this.property might have been nulled at the end of the last _innerApplyStyleText\n    if (!this.treeOutline || !this.property) {\n      return;\n    }\n\n    const oldStyleRange = this._style.range;\n    if (!oldStyleRange) {\n      return;\n    }\n\n    const hasBeenEditedIncrementally = this._hasBeenEditedIncrementally;\n    styleText = styleText.replace(/[\\xA0\\t]/g, ' ').trim();  // Replace &nbsp; with whitespace.\n    if (!styleText.length && majorChange && this._newProperty && !hasBeenEditedIncrementally) {\n      // The user deleted everything and never applied a new property value via Up/Down scrolling/live editing, so remove the tree element and update.\n      this.parent && this.parent.removeChild(this);\n      return;\n    }\n\n    const currentNode = this._parentPane.node();\n    this._parentPane.setUserOperation(true);\n\n    // Append a \";\" if the new text does not end in \";\".\n    // FIXME: this does not handle trailing comments.\n    if (styleText.length && !/;\\s*$/.test(styleText)) {\n      styleText += ';';\n    }\n    const overwriteProperty = !this._newProperty || hasBeenEditedIncrementally;\n    let success: boolean = await this.property.setText(styleText, majorChange, overwriteProperty);\n    // Revert to the original text if applying the new text failed\n    if (hasBeenEditedIncrementally && majorChange && !success) {\n      majorChange = false;\n      success = await this.property.setText(this._originalPropertyText, majorChange, overwriteProperty);\n    }\n    this._parentPane.setUserOperation(false);\n\n    // TODO: using this.property.index to access its containing StyleDeclaration's property will result in\n    // off-by-1 errors when the containing StyleDeclaration's respective property has already been deleted.\n    // These referencing logic needs to be updated to be more robust.\n    const updatedProperty = property || this._style.propertyAt(this.property.index);\n    const isPropertyWithinBounds = this.property.index < this._style.allProperties().length;\n    if (!success || (!updatedProperty && isPropertyWithinBounds)) {\n      if (majorChange) {\n        // It did not apply, cancel editing.\n        if (this._newProperty) {\n          this.treeOutline.removeChild(this);\n        } else {\n          this.updateTitle();\n        }\n      }\n      this.styleTextAppliedForTest();\n      return;\n    }\n\n    this._matchedStyles.resetActiveProperties();\n    this._hasBeenEditedIncrementally = true;\n\n    // null check for updatedProperty before setting this.property as the code never expects this.property to be undefined or null.\n    // This occurs when deleting the last index of a StylePropertiesSection as this._style._allProperties array gets updated\n    // before we index it when setting the value for updatedProperty\n    const deleteProperty = majorChange && !styleText.length;\n    const section = this.section();\n    if (deleteProperty && section) {\n      section.resetToolbars();\n    } else if (!deleteProperty && updatedProperty) {\n      this.property = updatedProperty;\n    }\n\n    if (currentNode === this.node()) {\n      this._updatePane();\n    }\n\n    this.styleTextAppliedForTest();\n  }\n\n  ondblclick(): boolean {\n    return true;  // handled\n  }\n\n  isEventWithinDisclosureTriangle(event: Event): boolean {\n    return event.target === this._expandElement;\n  }\n}\nexport interface Context {\n  expanded: boolean;\n  hasChildren: boolean;\n  isEditingName: boolean;\n  originalProperty?: SDK.CSSProperty.CSSProperty;\n  originalName?: string;\n  originalValue?: string;\n  previousContent: string;\n}\n"]}