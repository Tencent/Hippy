{"version":3,"file":"SearchSourcesView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/sources/SearchSourcesView.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,uDAAuD;AAEvD,OAAO,KAAK,EAAE,MAAM,2BAA2B,CAAC,CAAE,qCAAqC;AACvF,OAAO,KAAK,MAAM,MAAM,qBAAqB,CAAC;AAE9C,OAAO,EAAC,kBAAkB,EAAC,MAAM,yBAAyB,CAAC;AAE3D,IAAI,yBAA4C,CAAC;AAEjD,MAAM,OAAO,iBAAkB,SAAQ,MAAM,CAAC,UAAU,CAAC,UAAU;IACjE;QACE,KAAK,CAAC,SAAS,CAAC,CAAC;IACnB,CAAC;IAED,MAAM,CAAC,QAAQ;QACb,IAAI,CAAC,yBAAyB,EAAE;YAC9B,yBAAyB,GAAG,IAAI,iBAAiB,EAAE,CAAC;SACrD;QACD,OAAO,yBAAyB,CAAC;IACnC,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,KAAa,EAAE,iBAA2B;QAChE,MAAM,IAAI,GAAI,EAAE,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,4BAA4B,CAAkB,CAAC;QACxG,oEAAoE;QACpE,8BAA8B;QAC9B,oEAAoE;QACpE,8DAA8D;QAC9D,MAAM,QAAQ,GAAI,MAAM,EAAE,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,eAAe,CAAC,aAAa,CAAS,CAAC;QACrG,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,UAAU,CAAE,IAAqB,CAAC,CAAC;QAC/E,MAAM,MAAM,GAAI,MAAM,IAAI,CAAC,MAAM,EAAmC,CAAC;QACrE,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,iBAAiB,CAAC,CAAC,CAAC;QACjD,OAAO,MAAM,CAAC;IAChB,CAAC;IAED,WAAW;QACT,OAAO,IAAI,kBAAkB,EAAE,CAAC;IAClC,CAAC;CACF;AAED,IAAI,sBAAsC,CAAC;AAE3C,MAAM,OAAO,cAAc;IACzB,MAAM,CAAC,QAAQ,CAAC,OAEF,EAAC,QAAQ,EAAE,IAAI,EAAC;QAC5B,MAAM,EAAC,QAAQ,EAAC,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,sBAAsB,IAAI,QAAQ,EAAE;YACvC,sBAAsB,GAAG,IAAI,cAAc,EAAE,CAAC;SAC/C;QAED,OAAO,sBAAsB,CAAC;IAChC,CAAC;IACD,YAAY,CAAC,QAA4B,EAAE,SAAiB;QAC1D,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,OAAO,IAAI,CAAC;IACd,CAAC;IAED,WAAW;QACT,MAAM,SAAS,GAAG,EAAE,CAAC,aAAa,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,YAAY,EAAE,CAAC;QAC5F,IAAI,cAAc,GAAG,EAAE,CAAC;QACxB,IAAI,SAAS,IAAI,SAAS,CAAC,UAAU,EAAE;YACrC,cAAc,GAAG,SAAS,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;SAC9D;QAED,OAAO,iBAAiB,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC;IACtD,CAAC;CACF","sourcesContent":["// Copyright 2018 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as UI from '../../ui/legacy/legacy.js';  // eslint-disable-line no-unused-vars\nimport * as Search from '../search/search.js';\n\nimport {SourcesSearchScope} from './SourcesSearchScope.js';\n\nlet searchSourcesViewInstance: SearchSourcesView;\n\nexport class SearchSourcesView extends Search.SearchView.SearchView {\n  private constructor() {\n    super('sources');\n  }\n\n  static instance(): SearchSourcesView {\n    if (!searchSourcesViewInstance) {\n      searchSourcesViewInstance = new SearchSourcesView();\n    }\n    return searchSourcesViewInstance;\n  }\n\n  static async openSearch(query: string, searchImmediately?: boolean): Promise<UI.Widget.Widget> {\n    const view = (UI.ViewManager.ViewManager.instance().view('sources.search-sources-tab') as UI.View.View);\n    // Deliberately use target location name so that it could be changed\n    // based on the setting later.\n    // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration)\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const location = (await UI.ViewManager.ViewManager.instance().resolveLocation('drawer-view') as any);\n    location.appendView(view);\n    await UI.ViewManager.ViewManager.instance().revealView((view as UI.View.View));\n    const widget = (await view.widget() as Search.SearchView.SearchView);\n    widget.toggle(query, Boolean(searchImmediately));\n    return widget;\n  }\n\n  createScope(): Search.SearchConfig.SearchScope {\n    return new SourcesSearchScope();\n  }\n}\n\nlet actionDelegateInstance: ActionDelegate;\n\nexport class ActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  static instance(opts: {\n    forceNew: boolean|null,\n  }|undefined = {forceNew: null}): ActionDelegate {\n    const {forceNew} = opts;\n    if (!actionDelegateInstance || forceNew) {\n      actionDelegateInstance = new ActionDelegate();\n    }\n\n    return actionDelegateInstance;\n  }\n  handleAction(_context: UI.Context.Context, _actionId: string): boolean {\n    this._showSearch();\n    return true;\n  }\n\n  _showSearch(): Promise<UI.Widget.Widget> {\n    const selection = UI.InspectorView.InspectorView.instance().element.window().getSelection();\n    let queryCandidate = '';\n    if (selection && selection.rangeCount) {\n      queryCandidate = selection.toString().replace(/\\r?\\n.*/, '');\n    }\n\n    return SearchSourcesView.openSearch(queryCandidate);\n  }\n}\n"]}