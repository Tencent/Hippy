{"version":3,"file":"CSSPlugin.js","sourceRoot":"","sources":["../../../../../../front_end/panels/sources/CSSPlugin.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2013 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport type * as Workspace from '../../models/workspace/workspace.js'; // eslint-disable-line no-unused-vars\nimport * as ColorPicker from '../../ui/legacy/components/color_picker/color_picker.js';\nimport * as InlineEditor from '../../ui/legacy/components/inline_editor/inline_editor.js';\nimport * as SourceFrame from '../../ui/legacy/components/source_frame/source_frame.js';\nimport type * as TextEditor from '../../ui/legacy/components/text_editor/text_editor.js'; // eslint-disable-line no-unused-vars\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {Plugin} from './Plugin.js';\n\nconst UIStrings = {\n  /**\n  *@description Swatch icon element title in CSSPlugin of the Sources panel\n  */\n  openColorPicker: 'Open color picker.',\n  /**\n  *@description Text to open the cubic bezier editor\n  */\n  openCubicBezierEditor: 'Open cubic bezier editor.',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/CSSPlugin.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class CSSPlugin extends Plugin {\n  _textEditor: SourceFrame.SourcesTextEditor.SourcesTextEditor;\n  _swatchPopoverHelper: InlineEditor.SwatchPopoverHelper.SwatchPopoverHelper;\n  _muteSwatchProcessing: boolean;\n  _hadSwatchChange: boolean;\n  _bezierEditor: InlineEditor.BezierEditor.BezierEditor|null;\n  _editedSwatchTextRange: TextUtils.TextRange.TextRange|null;\n  _spectrum: ColorPicker.Spectrum.Spectrum|null;\n  _currentSwatch: Element|null;\n  _boundHandleKeyDown: ((arg0: Event) => void)|null;\n  constructor(textEditor: SourceFrame.SourcesTextEditor.SourcesTextEditor) {\n    super();\n    this._textEditor = textEditor;\n    this._swatchPopoverHelper = new InlineEditor.SwatchPopoverHelper.SwatchPopoverHelper();\n    this._muteSwatchProcessing = false;\n    this._hadSwatchChange = false;\n    this._bezierEditor = null;\n    this._editedSwatchTextRange = null;\n    this._spectrum = null;\n    this._currentSwatch = null;\n    this._textEditor.configureAutocomplete({\n      suggestionsCallback: this._cssSuggestions.bind(this),\n      isWordChar: this._isWordChar.bind(this),\n      anchorBehavior: undefined,\n      substituteRangeCallback: undefined,\n      tooltipCallback: undefined,\n    });\n    this._textEditor.addEventListener(\n        SourceFrame.SourcesTextEditor.Events.ScrollChanged, this._textEditorScrolled, this);\n    this._textEditor.addEventListener(UI.TextEditor.Events.TextChanged, this._onTextChanged, this);\n    this._updateSwatches(0, this._textEditor.linesCount - 1);\n    this._boundHandleKeyDown = null;\n\n    this._registerShortcuts();\n  }\n\n  static accepts(uiSourceCode: Workspace.UISourceCode.UISourceCode): boolean {\n    return uiSourceCode.contentType().isStyleSheet();\n  }\n\n  _registerShortcuts(): void {\n    this._boundHandleKeyDown =\n        UI.ShortcutRegistry.ShortcutRegistry.instance().addShortcutListener(this._textEditor.element, {\n          'sources.increment-css': this._handleUnitModification.bind(this, 1),\n          'sources.increment-css-by-ten': this._handleUnitModification.bind(this, 10),\n          'sources.decrement-css': this._handleUnitModification.bind(this, -1),\n          'sources.decrement-css-by-ten': this._handleUnitModification.bind(this, -10),\n        });\n  }\n\n  _textEditorScrolled(): void {\n    if (this._swatchPopoverHelper.isShowing()) {\n      this._swatchPopoverHelper.hide(true);\n    }\n  }\n\n  _modifyUnit(unit: string, change: number): string|null {\n    const unitValue = parseInt(unit, 10);\n    if (isNaN(unitValue)) {\n      return null;\n    }\n    const tail = unit.substring((unitValue).toString().length);\n    return Platform.StringUtilities.sprintf('%d%s', unitValue + change, tail);\n  }\n\n  async _handleUnitModification(change: number): Promise<boolean> {\n    const selection = this._textEditor.selection().normalize();\n    let token = this._textEditor.tokenAtTextPosition(selection.startLine, selection.startColumn);\n    if (!token) {\n      if (selection.startColumn > 0) {\n        token = this._textEditor.tokenAtTextPosition(selection.startLine, selection.startColumn - 1);\n      }\n      if (!token) {\n        return false;\n      }\n    }\n    if (token.type !== 'css-number') {\n      return false;\n    }\n\n    const cssUnitRange =\n        new TextUtils.TextRange.TextRange(selection.startLine, token.startColumn, selection.startLine, token.endColumn);\n    const cssUnitText = this._textEditor.text(cssUnitRange);\n    const newUnitText = this._modifyUnit(cssUnitText, change);\n    if (!newUnitText) {\n      return false;\n    }\n    this._textEditor.editRange(cssUnitRange, newUnitText);\n    selection.startColumn = token.startColumn;\n    selection.endColumn = selection.startColumn + newUnitText.length;\n    this._textEditor.setSelection(selection);\n    return true;\n  }\n\n  _updateSwatches(startLine: number, endLine: number): void {\n    const swatches: HTMLElement[] = [];\n    const swatchPositions: TextUtils.TextRange.TextRange[] = [];\n\n    const regexes =\n        [SDK.CSSMetadata.VariableRegex, SDK.CSSMetadata.URLRegex, UI.Geometry.CubicBezier.Regex, Common.Color.Regex];\n    const handlers = new Map<RegExp, (text: string) => HTMLElement | null>();\n    handlers.set(Common.Color.Regex, this._createColorSwatch.bind(this));\n    handlers.set(UI.Geometry.CubicBezier.Regex, this._createBezierSwatch.bind(this));\n\n    for (let lineNumber = startLine; lineNumber <= endLine; lineNumber++) {\n      const line = this._textEditor.line(lineNumber).substring(0, maxSwatchProcessingLength);\n      const results = TextUtils.TextUtils.Utils.splitStringByRegexes(line, regexes);\n      for (let i = 0; i < results.length; i++) {\n        const result = results[i];\n        const handler = handlers.get(regexes[result.regexIndex]);\n        if (result.regexIndex === -1 || !handler) {\n          continue;\n        }\n        const delimiters = /[\\s:;,(){}]/;\n        const positionBefore = result.position - 1;\n        const positionAfter = result.position + result.value.length;\n        if (positionBefore >= 0 && !delimiters.test(line.charAt(positionBefore)) ||\n            positionAfter < line.length && !delimiters.test(line.charAt(positionAfter))) {\n          continue;\n        }\n        const swatch = handler(result.value);\n        if (!swatch) {\n          continue;\n        }\n        swatches.push(swatch);\n        swatchPositions.push(TextUtils.TextRange.TextRange.createFromLocation(lineNumber, result.position));\n      }\n    }\n    this._textEditor.operation(putSwatchesInline.bind(this));\n\n    function putSwatchesInline(this: CSSPlugin): void {\n      const clearRange =\n          new TextUtils.TextRange.TextRange(startLine, 0, endLine, this._textEditor.line(endLine).length);\n      this._textEditor.bookmarks(clearRange, SwatchBookmark).forEach(marker => marker.clear());\n\n      for (let i = 0; i < swatches.length; i++) {\n        const swatch = swatches[i];\n        const swatchPosition = swatchPositions[i];\n        const bookmark =\n            this._textEditor.addBookmark(swatchPosition.startLine, swatchPosition.startColumn, swatch, SwatchBookmark);\n        swatchToBookmark.set(swatch, bookmark);\n      }\n    }\n  }\n\n  _createColorSwatch(text: string): HTMLElement|null {\n    const color = Common.Color.Color.parse(text);\n    if (!color) {\n      return null;\n    }\n    const swatch = new InlineEditor.ColorSwatch.ColorSwatch();\n    swatch.renderColor(color, false, i18nString(UIStrings.openColorPicker));\n    const value = swatch.createChild('span');\n    value.textContent = text;\n    value.setAttribute('hidden', 'true');\n\n    swatch.addEventListener('swatch-click', this._swatchIconClicked.bind(this, swatch), false);\n    return swatch;\n  }\n\n  _createBezierSwatch(text: string): InlineEditor.Swatches.BezierSwatch|null {\n    if (!UI.Geometry.CubicBezier.parse(text)) {\n      return null;\n    }\n    const swatch = InlineEditor.Swatches.BezierSwatch.create();\n    swatch.setBezierText(text);\n    UI.Tooltip.Tooltip.install(swatch.iconElement(), i18nString(UIStrings.openCubicBezierEditor));\n    swatch.iconElement().addEventListener('click', this._swatchIconClicked.bind(this, swatch), false);\n    swatch.hideText(true);\n    return swatch;\n  }\n\n  _swatchIconClicked(swatch: Element, event: Event): void {\n    event.consume(true);\n    this._hadSwatchChange = false;\n    this._muteSwatchProcessing = true;\n    const bookmark = swatchToBookmark.get(swatch);\n    if (!bookmark) {\n      return;\n    }\n    const swatchPosition = bookmark.position();\n    if (!swatchPosition) {\n      return;\n    }\n    this._textEditor.setSelection(swatchPosition);\n    this._editedSwatchTextRange = swatchPosition.clone();\n    if (this._editedSwatchTextRange) {\n      this._editedSwatchTextRange.endColumn += (swatch.textContent || '').length;\n    }\n    this._currentSwatch = swatch;\n\n    if (InlineEditor.ColorSwatch.ColorSwatch.isColorSwatch(swatch)) {\n      this._showSpectrum((swatch as InlineEditor.ColorSwatch.ColorSwatch));\n    } else if (swatch instanceof InlineEditor.Swatches.BezierSwatch) {\n      this._showBezierEditor(swatch);\n    }\n  }\n\n  _showSpectrum(swatch: InlineEditor.ColorSwatch.ColorSwatch): void {\n    if (!this._spectrum) {\n      this._spectrum = new ColorPicker.Spectrum.Spectrum();\n      this._spectrum.addEventListener(ColorPicker.Spectrum.Events.SizeChanged, this._spectrumResized, this);\n      this._spectrum.addEventListener(ColorPicker.Spectrum.Events.ColorChanged, this._spectrumChanged, this);\n    }\n    this._spectrum.setColor((swatch.getColor() as Common.Color.Color), swatch.getFormat() || '');\n    this._swatchPopoverHelper.show(this._spectrum, swatch, this._swatchPopoverHidden.bind(this));\n  }\n\n  _spectrumResized(_event: Common.EventTarget.EventTargetEvent): void {\n    this._swatchPopoverHelper.reposition();\n  }\n\n  _spectrumChanged(event: Common.EventTarget.EventTargetEvent): void {\n    const colorString = (event.data as string);\n    const color = Common.Color.Color.parse(colorString);\n    if (!color || !this._currentSwatch) {\n      return;\n    }\n\n    if (InlineEditor.ColorSwatch.ColorSwatch.isColorSwatch(this._currentSwatch)) {\n      const swatch = (this._currentSwatch as InlineEditor.ColorSwatch.ColorSwatch);\n      swatch.renderColor(color);\n    }\n    this._changeSwatchText(colorString);\n  }\n\n  _showBezierEditor(swatch: InlineEditor.Swatches.BezierSwatch): void {\n    const cubicBezier = UI.Geometry.CubicBezier.parse(swatch.bezierText()) ||\n        (UI.Geometry.CubicBezier.parse('linear') as UI.Geometry.CubicBezier);\n    if (!this._bezierEditor) {\n      this._bezierEditor = new InlineEditor.BezierEditor.BezierEditor(cubicBezier);\n      this._bezierEditor.addEventListener(InlineEditor.BezierEditor.Events.BezierChanged, this._bezierChanged, this);\n    } else {\n      this._bezierEditor.setBezier(cubicBezier);\n    }\n    this._swatchPopoverHelper.show(this._bezierEditor, swatch.iconElement(), this._swatchPopoverHidden.bind(this));\n  }\n\n  _bezierChanged(event: Common.EventTarget.EventTargetEvent): void {\n    const bezierString = (event.data as string);\n    if (this._currentSwatch instanceof InlineEditor.Swatches.BezierSwatch) {\n      this._currentSwatch.setBezierText(bezierString);\n    }\n    this._changeSwatchText(bezierString);\n  }\n\n  _changeSwatchText(text: string): void {\n    this._hadSwatchChange = true;\n    const editedRange = (this._editedSwatchTextRange as TextUtils.TextRange.TextRange);\n    this._textEditor.editRange(editedRange, text, '*swatch-text-changed');\n    editedRange.endColumn = editedRange.startColumn + text.length;\n  }\n\n  _swatchPopoverHidden(commitEdit: boolean): void {\n    this._muteSwatchProcessing = false;\n    if (!commitEdit && this._hadSwatchChange) {\n      this._textEditor.undo();\n    }\n  }\n\n  _onTextChanged(event: Common.EventTarget.EventTargetEvent): void {\n    if (!this._muteSwatchProcessing) {\n      this._updateSwatches(event.data.newRange.startLine, event.data.newRange.endLine);\n    }\n  }\n\n  _isWordChar(char: string): boolean {\n    return TextUtils.TextUtils.Utils.isWordChar(char) || char === '.' || char === '-' || char === '$';\n  }\n\n  _cssSuggestions(prefixRange: TextUtils.TextRange.TextRange, _substituteRange: TextUtils.TextRange.TextRange):\n      Promise<UI.SuggestBox.Suggestions>|null {\n    const prefix = this._textEditor.text(prefixRange);\n    if (prefix.startsWith('$')) {\n      return null;\n    }\n\n    const propertyToken = this._backtrackPropertyToken(prefixRange.startLine, prefixRange.startColumn - 1);\n    if (!propertyToken) {\n      return null;\n    }\n\n    const line = this._textEditor.line(prefixRange.startLine);\n    const tokenContent = line.substring(propertyToken.startColumn, propertyToken.endColumn);\n    const propertyValues = SDK.CSSMetadata.cssMetadata().propertyValues(tokenContent);\n    return Promise.resolve(propertyValues.filter(value => value.startsWith(prefix)).map(value => {\n      return {\n        text: value,\n        title: undefined,\n        subtitle: undefined,\n        iconType: undefined,\n        priority: undefined,\n        isSecondary: undefined,\n        subtitleRenderer: undefined,\n        selectionRange: undefined,\n        hideGhostText: undefined,\n        iconElement: undefined,\n      };\n    }));\n  }\n\n  _backtrackPropertyToken(lineNumber: number, columnNumber: number): {\n    startColumn: number,\n    endColumn: number,\n    type: string,\n  }|null {\n    const backtrackDepth = 10;\n    let tokenPosition: number = columnNumber;\n    const line = this._textEditor.line(lineNumber);\n    let seenColon = false;\n\n    for (let i = 0; i < backtrackDepth && tokenPosition >= 0; ++i) {\n      const token = this._textEditor.tokenAtTextPosition(lineNumber, tokenPosition);\n      if (!token) {\n        return null;\n      }\n      if (token.type === 'css-property') {\n        return seenColon ? token : null;\n      }\n      if (token.type && !(token.type.indexOf('whitespace') !== -1 || token.type.startsWith('css-comment'))) {\n        return null;\n      }\n\n      if (!token.type && line.substring(token.startColumn, token.endColumn) === ':') {\n        if (!seenColon) {\n          seenColon = true;\n        } else {\n          return null;\n        }\n      }\n      tokenPosition = token.startColumn - 1;\n    }\n    return null;\n  }\n\n  dispose(): void {\n    if (this._swatchPopoverHelper.isShowing()) {\n      this._swatchPopoverHelper.hide(true);\n    }\n    this._textEditor.removeEventListener(\n        SourceFrame.SourcesTextEditor.Events.ScrollChanged, this._textEditorScrolled, this);\n    this._textEditor.removeEventListener(UI.TextEditor.Events.TextChanged, this._onTextChanged, this);\n    this._textEditor.bookmarks(this._textEditor.fullRange(), SwatchBookmark).forEach(marker => marker.clear());\n    this._textEditor.element.removeEventListener('keydown', (this._boundHandleKeyDown as EventListener));\n  }\n}\n\nexport const maxSwatchProcessingLength: number = 300;\n\nexport const SwatchBookmark: symbol = Symbol('swatch');\n\nconst swatchToBookmark = new WeakMap<Element, TextEditor.CodeMirrorTextEditor.TextEditorBookMark>();\n"]}