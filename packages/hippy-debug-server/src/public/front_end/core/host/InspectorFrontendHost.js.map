{"version":3,"file":"InspectorFrontendHost.js","sourceRoot":"","sources":["../../../../../../front_end/core/host/InspectorFrontendHost.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2009 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration)\n/* eslint-disable rulesdir/no_underscored_properties */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n\nimport * as Common from '../common/common.js';\nimport * as i18n from '../i18n/i18n.js';\nimport * as Platform from '../platform/platform.js';\nimport * as Root from '../root/root.js';\n\nimport type {CanShowSurveyResult, ContextMenuDescriptor, EnumeratedHistogram, ExtensionDescriptor, InspectorFrontendHostAPI, LoadNetworkResourceResult, ShowSurveyResult} from './InspectorFrontendHostAPI.js';\nimport {EventDescriptors, Events} from './InspectorFrontendHostAPI.js';  // eslint-disable-line no-unused-vars\nimport {streamWrite as resourceLoaderStreamWrite} from './ResourceLoader.js';\n\nconst UIStrings = {\n  /**\n  *@description Document title in Inspector Frontend Host of the DevTools window\n  *@example {example.com} PH1\n  */\n  devtoolsS: 'DevTools - {PH1}',\n};\nconst str_ = i18n.i18n.registerUIStrings('core/host/InspectorFrontendHost.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class InspectorFrontendHostStub implements InspectorFrontendHostAPI {\n  _urlsBeingSaved: Map<string, string[]>;\n  events!: Common.EventTarget.EventTarget;\n  _windowVisible?: boolean;\n\n  constructor() {\n    function stopEventPropagation(this: InspectorFrontendHostAPI, event: KeyboardEvent): void {\n      // Let browser handle Ctrl+/Ctrl- shortcuts in hosted mode.\n      const zoomModifier = this.platform() === 'mac' ? event.metaKey : event.ctrlKey;\n      if (zoomModifier && (event.key === '+' || event.key === '-')) {\n        event.stopPropagation();\n      }\n    }\n    document.addEventListener('keydown', event => {\n      stopEventPropagation.call(this, (event as KeyboardEvent));\n    }, true);\n    this._urlsBeingSaved = new Map();\n  }\n\n  platform(): string {\n    const userAgent = navigator.userAgent;\n    if (userAgent.includes('Windows NT')) {\n      return 'windows';\n    }\n    if (userAgent.includes('Mac OS X')) {\n      return 'mac';\n    }\n    return 'linux';\n  }\n\n  loadCompleted(): void {\n  }\n\n  bringToFront(): void {\n    this._windowVisible = true;\n  }\n\n  closeWindow(): void {\n    this._windowVisible = false;\n  }\n\n  setIsDocked(isDocked: boolean, callback: () => void): void {\n    setTimeout(callback, 0);\n  }\n\n  showSurvey(trigger: string, callback: (arg0: ShowSurveyResult) => void): void {\n    setTimeout(() => callback({surveyShown: false}), 0);\n  }\n\n  canShowSurvey(trigger: string, callback: (arg0: CanShowSurveyResult) => void): void {\n    setTimeout(() => callback({canShowSurvey: false}), 0);\n  }\n\n  /**\n   * Requests inspected page to be placed atop of the inspector frontend with specified bounds.\n   */\n  setInspectedPageBounds(bounds: {\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n  }): void {\n  }\n\n  inspectElementCompleted(): void {\n  }\n\n  setInjectedScriptForOrigin(origin: string, script: string): void {\n  }\n\n  inspectedURLChanged(url: string): void {\n    document.title = i18nString(UIStrings.devtoolsS, {PH1: url.replace(/^https?:\\/\\//, '')});\n  }\n\n  copyText(text: string|null|undefined): void {\n    if (text === undefined || text === null) {\n      return;\n    }\n    navigator.clipboard.writeText(text);\n  }\n\n  openInNewTab(url: string): void {\n    window.open(url, '_blank');\n  }\n\n  showItemInFolder(fileSystemPath: string): void {\n    Common.Console.Console.instance().error(\n        'Show item in folder is not enabled in hosted mode. Please inspect using chrome://inspect');\n  }\n\n  save(url: string, content: string, forceSaveAs: boolean): void {\n    let buffer = this._urlsBeingSaved.get(url);\n    if (!buffer) {\n      buffer = [];\n      this._urlsBeingSaved.set(url, buffer);\n    }\n    buffer.push(content);\n    this.events.dispatchEventToListeners(Events.SavedURL, {url, fileSystemPath: url});\n  }\n\n  append(url: string, content: string): void {\n    const buffer = this._urlsBeingSaved.get(url);\n    if (buffer) {\n      buffer.push(content);\n      this.events.dispatchEventToListeners(Events.AppendedToURL, url);\n    }\n  }\n\n  close(url: string): void {\n    const buffer = this._urlsBeingSaved.get(url) || [];\n    this._urlsBeingSaved.delete(url);\n    let fileName = '';\n\n    if (url) {\n      try {\n        const trimmed = Platform.StringUtilities.trimURL(url);\n        fileName = Platform.StringUtilities.removeURLFragment(trimmed);\n      } catch (error) {\n        // If url is not a valid URL, it is probably a filename.\n        fileName = url;\n      }\n    }\n\n    const link = document.createElement('a');\n    link.download = fileName;\n    const blob = new Blob([buffer.join('')], {type: 'text/plain'});\n    const blobUrl = URL.createObjectURL(blob);\n    link.href = blobUrl;\n    link.click();\n    URL.revokeObjectURL(blobUrl);\n  }\n\n  sendMessageToBackend(message: string): void {\n  }\n\n  recordEnumeratedHistogram(actionName: EnumeratedHistogram, actionCode: number, bucketSize: number): void {\n  }\n\n  recordPerformanceHistogram(histogramName: string, duration: number): void {\n  }\n\n  recordUserMetricsAction(umaName: string): void {\n  }\n\n  requestFileSystems(): void {\n    this.events.dispatchEventToListeners(Events.FileSystemsLoaded, []);\n  }\n\n  addFileSystem(type?: string): void {\n  }\n\n  removeFileSystem(fileSystemPath: string): void {\n  }\n\n  isolatedFileSystem(fileSystemId: string, registeredName: string): FileSystem|null {\n    return null;\n  }\n\n  loadNetworkResource(\n      url: string, headers: string, streamId: number, callback: (arg0: LoadNetworkResourceResult) => void): void {\n    Root.Runtime.loadResourcePromise(url)\n        .then(function(text) {\n          resourceLoaderStreamWrite(streamId, text);\n          callback({\n            statusCode: 200,\n            headers: undefined,\n            messageOverride: undefined,\n            netError: undefined,\n            netErrorName: undefined,\n            urlValid: undefined,\n          });\n        })\n        .catch(function() {\n          callback({\n            statusCode: 404,\n            headers: undefined,\n            messageOverride: undefined,\n            netError: undefined,\n            netErrorName: undefined,\n            urlValid: undefined,\n          });\n        });\n  }\n\n  getPreferences(callback: (arg0: {\n                   [x: string]: string,\n                 }) => void): void {\n    const prefs: {\n      [x: string]: string,\n    } = {};\n    for (const name in window.localStorage) {\n      prefs[name] = window.localStorage[name];\n    }\n    callback(prefs);\n  }\n\n  setPreference(name: string, value: string): void {\n    window.localStorage[name] = value;\n  }\n\n  removePreference(name: string): void {\n    delete window.localStorage[name];\n  }\n\n  clearPreferences(): void {\n    window.localStorage.clear();\n  }\n\n  upgradeDraggedFileSystemPermissions(fileSystem: FileSystem): void {\n  }\n\n  indexPath(requestId: number, fileSystemPath: string, excludedFolders: string): void {\n  }\n\n  stopIndexing(requestId: number): void {\n  }\n\n  searchInPath(requestId: number, fileSystemPath: string, query: string): void {\n  }\n\n  zoomFactor(): number {\n    return 1;\n  }\n\n  zoomIn(): void {\n  }\n\n  zoomOut(): void {\n  }\n\n  resetZoom(): void {\n  }\n\n  setWhitelistedShortcuts(shortcuts: string): void {\n  }\n\n  setEyeDropperActive(active: boolean): void {\n  }\n\n  showCertificateViewer(certChain: string[]): void {\n  }\n\n  reattach(callback: () => void): void {\n  }\n\n  readyForTest(): void {\n  }\n\n  connectionReady(): void {\n  }\n\n  setOpenNewWindowForPopups(value: boolean): void {\n  }\n\n  setDevicesDiscoveryConfig(config: Adb.Config): void {\n  }\n\n  setDevicesUpdatesEnabled(enabled: boolean): void {\n  }\n\n  performActionOnRemotePage(pageId: string, action: string): void {\n  }\n\n  openRemotePage(browserId: string, url: string): void {\n  }\n\n  openNodeFrontend(): void {\n  }\n\n  showContextMenuAtPoint(x: number, y: number, items: ContextMenuDescriptor[], document: Document): void {\n    throw 'Soft context menu should be used';\n  }\n\n  isHostedMode(): boolean {\n    return true;\n  }\n\n  setAddExtensionCallback(callback: (arg0: ExtensionDescriptor) => void): void {\n    // Extensions are not supported in hosted mode.\n  }\n}\n\n// @ts-ignore Global injected by devtools-compatibility.js\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport let InspectorFrontendHostInstance: InspectorFrontendHostStub = window.InspectorFrontendHost;\n\nclass InspectorFrontendAPIImpl {\n  _debugFrontend: boolean;\n\n  constructor() {\n    this._debugFrontend = (Boolean(Root.Runtime.Runtime.queryParam('debugFrontend'))) ||\n        // @ts-ignore Compatibility hacks\n        (window['InspectorTest'] && window['InspectorTest']['debugTest']);\n\n    for (const descriptor of EventDescriptors) {\n      // @ts-ignore Dispatcher magic\n      this[descriptor[1]] = this._dispatch.bind(this, descriptor[0], descriptor[2], descriptor[3]);\n    }\n  }\n\n  _dispatch(name: symbol, signature: string[], runOnceLoaded: boolean, ...params: string[]): void {\n    if (this._debugFrontend) {\n      setTimeout(() => innerDispatch(), 0);\n    } else {\n      innerDispatch();\n    }\n\n    function innerDispatch(): void {\n      // Single argument methods get dispatched with the param.\n      if (signature.length < 2) {\n        try {\n          InspectorFrontendHostInstance.events.dispatchEventToListeners(name, params[0]);\n        } catch (error) {\n          console.error(error + ' ' + error.stack);\n        }\n        return;\n      }\n      const data: {\n        [x: string]: string,\n      } = {};\n      for (let i = 0; i < signature.length; ++i) {\n        data[signature[i]] = params[i];\n      }\n      try {\n        InspectorFrontendHostInstance.events.dispatchEventToListeners(name, data);\n      } catch (error) {\n        console.error(error + ' ' + error.stack);\n      }\n    }\n  }\n\n  streamWrite(id: number, chunk: string): void {\n    resourceLoaderStreamWrite(id, chunk);\n  }\n}\n\n(function(): void {\n\nfunction initializeInspectorFrontendHost(): void {\n  let proto;\n  if (!InspectorFrontendHostInstance) {\n    // Instantiate stub for web-hosted mode if necessary.\n    // @ts-ignore Global injected by devtools-compatibility.js\n    window.InspectorFrontendHost = InspectorFrontendHostInstance = new InspectorFrontendHostStub();\n  } else {\n    // Otherwise add stubs for missing methods that are declared in the interface.\n    proto = InspectorFrontendHostStub.prototype;\n    for (const name of Object.getOwnPropertyNames(proto)) {\n      // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration)\n      // @ts-expect-error\n      const stub = proto[name];\n      // @ts-ignore Global injected by devtools-compatibility.js\n      if (typeof stub !== 'function' || InspectorFrontendHostInstance[name]) {\n        continue;\n      }\n\n      console.error(`Incompatible embedder: method Host.InspectorFrontendHost.${name} is missing. Using stub instead.`);\n      // @ts-ignore Global injected by devtools-compatibility.js\n      InspectorFrontendHostInstance[name] = stub;\n    }\n  }\n\n  // Attach the events object.\n  InspectorFrontendHostInstance.events = new Common.ObjectWrapper.ObjectWrapper();\n}\n\n// FIXME: This file is included into both apps, since the devtools_app needs the InspectorFrontendHostAPI only,\n// so the host instance should not be initialized there.\ninitializeInspectorFrontendHost();\n// @ts-ignore Global injected by devtools-compatibility.js\nwindow.InspectorFrontendAPI = new InspectorFrontendAPIImpl();\n})();\n\nexport function isUnderTest(prefs?: {\n  [x: string]: string,\n}): boolean {\n  // Integration tests rely on test queryParam.\n  if (Root.Runtime.Runtime.queryParam('test')) {\n    return true;\n  }\n  // Browser tests rely on prefs.\n  if (prefs) {\n    return prefs['isUnderTest'] === 'true';\n  }\n  return Common.Settings.Settings.hasInstance() &&\n      Common.Settings.Settings.instance().createSetting('isUnderTest', false).get();\n}\n"]}