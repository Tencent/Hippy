{"version":3,"file":"Lazy.js","sourceRoot":"","sources":["../../../../../../front_end/core/common/Lazy.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,uDAAuD;AAEvD,MAAM,aAAa,GAAG,MAAM,CAAC,eAAe,CAAC,CAAC;AAC9C,MAAM,WAAW,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;AAEpC,MAAM,UAAU,IAAI,CAAI,QAAiB;IACvC,IAAI,KAAK,GAA8C,aAAa,CAAC;IACrE,IAAI,KAAK,GAAS,IAAI,CAAC;IAEvB,OAAO,GAAa,EAAE;QACpB,IAAI,KAAK,KAAK,WAAW,EAAE;YACzB,MAAM,KAAK,CAAC;SACb;aAAM,IAAI,KAAK,KAAK,aAAa,EAAE;YAClC,OAAO,KAAK,CAAC;SACd;QAED,IAAI;YACF,KAAK,GAAG,QAAQ,EAAE,CAAC;YACnB,OAAO,KAAK,CAAC;SACd;QAAC,OAAO,GAAG,EAAE;YACZ,KAAK,GAAG,GAAG,CAAC;YACZ,KAAK,GAAG,WAAW,CAAC;YACpB,MAAM,KAAK,CAAC;SACb;IACH,CAAC,CAAC;AACJ,CAAC","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nconst UNINITIALIZED = Symbol('uninitialized');\nconst ERROR_STATE = Symbol('error');\n\nexport function lazy<T>(producer: () => T): () => symbol | T {\n  let value: T|typeof ERROR_STATE|typeof UNINITIALIZED = UNINITIALIZED;\n  let error: null = null;\n\n  return (): symbol|T => {\n    if (value === ERROR_STATE) {\n      throw error;\n    } else if (value !== UNINITIALIZED) {\n      return value;\n    }\n\n    try {\n      value = producer();\n      return value;\n    } catch (err) {\n      error = err;\n      value = ERROR_STATE;\n      throw error;\n    }\n  };\n}\n"]}