{"version":3,"file":"CSSModel.js","sourceRoot":"","sources":["../../../../../../front_end/core/sdk/CSSModel.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2010 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Common from '../common/common.js';\nimport * as Host from '../host/host.js';\nimport * as Platform from '../platform/platform.js';\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport type * as Protocol from '../../generated/protocol.js';\n\nimport {CSSFontFace} from './CSSFontFace.js';\nimport {CSSMatchedStyles} from './CSSMatchedStyles.js';\nimport {CSSMedia} from './CSSMedia.js';\nimport {CSSStyleRule} from './CSSRule.js';\nimport {CSSStyleDeclaration, Type} from './CSSStyleDeclaration.js';\nimport {CSSStyleSheetHeader} from './CSSStyleSheetHeader.js';\nimport type {DOMNode} from './DOMModel.js';\nimport {DOMModel} from './DOMModel.js';  // eslint-disable-line no-unused-vars\nimport {Events as ResourceTreeModelEvents, ResourceTreeModel} from './ResourceTreeModel.js';\nimport type {Target} from './Target.js';\nimport {Capability} from './Target.js';\nimport {SDKModel} from './SDKModel.js';\nimport {SourceMapManager} from './SourceMapManager.js';\n\nexport class CSSModel extends SDKModel {\n  _isEnabled: boolean;\n  _cachedMatchedCascadeNode: DOMNode|null;\n  _cachedMatchedCascadePromise: Promise<CSSMatchedStyles|null>|null;\n  _domModel: DOMModel;\n  _sourceMapManager: SourceMapManager<CSSStyleSheetHeader>;\n  _agent: ProtocolProxyApi.CSSApi;\n  _styleLoader: ComputedStyleLoader;\n  _resourceTreeModel: ResourceTreeModel|null;\n  _styleSheetIdToHeader: Map<string, CSSStyleSheetHeader>;\n  _styleSheetIdsForURL: Map<string, Map<string, Set<string>>>;\n  _originalStyleSheetText: Map<CSSStyleSheetHeader, Promise<string|null>>;\n  _isRuleUsageTrackingEnabled: boolean;\n  _fontFaces: Map<string, CSSFontFace>;\n  _cssPropertyTracker: CSSPropertyTracker|null;\n  _isCSSPropertyTrackingEnabled: boolean;\n  _isTrackingRequestPending: boolean;\n  _trackedCSSProperties: Map<number, Protocol.CSS.CSSComputedStyleProperty[]>;\n  _stylePollingThrottler: Common.Throttler.Throttler;\n\n  constructor(target: Target) {\n    super(target);\n    this._isEnabled = false;\n    this._cachedMatchedCascadeNode = null;\n    this._cachedMatchedCascadePromise = null;\n    this._domModel = (target.model(DOMModel) as DOMModel);\n    this._sourceMapManager = new SourceMapManager(target);\n    this._agent = target.cssAgent();\n    this._styleLoader = new ComputedStyleLoader(this);\n    this._resourceTreeModel = target.model(ResourceTreeModel);\n    if (this._resourceTreeModel) {\n      this._resourceTreeModel.addEventListener(\n          ResourceTreeModelEvents.MainFrameNavigated, this._resetStyleSheets, this);\n    }\n    target.registerCSSDispatcher(new CSSDispatcher(this));\n    if (!target.suspended()) {\n      this._enable();\n    }\n    this._styleSheetIdToHeader = new Map();\n    this._styleSheetIdsForURL = new Map();\n\n    this._originalStyleSheetText = new Map();\n\n    this._isRuleUsageTrackingEnabled = false;\n\n    this._fontFaces = new Map();\n\n    this._cssPropertyTracker = null;  // TODO: support multiple trackers when we refactor the backend\n    this._isCSSPropertyTrackingEnabled = false;\n    this._isTrackingRequestPending = false;\n    this._trackedCSSProperties = new Map();\n    this._stylePollingThrottler = new Common.Throttler.Throttler(StylePollingInterval);\n\n    this._sourceMapManager.setEnabled(Common.Settings.Settings.instance().moduleSetting('cssSourceMapsEnabled').get());\n    Common.Settings.Settings.instance()\n        .moduleSetting('cssSourceMapsEnabled')\n        .addChangeListener(event => this._sourceMapManager.setEnabled((event.data as boolean)));\n  }\n\n  headersForSourceURL(sourceURL: string): CSSStyleSheetHeader[] {\n    const headers = [];\n    for (const headerId of this.styleSheetIdsForURL(sourceURL)) {\n      const header = this.styleSheetHeaderForId(headerId);\n      if (header) {\n        headers.push(header);\n      }\n    }\n    return headers;\n  }\n\n  createRawLocationsByURL(sourceURL: string, lineNumber: number, columnNumber: number|undefined = 0): CSSLocation[] {\n    const headers = this.headersForSourceURL(sourceURL);\n    headers.sort(stylesheetComparator);\n    const endIndex = Platform.ArrayUtilities.upperBound(\n        headers, undefined, (_, header) => lineNumber - header.startLine || columnNumber - header.startColumn);\n    if (!endIndex) {\n      return [];\n    }\n    const locations = [];\n    const last = headers[endIndex - 1];\n    for (let index = endIndex - 1;\n         index >= 0 && headers[index].startLine === last.startLine && headers[index].startColumn === last.startColumn;\n         --index) {\n      if (headers[index].containsLocation(lineNumber, columnNumber)) {\n        locations.push(new CSSLocation(headers[index], lineNumber, columnNumber));\n      }\n    }\n\n    return locations;\n    function stylesheetComparator(a: CSSStyleSheetHeader, b: CSSStyleSheetHeader): number {\n      return a.startLine - b.startLine || a.startColumn - b.startColumn || a.id.localeCompare(b.id);\n    }\n  }\n\n  sourceMapManager(): SourceMapManager<CSSStyleSheetHeader> {\n    return this._sourceMapManager;\n  }\n\n  static trimSourceURL(text: string): string {\n    let sourceURLIndex = text.lastIndexOf('/*# sourceURL=');\n    if (sourceURLIndex === -1) {\n      sourceURLIndex = text.lastIndexOf('/*@ sourceURL=');\n      if (sourceURLIndex === -1) {\n        return text;\n      }\n    }\n    const sourceURLLineIndex = text.lastIndexOf('\\n', sourceURLIndex);\n    if (sourceURLLineIndex === -1) {\n      return text;\n    }\n    const sourceURLLine = text.substr(sourceURLLineIndex + 1).split('\\n', 1)[0];\n    const sourceURLRegex = /[\\040\\t]*\\/\\*[#@] sourceURL=[\\040\\t]*([^\\s]*)[\\040\\t]*\\*\\/[\\040\\t]*$/;\n    if (sourceURLLine.search(sourceURLRegex) === -1) {\n      return text;\n    }\n    return text.substr(0, sourceURLLineIndex) + text.substr(sourceURLLineIndex + sourceURLLine.length + 1);\n  }\n\n  domModel(): DOMModel {\n    return this._domModel;\n  }\n\n  async setStyleText(styleSheetId: string, range: TextUtils.TextRange.TextRange, text: string, majorChange: boolean):\n      Promise<boolean> {\n    try {\n      await this._ensureOriginalStyleSheetText(styleSheetId);\n\n      const {styles} = await this._agent.invoke_setStyleTexts(\n          {edits: [{styleSheetId: styleSheetId, range: range.serializeToObject(), text}]});\n      if (!styles || styles.length !== 1) {\n        return false;\n      }\n\n      this._domModel.markUndoableState(!majorChange);\n      const edit = new Edit(styleSheetId, range, text, styles[0]);\n      this._fireStyleSheetChanged(styleSheetId, edit);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  async setSelectorText(styleSheetId: string, range: TextUtils.TextRange.TextRange, text: string): Promise<boolean> {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.StyleRuleEdited);\n\n    try {\n      await this._ensureOriginalStyleSheetText(styleSheetId);\n      const {selectorList} = await this._agent.invoke_setRuleSelector({styleSheetId, range, selector: text});\n\n      if (!selectorList) {\n        return false;\n      }\n      this._domModel.markUndoableState();\n      const edit = new Edit(styleSheetId, range, text, selectorList);\n      this._fireStyleSheetChanged(styleSheetId, edit);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  async setKeyframeKey(styleSheetId: string, range: TextUtils.TextRange.TextRange, text: string): Promise<boolean> {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.StyleRuleEdited);\n\n    try {\n      await this._ensureOriginalStyleSheetText(styleSheetId);\n      const {keyText} = await this._agent.invoke_setKeyframeKey({styleSheetId, range, keyText: text});\n\n      if (!keyText) {\n        return false;\n      }\n      this._domModel.markUndoableState();\n      const edit = new Edit(styleSheetId, range, text, keyText);\n      this._fireStyleSheetChanged(styleSheetId, edit);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  startCoverage(): Promise<Protocol.ProtocolResponseWithError> {\n    this._isRuleUsageTrackingEnabled = true;\n    return this._agent.invoke_startRuleUsageTracking();\n  }\n\n  async takeCoverageDelta(): Promise<{\n    timestamp: number,\n    coverage: Array<Protocol.CSS.RuleUsage>,\n  }> {\n    const r = await this._agent.invoke_takeCoverageDelta();\n    const timestamp = (r && r.timestamp) || 0;\n    const coverage = (r && r.coverage) || [];\n    return {timestamp, coverage};\n  }\n\n  setLocalFontsEnabled(enabled: boolean): Promise<Protocol.ProtocolResponseWithError> {\n    return this._agent.invoke_setLocalFontsEnabled({\n      enabled,\n    });\n  }\n\n  async stopCoverage(): Promise<void> {\n    this._isRuleUsageTrackingEnabled = false;\n    await this._agent.invoke_stopRuleUsageTracking();\n  }\n\n  async mediaQueriesPromise(): Promise<CSSMedia[]> {\n    const {medias} = await this._agent.invoke_getMediaQueries();\n    return medias ? CSSMedia.parseMediaArrayPayload(this, medias) : [];\n  }\n\n  isEnabled(): boolean {\n    return this._isEnabled;\n  }\n\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  async _enable(): Promise<any> {\n    await this._agent.invoke_enable();\n    this._isEnabled = true;\n    if (this._isRuleUsageTrackingEnabled) {\n      await this.startCoverage();\n    }\n    this.dispatchEventToListeners(Events.ModelWasEnabled);\n  }\n\n  async matchedStylesPromise(nodeId: number): Promise<CSSMatchedStyles|null> {\n    const response = await this._agent.invoke_getMatchedStylesForNode({nodeId});\n\n    if (response.getError()) {\n      return null;\n    }\n\n    const node = this._domModel.nodeForId(nodeId);\n    if (!node) {\n      return null;\n    }\n\n    return new CSSMatchedStyles(\n        this, (node as DOMNode), response.inlineStyle || null, response.attributesStyle || null,\n        response.matchedCSSRules || [], response.pseudoElements || [], response.inherited || [],\n        response.cssKeyframesRules || []);\n  }\n\n  async classNamesPromise(styleSheetId: string): Promise<string[]> {\n    const {classNames} = await this._agent.invoke_collectClassNames({styleSheetId});\n    return classNames || [];\n  }\n\n  computedStylePromise(nodeId: number): Promise<Map<string, string>|null> {\n    return this._styleLoader.computedStylePromise(nodeId);\n  }\n\n  async backgroundColorsPromise(nodeId: number): Promise<ContrastInfo|null> {\n    const response = await this._agent.invoke_getBackgroundColors({nodeId});\n    if (response.getError()) {\n      return null;\n    }\n\n    return {\n      backgroundColors: response.backgroundColors || null,\n      computedFontSize: response.computedFontSize || '',\n      computedFontWeight: response.computedFontWeight || '',\n    };\n  }\n\n  async platformFontsPromise(nodeId: number): Promise<Protocol.CSS.PlatformFontUsage[]|null> {\n    const {fonts} = await this._agent.invoke_getPlatformFontsForNode({nodeId});\n    return fonts;\n  }\n\n  allStyleSheets(): CSSStyleSheetHeader[] {\n    const values = [...this._styleSheetIdToHeader.values()];\n    function styleSheetComparator(a: CSSStyleSheetHeader, b: CSSStyleSheetHeader): number {\n      if (a.sourceURL < b.sourceURL) {\n        return -1;\n      }\n      if (a.sourceURL > b.sourceURL) {\n        return 1;\n      }\n      return a.startLine - b.startLine || a.startColumn - b.startColumn;\n    }\n    values.sort(styleSheetComparator);\n\n    return values;\n  }\n\n  async inlineStylesPromise(nodeId: number): Promise<InlineStyleResult|null> {\n    const response = await this._agent.invoke_getInlineStylesForNode({nodeId});\n\n    if (response.getError() || !response.inlineStyle) {\n      return null;\n    }\n    const inlineStyle = new CSSStyleDeclaration(this, null, response.inlineStyle, Type.Inline);\n    const attributesStyle = response.attributesStyle ?\n        new CSSStyleDeclaration(this, null, response.attributesStyle, Type.Attributes) :\n        null;\n    return new InlineStyleResult(inlineStyle, attributesStyle);\n  }\n\n  forcePseudoState(node: DOMNode, pseudoClass: string, enable: boolean): boolean {\n    const forcedPseudoClasses = node.marker<string[]>(PseudoStateMarker) || [];\n    const hasPseudoClass = forcedPseudoClasses.includes(pseudoClass);\n    if (enable) {\n      if (hasPseudoClass) {\n        return false;\n      }\n      forcedPseudoClasses.push(pseudoClass);\n      node.setMarker(PseudoStateMarker, forcedPseudoClasses);\n    } else {\n      if (!hasPseudoClass) {\n        return false;\n      }\n      Platform.ArrayUtilities.removeElement(forcedPseudoClasses, pseudoClass);\n      if (forcedPseudoClasses.length) {\n        node.setMarker(PseudoStateMarker, forcedPseudoClasses);\n      } else {\n        node.setMarker(PseudoStateMarker, null);\n      }\n    }\n\n    if (node.id === undefined) {\n      return false;\n    }\n    this._agent.invoke_forcePseudoState({nodeId: node.id, forcedPseudoClasses});\n    this.dispatchEventToListeners(Events.PseudoStateForced, {node: node, pseudoClass: pseudoClass, enable: enable});\n    return true;\n  }\n\n  pseudoState(node: DOMNode): string[]|null {\n    return node.marker(PseudoStateMarker) || [];\n  }\n\n  async setMediaText(styleSheetId: string, range: TextUtils.TextRange.TextRange, newMediaText: string):\n      Promise<boolean> {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.StyleRuleEdited);\n\n    try {\n      await this._ensureOriginalStyleSheetText(styleSheetId);\n      const {media} = await this._agent.invoke_setMediaText({styleSheetId, range, text: newMediaText});\n\n      if (!media) {\n        return false;\n      }\n      this._domModel.markUndoableState();\n      const edit = new Edit(styleSheetId, range, newMediaText, media);\n      this._fireStyleSheetChanged(styleSheetId, edit);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  async addRule(styleSheetId: string, ruleText: string, ruleLocation: TextUtils.TextRange.TextRange):\n      Promise<CSSStyleRule|null> {\n    try {\n      await this._ensureOriginalStyleSheetText(styleSheetId);\n      const {rule} = await this._agent.invoke_addRule({styleSheetId, ruleText, location: ruleLocation});\n\n      if (!rule) {\n        return null;\n      }\n      this._domModel.markUndoableState();\n      const edit = new Edit(styleSheetId, ruleLocation, ruleText, rule);\n      this._fireStyleSheetChanged(styleSheetId, edit);\n      return new CSSStyleRule(this, rule);\n    } catch (e) {\n      return null;\n    }\n  }\n\n  async requestViaInspectorStylesheet(node: DOMNode): Promise<CSSStyleSheetHeader|null> {\n    const frameId = node.frameId() ||\n        (this._resourceTreeModel && this._resourceTreeModel.mainFrame ? this._resourceTreeModel.mainFrame.id : '');\n    const headers = [...this._styleSheetIdToHeader.values()];\n    const styleSheetHeader = headers.find(header => header.frameId === frameId && header.isViaInspector());\n    if (styleSheetHeader) {\n      return styleSheetHeader;\n    }\n\n    try {\n      const {styleSheetId} = await this._agent.invoke_createStyleSheet({frameId});\n      if (!styleSheetId) {\n        return null;\n      }\n      return this._styleSheetIdToHeader.get(styleSheetId) || null;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  mediaQueryResultChanged(): void {\n    this.dispatchEventToListeners(Events.MediaQueryResultChanged);\n  }\n\n  fontsUpdated(fontFace?: Protocol.CSS.FontFace|null): void {\n    if (fontFace) {\n      this._fontFaces.set(fontFace.src, new CSSFontFace(fontFace));\n    }\n    this.dispatchEventToListeners(Events.FontsUpdated);\n  }\n\n  fontFaces(): CSSFontFace[] {\n    return [...this._fontFaces.values()];\n  }\n\n  styleSheetHeaderForId(id: string): CSSStyleSheetHeader|null {\n    return this._styleSheetIdToHeader.get(id) || null;\n  }\n\n  styleSheetHeaders(): CSSStyleSheetHeader[] {\n    return [...this._styleSheetIdToHeader.values()];\n  }\n\n  _fireStyleSheetChanged(styleSheetId: string, edit?: Edit): void {\n    this.dispatchEventToListeners(Events.StyleSheetChanged, {styleSheetId: styleSheetId, edit: edit});\n  }\n\n  _ensureOriginalStyleSheetText(styleSheetId: string): Promise<string|null> {\n    const header = this.styleSheetHeaderForId(styleSheetId);\n    if (!header) {\n      return Promise.resolve((null as string | null));\n    }\n    let promise = this._originalStyleSheetText.get(header);\n    if (!promise) {\n      promise = this.getStyleSheetText(header.id);\n      this._originalStyleSheetText.set(header, promise);\n      this._originalContentRequestedForTest(header);\n    }\n    return promise;\n  }\n\n  _originalContentRequestedForTest(_header: CSSStyleSheetHeader): void {\n  }\n\n  originalStyleSheetText(header: CSSStyleSheetHeader): Promise<string|null> {\n    return this._ensureOriginalStyleSheetText(header.id);\n  }\n\n  getAllStyleSheetHeaders(): Iterable<CSSStyleSheetHeader> {\n    return this._styleSheetIdToHeader.values();\n  }\n\n  _styleSheetAdded(header: Protocol.CSS.CSSStyleSheetHeader): void {\n    console.assert(!this._styleSheetIdToHeader.get(header.styleSheetId));\n    const styleSheetHeader = new CSSStyleSheetHeader(this, header);\n    this._styleSheetIdToHeader.set(header.styleSheetId, styleSheetHeader);\n    const url = styleSheetHeader.resourceURL();\n    let frameIdToStyleSheetIds = this._styleSheetIdsForURL.get(url);\n    if (!frameIdToStyleSheetIds) {\n      frameIdToStyleSheetIds = new Map();\n      this._styleSheetIdsForURL.set(url, frameIdToStyleSheetIds);\n    }\n    if (frameIdToStyleSheetIds) {\n      let styleSheetIds = frameIdToStyleSheetIds.get(styleSheetHeader.frameId);\n      if (!styleSheetIds) {\n        styleSheetIds = new Set();\n        frameIdToStyleSheetIds.set(styleSheetHeader.frameId, styleSheetIds);\n      }\n      styleSheetIds.add(styleSheetHeader.id);\n    }\n    this._sourceMapManager.attachSourceMap(styleSheetHeader, styleSheetHeader.sourceURL, styleSheetHeader.sourceMapURL);\n    this.dispatchEventToListeners(Events.StyleSheetAdded, styleSheetHeader);\n  }\n\n  _styleSheetRemoved(id: string): void {\n    const header = this._styleSheetIdToHeader.get(id);\n    console.assert(Boolean(header));\n    if (!header) {\n      return;\n    }\n    this._styleSheetIdToHeader.delete(id);\n    const url = header.resourceURL();\n    const frameIdToStyleSheetIds = this._styleSheetIdsForURL.get(url);\n    console.assert(\n        Boolean(frameIdToStyleSheetIds), 'No frameId to styleSheetId map is available for given style sheet URL.');\n    if (frameIdToStyleSheetIds) {\n      const stylesheetIds = frameIdToStyleSheetIds.get(header.frameId);\n      if (stylesheetIds) {\n        stylesheetIds.delete(id);\n        if (!stylesheetIds.size) {\n          frameIdToStyleSheetIds.delete(header.frameId);\n          if (!frameIdToStyleSheetIds.size) {\n            this._styleSheetIdsForURL.delete(url);\n          }\n        }\n      }\n    }\n    this._originalStyleSheetText.delete(header);\n    this._sourceMapManager.detachSourceMap(header);\n    this.dispatchEventToListeners(Events.StyleSheetRemoved, header);\n  }\n\n  styleSheetIdsForURL(url: string): string[] {\n    const frameIdToStyleSheetIds = this._styleSheetIdsForURL.get(url);\n    if (!frameIdToStyleSheetIds) {\n      return [];\n    }\n\n    const result = [];\n    for (const styleSheetIds of frameIdToStyleSheetIds.values()) {\n      result.push(...styleSheetIds);\n    }\n    return result;\n  }\n\n  async setStyleSheetText(styleSheetId: string, newText: string, majorChange: boolean): Promise<string|null> {\n    const header = (this._styleSheetIdToHeader.get(styleSheetId) as CSSStyleSheetHeader);\n    console.assert(Boolean(header));\n    newText = CSSModel.trimSourceURL(newText);\n    if (header.hasSourceURL) {\n      newText += '\\n/*# sourceURL=' + header.sourceURL + ' */';\n    }\n\n    await this._ensureOriginalStyleSheetText(styleSheetId);\n    const response = await this._agent.invoke_setStyleSheetText({styleSheetId: header.id, text: newText});\n    const sourceMapURL = response.sourceMapURL;\n\n    this._sourceMapManager.detachSourceMap(header);\n    header.setSourceMapURL(sourceMapURL);\n    this._sourceMapManager.attachSourceMap(header, header.sourceURL, header.sourceMapURL);\n    if (sourceMapURL === null) {\n      return 'Error in CSS.setStyleSheetText';\n    }\n    this._domModel.markUndoableState(!majorChange);\n    this._fireStyleSheetChanged(styleSheetId);\n    return null;\n  }\n\n  async getStyleSheetText(styleSheetId: string): Promise<string|null> {\n    try {\n      const {text} = await this._agent.invoke_getStyleSheetText({styleSheetId});\n      return text && CSSModel.trimSourceURL(text);\n    } catch (e) {\n      return null;\n    }\n  }\n\n  _resetStyleSheets(): void {\n    const headers = [...this._styleSheetIdToHeader.values()];\n    this._styleSheetIdsForURL.clear();\n    this._styleSheetIdToHeader.clear();\n    for (const header of headers) {\n      this._sourceMapManager.detachSourceMap(header);\n      this.dispatchEventToListeners(Events.StyleSheetRemoved, header);\n    }\n  }\n\n  _resetFontFaces(): void {\n    this._fontFaces.clear();\n  }\n\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  async suspendModel(): Promise<any> {\n    this._isEnabled = false;\n    await this._agent.invoke_disable();\n    this._resetStyleSheets();\n    this._resetFontFaces();\n  }\n\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  async resumeModel(): Promise<any> {\n    return this._enable();\n  }\n\n  setEffectivePropertyValueForNode(nodeId: number, propertyName: string, value: string): void {\n    this._agent.invoke_setEffectivePropertyValueForNode({nodeId, propertyName, value});\n  }\n\n  cachedMatchedCascadeForNode(node: DOMNode): Promise<CSSMatchedStyles|null> {\n    if (this._cachedMatchedCascadeNode !== node) {\n      this.discardCachedMatchedCascade();\n    }\n    this._cachedMatchedCascadeNode = node;\n    if (!this._cachedMatchedCascadePromise) {\n      if (node.id) {\n        this._cachedMatchedCascadePromise = this.matchedStylesPromise(node.id);\n      } else {\n        return Promise.resolve(null);\n      }\n    }\n    return this._cachedMatchedCascadePromise;\n  }\n\n  discardCachedMatchedCascade(): void {\n    this._cachedMatchedCascadeNode = null;\n    this._cachedMatchedCascadePromise = null;\n  }\n\n  createCSSPropertyTracker(propertiesToTrack: Protocol.CSS.CSSComputedStyleProperty[]): CSSPropertyTracker {\n    const gridStyleTracker = new CSSPropertyTracker(this, propertiesToTrack);\n    return gridStyleTracker;\n  }\n\n  enableCSSPropertyTracker(cssPropertyTracker: CSSPropertyTracker): void {\n    const propertiesToTrack = cssPropertyTracker.getTrackedProperties();\n    if (propertiesToTrack.length === 0) {\n      return;\n    }\n    this._agent.invoke_trackComputedStyleUpdates({propertiesToTrack});\n    this._isCSSPropertyTrackingEnabled = true;\n    this._cssPropertyTracker = cssPropertyTracker;\n    this._pollComputedStyleUpdates();\n  }\n\n  // Since we only support one tracker at a time, this call effectively disables\n  // style tracking.\n  disableCSSPropertyTracker(): void {\n    this._isCSSPropertyTrackingEnabled = false;\n    this._cssPropertyTracker = null;\n    // Sending an empty list to the backend signals the close of style tracking\n    this._agent.invoke_trackComputedStyleUpdates({propertiesToTrack: []});\n  }\n\n  async _pollComputedStyleUpdates(): Promise<void> {\n    if (this._isTrackingRequestPending) {\n      return;\n    }\n\n    if (this._isCSSPropertyTrackingEnabled) {\n      this._isTrackingRequestPending = true;\n      const result = await this._agent.invoke_takeComputedStyleUpdates();\n      this._isTrackingRequestPending = false;\n\n      if (result.getError() || !result.nodeIds || !this._isCSSPropertyTrackingEnabled) {\n        return;\n      }\n\n      if (this._cssPropertyTracker) {\n        this._cssPropertyTracker.dispatchEventToListeners(CSSPropertyTrackerEvents.TrackedCSSPropertiesUpdated, {\n          domNodes: result.nodeIds.map(nodeId => this._domModel.nodeForId(nodeId)),\n        });\n      }\n    }\n\n    if (this._isCSSPropertyTrackingEnabled) {\n      this._stylePollingThrottler.schedule(this._pollComputedStyleUpdates.bind(this));\n    }\n  }\n\n  dispose(): void {\n    this.disableCSSPropertyTracker();\n    super.dispose();\n    this._sourceMapManager.dispose();\n  }\n}\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum Events {\n  FontsUpdated = 'FontsUpdated',\n  MediaQueryResultChanged = 'MediaQueryResultChanged',\n  ModelWasEnabled = 'ModelWasEnabled',\n  PseudoStateForced = 'PseudoStateForced',\n  StyleSheetAdded = 'StyleSheetAdded',\n  StyleSheetChanged = 'StyleSheetChanged',\n  StyleSheetRemoved = 'StyleSheetRemoved',\n}\n\n\nconst PseudoStateMarker = 'pseudo-state-marker';\n\nexport class Edit {\n  styleSheetId: string;\n  oldRange: TextUtils.TextRange.TextRange;\n  newRange: TextUtils.TextRange.TextRange;\n  newText: string;\n  payload: Object|null;\n  constructor(styleSheetId: string, oldRange: TextUtils.TextRange.TextRange, newText: string, payload: Object|null) {\n    this.styleSheetId = styleSheetId;\n    this.oldRange = oldRange;\n    this.newRange = TextUtils.TextRange.TextRange.fromEdit(oldRange, newText);\n    this.newText = newText;\n    this.payload = payload;\n  }\n}\n\nexport class CSSLocation {\n  _cssModel: CSSModel;\n  styleSheetId: string;\n  url: string;\n  lineNumber: number;\n  columnNumber: number;\n  constructor(header: CSSStyleSheetHeader, lineNumber: number, columnNumber?: number) {\n    this._cssModel = header.cssModel();\n    this.styleSheetId = header.id;\n    this.url = header.resourceURL();\n    this.lineNumber = lineNumber;\n    this.columnNumber = columnNumber || 0;\n  }\n\n  cssModel(): CSSModel {\n    return this._cssModel;\n  }\n\n  header(): CSSStyleSheetHeader|null {\n    return this._cssModel.styleSheetHeaderForId(this.styleSheetId);\n  }\n}\n\nclass CSSDispatcher implements ProtocolProxyApi.CSSDispatcher {\n  _cssModel: CSSModel;\n  constructor(cssModel: CSSModel) {\n    this._cssModel = cssModel;\n  }\n\n  mediaQueryResultChanged(): void {\n    this._cssModel.mediaQueryResultChanged();\n  }\n\n  fontsUpdated({font}: Protocol.CSS.FontsUpdatedEvent): void {\n    this._cssModel.fontsUpdated(font);\n  }\n\n  styleSheetChanged({styleSheetId}: Protocol.CSS.StyleSheetChangedEvent): void {\n    this._cssModel._fireStyleSheetChanged(styleSheetId);\n  }\n\n  styleSheetAdded({header}: Protocol.CSS.StyleSheetAddedEvent): void {\n    this._cssModel._styleSheetAdded(header);\n  }\n\n  styleSheetRemoved({styleSheetId}: Protocol.CSS.StyleSheetRemovedEvent): void {\n    this._cssModel._styleSheetRemoved(styleSheetId);\n  }\n}\n\nclass ComputedStyleLoader {\n  _cssModel: CSSModel;\n  _nodeIdToPromise: Map<number, Promise<Map<string, string>|null>>;\n  constructor(cssModel: CSSModel) {\n    this._cssModel = cssModel;\n    this._nodeIdToPromise = new Map();\n  }\n\n  computedStylePromise(nodeId: number): Promise<Map<string, string>|null> {\n    let promise = this._nodeIdToPromise.get(nodeId);\n    if (promise) {\n      return promise;\n    }\n    promise = this._cssModel._agent.invoke_getComputedStyleForNode({nodeId}).then(({computedStyle}) => {\n      this._nodeIdToPromise.delete(nodeId);\n      if (!computedStyle || !computedStyle.length) {\n        return null;\n      }\n      const result = new Map<string, string>();\n      for (const property of computedStyle) {\n        result.set(property.name, property.value);\n      }\n      return result;\n    });\n    this._nodeIdToPromise.set(nodeId, promise);\n    return promise;\n  }\n}\n\nexport class InlineStyleResult {\n  inlineStyle: CSSStyleDeclaration|null;\n  attributesStyle: CSSStyleDeclaration|null;\n  constructor(inlineStyle: CSSStyleDeclaration|null, attributesStyle: CSSStyleDeclaration|null) {\n    this.inlineStyle = inlineStyle;\n    this.attributesStyle = attributesStyle;\n  }\n}\n\nexport class CSSPropertyTracker extends Common.ObjectWrapper.ObjectWrapper {\n  _cssModel: CSSModel;\n  _properties: Protocol.CSS.CSSComputedStyleProperty[];\n  constructor(cssModel: CSSModel, propertiesToTrack: Protocol.CSS.CSSComputedStyleProperty[]) {\n    super();\n    this._cssModel = cssModel;\n    this._properties = propertiesToTrack;\n  }\n\n  start(): void {\n    this._cssModel.enableCSSPropertyTracker(this);\n  }\n\n  stop(): void {\n    this._cssModel.disableCSSPropertyTracker();\n  }\n\n  getTrackedProperties(): Protocol.CSS.CSSComputedStyleProperty[] {\n    return this._properties;\n  }\n}\n\nconst StylePollingInterval = 1000;  // throttling interval for style polling, in milliseconds\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum CSSPropertyTrackerEvents {\n  TrackedCSSPropertiesUpdated = 'TrackedCSSPropertiesUpdated',\n}\n\n\nSDKModel.register(CSSModel, {capabilities: Capability.DOM, autostart: true});\nexport interface ContrastInfo {\n  backgroundColors: string[]|null;\n  computedFontSize: string;\n  computedFontWeight: string;\n}\n"]}