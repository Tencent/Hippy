{"version":3,"file":"ResourceTreeModel.js","sourceRoot":"","sources":["../../../../../../front_end/core/sdk/ResourceTreeModel.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as Common from '../common/common.js';\nimport * as i18n from '../i18n/i18n.js';\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport * as Protocol from '../../generated/protocol.js';\n\nimport type {DeferredDOMNode, DOMNode} from './DOMModel.js';\nimport {DOMModel} from './DOMModel.js';  // eslint-disable-line no-unused-vars\nimport type {RequestUpdateDroppedEventData} from './NetworkManager.js';\nimport {Events as NetworkManagerEvents, NetworkManager} from './NetworkManager.js';  // eslint-disable-line no-unused-vars\nimport type {NetworkRequest} from './NetworkRequest.js'; // eslint-disable-line no-unused-vars\nimport {Resource} from './Resource.js';\nimport {ExecutionContext, RuntimeModel} from './RuntimeModel.js';\nimport type {Target} from './Target.js';\nimport {Capability} from './Target.js';\nimport {SDKModel} from './SDKModel.js';\nimport {TargetManager} from './TargetManager.js';\nimport {SecurityOriginManager} from './SecurityOriginManager.js';\n\nexport class ResourceTreeModel extends SDKModel {\n  _agent: ProtocolProxyApi.PageApi;\n  _securityOriginManager: SecurityOriginManager;\n  _frames: Map<string, ResourceTreeFrame>;\n  _cachedResourcesProcessed: boolean;\n  _pendingReloadOptions: {\n    ignoreCache: (boolean|undefined),\n    scriptToEvaluateOnLoad: (string|undefined),\n  }|null;\n  _reloadSuspensionCount: number;\n  _isInterstitialShowing: boolean;\n  mainFrame: ResourceTreeFrame|null;\n  private pendingBackForwardCacheNotUsedEvents: Set<Protocol.Page.BackForwardCacheNotUsedEvent>;\n\n  constructor(target: Target) {\n    super(target);\n\n    const networkManager = target.model(NetworkManager);\n    if (networkManager) {\n      networkManager.addEventListener(NetworkManagerEvents.RequestFinished, this._onRequestFinished, this);\n      networkManager.addEventListener(NetworkManagerEvents.RequestUpdateDropped, this._onRequestUpdateDropped, this);\n    }\n    this._agent = target.pageAgent();\n    this._agent.invoke_enable();\n    this._securityOriginManager = (target.model(SecurityOriginManager) as SecurityOriginManager);\n    this.pendingBackForwardCacheNotUsedEvents = new Set<Protocol.Page.BackForwardCacheNotUsedEvent>();\n    target.registerPageDispatcher(new PageDispatcher(this));\n\n    this._frames = new Map();\n    this._cachedResourcesProcessed = false;\n    this._pendingReloadOptions = null;\n    this._reloadSuspensionCount = 0;\n    this._isInterstitialShowing = false;\n    this.mainFrame = null;\n\n    this._agent.invoke_getResourceTree().then(event => {\n      this._processCachedResources(event.getError() ? null : event.frameTree);\n    });\n  }\n\n  static frameForRequest(request: NetworkRequest): ResourceTreeFrame|null {\n    const networkManager = NetworkManager.forRequest(request);\n    const resourceTreeModel = networkManager ? networkManager.target().model(ResourceTreeModel) : null;\n    if (!resourceTreeModel) {\n      return null;\n    }\n    return resourceTreeModel.frameForId(request.frameId);\n  }\n\n  static frames(): ResourceTreeFrame[] {\n    const result = [];\n    for (const resourceTreeModel of TargetManager.instance().models(ResourceTreeModel)) {\n      result.push(...resourceTreeModel._frames.values());\n    }\n    return result;\n  }\n\n  static resourceForURL(url: string): Resource|null {\n    for (const resourceTreeModel of TargetManager.instance().models(ResourceTreeModel)) {\n      const mainFrame = resourceTreeModel.mainFrame;\n      const result = mainFrame ? mainFrame.resourceForURL(url) : null;\n      if (result) {\n        return result;\n      }\n    }\n    return null;\n  }\n\n  static reloadAllPages(bypassCache?: boolean, scriptToEvaluateOnLoad?: string): void {\n    for (const resourceTreeModel of TargetManager.instance().models(ResourceTreeModel)) {\n      if (!resourceTreeModel.target().parentTarget()) {\n        resourceTreeModel.reloadPage(bypassCache, scriptToEvaluateOnLoad);\n      }\n    }\n  }\n\n  domModel(): DOMModel {\n    return this.target().model(DOMModel) as DOMModel;\n  }\n\n  _processCachedResources(mainFramePayload: Protocol.Page.FrameResourceTree|null): void {\n    // TODO(caseq): the url check below is a mergeable, conservative\n    // workaround for a problem caused by us requesting resources from a\n    // subtarget frame before it has committed. The proper fix is likely\n    // to be too complicated to be safely merged.\n    // See https://crbug.com/1081270 for details.\n    if (mainFramePayload && mainFramePayload.frame.url !== ':') {\n      this.dispatchEventToListeners(Events.WillLoadCachedResources);\n      this._addFramesRecursively(null, mainFramePayload);\n      this.target().setInspectedURL(mainFramePayload.frame.url);\n    }\n    this._cachedResourcesProcessed = true;\n    const runtimeModel = this.target().model(RuntimeModel);\n    if (runtimeModel) {\n      runtimeModel.setExecutionContextComparator(this._executionContextComparator.bind(this));\n      runtimeModel.fireExecutionContextOrderChanged();\n    }\n    this.dispatchEventToListeners(Events.CachedResourcesLoaded, this);\n  }\n\n  cachedResourcesLoaded(): boolean {\n    return this._cachedResourcesProcessed;\n  }\n\n  isInterstitialShowing(): boolean {\n    return this._isInterstitialShowing;\n  }\n\n  _addFrame(frame: ResourceTreeFrame, _aboutToNavigate?: boolean): void {\n    this._frames.set(frame.id, frame);\n    if (frame.isMainFrame()) {\n      this.mainFrame = frame;\n    }\n    this.dispatchEventToListeners(Events.FrameAdded, frame);\n    this._updateSecurityOrigins();\n  }\n\n  _frameAttached(frameId: string, parentFrameId: string|null, stackTrace?: Protocol.Runtime.StackTrace):\n      ResourceTreeFrame|null {\n    const sameTargetParentFrame = parentFrameId ? (this._frames.get(parentFrameId) || null) : null;\n    // Do nothing unless cached resource tree is processed - it will overwrite everything.\n    if (!this._cachedResourcesProcessed && sameTargetParentFrame) {\n      return null;\n    }\n    if (this._frames.has(frameId)) {\n      return null;\n    }\n\n    const frame = new ResourceTreeFrame(this, sameTargetParentFrame, frameId, null, stackTrace || null);\n    if (parentFrameId && !sameTargetParentFrame) {\n      frame._crossTargetParentFrameId = parentFrameId;\n    }\n    if (frame.isMainFrame() && this.mainFrame) {\n      // Navigation to the new backend process.\n      this._frameDetached(this.mainFrame.id, false);\n    }\n    this._addFrame(frame, true);\n    return frame;\n  }\n\n  _frameNavigated(framePayload: Protocol.Page.Frame, type: Protocol.Page.NavigationType|undefined): void {\n    const sameTargetParentFrame = framePayload.parentId ? (this._frames.get(framePayload.parentId) || null) : null;\n    // Do nothing unless cached resource tree is processed - it will overwrite everything.\n    if (!this._cachedResourcesProcessed && sameTargetParentFrame) {\n      return;\n    }\n    let frame: (ResourceTreeFrame|null) = this._frames.get(framePayload.id) || null;\n    if (!frame) {\n      // Simulate missed \"frameAttached\" for a main frame navigation to the new backend process.\n      frame = this._frameAttached(framePayload.id, framePayload.parentId || '');\n      console.assert(Boolean(frame));\n      if (!frame) {\n        return;\n      }\n    }\n    if (type) {\n      frame.backForwardCacheDetails.restoredFromCache = type === Protocol.Page.NavigationType.BackForwardCacheRestore;\n    }\n\n    this.dispatchEventToListeners(Events.FrameWillNavigate, frame);\n    frame._navigate(framePayload);\n    this.dispatchEventToListeners(Events.FrameNavigated, frame);\n\n    if (frame.isMainFrame()) {\n      this.processPendingBackForwardCacheNotUsedEvents(frame);\n      this.dispatchEventToListeners(Events.MainFrameNavigated, frame);\n      const networkManager = this.target().model(NetworkManager);\n      if (networkManager) {\n        networkManager.clearRequests();\n      }\n    }\n\n    // Fill frame with retained resources (the ones loaded using new loader).\n    const resources = frame.resources();\n    for (let i = 0; i < resources.length; ++i) {\n      this.dispatchEventToListeners(Events.ResourceAdded, resources[i]);\n    }\n\n    if (frame.isMainFrame()) {\n      this.target().setInspectedURL(frame.url);\n    }\n    this._updateSecurityOrigins();\n  }\n\n  _documentOpened(framePayload: Protocol.Page.Frame): void {\n    this._frameNavigated(framePayload, undefined);\n    const frame = this._frames.get(framePayload.id);\n    if (frame && !frame._resourcesMap.get(framePayload.url)) {\n      const frameResource = this._createResourceFromFramePayload(\n          framePayload, framePayload.url, Common.ResourceType.resourceTypes.Document, framePayload.mimeType, null,\n          null);\n      frameResource.isGenerated = true;\n      frame.addResource(frameResource);\n    }\n  }\n\n  _frameDetached(frameId: string, isSwap: boolean): void {\n    // Do nothing unless cached resource tree is processed - it will overwrite everything.\n    if (!this._cachedResourcesProcessed) {\n      return;\n    }\n\n    const frame = this._frames.get(frameId);\n    if (!frame) {\n      return;\n    }\n\n    const sameTargetParentFrame = frame.sameTargetParentFrame();\n    if (sameTargetParentFrame) {\n      sameTargetParentFrame._removeChildFrame(frame, isSwap);\n    } else {\n      frame._remove(isSwap);\n    }\n    this._updateSecurityOrigins();\n  }\n\n  _onRequestFinished(event: Common.EventTarget.EventTargetEvent): void {\n    if (!this._cachedResourcesProcessed) {\n      return;\n    }\n\n    const request = (event.data as NetworkRequest);\n    if (request.failed || request.resourceType() === Common.ResourceType.resourceTypes.XHR) {\n      return;\n    }\n\n    const frame = this._frames.get(request.frameId);\n    if (frame) {\n      frame._addRequest(request);\n    }\n  }\n\n  _onRequestUpdateDropped(event: Common.EventTarget.EventTargetEvent): void {\n    if (!this._cachedResourcesProcessed) {\n      return;\n    }\n\n    const data = (event.data as RequestUpdateDroppedEventData);\n    const frameId = data.frameId;\n    const frame = this._frames.get(frameId);\n    if (!frame) {\n      return;\n    }\n\n    const url = data.url;\n    if (frame._resourcesMap.get(url)) {\n      return;\n    }\n\n    const resource = new Resource(\n        this, null, url, frame.url, frameId, data.loaderId, Common.ResourceType.resourceTypes[data.resourceType],\n        data.mimeType, data.lastModified, null);\n    frame.addResource(resource);\n  }\n\n  frameForId(frameId: string): ResourceTreeFrame|null {\n    return this._frames.get(frameId) || null;\n  }\n\n  forAllResources(callback: (arg0: Resource) => boolean): boolean {\n    if (this.mainFrame) {\n      return this.mainFrame._callForFrameResources(callback);\n    }\n    return false;\n  }\n\n  frames(): ResourceTreeFrame[] {\n    return [...this._frames.values()];\n  }\n\n  resourceForURL(url: string): Resource|null {\n    // Workers call into this with no frames available.\n    return this.mainFrame ? this.mainFrame.resourceForURL(url) : null;\n  }\n\n  _addFramesRecursively(\n      sameTargetParentFrame: ResourceTreeFrame|null, frameTreePayload: Protocol.Page.FrameResourceTree): void {\n    const framePayload = frameTreePayload.frame;\n    const frame = new ResourceTreeFrame(this, sameTargetParentFrame, framePayload.id, framePayload, null);\n    if (!sameTargetParentFrame && framePayload.parentId) {\n      frame._crossTargetParentFrameId = framePayload.parentId;\n    }\n    this._addFrame(frame);\n\n    for (const childFrame of frameTreePayload.childFrames || []) {\n      this._addFramesRecursively(frame, childFrame);\n    }\n\n    for (let i = 0; i < frameTreePayload.resources.length; ++i) {\n      const subresource = frameTreePayload.resources[i];\n      const resource = this._createResourceFromFramePayload(\n          framePayload, subresource.url, Common.ResourceType.resourceTypes[subresource.type], subresource.mimeType,\n          subresource.lastModified || null, subresource.contentSize || null);\n      frame.addResource(resource);\n    }\n\n    if (!frame._resourcesMap.get(framePayload.url)) {\n      const frameResource = this._createResourceFromFramePayload(\n          framePayload, framePayload.url, Common.ResourceType.resourceTypes.Document, framePayload.mimeType, null,\n          null);\n      frame.addResource(frameResource);\n    }\n  }\n\n  _createResourceFromFramePayload(\n      frame: Protocol.Page.Frame, url: string, type: Common.ResourceType.ResourceType, mimeType: string,\n      lastModifiedTime: number|null, contentSize: number|null): Resource {\n    const lastModified = typeof lastModifiedTime === 'number' ? new Date(lastModifiedTime * 1000) : null;\n    return new Resource(\n        this, null, url, frame.url, frame.id, frame.loaderId, type, mimeType, lastModified, contentSize);\n  }\n\n  suspendReload(): void {\n    this._reloadSuspensionCount++;\n  }\n\n  resumeReload(): void {\n    this._reloadSuspensionCount--;\n    console.assert(this._reloadSuspensionCount >= 0, 'Unbalanced call to ResourceTreeModel.resumeReload()');\n    if (!this._reloadSuspensionCount && this._pendingReloadOptions) {\n      const {ignoreCache, scriptToEvaluateOnLoad} = this._pendingReloadOptions;\n      this.reloadPage(ignoreCache, scriptToEvaluateOnLoad);\n    }\n  }\n\n  reloadPage(ignoreCache?: boolean, scriptToEvaluateOnLoad?: string): void {\n    // Only dispatch PageReloadRequested upon first reload request to simplify client logic.\n    if (!this._pendingReloadOptions) {\n      this.dispatchEventToListeners(Events.PageReloadRequested, this);\n    }\n    if (this._reloadSuspensionCount) {\n      this._pendingReloadOptions = {ignoreCache, scriptToEvaluateOnLoad};\n      return;\n    }\n    this._pendingReloadOptions = null;\n    const networkManager = this.target().model(NetworkManager);\n    if (networkManager) {\n      networkManager.clearRequests();\n    }\n    this.dispatchEventToListeners(Events.WillReloadPage);\n    this._agent.invoke_reload({ignoreCache, scriptToEvaluateOnLoad});\n  }\n\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  navigate(url: string): Promise<any> {\n    return this._agent.invoke_navigate({url});\n  }\n\n  async navigationHistory(): Promise<{\n    currentIndex: number,\n    entries: Array<Protocol.Page.NavigationEntry>,\n  }|null> {\n    const response = await this._agent.invoke_getNavigationHistory();\n    if (response.getError()) {\n      return null;\n    }\n    return {currentIndex: response.currentIndex, entries: response.entries};\n  }\n\n  navigateToHistoryEntry(entry: Protocol.Page.NavigationEntry): void {\n    this._agent.invoke_navigateToHistoryEntry({entryId: entry.id});\n  }\n\n  setLifecycleEventsEnabled(enabled: boolean): Promise<Protocol.ProtocolResponseWithError> {\n    return this._agent.invoke_setLifecycleEventsEnabled({enabled});\n  }\n\n  async fetchAppManifest(): Promise<{\n    url: string,\n    data: string|null,\n    errors: Array<Protocol.Page.AppManifestError>,\n  }> {\n    const response = await this._agent.invoke_getAppManifest();\n    if (response.getError()) {\n      return {url: response.url, data: null, errors: []};\n    }\n    return {url: response.url, data: response.data || null, errors: response.errors};\n  }\n\n  async getInstallabilityErrors(): Promise<Protocol.Page.InstallabilityError[]> {\n    const response = await this._agent.invoke_getInstallabilityErrors();\n    return response.installabilityErrors || [];\n  }\n\n  async getManifestIcons(): Promise<{\n    primaryIcon: string | null,\n  }> {\n    const response = await this._agent.invoke_getManifestIcons();\n    return {primaryIcon: response.primaryIcon || null};\n  }\n\n  _executionContextComparator(a: ExecutionContext, b: ExecutionContext): number {\n    function framePath(frame: ResourceTreeFrame|null): ResourceTreeFrame[] {\n      let currentFrame: (ResourceTreeFrame|null) = frame;\n      const parents = [];\n      while (currentFrame) {\n        parents.push(currentFrame);\n        currentFrame = currentFrame.sameTargetParentFrame();\n      }\n      return parents.reverse();\n    }\n\n    if (a.target() !== b.target()) {\n      return ExecutionContext.comparator(a, b);\n    }\n\n    const framesA = a.frameId ? framePath(this.frameForId(a.frameId)) : [];\n    const framesB = b.frameId ? framePath(this.frameForId(b.frameId)) : [];\n    let frameA;\n    let frameB;\n    for (let i = 0;; i++) {\n      if (!framesA[i] || !framesB[i] || (framesA[i] !== framesB[i])) {\n        frameA = framesA[i];\n        frameB = framesB[i];\n        break;\n      }\n    }\n    if (!frameA && frameB) {\n      return -1;\n    }\n\n    if (!frameB && frameA) {\n      return 1;\n    }\n\n    if (frameA && frameB) {\n      return frameA.id.localeCompare(frameB.id);\n    }\n\n    return ExecutionContext.comparator(a, b);\n  }\n\n  _getSecurityOriginData(): SecurityOriginData {\n    const securityOrigins = new Set<string>();\n\n    let mainSecurityOrigin: string|null = null;\n    let unreachableMainSecurityOrigin: string|null = null;\n    for (const frame of this._frames.values()) {\n      const origin = frame.securityOrigin;\n      if (!origin) {\n        continue;\n      }\n\n      securityOrigins.add(origin);\n      if (frame.isMainFrame()) {\n        mainSecurityOrigin = origin;\n        if (frame.unreachableUrl()) {\n          const unreachableParsed = new Common.ParsedURL.ParsedURL(frame.unreachableUrl());\n          unreachableMainSecurityOrigin = unreachableParsed.securityOrigin();\n        }\n      }\n    }\n    return {\n      securityOrigins: securityOrigins,\n      mainSecurityOrigin: mainSecurityOrigin,\n      unreachableMainSecurityOrigin: unreachableMainSecurityOrigin,\n    };\n  }\n\n  _updateSecurityOrigins(): void {\n    const data = this._getSecurityOriginData();\n    this._securityOriginManager.setMainSecurityOrigin(\n        data.mainSecurityOrigin || '', data.unreachableMainSecurityOrigin || '');\n    this._securityOriginManager.updateSecurityOrigins(data.securityOrigins);\n  }\n\n  getMainSecurityOrigin(): string|null {\n    const data = this._getSecurityOriginData();\n    return data.mainSecurityOrigin || data.unreachableMainSecurityOrigin;\n  }\n\n  onBackForwardCacheNotUsed(event: Protocol.Page.BackForwardCacheNotUsedEvent): void {\n    if (this.mainFrame && this.mainFrame.id === event.frameId && this.mainFrame.loaderId === event.loaderId) {\n      this.mainFrame.backForwardCacheDetails.restoredFromCache = false;\n      this.dispatchEventToListeners(Events.BackForwardCacheDetailsUpdated, this.mainFrame);\n    } else {\n      this.pendingBackForwardCacheNotUsedEvents.add(event);\n    }\n  }\n\n  processPendingBackForwardCacheNotUsedEvents(frame: ResourceTreeFrame): void {\n    if (!frame.isMainFrame()) {\n      return;\n    }\n    for (const event of this.pendingBackForwardCacheNotUsedEvents) {\n      if (frame.id === event.frameId && frame.loaderId === event.loaderId) {\n        frame.backForwardCacheDetails.restoredFromCache = false;\n        this.pendingBackForwardCacheNotUsedEvents.delete(event);\n        // No need to dispatch the `BackForwardCacheDetailsUpdated` event here,\n        // as this method call is followed by a `MainFrameNavigated` event.\n        return;\n      }\n    }\n  }\n}\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum Events {\n  FrameAdded = 'FrameAdded',\n  FrameNavigated = 'FrameNavigated',\n  FrameDetached = 'FrameDetached',\n  FrameResized = 'FrameResized',\n  FrameWillNavigate = 'FrameWillNavigate',\n  MainFrameNavigated = 'MainFrameNavigated',\n  ResourceAdded = 'ResourceAdded',\n  WillLoadCachedResources = 'WillLoadCachedResources',\n  CachedResourcesLoaded = 'CachedResourcesLoaded',\n  DOMContentLoaded = 'DOMContentLoaded',\n  LifecycleEvent = 'LifecycleEvent',\n  Load = 'Load',\n  PageReloadRequested = 'PageReloadRequested',\n  WillReloadPage = 'WillReloadPage',\n  InterstitialShown = 'InterstitialShown',\n  InterstitialHidden = 'InterstitialHidden',\n  BackForwardCacheDetailsUpdated = 'BackForwardCacheDetailsUpdated',\n}\n\n\nexport class ResourceTreeFrame {\n  _model: ResourceTreeModel;\n  _sameTargetParentFrame: ResourceTreeFrame|null;\n  _id: string;\n  _crossTargetParentFrameId: string|null;\n  _loaderId: string;\n  _name: string|null|undefined;\n  _url: string;\n  _domainAndRegistry: string;\n  _securityOrigin: string|null;\n  _mimeType: string|null;\n  _unreachableUrl: string;\n  _adFrameType: Protocol.Page.AdFrameType;\n  _secureContextType: Protocol.Page.SecureContextType|null;\n  _crossOriginIsolatedContextType: Protocol.Page.CrossOriginIsolatedContextType|null;\n  _gatedAPIFeatures: Protocol.Page.GatedAPIFeatures[]|null;\n  private creationStackTrace: Protocol.Runtime.StackTrace|null;\n  private creationStackTraceTarget: Target|null;\n  _childFrames: Set<ResourceTreeFrame>;\n  _resourcesMap: Map<string, Resource>;\n  backForwardCacheDetails: {restoredFromCache: boolean|undefined} = {restoredFromCache: undefined};\n\n  constructor(\n      model: ResourceTreeModel, parentFrame: ResourceTreeFrame|null, frameId: string, payload: Protocol.Page.Frame|null,\n      creationStackTrace: Protocol.Runtime.StackTrace|null) {\n    this._model = model;\n    this._sameTargetParentFrame = parentFrame;\n    this._id = frameId;\n    this._crossTargetParentFrameId = null;\n\n    this._loaderId = (payload && payload.loaderId) || '';\n    this._name = payload && payload.name;\n    this._url = (payload && payload.url) || '';\n    this._domainAndRegistry = (payload && payload.domainAndRegistry) || '';\n    this._securityOrigin = payload && payload.securityOrigin;\n    this._mimeType = payload && payload.mimeType;\n    this._unreachableUrl = (payload && payload.unreachableUrl) || '';\n    this._adFrameType = (payload && payload.adFrameType) || Protocol.Page.AdFrameType.None;\n    this._secureContextType = payload && payload.secureContextType;\n    this._crossOriginIsolatedContextType = payload && payload.crossOriginIsolatedContextType;\n    this._gatedAPIFeatures = payload && payload.gatedAPIFeatures;\n\n    this.creationStackTrace = creationStackTrace;\n    this.creationStackTraceTarget = null;\n\n    this._childFrames = new Set();\n\n    this._resourcesMap = new Map();\n\n    if (this._sameTargetParentFrame) {\n      this._sameTargetParentFrame._childFrames.add(this);\n    }\n  }\n\n  isSecureContext(): boolean {\n    return this._secureContextType !== null && this._secureContextType.startsWith('Secure');\n  }\n\n  getSecureContextType(): Protocol.Page.SecureContextType|null {\n    return this._secureContextType;\n  }\n\n  isCrossOriginIsolated(): boolean {\n    return this._crossOriginIsolatedContextType !== null && this._crossOriginIsolatedContextType.startsWith('Isolated');\n  }\n\n  getCrossOriginIsolatedContextType(): Protocol.Page.CrossOriginIsolatedContextType|null {\n    return this._crossOriginIsolatedContextType;\n  }\n\n  getGatedAPIFeatures(): Protocol.Page.GatedAPIFeatures[]|null {\n    return this._gatedAPIFeatures;\n  }\n\n  getCreationStackTraceData():\n      {creationStackTrace: Protocol.Runtime.StackTrace|null, creationStackTraceTarget: Target} {\n    return {\n      creationStackTrace: this.creationStackTrace,\n      creationStackTraceTarget: this.creationStackTraceTarget || this.resourceTreeModel().target(),\n    };\n  }\n\n  _navigate(framePayload: Protocol.Page.Frame): void {\n    this._loaderId = framePayload.loaderId;\n    this._name = framePayload.name;\n    this._url = framePayload.url;\n    this._domainAndRegistry = framePayload.domainAndRegistry;\n    this._securityOrigin = framePayload.securityOrigin;\n    this._mimeType = framePayload.mimeType;\n    this._unreachableUrl = framePayload.unreachableUrl || '';\n    this._adFrameType = framePayload.adFrameType || Protocol.Page.AdFrameType.None;\n    this._secureContextType = framePayload.secureContextType;\n    this._crossOriginIsolatedContextType = framePayload.crossOriginIsolatedContextType;\n    this._gatedAPIFeatures = framePayload.gatedAPIFeatures;\n\n    const mainResource = this._resourcesMap.get(this._url);\n    this._resourcesMap.clear();\n    this._removeChildFrames();\n    if (mainResource && mainResource.loaderId === this._loaderId) {\n      this.addResource(mainResource);\n    }\n  }\n\n  resourceTreeModel(): ResourceTreeModel {\n    return this._model;\n  }\n\n  get id(): string {\n    return this._id;\n  }\n\n  get name(): string {\n    return this._name || '';\n  }\n\n  get url(): string {\n    return this._url;\n  }\n\n  domainAndRegistry(): string {\n    return this._domainAndRegistry;\n  }\n\n  get securityOrigin(): string|null {\n    return this._securityOrigin;\n  }\n\n  unreachableUrl(): string {\n    return this._unreachableUrl;\n  }\n\n  get loaderId(): string {\n    return this._loaderId;\n  }\n\n  adFrameType(): Protocol.Page.AdFrameType {\n    return this._adFrameType;\n  }\n\n  get childFrames(): ResourceTreeFrame[] {\n    return [...this._childFrames];\n  }\n\n  /**\n   * Returns the parent frame if both frames are part of the same process/target.\n   */\n  sameTargetParentFrame(): ResourceTreeFrame|null {\n    return this._sameTargetParentFrame;\n  }\n\n  /**\n   * Returns the parent frame if both frames are part of different processes/targets (child is an OOPIF).\n   */\n  crossTargetParentFrame(): ResourceTreeFrame|null {\n    if (!this._crossTargetParentFrameId) {\n      return null;\n    }\n    const parentTarget = this._model.target().parentTarget();\n    if (!parentTarget) {\n      return null;\n    }\n    const parentModel = parentTarget.model(ResourceTreeModel);\n    if (!parentModel) {\n      return null;\n    }\n    // Note that parent model has already processed cached resources:\n    // - when parent target was created, we issued getResourceTree call;\n    // - strictly after we issued setAutoAttach call;\n    // - both of them were handled in renderer in the same order;\n    // - cached resource tree got processed on parent model;\n    // - child target was created as a result of setAutoAttach call.\n    return parentModel._frames.get(this._crossTargetParentFrameId) || null;\n  }\n\n  /**\n   * Returns the parent frame. There is only 1 parent and it's either in the\n   * same target or it's cross-target.\n   */\n  parentFrame(): ResourceTreeFrame|null {\n    return this.sameTargetParentFrame() || this.crossTargetParentFrame();\n  }\n\n  /**\n   * Returns true if this is the main frame of its target. For example, this returns true for the main frame\n   * of an out-of-process iframe (OOPIF).\n   */\n  isMainFrame(): boolean {\n    return !this._sameTargetParentFrame;\n  }\n\n  /**\n   * Returns true if this is the top frame of the main target, i.e. if this is the top-most frame in the inspected\n   * tab.\n   */\n  isTopFrame(): boolean {\n    return !this._model.target().parentTarget() && !this._sameTargetParentFrame && !this._crossTargetParentFrameId;\n  }\n\n  _removeChildFrame(frame: ResourceTreeFrame, isSwap: boolean): void {\n    this._childFrames.delete(frame);\n    frame._remove(isSwap);\n  }\n\n  _removeChildFrames(): void {\n    const frames = this._childFrames;\n    this._childFrames = new Set();\n    for (const frame of frames) {\n      frame._remove(false);\n    }\n  }\n\n  _remove(isSwap: boolean): void {\n    this._removeChildFrames();\n    this._model._frames.delete(this.id);\n    this._model.dispatchEventToListeners(Events.FrameDetached, {frame: this, isSwap});\n  }\n\n  addResource(resource: Resource): void {\n    if (this._resourcesMap.get(resource.url) === resource) {\n      // Already in the tree, we just got an extra update.\n      return;\n    }\n    this._resourcesMap.set(resource.url, resource);\n    this._model.dispatchEventToListeners(Events.ResourceAdded, resource);\n  }\n\n  _addRequest(request: NetworkRequest): void {\n    let resource = this._resourcesMap.get(request.url());\n    if (resource && resource.request === request) {\n      // Already in the tree, we just got an extra update.\n      return;\n    }\n    resource = new Resource(\n        this._model, request, request.url(), request.documentURL, request.frameId, request.loaderId,\n        request.resourceType(), request.mimeType, null, null);\n    this._resourcesMap.set(resource.url, resource);\n    this._model.dispatchEventToListeners(Events.ResourceAdded, resource);\n  }\n\n  resources(): Resource[] {\n    return Array.from(this._resourcesMap.values());\n  }\n\n  resourceForURL(url: string): Resource|null {\n    const resource = this._resourcesMap.get(url);\n    if (resource) {\n      return resource;\n    }\n    for (const frame of this._childFrames) {\n      const resource = frame.resourceForURL(url);\n      if (resource) {\n        return resource;\n      }\n    }\n    return null;\n  }\n\n  _callForFrameResources(callback: (arg0: Resource) => boolean): boolean {\n    for (const resource of this._resourcesMap.values()) {\n      if (callback(resource)) {\n        return true;\n      }\n    }\n\n    for (const frame of this._childFrames) {\n      if (frame._callForFrameResources(callback)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  displayName(): string {\n    if (this.isTopFrame()) {\n      return i18n.i18n.lockedString('top');\n    }\n    const subtitle = new Common.ParsedURL.ParsedURL(this._url).displayName;\n    if (subtitle) {\n      if (!this._name) {\n        return subtitle;\n      }\n      return this._name + ' (' + subtitle + ')';\n    }\n    return i18n.i18n.lockedString('iframe');\n  }\n\n  async getOwnerDeferredDOMNode(): Promise<DeferredDOMNode|null> {\n    const parentFrame = this.parentFrame();\n    if (!parentFrame) {\n      return null;\n    }\n    return parentFrame.resourceTreeModel().domModel().getOwnerNodeForFrame(this._id);\n  }\n\n  async getOwnerDOMNodeOrDocument(): Promise<DOMNode|null> {\n    const deferredNode = await this.getOwnerDeferredDOMNode();\n    if (deferredNode) {\n      return deferredNode.resolvePromise();\n    }\n    if (this.isTopFrame()) {\n      return this.resourceTreeModel().domModel().requestDocument();\n    }\n    return null;\n  }\n\n  async highlight(): Promise<void> {\n    const parentFrame = this.parentFrame();\n    const parentTarget = this.resourceTreeModel().target().parentTarget();\n    const highlightFrameOwner = async(domModel: DOMModel): Promise<void> => {\n      const deferredNode = await domModel.getOwnerNodeForFrame(this._id);\n      if (deferredNode) {\n        domModel.overlayModel().highlightInOverlay({deferredNode, selectorList: ''}, 'all', true);\n      }\n    };\n\n    if (parentFrame) {\n      return highlightFrameOwner(parentFrame.resourceTreeModel().domModel());\n    }\n\n    // Portals.\n    if (parentTarget) {\n      const domModel = parentTarget.model(DOMModel);\n      if (domModel) {\n        return highlightFrameOwner(domModel);\n      }\n    }\n\n    // For the top frame there is no owner node. Highlight the whole document instead.\n    const document = await this.resourceTreeModel().domModel().requestDocument();\n    if (document) {\n      this.resourceTreeModel().domModel().overlayModel().highlightInOverlay(\n          {node: document, selectorList: ''}, 'all', true);\n    }\n  }\n\n  async getPermissionsPolicyState(): Promise<Protocol.Page.PermissionsPolicyFeatureState[]|null> {\n    const response =\n        await this.resourceTreeModel().target().pageAgent().invoke_getPermissionsPolicyState({frameId: this._id});\n    if (response.getError()) {\n      return null;\n    }\n    return response.states;\n  }\n\n  setCreationStackTrace(creationStackTraceData:\n                            {creationStackTrace: Protocol.Runtime.StackTrace|null, creationStackTraceTarget: Target}):\n      void {\n    this.creationStackTrace = creationStackTraceData.creationStackTrace;\n    this.creationStackTraceTarget = creationStackTraceData.creationStackTraceTarget;\n  }\n}\n\nexport class PageDispatcher implements ProtocolProxyApi.PageDispatcher {\n  _resourceTreeModel: ResourceTreeModel;\n  constructor(resourceTreeModel: ResourceTreeModel) {\n    this._resourceTreeModel = resourceTreeModel;\n  }\n  backForwardCacheNotUsed(params: Protocol.Page.BackForwardCacheNotUsedEvent): void {\n    this._resourceTreeModel.onBackForwardCacheNotUsed(params);\n  }\n\n  domContentEventFired({timestamp}: Protocol.Page.DomContentEventFiredEvent): void {\n    this._resourceTreeModel.dispatchEventToListeners(Events.DOMContentLoaded, timestamp);\n  }\n\n  loadEventFired({timestamp}: Protocol.Page.LoadEventFiredEvent): void {\n    this._resourceTreeModel.dispatchEventToListeners(\n        Events.Load, {resourceTreeModel: this._resourceTreeModel, loadTime: timestamp});\n  }\n\n  lifecycleEvent({frameId, name}: Protocol.Page.LifecycleEventEvent): void {\n    this._resourceTreeModel.dispatchEventToListeners(Events.LifecycleEvent, {frameId, name});\n  }\n\n  frameAttached({frameId, parentFrameId, stack}: Protocol.Page.FrameAttachedEvent): void {\n    this._resourceTreeModel._frameAttached(frameId, parentFrameId, stack);\n  }\n\n  frameNavigated({frame, type}: Protocol.Page.FrameNavigatedEvent): void {\n    this._resourceTreeModel._frameNavigated(frame, type);\n  }\n\n  documentOpened({frame}: Protocol.Page.DocumentOpenedEvent): void {\n    this._resourceTreeModel._documentOpened(frame);\n  }\n\n  frameDetached({frameId, reason}: Protocol.Page.FrameDetachedEvent): void {\n    this._resourceTreeModel._frameDetached(frameId, reason === Protocol.Page.FrameDetachedEventReason.Swap);\n  }\n\n  frameStartedLoading({}: Protocol.Page.FrameStartedLoadingEvent): void {\n  }\n\n  frameStoppedLoading({}: Protocol.Page.FrameStoppedLoadingEvent): void {\n  }\n\n  frameRequestedNavigation({}: Protocol.Page.FrameRequestedNavigationEvent): void {\n  }\n\n  frameScheduledNavigation({}: Protocol.Page.FrameScheduledNavigationEvent): void {\n  }\n\n  frameClearedScheduledNavigation({}: Protocol.Page.FrameClearedScheduledNavigationEvent): void {\n  }\n\n  navigatedWithinDocument({}: Protocol.Page.NavigatedWithinDocumentEvent): void {\n  }\n\n  frameResized(): void {\n    this._resourceTreeModel.dispatchEventToListeners(Events.FrameResized, null);\n  }\n\n  javascriptDialogOpening({hasBrowserHandler}: Protocol.Page.JavascriptDialogOpeningEvent): void {\n    if (!hasBrowserHandler) {\n      this._resourceTreeModel._agent.invoke_handleJavaScriptDialog({accept: false});\n    }\n  }\n\n  javascriptDialogClosed({}: Protocol.Page.JavascriptDialogClosedEvent): void {\n  }\n\n  screencastFrame({}: Protocol.Page.ScreencastFrameEvent): void {\n  }\n\n  screencastVisibilityChanged({}: Protocol.Page.ScreencastVisibilityChangedEvent): void {\n  }\n\n  interstitialShown(): void {\n    this._resourceTreeModel._isInterstitialShowing = true;\n    this._resourceTreeModel.dispatchEventToListeners(Events.InterstitialShown);\n  }\n\n  interstitialHidden(): void {\n    this._resourceTreeModel._isInterstitialShowing = false;\n    this._resourceTreeModel.dispatchEventToListeners(Events.InterstitialHidden);\n  }\n\n  windowOpen({}: Protocol.Page.WindowOpenEvent): void {\n  }\n\n  compilationCacheProduced({}: Protocol.Page.CompilationCacheProducedEvent): void {\n  }\n\n  fileChooserOpened({}: Protocol.Page.FileChooserOpenedEvent): void {\n  }\n\n  downloadWillBegin({}: Protocol.Page.DownloadWillBeginEvent): void {\n  }\n\n  downloadProgress(): void {\n  }\n}\n\nSDKModel.register(ResourceTreeModel, {capabilities: Capability.DOM, autostart: true, early: true});\nexport interface SecurityOriginData {\n  securityOrigins: Set<string>;\n  mainSecurityOrigin: string|null;\n  unreachableMainSecurityOrigin: string|null;\n}\n"]}