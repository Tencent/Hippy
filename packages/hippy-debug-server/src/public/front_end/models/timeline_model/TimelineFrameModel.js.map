{"version":3,"file":"TimelineFrameModel.js","sourceRoot":"","sources":["../../../../../../front_end/models/timeline_model/TimelineFrameModel.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2013 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable rulesdir/no_underscored_properties */\n/* eslint-disable @typescript-eslint/naming-convention */\n\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as Protocol from '../../generated/protocol.js';\n\nimport {RecordType, TimelineData} from './TimelineModel.js';\nimport type {TracingLayerPayload, TracingLayerTile} from './TracingLayerTree.js';\nimport {TracingLayerTree} from './TracingLayerTree.js';\n\nexport class TimelineFrameModel {\n  _categoryMapper: (arg0: SDK.TracingModel.Event) => string;\n  _frames!: TimelineFrame[];\n  _frameById!: {\n    [x: number]: TimelineFrame,\n  };\n  _minimumRecordTime!: number;\n  _lastFrame!: TimelineFrame|null;\n  _mainFrameCommitted!: boolean;\n  _mainFrameRequested!: boolean;\n  _lastLayerTree!: TracingFrameLayerTree|null;\n  _framePendingActivation!: PendingFrame|null;\n  _currentTaskTimeByCategory!: {\n    [x: string]: number,\n  };\n  _target!: SDK.Target.Target|null;\n  _framePendingCommit?: PendingFrame|null;\n  _lastBeginFrame?: number|null;\n  _lastDroppedFrame?: number|null;\n  _lastNeedsBeginFrame?: number|null;\n  _lastTaskBeginTime?: number|null;\n  _layerTreeId?: number|null;\n  _currentProcessMainThread?: SDK.TracingModel.Thread|null;\n\n  constructor(categoryMapper: (arg0: SDK.TracingModel.Event) => string) {\n    this._categoryMapper = categoryMapper;\n\n    this.reset();\n  }\n\n  frames(startTime?: number, endTime?: number): TimelineFrame[] {\n    if (!startTime && !endTime) {\n      return this._frames;\n    }\n    const firstFrame =\n        Platform.ArrayUtilities.lowerBound(this._frames, startTime || 0, (time, frame) => time - frame.endTime);\n    const lastFrame =\n        Platform.ArrayUtilities.lowerBound(this._frames, endTime || Infinity, (time, frame) => time - frame.startTime);\n    return this._frames.slice(firstFrame, lastFrame);\n  }\n\n  hasRasterTile(rasterTask: SDK.TracingModel.Event): boolean {\n    const data = rasterTask.args['tileData'];\n    if (!data) {\n      return false;\n    }\n    const frameId = data['sourceFrameNumber'];\n    const frame = frameId && this._frameById[frameId];\n    if (!frame || !frame.layerTree) {\n      return false;\n    }\n    return true;\n  }\n\n  rasterTilePromise(rasterTask: SDK.TracingModel.Event): Promise<{\n    rect: Protocol.DOM.Rect,\n    snapshot: SDK.PaintProfiler.PaintProfilerSnapshot,\n  }|null> {\n    if (!this._target) {\n      return Promise.resolve(null);\n    }\n    const data = rasterTask.args['tileData'];\n    const frameId = (data['sourceFrameNumber'] as number);\n    const tileId = data['tileId'] && data['tileId']['id_ref'];\n    const frame = frameId && this._frameById[frameId];\n    if (!frame || !frame.layerTree || !tileId) {\n      return Promise.resolve(null);\n    }\n\n    return frame.layerTree.layerTreePromise().then(layerTree => layerTree && layerTree.pictureForRasterTile(tileId));\n  }\n\n  reset(): void {\n    this._minimumRecordTime = Infinity;\n    this._frames = [];\n    this._frameById = {};\n    this._lastFrame = null;\n    this._lastLayerTree = null;\n    this._mainFrameCommitted = false;\n    this._mainFrameRequested = false;\n    this._framePendingCommit = null;\n    this._lastBeginFrame = null;\n    this._lastDroppedFrame = null;\n    this._lastNeedsBeginFrame = null;\n    this._framePendingActivation = null;\n    this._lastTaskBeginTime = null;\n    this._target = null;\n    this._layerTreeId = null;\n    this._currentTaskTimeByCategory = {};\n  }\n\n  handleBeginFrame(startTime: number): void {\n    if (!this._lastFrame) {\n      this._startFrame(startTime);\n    }\n    this._lastBeginFrame = startTime;\n  }\n\n  handleDroppedFrame(startTime: number): void {\n    if (!this._lastFrame) {\n      this._startFrame(startTime);\n    }\n    this._lastDroppedFrame = startTime;\n  }\n\n  handleDrawFrame(startTime: number): void {\n    if (!this._lastFrame) {\n      this._startFrame(startTime);\n      return;\n    }\n\n    // - if it wasn't drawn, it didn't happen!\n    // - only show frames that either did not wait for the main thread frame or had one committed.\n    if (this._mainFrameCommitted || !this._mainFrameRequested) {\n      if (this._lastNeedsBeginFrame) {\n        const idleTimeEnd = this._framePendingActivation ? this._framePendingActivation.triggerTime :\n                                                           (this._lastBeginFrame || this._lastNeedsBeginFrame);\n        if (idleTimeEnd > this._lastFrame.startTime) {\n          this._lastFrame.idle = true;\n          this._startFrame(idleTimeEnd);\n          if (this._framePendingActivation) {\n            this._commitPendingFrame();\n          }\n          this._lastBeginFrame = null;\n        }\n        this._lastNeedsBeginFrame = null;\n      }\n      if (this._lastDroppedFrame) {\n        this._lastFrame.dropped = true;\n        this._startFrame(this._lastDroppedFrame);\n        this._lastDroppedFrame = null;\n      }\n      this._startFrame(startTime);\n    }\n    this._mainFrameCommitted = false;\n  }\n\n  handleActivateLayerTree(): void {\n    if (!this._lastFrame) {\n      return;\n    }\n    if (this._framePendingActivation && !this._lastNeedsBeginFrame) {\n      this._commitPendingFrame();\n    }\n  }\n\n  handleRequestMainThreadFrame(): void {\n    if (!this._lastFrame) {\n      return;\n    }\n    this._mainFrameRequested = true;\n  }\n\n  handleCompositeLayers(): void {\n    if (!this._framePendingCommit) {\n      return;\n    }\n    this._framePendingActivation = this._framePendingCommit;\n    this._framePendingCommit = null;\n    this._mainFrameRequested = false;\n    this._mainFrameCommitted = true;\n  }\n\n  handleLayerTreeSnapshot(layerTree: TracingFrameLayerTree): void {\n    this._lastLayerTree = layerTree;\n  }\n\n  handleNeedFrameChanged(startTime: number, needsBeginFrame: boolean): void {\n    if (needsBeginFrame) {\n      this._lastNeedsBeginFrame = startTime;\n    }\n  }\n\n  _startFrame(startTime: number): void {\n    if (this._lastFrame) {\n      this._flushFrame(this._lastFrame, startTime);\n    }\n    this._lastFrame = new TimelineFrame(startTime, startTime - this._minimumRecordTime);\n  }\n\n  _flushFrame(frame: TimelineFrame, endTime: number): void {\n    frame._setLayerTree(this._lastLayerTree);\n    frame._setEndTime(endTime);\n    if (this._lastLayerTree) {\n      this._lastLayerTree._setPaints(frame._paints);\n    }\n    const lastFrame = this._frames[this._frames.length - 1];\n    if (this._frames.length && lastFrame &&\n        (frame.startTime !== lastFrame.endTime || frame.startTime > frame.endTime)) {\n      console.assert(\n          false, `Inconsistent frame time for frame ${this._frames.length} (${frame.startTime} - ${frame.endTime})`);\n    }\n    this._frames.push(frame);\n    if (typeof frame._mainFrameId === 'number') {\n      this._frameById[frame._mainFrameId] = frame;\n    }\n  }\n\n  _commitPendingFrame(): void {\n    if (!this._framePendingActivation || !this._lastFrame) {\n      return;\n    }\n\n    this._lastFrame._addTimeForCategories(this._framePendingActivation.timeByCategory);\n    this._lastFrame._paints = this._framePendingActivation.paints;\n    this._lastFrame._mainFrameId = this._framePendingActivation.mainFrameId;\n    this._framePendingActivation = null;\n  }\n\n  addTraceEvents(target: SDK.Target.Target|null, events: SDK.TracingModel.Event[], threadData: {\n    thread: SDK.TracingModel.Thread,\n    time: number,\n  }[]): void {\n    this._target = target;\n    let j = 0;\n    this._currentProcessMainThread = threadData.length && threadData[0].thread || null;\n    for (let i = 0; i < events.length; ++i) {\n      while (j + 1 < threadData.length && threadData[j + 1].time <= events[i].startTime) {\n        this._currentProcessMainThread = threadData[++j].thread;\n      }\n      this._addTraceEvent(events[i]);\n    }\n    this._currentProcessMainThread = null;\n  }\n\n  _addTraceEvent(event: SDK.TracingModel.Event): void {\n    if (event.startTime && event.startTime < this._minimumRecordTime) {\n      this._minimumRecordTime = event.startTime;\n    }\n\n    if (event.name === RecordType.SetLayerTreeId) {\n      this._layerTreeId = event.args['layerTreeId'] || event.args['data']['layerTreeId'];\n    } else if (\n        event.id && event.phase === SDK.TracingModel.Phase.SnapshotObject &&\n        event.name === RecordType.LayerTreeHostImplSnapshot && Number(event.id) === this._layerTreeId && this._target) {\n      const snapshot = (event as SDK.TracingModel.ObjectSnapshot);\n      this.handleLayerTreeSnapshot(new TracingFrameLayerTree(this._target, snapshot));\n    } else {\n      this._processCompositorEvents(event);\n      if (event.thread === this._currentProcessMainThread) {\n        this._addMainThreadTraceEvent(event);\n      } else if (this._lastFrame && event.selfTime && !SDK.TracingModel.TracingModel.isTopLevelEvent(event)) {\n        this._lastFrame._addTimeForCategory(this._categoryMapper(event), event.selfTime);\n      }\n    }\n  }\n\n  _processCompositorEvents(event: SDK.TracingModel.Event): void {\n    if (event.args['layerTreeId'] !== this._layerTreeId) {\n      return;\n    }\n\n    const timestamp = event.startTime;\n    if (event.name === RecordType.BeginFrame) {\n      this.handleBeginFrame(timestamp);\n    } else if (event.name === RecordType.DrawFrame) {\n      if (event.phase === 'I') {\n        // Legacy behavior: If DrawFrame is an instant event, then it is not\n        // supposed to contain frame presentation info; use the event time of\n        // DrawFrame in this case.\n        // TODO(mjzhang): Remove this legacy support when the migration to\n        // using presentation time as frame boundary is stablized.\n        this.handleDrawFrame(timestamp);\n      } else if (event.args['presentationTimestamp']) {\n        // Current behavior: Use the presentation timestamp. If the non-instant\n        // DrawFrame event contains no such timestamp, then the presentation did\n        // not happen and therefore the event will not be processed.\n        this.handleDrawFrame(event.args['presentationTimestamp'] / 1000);\n      }\n    } else if (event.name === RecordType.ActivateLayerTree) {\n      this.handleActivateLayerTree();\n    } else if (event.name === RecordType.RequestMainThreadFrame) {\n      this.handleRequestMainThreadFrame();\n    } else if (event.name === RecordType.NeedsBeginFrameChanged) {\n      this.handleNeedFrameChanged(timestamp, event.args['data'] && event.args['data']['needsBeginFrame']);\n    } else if (event.name === RecordType.DroppedFrame) {\n      this.handleDroppedFrame(timestamp);\n    }\n  }\n\n  _addMainThreadTraceEvent(event: SDK.TracingModel.Event): void {\n    if (SDK.TracingModel.TracingModel.isTopLevelEvent(event)) {\n      this._currentTaskTimeByCategory = {};\n      this._lastTaskBeginTime = event.startTime;\n    }\n    if (!this._framePendingCommit && TimelineFrameModel._mainFrameMarkers.indexOf(event.name as RecordType) >= 0) {\n      this._framePendingCommit =\n          new PendingFrame(this._lastTaskBeginTime || event.startTime, this._currentTaskTimeByCategory);\n    }\n    if (!this._framePendingCommit) {\n      this._addTimeForCategory(this._currentTaskTimeByCategory, event);\n      return;\n    }\n    this._addTimeForCategory(this._framePendingCommit.timeByCategory, event);\n\n    if (event.name === RecordType.BeginMainThreadFrame && event.args['data'] && event.args['data']['frameId']) {\n      this._framePendingCommit.mainFrameId = event.args['data']['frameId'];\n    }\n    if (event.name === RecordType.Paint && event.args['data']['layerId'] && TimelineData.forEvent(event).picture &&\n        this._target) {\n      this._framePendingCommit.paints.push(new LayerPaintEvent(event, this._target));\n    }\n    if (event.name === RecordType.CompositeLayers && event.args['layerTreeId'] === this._layerTreeId) {\n      this.handleCompositeLayers();\n    }\n  }\n\n  _addTimeForCategory(\n      timeByCategory: {\n        [x: string]: number,\n      },\n      event: SDK.TracingModel.Event): void {\n    if (!event.selfTime) {\n      return;\n    }\n    const categoryName = this._categoryMapper(event);\n    timeByCategory[categoryName] = (timeByCategory[categoryName] || 0) + event.selfTime;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  static readonly _mainFrameMarkers: RecordType[] = [\n    RecordType.ScheduleStyleRecalculation,\n    RecordType.InvalidateLayout,\n    RecordType.BeginMainThreadFrame,\n    RecordType.ScrollLayer,\n  ];\n}\n\nexport class TracingFrameLayerTree {\n  _target: SDK.Target.Target;\n  _snapshot: SDK.TracingModel.ObjectSnapshot;\n  _paints!: LayerPaintEvent[]|undefined;\n\n  constructor(target: SDK.Target.Target, snapshot: SDK.TracingModel.ObjectSnapshot) {\n    this._target = target;\n    this._snapshot = snapshot;\n  }\n\n  async layerTreePromise(): Promise<TracingLayerTree|null> {\n    const result = (await this._snapshot.objectPromise() as unknown as {\n      active_tiles: TracingLayerTile[],\n      device_viewport_size: {\n        width: number,\n        height: number,\n      },\n      active_tree: {\n        root_layer: TracingLayerPayload,\n        layers: TracingLayerPayload[],\n      },\n    });\n    if (!result) {\n      return null;\n    }\n    const viewport = result['device_viewport_size'];\n    const tiles = result['active_tiles'];\n    const rootLayer = result['active_tree']['root_layer'];\n    const layers = result['active_tree']['layers'];\n    const layerTree = new TracingLayerTree(this._target);\n    layerTree.setViewportSize(viewport);\n    layerTree.setTiles(tiles);\n\n    await layerTree.setLayers(rootLayer, layers, this._paints || []);\n    return layerTree;\n  }\n\n  paints(): LayerPaintEvent[] {\n    return this._paints || [];\n  }\n\n  _setPaints(paints: LayerPaintEvent[]): void {\n    this._paints = paints;\n  }\n}\n\nexport class TimelineFrame {\n  startTime: number;\n  startTimeOffset: number;\n  endTime: number;\n  duration: number;\n  timeByCategory: {\n    [x: string]: number,\n  };\n  cpuTime: number;\n  idle: boolean;\n  dropped: boolean;\n  layerTree: TracingFrameLayerTree|null;\n  _paints: LayerPaintEvent[];\n  _mainFrameId: number|undefined;\n\n  constructor(startTime: number, startTimeOffset: number) {\n    this.startTime = startTime;\n    this.startTimeOffset = startTimeOffset;\n    this.endTime = this.startTime;\n    this.duration = 0;\n    this.timeByCategory = {};\n    this.cpuTime = 0;\n    this.idle = false;\n    this.dropped = false;\n    this.layerTree = null;\n    this._paints = [];\n    this._mainFrameId = undefined;\n  }\n\n  hasWarnings(): boolean {\n    return false;\n  }\n\n  _setEndTime(endTime: number): void {\n    this.endTime = endTime;\n    this.duration = this.endTime - this.startTime;\n  }\n\n  _setLayerTree(layerTree: TracingFrameLayerTree|null): void {\n    this.layerTree = layerTree;\n  }\n\n  _addTimeForCategories(timeByCategory: {\n    [x: string]: number,\n  }): void {\n    for (const category in timeByCategory) {\n      this._addTimeForCategory(category, timeByCategory[category]);\n    }\n  }\n\n  _addTimeForCategory(category: string, time: number): void {\n    this.timeByCategory[category] = (this.timeByCategory[category] || 0) + time;\n    this.cpuTime += time;\n  }\n}\n\nexport class LayerPaintEvent {\n  _event: SDK.TracingModel.Event;\n  _target: SDK.Target.Target|null;\n\n  constructor(event: SDK.TracingModel.Event, target: SDK.Target.Target|null) {\n    this._event = event;\n    this._target = target;\n  }\n\n  layerId(): string {\n    return this._event.args['data']['layerId'];\n  }\n\n  event(): SDK.TracingModel.Event {\n    return this._event;\n  }\n\n  picturePromise(): Promise<{\n    rect: Array<number>,\n    serializedPicture: string,\n  }|null> {\n    const picture = TimelineData.forEvent(this._event).picture;\n    if (!picture) {\n      return Promise.resolve(null);\n    }\n\n    // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration)\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return picture.objectPromise().then((result: any) => {\n      if (!result) {\n        return null;\n      }\n      const rect = result['params'] && result['params']['layer_rect'];\n      const picture = result['skp64'];\n      return rect && picture ? {rect: rect, serializedPicture: picture} : null;\n    });\n  }\n\n  async snapshotPromise(): Promise<{\n    rect: Array<number>,\n    snapshot: SDK.PaintProfiler.PaintProfilerSnapshot,\n  }|null> {\n    const paintProfilerModel = this._target && this._target.model(SDK.PaintProfiler.PaintProfilerModel);\n    const picture = await this.picturePromise();\n    if (!picture || !paintProfilerModel) {\n      return null;\n    }\n    const snapshot = await paintProfilerModel.loadSnapshot(picture.serializedPicture);\n    return snapshot ? {rect: picture.rect, snapshot: snapshot} : null;\n  }\n}\n\nexport class PendingFrame {\n  timeByCategory: {\n    [x: string]: number,\n  };\n  paints: LayerPaintEvent[];\n  mainFrameId: number|undefined;\n  triggerTime: number;\n  constructor(triggerTime: number, timeByCategory: {\n    [x: string]: number,\n  }) {\n    this.timeByCategory = timeByCategory;\n    this.paints = [];\n    this.mainFrameId = undefined;\n    this.triggerTime = triggerTime;\n  }\n}\n"]}