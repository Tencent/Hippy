{"version":3,"file":"SASSSourceMapping.js","sourceRoot":"","sources":["../../../../../../front_end/models/bindings/SASSSourceMapping.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2012 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as Common from '../../core/common/common.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Workspace from '../workspace/workspace.js';\n\nimport {ContentProviderBasedProject} from './ContentProviderBasedProject.js';\nimport type {SourceMapping} from './CSSWorkspaceBinding.js';\nimport {CSSWorkspaceBinding} from './CSSWorkspaceBinding.js';  // eslint-disable-line no-unused-vars\nimport {NetworkProject} from './NetworkProject.js';\n\nexport class SASSSourceMapping implements SourceMapping {\n  _sourceMapManager: SDK.SourceMapManager.SourceMapManager<SDK.CSSStyleSheetHeader.CSSStyleSheetHeader>;\n  _project: ContentProviderBasedProject;\n  _eventListeners: Common.EventTarget.EventDescriptor[];\n  _bindings: Map<string, Binding>;\n\n  constructor(\n      target: SDK.Target.Target,\n      sourceMapManager: SDK.SourceMapManager.SourceMapManager<SDK.CSSStyleSheetHeader.CSSStyleSheetHeader>,\n      workspace: Workspace.Workspace.WorkspaceImpl) {\n    this._sourceMapManager = sourceMapManager;\n    this._project = new ContentProviderBasedProject(\n        workspace, 'cssSourceMaps:' + target.id(), Workspace.Workspace.projectTypes.Network, '',\n        false /* isServiceProject */);\n    NetworkProject.setTargetForProject(this._project, target);\n\n    this._bindings = new Map();\n\n    this._eventListeners = [\n      this._sourceMapManager.addEventListener(\n          SDK.SourceMapManager.Events.SourceMapAttached,\n          event => {\n            this._sourceMapAttached(event);\n          },\n          this),\n      this._sourceMapManager.addEventListener(\n          SDK.SourceMapManager.Events.SourceMapDetached,\n          event => {\n            this._sourceMapDetached(event);\n          },\n          this),\n    ];\n  }\n\n  _sourceMapAttachedForTest(_sourceMap: SDK.SourceMap.SourceMap|null): void {\n  }\n\n  async _sourceMapAttached(event: Common.EventTarget.EventTargetEvent): Promise<void> {\n    const header = (event.data.client as SDK.CSSStyleSheetHeader.CSSStyleSheetHeader);\n    const sourceMap = (event.data.sourceMap as SDK.SourceMap.TextSourceMap);\n    const project = this._project;\n    const bindings = this._bindings;\n    for (const sourceURL of sourceMap.sourceURLs()) {\n      let binding = bindings.get(sourceURL);\n      if (!binding) {\n        binding = new Binding(project, sourceURL);\n        bindings.set(sourceURL, binding);\n      }\n      binding.addSourceMap(sourceMap, header.frameId);\n    }\n    await CSSWorkspaceBinding.instance().updateLocations(header);\n    this._sourceMapAttachedForTest(sourceMap);\n  }\n\n  async _sourceMapDetached(event: Common.EventTarget.EventTargetEvent): Promise<void> {\n    const header = (event.data.client as SDK.CSSStyleSheetHeader.CSSStyleSheetHeader);\n    const sourceMap = (event.data.sourceMap as SDK.SourceMap.TextSourceMap);\n    const bindings = this._bindings;\n    for (const sourceURL of sourceMap.sourceURLs()) {\n      const binding = bindings.get(sourceURL);\n      if (binding) {\n        binding.removeSourceMap(sourceMap, header.frameId);\n        if (!binding._uiSourceCode) {\n          bindings.delete(sourceURL);\n        }\n      }\n    }\n    await CSSWorkspaceBinding.instance().updateLocations(header);\n  }\n\n  rawLocationToUILocation(rawLocation: SDK.CSSModel.CSSLocation): Workspace.UISourceCode.UILocation|null {\n    const header = rawLocation.header();\n    if (!header) {\n      return null;\n    }\n    const sourceMap = this._sourceMapManager.sourceMapForClient(header);\n    if (!sourceMap) {\n      return null;\n    }\n    let {lineNumber, columnNumber} = rawLocation;\n    // If the source map maps the origin (line:0, column:0) but the CSS header is inline (in a HTML doc),\n    // then adjust the line and column numbers.\n    if (sourceMap.mapsOrigin() && header.isInline) {\n      lineNumber -= header.startLine;\n      if (lineNumber === 0) {\n        columnNumber -= header.startColumn;\n      }\n    }\n    const entry = sourceMap.findEntry(lineNumber, columnNumber);\n    if (!entry || !entry.sourceURL) {\n      return null;\n    }\n    const uiSourceCode = this._project.uiSourceCodeForURL(entry.sourceURL);\n    if (!uiSourceCode) {\n      return null;\n    }\n    return uiSourceCode.uiLocation(entry.sourceLineNumber, entry.sourceColumnNumber);\n  }\n\n  uiLocationToRawLocations(uiLocation: Workspace.UISourceCode.UILocation): SDK.CSSModel.CSSLocation[] {\n    // TODO(crbug.com/1153123): Revisit the `columnNumber || 0` and also preserve `undefined` for source maps?\n    const {uiSourceCode, lineNumber, columnNumber = 0} = uiLocation;\n    const binding = uiSourceCodeToBinding.get(uiSourceCode);\n    if (!binding) {\n      return [];\n    }\n    const locations: SDK.CSSModel.CSSLocation[] = [];\n    for (const sourceMap of binding._referringSourceMaps) {\n      const entries = sourceMap.findReverseEntries(uiSourceCode.url(), lineNumber, columnNumber);\n      for (const header of this._sourceMapManager.clientsForSourceMap(sourceMap)) {\n        locations.push(\n            ...entries.map(entry => new SDK.CSSModel.CSSLocation(header, entry.lineNumber, entry.columnNumber)));\n      }\n    }\n    return locations;\n  }\n\n  dispose(): void {\n    Common.EventTarget.EventTarget.removeEventListeners(this._eventListeners);\n    this._project.dispose();\n  }\n}\n\nconst uiSourceCodeToBinding = new WeakMap<Workspace.UISourceCode.UISourceCode, Binding>();\n\nclass Binding {\n  _project: ContentProviderBasedProject;\n  _url: string;\n  _referringSourceMaps: SDK.SourceMap.TextSourceMap[];\n  _activeSourceMap?: SDK.SourceMap.TextSourceMap|null;\n  _uiSourceCode: Workspace.UISourceCode.UISourceCode|null;\n\n  constructor(project: ContentProviderBasedProject, url: string) {\n    this._project = project;\n    this._url = url;\n\n    this._referringSourceMaps = [];\n    this._uiSourceCode = null;\n  }\n\n  _recreateUISourceCodeIfNeeded(frameId: string): void {\n    const sourceMap = this._referringSourceMaps[this._referringSourceMaps.length - 1];\n\n    const contentProvider =\n        sourceMap.sourceContentProvider(this._url, Common.ResourceType.resourceTypes.SourceMapStyleSheet);\n    const newUISourceCode = this._project.createUISourceCode(this._url, contentProvider.contentType());\n    uiSourceCodeToBinding.set(newUISourceCode, this);\n    const mimeType =\n        Common.ResourceType.ResourceType.mimeFromURL(this._url) || contentProvider.contentType().canonicalMimeType();\n    const embeddedContent = sourceMap.embeddedContentByURL(this._url);\n    const metadata = typeof embeddedContent === 'string' ?\n        new Workspace.UISourceCode.UISourceCodeMetadata(null, embeddedContent.length) :\n        null;\n\n    if (this._uiSourceCode) {\n      NetworkProject.cloneInitialFrameAttribution(this._uiSourceCode, newUISourceCode);\n      this._project.removeFile(this._uiSourceCode.url());\n    } else {\n      NetworkProject.setInitialFrameAttribution(newUISourceCode, frameId);\n    }\n    this._uiSourceCode = newUISourceCode;\n    this._project.addUISourceCodeWithProvider(this._uiSourceCode, contentProvider, metadata, mimeType);\n  }\n\n  addSourceMap(sourceMap: SDK.SourceMap.TextSourceMap, frameId: string): void {\n    if (this._uiSourceCode) {\n      NetworkProject.addFrameAttribution(this._uiSourceCode, frameId);\n    }\n    this._referringSourceMaps.push(sourceMap);\n    this._recreateUISourceCodeIfNeeded(frameId);\n  }\n\n  removeSourceMap(sourceMap: SDK.SourceMap.TextSourceMap, frameId: string): void {\n    const uiSourceCode = (this._uiSourceCode as Workspace.UISourceCode.UISourceCode);\n    NetworkProject.removeFrameAttribution(uiSourceCode, frameId);\n    const lastIndex = this._referringSourceMaps.lastIndexOf(sourceMap);\n    if (lastIndex !== -1) {\n      this._referringSourceMaps.splice(lastIndex, 1);\n    }\n    if (!this._referringSourceMaps.length) {\n      this._project.removeFile(uiSourceCode.url());\n      this._uiSourceCode = null;\n    } else {\n      this._recreateUISourceCodeIfNeeded(frameId);\n    }\n  }\n}\n"]}