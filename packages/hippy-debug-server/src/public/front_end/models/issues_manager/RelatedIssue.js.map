{"version":3,"file":"RelatedIssue.js","sourceRoot":"","sources":["../../../../../../front_end/models/issues_manager/RelatedIssue.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as Common from '../../core/common/common.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type {Issue, IssueCategory} from './Issue.js';\nimport {IssuesManager} from './IssuesManager.js';\n\nexport type IssuesAssociatable = SDK.NetworkRequest.NetworkRequest|SDK.Cookie.Cookie;\n\nfunction issuesAssociatedWithNetworkRequest(issues: Issue[], request: SDK.NetworkRequest.NetworkRequest): Issue[] {\n  return issues.filter(issue => {\n    for (const affectedRequest of issue.requests()) {\n      if (affectedRequest.requestId === request.requestId()) {\n        return true;\n      }\n    }\n    return false;\n  });\n}\n\nfunction issuesAssociatedWithCookie(issues: Issue[], domain: string, name: string, path: string): Issue[] {\n  return issues.filter(issue => {\n    for (const cookie of issue.cookies()) {\n      if (cookie.domain === domain && cookie.name === name && cookie.path === path) {\n        return true;\n      }\n    }\n    return false;\n  });\n}\n\n/**\n * @throws In case obj has an unsupported type (i.e. not part of the IssuesAssociatble union).\n */\nexport function issuesAssociatedWith(issues: Issue[], obj: IssuesAssociatable): Issue[] {\n  if (obj instanceof SDK.NetworkRequest.NetworkRequest) {\n    return issuesAssociatedWithNetworkRequest(issues, obj);\n  }\n  if (obj instanceof SDK.Cookie.Cookie) {\n    return issuesAssociatedWithCookie(issues, obj.domain(), obj.name(), obj.path());\n  }\n  throw new Error(`issues can not be associated with ${JSON.stringify(obj)}`);\n}\n\nexport function hasIssues(obj: IssuesAssociatable): boolean {\n  const issues = Array.from(IssuesManager.instance().issues());\n  return issuesAssociatedWith(issues, obj).length > 0;\n}\n\nexport function hasIssueOfCategory(obj: IssuesAssociatable, category: IssueCategory): boolean {\n  const issues = Array.from(IssuesManager.instance().issues());\n  return issuesAssociatedWith(issues, obj).some(issue => issue.getCategory() === category);\n}\n\nexport async function reveal(obj: IssuesAssociatable, category?: IssueCategory): Promise<void|undefined> {\n  const issues = Array.from(IssuesManager.instance().issues());\n  const candidates = issuesAssociatedWith(issues, obj).filter(issue => !category || issue.getCategory() === category);\n  if (candidates.length > 0) {\n    return Common.Revealer.reveal(candidates[0]);\n  }\n}\n"]}