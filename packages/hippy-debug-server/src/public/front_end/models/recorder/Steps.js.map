{"version":3,"file":"Steps.js","sourceRoot":"","sources":["../../../../../../front_end/models/recorder/Steps.ts"],"names":[],"mappings":"AAAA,gEAAgE;AAChE,yEAAyE;AACzE,6BAA6B;AAuH7B,MAAM,UAAU,4BAA4B,CAAC,CAAO;IAClD,MAAM,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;AAClD,CAAC;AAGD,MAAM,UAAU,eAAe,CAAC,OAAqB,EAAE,QAAkB;IACvE,OAAO;QACL,IAAI,EAAE,OAAO;QACb,OAAO;QACP,QAAQ;KACT,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,gBAAgB,CAAC,OAAqB,EAAE,QAAkB;IACxE,OAAO;QACL,IAAI,EAAE,QAAQ;QACd,OAAO;QACP,QAAQ;KACT,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,gBAAgB,CAAC,OAAqB,EAAE,QAAkB,EAAE,KAAa;IACvF,OAAO;QACL,IAAI,EAAE,QAAQ;QACd,OAAO;QACP,QAAQ;QACR,KAAK;KACN,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,kCAAkC,CAAC,UAA6B;IAC9E,OAAO;QACL,IAAI,EAAE,0BAA0B;QAChC,UAAU;KACX,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,iBAAiB,CAAC,OAAqB,EAAE,GAAQ;IAC/D,OAAO;QACL,IAAI,EAAE,SAAS;QACf,OAAO;QACP,GAAG;KACJ,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,eAAe,CAAC,OAAqB,EAAE,GAAQ;IAC7D,OAAO;QACL,IAAI,EAAE,OAAO;QACb,OAAO;QACP,GAAG;KACJ,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,kBAAkB,CAAC,QAAqD;IACtF,OAAO;QACL,IAAI,EAAE,UAAU;QAChB,KAAK,EAAE,QAAQ,CAAC,WAAW;QAC3B,MAAM,EAAE,QAAQ,CAAC,YAAY;KAC9B,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,eAAe,CAAC,IAAU;IACxC,OAAO,CAAC,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC/E,CAAC;AAED,MAAM,UAAU,YAAY,CAAC,IAAU;IACrC,OAAO,CAAC,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC/E,CAAC","sourcesContent":["// Copyright (c) 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport type Selector = string&{__brand: 'selector'};\n\nexport interface WaitForNavigationCondition {\n  type: 'waitForNavigation';\n  expectedUrl: string;\n}\n\nexport type Condition = WaitForNavigationCondition;\n\n\nexport interface FrameContext {\n  path: number[];\n  target: string;\n}\n\nexport interface StepWithFrameContext {\n  context: FrameContext;\n}\n\nexport interface ClickStep extends StepWithFrameContext, StepWithCondition {\n  type: 'click';\n  selector: Selector;\n}\n\nexport interface NetworkConditions {\n  download: number;\n  upload: number;\n  latency: number;\n}\n\nexport interface EmulateNetworkConditionsStep {\n  type: 'emulateNetworkConditions';\n  conditions: NetworkConditions;\n}\n\nexport interface ChangeStep extends StepWithFrameContext, StepWithCondition {\n  type: 'change';\n  selector: Selector;\n  value: string;\n}\n\nexport interface SubmitStep extends StepWithFrameContext, StepWithCondition {\n  type: 'submit';\n  selector: Selector;\n}\n\nexport interface StepWithCondition {\n  condition?: Condition;\n}\n\nexport type Key = '0'|'1'|'2'|'3'|'4'|'5'|'6'|'7'|'8'|'9'|'Power'|'Eject'|'Abort'|'Help'|'Backspace'|'Tab'|'Numpad5'|\n    'NumpadEnter'|'Enter'|'\\r'|'\\n'|'ShiftLeft'|'ShiftRight'|'ControlLeft'|'ControlRight'|'AltLeft'|'AltRight'|'Pause'|\n    'CapsLock'|'Escape'|'Convert'|'NonConvert'|'Space'|'Numpad9'|'PageUp'|'Numpad3'|'PageDown'|'End'|'Numpad1'|'Home'|\n    'Numpad7'|'ArrowLeft'|'Numpad4'|'Numpad8'|'ArrowUp'|'ArrowRight'|'Numpad6'|'Numpad2'|'ArrowDown'|'Select'|'Open'|\n    'PrintScreen'|'Insert'|'Numpad0'|'Delete'|'NumpadDecimal'|'Digit0'|'Digit1'|'Digit2'|'Digit3'|'Digit4'|'Digit5'|\n    'Digit6'|'Digit7'|'Digit8'|'Digit9'|'KeyA'|'KeyB'|'KeyC'|'KeyD'|'KeyE'|'KeyF'|'KeyG'|'KeyH'|'KeyI'|'KeyJ'|'KeyK'|\n    'KeyL'|'KeyM'|'KeyN'|'KeyO'|'KeyP'|'KeyQ'|'KeyR'|'KeyS'|'KeyT'|'KeyU'|'KeyV'|'KeyW'|'KeyX'|'KeyY'|'KeyZ'|'MetaLeft'|\n    'MetaRight'|'ContextMenu'|'NumpadMultiply'|'NumpadAdd'|'NumpadSubtract'|'NumpadDivide'|'F1'|'F2'|'F3'|'F4'|'F5'|\n    'F6'|'F7'|'F8'|'F9'|'F10'|'F11'|'F12'|'F13'|'F14'|'F15'|'F16'|'F17'|'F18'|'F19'|'F20'|'F21'|'F22'|'F23'|'F24'|\n    'NumLock'|'ScrollLock'|'AudioVolumeMute'|'AudioVolumeDown'|'AudioVolumeUp'|'MediaTrackNext'|'MediaTrackPrevious'|\n    'MediaStop'|'MediaPlayPause'|'Semicolon'|'Equal'|'NumpadEqual'|'Comma'|'Minus'|'Period'|'Slash'|'Backquote'|\n    'BracketLeft'|'Backslash'|'BracketRight'|'Quote'|'AltGraph'|'Props'|'Cancel'|'Clear'|'Shift'|'Control'|'Alt'|\n    'Accept'|'ModeChange'|' '|'Print'|'Execute'|'\\u0000'|'a'|'b'|'c'|'d'|'e'|'f'|'g'|'h'|'i'|'j'|'k'|'l'|'m'|'n'|'o'|\n    'p'|'q'|'r'|'s'|'t'|'u'|'v'|'w'|'x'|'y'|'z'|'Meta'|'*'|'+'|'-'|'/'|';'|'='|','|'.'|'`'|'['|'\\\\'|']'|'\\''|'Attn'|\n    'CrSel'|'ExSel'|'EraseEof'|'Play'|'ZoomOut'|')'|'!'|'@'|'#'|'$'|'%'|'^'|'&'|'('|'A'|'B'|'C'|'D'|'E'|'F'|'G'|'H'|'I'|\n    'J'|'K'|'L'|'M'|'N'|'O'|'P'|'Q'|'R'|'S'|'T'|'U'|'V'|'W'|'X'|'Y'|'Z'|':'|'<'|'_'|'>'|'?'|'~'|'{'|'|'|'}'|'\"'|\n    'SoftLeft'|'SoftRight'|'Camera'|'Call'|'EndCall'|'VolumeDown'|'VolumeUp';\n\nexport interface KeyDownStep extends StepWithFrameContext, StepWithCondition {\n  type: 'keydown';\n  key: Key;\n  altKey?: boolean;\n  ctrlKey?: boolean;\n  metaKey?: boolean;\n  shiftKey?: boolean;\n}\n\nexport interface KeyUpStep extends StepWithFrameContext, StepWithCondition {\n  type: 'keyup';\n  key: Key;\n  altKey?: boolean;\n  ctrlKey?: boolean;\n  metaKey?: boolean;\n  shiftKey?: boolean;\n}\n\nexport interface ViewportStep {\n  type: 'viewport';\n  width: number;\n  height: number;\n}\n\nexport interface CloseStep {\n  type: 'close';\n  target: string;\n}\n\nexport type Step =\n    ClickStep|ChangeStep|SubmitStep|EmulateNetworkConditionsStep|KeyDownStep|KeyUpStep|CloseStep|ViewportStep;\n\nexport interface UserFlowSection {\n  screenshot: string;\n  title: string;\n  url: string;\n  steps: Step[];\n  networkConditions?: NetworkConditions;\n}\n\nexport interface UserFlow {\n  title: string;\n  description?: string;\n  sections: UserFlowSection[];\n}\n\nexport function assertAllStepTypesAreHandled(s: never): never;\nexport function assertAllStepTypesAreHandled(s: Step): never {\n  throw new Error(`Unknown step type: ${s.type}`);\n}\n\n\nexport function createClickStep(context: FrameContext, selector: Selector): ClickStep {\n  return {\n    type: 'click',\n    context,\n    selector,\n  };\n}\n\nexport function createSubmitStep(context: FrameContext, selector: Selector): SubmitStep {\n  return {\n    type: 'submit',\n    context,\n    selector,\n  };\n}\n\nexport function createChangeStep(context: FrameContext, selector: Selector, value: string): ChangeStep {\n  return {\n    type: 'change',\n    context,\n    selector,\n    value,\n  };\n}\n\nexport function createEmulateNetworkConditionsStep(conditions: NetworkConditions): EmulateNetworkConditionsStep {\n  return {\n    type: 'emulateNetworkConditions',\n    conditions,\n  };\n}\n\nexport function createKeyDownStep(context: FrameContext, key: Key): KeyDownStep {\n  return {\n    type: 'keydown',\n    context,\n    key,\n  };\n}\n\nexport function createKeyUpStep(context: FrameContext, key: Key): KeyUpStep {\n  return {\n    type: 'keyup',\n    context,\n    key,\n  };\n}\n\nexport function createViewportStep(viewport: {clientWidth: number, clientHeight: number}): ViewportStep {\n  return {\n    type: 'viewport',\n    width: viewport.clientWidth,\n    height: viewport.clientHeight,\n  };\n}\n\nexport function hasFrameContext(step: Step): step is ClickStep|ChangeStep|SubmitStep|KeyDownStep|KeyUpStep {\n  return ['click', 'change', 'submit', 'keydown', 'keyup'].includes(step.type);\n}\n\nexport function hasCondition(step: Step): step is ClickStep|ChangeStep|SubmitStep|KeyDownStep|KeyUpStep {\n  return ['click', 'change', 'submit', 'keydown', 'keyup'].includes(step.type);\n}\n"]}