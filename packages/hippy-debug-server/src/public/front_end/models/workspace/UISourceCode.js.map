{"version":3,"file":"UISourceCode.js","sourceRoot":"","sources":["../../../../../../front_end/models/workspace/UISourceCode.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA4BG;AAEH,uDAAuD;AACvD,uDAAuD;AAEvD,OAAO,KAAK,MAAM,MAAM,6BAA6B,CAAC;AACtD,OAAO,KAAK,IAAI,MAAM,yBAAyB,CAAC;AAChD,OAAO,KAAK,QAAQ,MAAM,iCAAiC,CAAC;AAC5D,OAAO,KAAK,SAAS,MAAM,6BAA6B,CAAC;AAGzD,OAAO,EAAC,MAAM,IAAI,mBAAmB,EAAE,YAAY,EAAC,MAAM,oBAAoB,CAAC;AAE/E,MAAM,SAAS,GAAG;IAChB;;MAEE;IACF,KAAK,EAAE,SAAS;IAChB;;MAEE;IACF,4BAA4B,EAAE,gEAAgE;CAC/F,CAAC;AACF,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,kCAAkC,EAAE,SAAS,CAAC,CAAC;AACxF,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAEtE,MAAM,OAAO,YAAa,SAAQ,MAAM,CAAC,aAAa,CAAC,aAAa;IAElE,QAAQ,CAAU;IAClB,IAAI,CAAS;IACb,OAAO,CAAS;IAChB,UAAU,CAAS;IACnB,KAAK,CAAS;IACd,YAAY,CAAmC;IAC/C,sBAAsB,CAA0D;IAChF,YAAY,CAA0D;IACtE,WAAW,CAAU;IACrB,SAAS,CAAoB;IAC7B,cAAc,CAAU;IACxB,QAAQ,CAAiD;IACzD,wBAAwB,CAAU;IAClC,gBAAgB,CAAU;IAC1B,oBAAoB,CAAc;IAClC,YAAY,CAAc;IAC1B,kBAAkB,CAAsB;IACxC,YAAY,CAAU;IACtB,eAAe,CAAW;IAE1B,YAAY,OAAgB,EAAE,GAAW,EAAE,WAA6C;QACtF,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;QAEhB,MAAM,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;QAC7D,IAAI,SAAS,EAAE;YACb,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC,cAAc,EAAE,CAAC;YAC1C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC,oBAAoB,CAAC;YAChE,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC,iBAAiB,CAAC;YACzC,IAAI,SAAS,CAAC,WAAW,EAAE;gBACzB,IAAI,CAAC,KAAK,IAAI,GAAG,GAAG,SAAS,CAAC,WAAW,CAAC;aAC3C;SACF;aAAM;YACL,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;YAClB,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;YACrB,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;SAClB;QAED,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAChC,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;QACnC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,wBAAwB,GAAG,KAAK,CAAC;QACtC,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAC9B,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;QACjC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;QAC/B,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;IAC5B,CAAC;IAED,eAAe;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;IAC7C,CAAC;IAED,IAAI;QACF,OAAO,IAAI,CAAC,KAAK,CAAC;IACpB,CAAC;IAED,QAAQ;QACN,OAAO,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;IACtC,CAAC;IAED,GAAG;QACD,OAAO,IAAI,CAAC,IAAI,CAAC;IACnB,CAAC;IAED,SAAS;QACP,OAAO,IAAI,CAAC,UAAU,CAAC;IACzB,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC;IAED,eAAe;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;IAC7C,CAAC;IAED,WAAW,CAAC,QAAkB;QAC5B,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YACf,OAAO,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;SACpC;QACD,IAAI,IAAI,GAAW,IAAI,CAAC,KAAK,CAAC;QAC9B,IAAI;YACF,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,YAAY,CAAC,UAAU,EAAE;gBACrD,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;aACvB;iBAAM;gBACL,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;aACxB;SACF;QAAC,OAAO,KAAK,EAAE;SACf;QACD,OAAO,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,eAAe,CAAC,oBAAoB,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;IACpF,CAAC;IAED,SAAS;QACP,OAAO,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC;IACnC,CAAC;IAED,MAAM,CAAC,OAAe;QACpB,IAAI,OAAgC,CAAC;QACrC,MAAM,OAAO,GAAG,IAAI,OAAO,CAAU,CAAC,CAAC,EAAE;YACvC,OAAO,GAAG,CAAC,CAAC;QACd,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,EAAE,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC9D,OAAO,OAAO,CAAC;QAEf,SAAS,aAAa,CACE,OAAgB,EAAE,OAAgB,EAAE,MAAe,EACvE,cAAiD;YACnD,IAAI,OAAO,EAAE;gBACX,IAAI,CAAC,WAAW,CAAC,OAAiB,EAAE,MAAgB,EAAE,cAAkD,CAAC,CAAC;aAC3G;YACD,OAAO,CAAC,OAAO,CAAC,CAAC;QACnB,CAAC;IACH,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;IACjC,CAAC;IAED,WAAW,CAAC,IAAY,EAAE,GAAW,EAAE,WAA8C;QACnF,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC;QACzB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;QAChF,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,GAAG,EAAE;YACP,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;SACjB;QACD,IAAI,WAAW,EAAE;YACf,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;SACjC;QACD,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QACzD,IAAI,CAAC,OAAO,EAAE,CAAC,SAAS,EAAE,CAAC,wBAAwB,CAC/C,mBAAmB,CAAC,mBAAmB,EAAE,EAAC,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,IAAI,EAAC,CAAC,CAAC;IACrF,CAAC;IAED,UAAU;QACR,OAAO,IAAI,CAAC,GAAG,EAAE,CAAC;IACpB,CAAC;IAED,WAAW;QACT,OAAO,IAAI,CAAC,YAAY,CAAC;IAC3B,CAAC;IAED,KAAK,CAAC,cAAc;QAClB,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;QAC5B,OAAO,IAAI,CAAC,eAAe,IAAI,KAAK,CAAC;IACvC,CAAC;IAED,OAAO;QACL,OAAO,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAED,cAAc;QACZ,IAAI,IAAI,CAAC,sBAAsB,EAAE;YAC/B,OAAO,IAAI,CAAC,sBAAsB,CAAC;SACpC;QAED,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,QAAqD,CAAC,CAAC;SACpF;QAED,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,mBAAmB,EAAE,CAAC;QACzD,OAAO,IAAI,CAAC,sBAAsB,CAAC;IACrC,CAAC;IAED,KAAK,CAAC,mBAAmB;QACvB,IAAI;YACF,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;YAC7D,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;gBACxB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;gBAC3B,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;gBACxB,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC,SAAS,CAAC;aAC1C;SACF;QAAC,OAAO,GAAG,EAAE;YACZ,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;YAC3B,IAAI,CAAC,QAAQ,GAAG,EAAC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,SAAS,EAAE,KAAK,EAAC,CAAC;SAClF;QAED,OAAO,IAAI,CAAC,QAAqD,CAAC;IACpE,CAAC;IAED,KAAK,CAAC,mBAAmB;QACvB,IAAI,CAAC,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,wBAAwB,EAAE;YAC1D,OAAO;SACR;QAED,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,EAAE,IAAI,IAAI,CAAC,gBAAgB,EAAE;YAC/D,OAAO;SACR;QAED,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAC7B,MAAM,cAAc,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;QACpE,IAAI,OAAO,IAAI,cAAc,EAAE;YAC7B,OAAO;SACR;QACD,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAC9B,IAAI,cAAc,CAAC,OAAO,KAAK,IAAI,EAAE;YACnC,MAAM,WAAW,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;YACvC,IAAI,CAAC,iBAAiB,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;YAClC,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;YACjC,OAAO;SACR;QACD,IAAI,IAAI,CAAC,oBAAoB,KAAK,cAAc,CAAC,OAAO,EAAE;YACxD,OAAO;SACR;QAED,IAAI,IAAI,CAAC,QAAQ,IAAI,SAAS,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,KAAK,cAAc,CAAC,OAAO,EAAE;YACnG,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;YACjC,OAAO;SACR;QAED,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,YAAY,KAAK,cAAc,CAAC,OAAO,EAAE;YACnE,IAAI,CAAC,iBAAiB,CAAC,cAAc,CAAC,OAAiB,EAAE,KAAK,CAAC,CAAC;YAChE,OAAO;SACR;QAED,MAAM,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAEnC,4EAA4E;QAC5E,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;QAErD,MAAM,YAAY,GAAG,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,4BAA4B,CAAC,CAAC,CAAC;QACxF,IAAI,YAAY,EAAE;YAChB,IAAI,CAAC,iBAAiB,CAAC,cAAc,CAAC,OAAiB,EAAE,KAAK,CAAC,CAAC;SACjE;aAAM;YACL,IAAI,CAAC,oBAAoB,GAAG,cAAc,CAAC,OAAO,CAAC;SACpD;IACH,CAAC;IAED,uBAAuB;QACrB,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;IACvC,CAAC;IAED,cAAc,CAAC,OAAe;QAC5B,IAAI,IAAI,CAAC,QAAQ,CAAC,iBAAiB,EAAE,EAAE;YACrC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;SACpD;QACD,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IACxC,CAAC;IAED,iBAAiB,CAAC,OAAe,EAAE,eAAwB;QACzD,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;QACjC,IAAI,CAAC,QAAQ,GAAG,EAAC,OAAO,EAAE,SAAS,EAAE,KAAK,EAAC,CAAC;QAC5C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;QAEnC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QAExB,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAC9B,MAAM,IAAI,GAAG,EAAC,YAAY,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,eAAe,EAAC,CAAC;QAC1E,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;QACjE,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC,wBAAwB,CAAC,mBAAmB,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;QACnG,IAAI,eAAe,EAAE;YACnB,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC,wBAAwB,CAAC,mBAAmB,CAAC,0BAA0B,EAAE,IAAI,CAAC,CAAC;SAC1G;IACH,CAAC;IAED,WAAW,CAAC,OAAe;QACzB,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;IAC/B,CAAC;IAED,UAAU;QACR,OAAO,IAAI,CAAC,WAAW,CAAC;IAC1B,CAAC;IAED,WAAW;QACT,IAAI,IAAI,CAAC,kBAAkB,EAAE;YAC3B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC9C,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;SAChC;QACD,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE;YAClB,OAAO,IAAI,CAAC,YAAsB,CAAC;SACpC;QACD,OAAO,CAAC,IAAI,CAAC,QAAQ,IAAI,SAAS,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;IACtF,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAC9B,IAAI,CAAC,mBAAmB,EAAE,CAAC;IAC7B,CAAC;IAED,sBAAsB;QACpB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;IACjC,CAAC;IAED,cAAc,CAAC,cAAsB;QACnC,IAAI,CAAC,YAAY,GAAG,cAAc,CAAC;QACnC,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;QAC/B,IAAI,CAAC,mBAAmB,EAAE,CAAC;IAC7B,CAAC;IAED,UAAU,CAAC,OAAe,EAAE,QAAiB;QAC3C,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAC;QAChC,IAAI,IAAI,CAAC,QAAQ,CAAC,iBAAiB,EAAE,EAAE;YACrC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;SACvD;QACD,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IACxC,CAAC;IAED,oBAAoB,CAAC,iBAA+B;QAClD,IAAI,CAAC,kBAAkB,GAAG,iBAAiB,CAAC;QAC5C,IAAI,CAAC,mBAAmB,EAAE,CAAC;IAC7B,CAAC;IAED,mBAAmB;QACjB,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;QAC/D,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC,wBAAwB,CAAC,mBAAmB,CAAC,kBAAkB,EAAE,EAAC,YAAY,EAAE,IAAI,EAAC,CAAC,CAAC;IACnH,CAAC;IAED,uBAAuB;QACrB,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE;YAC5B,OAAO;SACR;QACD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC9C,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;IACjC,CAAC;IAED,iBAAiB;QACf,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE;YAClB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;SACzC;IACH,CAAC;IAED,OAAO;QACL,OAAO,IAAI,CAAC,YAAY,KAAK,IAAI,IAAI,IAAI,CAAC,kBAAkB,KAAK,IAAI,CAAC;IACxE,CAAC;IAED,SAAS;QACP,OAAO,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACjE,CAAC;IAED,OAAO;QACL,OAAO,CAAC,IAAI,CAAC,QAAQ,IAAI,SAAS,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;IACtF,CAAC;IAED,SAAS;QACP,OAAO,CAAC,IAAI,CAAC,QAAQ,IAAI,OAAO,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC;IACpF,CAAC;IAED,eAAe,CAAC,KAAa,EAAE,aAAsB,EAAE,OAAgB;QAErE,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;QAC/B,IAAI,CAAC,OAAO,EAAE;YACZ,OAAO,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,IAAI,EAAE,KAAK,EAAE,aAAa,EAAE,OAAO,CAAC,CAAC;SAC/E;QACD,OAAO,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,sBAAsB,CAAC,OAAO,EAAE,KAAK,EAAE,aAAa,EAAE,OAAO,CAAC,CAAC,CAAC;IAC7G,CAAC;IAED,aAAa;QACX,OAAO,IAAI,CAAC,cAAc,CAAC;IAC7B,CAAC;IAED,UAAU,CAAC,UAAkB,EAAE,YAAqB;QAClD,OAAO,IAAI,UAAU,CAAC,IAAI,EAAE,UAAU,EAAE,YAAY,CAAC,CAAC;IACxD,CAAC;IAED,QAAQ;QACN,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,EAAE,CAAC;IAC9D,CAAC;IAED,cAAc,CACV,KAAoB,EAAE,IAAY,EAAE,UAAkB,EAAE,YAAqB,EAC7E,YAA2B;QAC7B,MAAM,KAAK,GAAG,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC,kBAAkB,CAAC,UAAU,EAAE,YAAY,IAAI,CAAC,CAAC,CAAC;QAC9F,MAAM,OAAO,GAAG,IAAI,OAAO,CAAC,KAAK,EAAE,IAAI,EAAE,YAAY,EAAE,KAAK,CAAC,CAAC;QAC9D,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QACzB,OAAO,OAAO,CAAC;IACjB,CAAC;IAED,UAAU,CAAC,OAAgB;QACzB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,SAAS,GAAG,IAAI,GAAG,EAAE,CAAC;SAC5B;QACD,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC5B,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;IAC9D,CAAC;IAED,aAAa,CAAC,OAAgB;QAC5B,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE;YACpD,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;SAC/D;IACH,CAAC;IAED,kBAAkB;QAChB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACnB,OAAO;SACR;QACD,KAAK,MAAM,OAAO,IAAI,IAAI,CAAC,SAAS,EAAE;YACpC,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;SAC/D;QACD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;IACxB,CAAC;IAED,iBAAiB,CAAC,UAAkB,EAAE,IAAY,EAAE,IAAS;QAC3D,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC,kBAAkB,CAAC,UAAU,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;IAClG,CAAC;IAED,aAAa,CAAC,KAAoC,EAAE,IAAY,EAAE,IAAS;QACzE,MAAM,MAAM,GAAG,IAAI,UAAU,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QACjD,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACtB,IAAI,CAAC,YAAY,GAAG,IAAI,QAAQ,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC;SAC1D;QACD,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QACpC,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,mBAAmB,EAAE,MAAM,CAAC,CAAC;IACpE,CAAC;IAED,wBAAwB,CAAC,IAAY;QACnC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACtB,OAAO;SACR;QACD,MAAM,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAC5C,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAClC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YACvB,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,qBAAqB,EAAE,MAAM,CAAC,CAAC;QACtE,CAAC,CAAC,CAAC;IACL,CAAC;IAED,cAAc;QACZ,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;IAClE,CAAC;IAED,oBAAoB;QAClB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACtB,OAAO;SACR;QACD,MAAM,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;QACvD,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;QAC1B,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,qBAAqB,EAAE,MAAM,CAAC,CAAC,CAAC;IACxG,CAAC;IAED,kBAAkB,CAAC,IAAY;QAC7B,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IAChE,CAAC;IAED,WAAW;QACT,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;IAC3B,CAAC;IAED,YAAY;QACV,OAAO,IAAI,CAAC,YAAY,CAAC;IAC3B,CAAC;CACF;AAED,wDAAwD;AACxD,+CAA+C;AAC/C,MAAM,CAAN,IAAY,MAQX;AARD,WAAY,MAAM;IAChB,mDAAyC,CAAA;IACzC,uDAA6C,CAAA;IAC7C,uCAA6B,CAAA;IAC7B,uCAA6B,CAAA;IAC7B,2CAAiC,CAAA;IACjC,qDAA2C,CAAA;IAC3C,yDAA+C,CAAA;AACjD,CAAC,EARW,MAAM,KAAN,MAAM,QAQjB;AAED,MAAM,OAAO,UAAU;IACrB,YAAY,CAAe;IAC3B,UAAU,CAAS;IACnB,YAAY,CAAmB;IAC/B,YAAY,YAA0B,EAAE,UAAkB,EAAE,YAAqB;QAC/E,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;QACjC,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;IACnC,CAAC;IAED,QAAQ,CAAC,QAAkB;QACzB,IAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;QACvD,IAAI,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,KAAK,kBAAkB,EAAE;YACvD,oEAAoE;YACpE,wFAAwF;YACxF,IAAI,OAAO,IAAI,CAAC,YAAY,KAAK,QAAQ,EAAE;gBACzC,QAAQ,IAAI,MAAM,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC;aACpD;SACF;aAAM,IAAI,OAAO,IAAI,CAAC,UAAU,KAAK,QAAQ,EAAE;YAC9C,QAAQ,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;SACzC;QACD,OAAO,QAAQ,CAAC;IAClB,CAAC;IAED,EAAE;QACA,IAAI,OAAO,IAAI,CAAC,YAAY,KAAK,QAAQ,EAAE;YACzC,OAAO,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,UAAU,GAAG,GAAG;gBACjG,IAAI,CAAC,YAAY,CAAC;SACvB;QACD,OAAO,IAAI,CAAC,MAAM,EAAE,CAAC;IACvB,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC;IAClG,CAAC;IAED,UAAU;QACR,OAAO,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;IAC/D,CAAC;IAED,MAAM,CAAC,UAAU,CAAC,SAAqB,EAAE,SAAqB;QAC5D,OAAO,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;IACxC,CAAC;IAED,SAAS,CAAC,KAAiB;QACzB,IAAI,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,KAAK,KAAK,CAAC,YAAY,CAAC,GAAG,EAAE,EAAE;YACxD,OAAO,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,KAAK,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SACpE;QACD,IAAI,IAAI,CAAC,UAAU,KAAK,KAAK,CAAC,UAAU,EAAE;YACxC,OAAO,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC,UAAU,CAAC;SAC3C;QACD,mEAAmE;QACnE,qEAAqE;QACrE,IAAI,IAAI,CAAC,YAAY,KAAK,KAAK,CAAC,YAAY,EAAE;YAC5C,OAAO,CAAC,CAAC;SACV;QACD,IAAI,OAAO,IAAI,CAAC,YAAY,KAAK,QAAQ,EAAE;YACzC,OAAO,CAAC,CAAC,CAAC;SACX;QACD,IAAI,OAAO,KAAK,CAAC,YAAY,KAAK,QAAQ,EAAE;YAC1C,OAAO,CAAC,CAAC;SACV;QACD,OAAO,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC,YAAY,CAAC;IAChD,CAAC;CACF;AAED;;;;;;;GAOG;AACH,MAAM,OAAO,OAAO;IAClB,MAAM,CAAgB;IACtB,KAAK,CAAS;IACd,MAAM,CAAgC;IACtC,aAAa,CAAgB;IAE7B,YAAY,KAAoB,EAAE,IAAY,EAAE,YAA2B,EAAE,KAAqC;QAChH,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,MAAM,GAAG,KAAK,IAAI,IAAI,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACrE,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC;IACpC,CAAC;IAED,KAAK;QACH,OAAO,IAAI,CAAC,MAAM,CAAC;IACrB,CAAC;IAED,IAAI;QACF,OAAO,IAAI,CAAC,KAAK,CAAC;IACpB,CAAC;IAED,YAAY;QACV,OAAO,IAAI,CAAC,aAAa,CAAC;IAC5B,CAAC;IAED,UAAU;QACR,OAAO,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC;IAC/B,CAAC;IAED,YAAY;QACV,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC;IACjC,CAAC;IAED,OAAO,CAAC,OAAgB;QACtB,OAAO,IAAI,CAAC,IAAI,EAAE,KAAK,OAAO,CAAC,IAAI,EAAE,IAAI,IAAI,CAAC,KAAK,EAAE,KAAK,OAAO,CAAC,KAAK,EAAE,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;IACjH,CAAC;CACF;AAED,WAAiB,OAAO;IACtB,wDAAwD;IACxD,+CAA+C;IAC/C,IAAY,KAIX;IAJD,WAAY,KAAK;QACf,wBAAe,CAAA;QACf,wBAAe,CAAA;QACf,4BAAmB,CAAA;IACrB,CAAC,EAJW,KAAK,GAAL,aAAK,KAAL,aAAK,QAIhB;AACH,CAAC,EARgB,OAAO,KAAP,OAAO,QAQvB;AAED,MAAM,OAAO,UAAU;IACrB,MAAM,CAAgC;IACtC,KAAK,CAAS;IACd,KAAK,CAAM;IAEX,YAAY,KAAoC,EAAE,IAAY,EAAE,IAAS;QACvE,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACpB,CAAC;IAED,KAAK;QACH,OAAO,IAAI,CAAC,MAAM,CAAC;IACrB,CAAC;IAED,IAAI;QACF,OAAO,IAAI,CAAC,KAAK,CAAC;IACpB,CAAC;IAED,IAAI;QACF,OAAO,IAAI,CAAC,KAAK,CAAC;IACpB,CAAC;CACF;AAED,MAAM,OAAO,oBAAoB;IAC/B,gBAAgB,CAAY;IAC5B,WAAW,CAAc;IAEzB,YAAY,gBAA2B,EAAE,WAAwB;QAC/D,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;QACzC,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;IACjC,CAAC;CACF","sourcesContent":["/*\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable rulesdir/no_underscored_properties */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as TextUtils from '../text_utils/text_utils.js';\n\nimport type {Project} from './WorkspaceImpl.js';\nimport {Events as WorkspaceImplEvents, projectTypes} from './WorkspaceImpl.js';\n\nconst UIStrings = {\n  /**\n  *@description Text for the index of something\n  */\n  index: '(index)',\n  /**\n  *@description Text in UISource Code of the DevTools local workspace\n  */\n  thisFileWasChangedExternally: 'This file was changed externally. Would you like to reload it?',\n};\nconst str_ = i18n.i18n.registerUIStrings('models/workspace/UISourceCode.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class UISourceCode extends Common.ObjectWrapper.ObjectWrapper implements\n    TextUtils.ContentProvider.ContentProvider {\n  _project: Project;\n  _url: string;\n  _origin: string;\n  _parentURL: string;\n  _name: string;\n  _contentType: Common.ResourceType.ResourceType;\n  _requestContentPromise: Promise<TextUtils.ContentProvider.DeferredContent>|null;\n  _decorations: Platform.MapUtilities.Multimap<string, LineMarker>|null;\n  _hasCommits: boolean;\n  _messages: Set<Message>|null;\n  _contentLoaded: boolean;\n  _content: TextUtils.ContentProvider.DeferredContent|null;\n  _forceLoadOnCheckContent: boolean;\n  _checkingContent: boolean;\n  _lastAcceptedContent: string|null;\n  _workingCopy: string|null;\n  _workingCopyGetter: (() => string)|null;\n  _disableEdit: boolean;\n  _contentEncoded?: boolean;\n\n  constructor(project: Project, url: string, contentType: Common.ResourceType.ResourceType) {\n    super();\n    this._project = project;\n    this._url = url;\n\n    const parsedURL = Common.ParsedURL.ParsedURL.fromString(url);\n    if (parsedURL) {\n      this._origin = parsedURL.securityOrigin();\n      this._parentURL = this._origin + parsedURL.folderPathComponents;\n      this._name = parsedURL.lastPathComponent;\n      if (parsedURL.queryParams) {\n        this._name += '?' + parsedURL.queryParams;\n      }\n    } else {\n      this._origin = '';\n      this._parentURL = '';\n      this._name = url;\n    }\n\n    this._contentType = contentType;\n    this._requestContentPromise = null;\n    this._decorations = null;\n    this._hasCommits = false;\n    this._messages = null;\n    this._contentLoaded = false;\n    this._content = null;\n    this._forceLoadOnCheckContent = false;\n    this._checkingContent = false;\n    this._lastAcceptedContent = null;\n    this._workingCopy = null;\n    this._workingCopyGetter = null;\n    this._disableEdit = false;\n  }\n\n  requestMetadata(): Promise<UISourceCodeMetadata|null> {\n    return this._project.requestMetadata(this);\n  }\n\n  name(): string {\n    return this._name;\n  }\n\n  mimeType(): string {\n    return this._project.mimeType(this);\n  }\n\n  url(): string {\n    return this._url;\n  }\n\n  parentURL(): string {\n    return this._parentURL;\n  }\n\n  origin(): string {\n    return this._origin;\n  }\n\n  fullDisplayName(): string {\n    return this._project.fullDisplayName(this);\n  }\n\n  displayName(skipTrim?: boolean): string {\n    if (!this._name) {\n      return i18nString(UIStrings.index);\n    }\n    let name: string = this._name;\n    try {\n      if (this.project().type() === projectTypes.FileSystem) {\n        name = unescape(name);\n      } else {\n        name = decodeURI(name);\n      }\n    } catch (error) {\n    }\n    return skipTrim ? name : Platform.StringUtilities.trimEndWithMaxLength(name, 100);\n  }\n\n  canRename(): boolean {\n    return this._project.canRename();\n  }\n\n  rename(newName: string): Promise<boolean> {\n    let fulfill: (arg0: boolean) => void;\n    const promise = new Promise<boolean>(x => {\n      fulfill = x;\n    });\n    this._project.rename(this, newName, innerCallback.bind(this));\n    return promise;\n\n    function innerCallback(\n        this: UISourceCode, success: boolean, newName?: string, newURL?: string,\n        newContentType?: Common.ResourceType.ResourceType): void {\n      if (success) {\n        this._updateName(newName as string, newURL as string, newContentType as Common.ResourceType.ResourceType);\n      }\n      fulfill(success);\n    }\n  }\n\n  remove(): void {\n    this._project.deleteFile(this);\n  }\n\n  _updateName(name: string, url: string, contentType?: Common.ResourceType.ResourceType): void {\n    const oldURL = this._url;\n    this._url = this._url.substring(0, this._url.length - this._name.length) + name;\n    this._name = name;\n    if (url) {\n      this._url = url;\n    }\n    if (contentType) {\n      this._contentType = contentType;\n    }\n    this.dispatchEventToListeners(Events.TitleChanged, this);\n    this.project().workspace().dispatchEventToListeners(\n        WorkspaceImplEvents.UISourceCodeRenamed, {oldURL: oldURL, uiSourceCode: this});\n  }\n\n  contentURL(): string {\n    return this.url();\n  }\n\n  contentType(): Common.ResourceType.ResourceType {\n    return this._contentType;\n  }\n\n  async contentEncoded(): Promise<boolean> {\n    await this.requestContent();\n    return this._contentEncoded || false;\n  }\n\n  project(): Project {\n    return this._project;\n  }\n\n  requestContent(): Promise<TextUtils.ContentProvider.DeferredContent> {\n    if (this._requestContentPromise) {\n      return this._requestContentPromise;\n    }\n\n    if (this._contentLoaded) {\n      return Promise.resolve(this._content as TextUtils.ContentProvider.DeferredContent);\n    }\n\n    this._requestContentPromise = this._requestContentImpl();\n    return this._requestContentPromise;\n  }\n\n  async _requestContentImpl(): Promise<TextUtils.ContentProvider.DeferredContent> {\n    try {\n      const content = await this._project.requestFileContent(this);\n      if (!this._contentLoaded) {\n        this._contentLoaded = true;\n        this._content = content;\n        this._contentEncoded = content.isEncoded;\n      }\n    } catch (err) {\n      this._contentLoaded = true;\n      this._content = {content: null, error: err ? String(err) : '', isEncoded: false};\n    }\n\n    return this._content as TextUtils.ContentProvider.DeferredContent;\n  }\n\n  async checkContentUpdated(): Promise<void> {\n    if (!this._contentLoaded && !this._forceLoadOnCheckContent) {\n      return;\n    }\n\n    if (!this._project.canSetFileContent() || this._checkingContent) {\n      return;\n    }\n\n    this._checkingContent = true;\n    const updatedContent = await this._project.requestFileContent(this);\n    if ('error' in updatedContent) {\n      return;\n    }\n    this._checkingContent = false;\n    if (updatedContent.content === null) {\n      const workingCopy = this.workingCopy();\n      this._contentCommitted('', false);\n      this.setWorkingCopy(workingCopy);\n      return;\n    }\n    if (this._lastAcceptedContent === updatedContent.content) {\n      return;\n    }\n\n    if (this._content && 'content' in this._content && this._content.content === updatedContent.content) {\n      this._lastAcceptedContent = null;\n      return;\n    }\n\n    if (!this.isDirty() || this._workingCopy === updatedContent.content) {\n      this._contentCommitted(updatedContent.content as string, false);\n      return;\n    }\n\n    await Common.Revealer.reveal(this);\n\n    // Make sure we are in the next frame before stopping the world with confirm\n    await new Promise(resolve => setTimeout(resolve, 0));\n\n    const shouldUpdate = window.confirm(i18nString(UIStrings.thisFileWasChangedExternally));\n    if (shouldUpdate) {\n      this._contentCommitted(updatedContent.content as string, false);\n    } else {\n      this._lastAcceptedContent = updatedContent.content;\n    }\n  }\n\n  forceLoadOnCheckContent(): void {\n    this._forceLoadOnCheckContent = true;\n  }\n\n  _commitContent(content: string): void {\n    if (this._project.canSetFileContent()) {\n      this._project.setFileContent(this, content, false);\n    }\n    this._contentCommitted(content, true);\n  }\n\n  _contentCommitted(content: string, committedByUser: boolean): void {\n    this._lastAcceptedContent = null;\n    this._content = {content, isEncoded: false};\n    this._contentLoaded = true;\n    this._requestContentPromise = null;\n\n    this._hasCommits = true;\n\n    this._innerResetWorkingCopy();\n    const data = {uiSourceCode: this, content, encoded: this._contentEncoded};\n    this.dispatchEventToListeners(Events.WorkingCopyCommitted, data);\n    this._project.workspace().dispatchEventToListeners(WorkspaceImplEvents.WorkingCopyCommitted, data);\n    if (committedByUser) {\n      this._project.workspace().dispatchEventToListeners(WorkspaceImplEvents.WorkingCopyCommittedByUser, data);\n    }\n  }\n\n  addRevision(content: string): void {\n    this._commitContent(content);\n  }\n\n  hasCommits(): boolean {\n    return this._hasCommits;\n  }\n\n  workingCopy(): string {\n    if (this._workingCopyGetter) {\n      this._workingCopy = this._workingCopyGetter();\n      this._workingCopyGetter = null;\n    }\n    if (this.isDirty()) {\n      return this._workingCopy as string;\n    }\n    return (this._content && 'content' in this._content && this._content.content) || '';\n  }\n\n  resetWorkingCopy(): void {\n    this._innerResetWorkingCopy();\n    this._workingCopyChanged();\n  }\n\n  _innerResetWorkingCopy(): void {\n    this._workingCopy = null;\n    this._workingCopyGetter = null;\n  }\n\n  setWorkingCopy(newWorkingCopy: string): void {\n    this._workingCopy = newWorkingCopy;\n    this._workingCopyGetter = null;\n    this._workingCopyChanged();\n  }\n\n  setContent(content: string, isBase64: boolean): void {\n    this._contentEncoded = isBase64;\n    if (this._project.canSetFileContent()) {\n      this._project.setFileContent(this, content, isBase64);\n    }\n    this._contentCommitted(content, true);\n  }\n\n  setWorkingCopyGetter(workingCopyGetter: () => string): void {\n    this._workingCopyGetter = workingCopyGetter;\n    this._workingCopyChanged();\n  }\n\n  _workingCopyChanged(): void {\n    this._removeAllMessages();\n    this.dispatchEventToListeners(Events.WorkingCopyChanged, this);\n    this._project.workspace().dispatchEventToListeners(WorkspaceImplEvents.WorkingCopyChanged, {uiSourceCode: this});\n  }\n\n  removeWorkingCopyGetter(): void {\n    if (!this._workingCopyGetter) {\n      return;\n    }\n    this._workingCopy = this._workingCopyGetter();\n    this._workingCopyGetter = null;\n  }\n\n  commitWorkingCopy(): void {\n    if (this.isDirty()) {\n      this._commitContent(this.workingCopy());\n    }\n  }\n\n  isDirty(): boolean {\n    return this._workingCopy !== null || this._workingCopyGetter !== null;\n  }\n\n  extension(): string {\n    return Common.ParsedURL.ParsedURL.extractExtension(this._name);\n  }\n\n  content(): string {\n    return (this._content && 'content' in this._content && this._content.content) || '';\n  }\n\n  loadError(): string|null {\n    return (this._content && 'error' in this._content && this._content.error) || null;\n  }\n\n  searchInContent(query: string, caseSensitive: boolean, isRegex: boolean):\n      Promise<TextUtils.ContentProvider.SearchMatch[]> {\n    const content = this.content();\n    if (!content) {\n      return this._project.searchInFileContent(this, query, caseSensitive, isRegex);\n    }\n    return Promise.resolve(TextUtils.TextUtils.performSearchInContent(content, query, caseSensitive, isRegex));\n  }\n\n  contentLoaded(): boolean {\n    return this._contentLoaded;\n  }\n\n  uiLocation(lineNumber: number, columnNumber?: number): UILocation {\n    return new UILocation(this, lineNumber, columnNumber);\n  }\n\n  messages(): Set<Message> {\n    return this._messages ? new Set(this._messages) : new Set();\n  }\n\n  addLineMessage(\n      level: Message.Level, text: string, lineNumber: number, columnNumber?: number,\n      clickHandler?: (() => void)): Message {\n    const range = TextUtils.TextRange.TextRange.createFromLocation(lineNumber, columnNumber || 0);\n    const message = new Message(level, text, clickHandler, range);\n    this.addMessage(message);\n    return message;\n  }\n\n  addMessage(message: Message): void {\n    if (!this._messages) {\n      this._messages = new Set();\n    }\n    this._messages.add(message);\n    this.dispatchEventToListeners(Events.MessageAdded, message);\n  }\n\n  removeMessage(message: Message): void {\n    if (this._messages && this._messages.delete(message)) {\n      this.dispatchEventToListeners(Events.MessageRemoved, message);\n    }\n  }\n\n  _removeAllMessages(): void {\n    if (!this._messages) {\n      return;\n    }\n    for (const message of this._messages) {\n      this.dispatchEventToListeners(Events.MessageRemoved, message);\n    }\n    this._messages = null;\n  }\n\n  addLineDecoration(lineNumber: number, type: string, data: any): void {\n    this.addDecoration(TextUtils.TextRange.TextRange.createFromLocation(lineNumber, 0), type, data);\n  }\n\n  addDecoration(range: TextUtils.TextRange.TextRange, type: string, data: any): void {\n    const marker = new LineMarker(range, type, data);\n    if (!this._decorations) {\n      this._decorations = new Platform.MapUtilities.Multimap();\n    }\n    this._decorations.set(type, marker);\n    this.dispatchEventToListeners(Events.LineDecorationAdded, marker);\n  }\n\n  removeDecorationsForType(type: string): void {\n    if (!this._decorations) {\n      return;\n    }\n    const markers = this._decorations.get(type);\n    this._decorations.deleteAll(type);\n    markers.forEach(marker => {\n      this.dispatchEventToListeners(Events.LineDecorationRemoved, marker);\n    });\n  }\n\n  allDecorations(): LineMarker[] {\n    return this._decorations ? this._decorations.valuesArray() : [];\n  }\n\n  removeAllDecorations(): void {\n    if (!this._decorations) {\n      return;\n    }\n    const decorationList = this._decorations.valuesArray();\n    this._decorations.clear();\n    decorationList.forEach(marker => this.dispatchEventToListeners(Events.LineDecorationRemoved, marker));\n  }\n\n  decorationsForType(type: string): Set<LineMarker>|null {\n    return this._decorations ? this._decorations.get(type) : null;\n  }\n\n  disableEdit(): void {\n    this._disableEdit = true;\n  }\n\n  editDisabled(): boolean {\n    return this._disableEdit;\n  }\n}\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum Events {\n  WorkingCopyChanged = 'WorkingCopyChanged',\n  WorkingCopyCommitted = 'WorkingCopyCommitted',\n  TitleChanged = 'TitleChanged',\n  MessageAdded = 'MessageAdded',\n  MessageRemoved = 'MessageRemoved',\n  LineDecorationAdded = 'LineDecorationAdded',\n  LineDecorationRemoved = 'LineDecorationRemoved',\n}\n\nexport class UILocation {\n  uiSourceCode: UISourceCode;\n  lineNumber: number;\n  columnNumber: number|undefined;\n  constructor(uiSourceCode: UISourceCode, lineNumber: number, columnNumber?: number) {\n    this.uiSourceCode = uiSourceCode;\n    this.lineNumber = lineNumber;\n    this.columnNumber = columnNumber;\n  }\n\n  linkText(skipTrim?: boolean): string {\n    let linkText = this.uiSourceCode.displayName(skipTrim);\n    if (this.uiSourceCode.mimeType() === 'application/wasm') {\n      // For WebAssembly locations, we follow the conventions described in\n      // github.com/WebAssembly/design/blob/master/Web.md#developer-facing-display-conventions\n      if (typeof this.columnNumber === 'number') {\n        linkText += `:0x${this.columnNumber.toString(16)}`;\n      }\n    } else if (typeof this.lineNumber === 'number') {\n      linkText += ':' + (this.lineNumber + 1);\n    }\n    return linkText;\n  }\n\n  id(): string {\n    if (typeof this.columnNumber === 'number') {\n      return this.uiSourceCode.project().id() + ':' + this.uiSourceCode.url() + ':' + this.lineNumber + ':' +\n          this.columnNumber;\n    }\n    return this.lineId();\n  }\n\n  lineId(): string {\n    return this.uiSourceCode.project().id() + ':' + this.uiSourceCode.url() + ':' + this.lineNumber;\n  }\n\n  toUIString(): string {\n    return this.uiSourceCode.url() + ':' + (this.lineNumber + 1);\n  }\n\n  static comparator(location1: UILocation, location2: UILocation): number {\n    return location1.compareTo(location2);\n  }\n\n  compareTo(other: UILocation): number {\n    if (this.uiSourceCode.url() !== other.uiSourceCode.url()) {\n      return this.uiSourceCode.url() > other.uiSourceCode.url() ? 1 : -1;\n    }\n    if (this.lineNumber !== other.lineNumber) {\n      return this.lineNumber - other.lineNumber;\n    }\n    // We consider `undefined` less than an actual column number, since\n    // UI location without a column number corresponds to the whole line.\n    if (this.columnNumber === other.columnNumber) {\n      return 0;\n    }\n    if (typeof this.columnNumber !== 'number') {\n      return -1;\n    }\n    if (typeof other.columnNumber !== 'number') {\n      return 1;\n    }\n    return this.columnNumber - other.columnNumber;\n  }\n}\n\n/**\n * A message associated with a range in a `UISourceCode`. The range will be\n * underlined starting at the range's start and ending at the line end (the\n * end of the range is currently disregarded).\n * An icon is going to appear at the end of the line according to the\n * `level` of the Message. This is only the model; displaying is handled\n * where UISourceCode displaying is handled.\n */\nexport class Message {\n  _level: Message.Level;\n  _text: string;\n  _range: TextUtils.TextRange.TextRange;\n  _clickHandler?: (() => void);\n\n  constructor(level: Message.Level, text: string, clickHandler?: (() => void), range?: TextUtils.TextRange.TextRange) {\n    this._level = level;\n    this._text = text;\n    this._range = range ?? new TextUtils.TextRange.TextRange(0, 0, 0, 0);\n    this._clickHandler = clickHandler;\n  }\n\n  level(): Message.Level {\n    return this._level;\n  }\n\n  text(): string {\n    return this._text;\n  }\n\n  clickHandler(): (() => void)|undefined {\n    return this._clickHandler;\n  }\n\n  lineNumber(): number {\n    return this._range.startLine;\n  }\n\n  columnNumber(): number|undefined {\n    return this._range.startColumn;\n  }\n\n  isEqual(another: Message): boolean {\n    return this.text() === another.text() && this.level() === another.level() && this._range.equal(another._range);\n  }\n}\n\nexport namespace Message {\n  // TODO(crbug.com/1167717): Make this a const enum again\n  // eslint-disable-next-line rulesdir/const_enum\n  export enum Level {\n    Error = 'Error',\n    Issue = 'Issue',\n    Warning = 'Warning',\n  }\n}\n\nexport class LineMarker {\n  _range: TextUtils.TextRange.TextRange;\n  _type: string;\n  _data: any;\n\n  constructor(range: TextUtils.TextRange.TextRange, type: string, data: any) {\n    this._range = range;\n    this._type = type;\n    this._data = data;\n  }\n\n  range(): TextUtils.TextRange.TextRange {\n    return this._range;\n  }\n\n  type(): string {\n    return this._type;\n  }\n\n  data(): any {\n    return this._data;\n  }\n}\n\nexport class UISourceCodeMetadata {\n  modificationTime: Date|null;\n  contentSize: number|null;\n\n  constructor(modificationTime: Date|null, contentSize: number|null) {\n    this.modificationTime = modificationTime;\n    this.contentSize = contentSize;\n  }\n}\n"]}