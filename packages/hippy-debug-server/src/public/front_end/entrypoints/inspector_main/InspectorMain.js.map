{"version":3,"file":"InspectorMain.js","sourceRoot":"","sources":["../../../../../../front_end/entrypoints/inspector_main/InspectorMain.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2018 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Root from '../../core/root/root.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as MobileThrottling from '../../panels/mobile_throttling/mobile_throttling.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport type * as Protocol from '../../generated/protocol.js';\n\nconst UIStrings = {\n  /**\n  * @description Text that refers to the main target. The main target is the primary webpage that\n  * DevTools is connected to. This text is used in various places in the UI as a label/name to inform\n  * the user which target/webpage they are currently connected to, as DevTools may connect to multiple\n  * targets at the same time in some scenarios.\n  */\n  main: 'Main',\n  /**\n  * @description A warning shown to the user when JavaScript is disabled on the webpage that\n  * DevTools is connected to.\n  */\n  javascriptIsDisabled: 'JavaScript is disabled',\n};\nconst str_ = i18n.i18n.registerUIStrings('entrypoints/inspector_main/InspectorMain.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nlet inspectorMainImplInstance: InspectorMainImpl;\n\nexport class InspectorMainImpl extends Common.ObjectWrapper.ObjectWrapper implements Common.Runnable.Runnable {\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): InspectorMainImpl {\n    const {forceNew} = opts;\n    if (!inspectorMainImplInstance || forceNew) {\n      inspectorMainImplInstance = new InspectorMainImpl();\n    }\n\n    return inspectorMainImplInstance;\n  }\n\n  async run(): Promise<void> {\n    let firstCall = true;\n    await SDK.Connections.initMainConnection(async () => {\n      const type = Root.Runtime.Runtime.queryParam('v8only') ? SDK.Target.Type.Node : SDK.Target.Type.Frame;\n      const waitForDebuggerInPage =\n          type === SDK.Target.Type.Frame && Root.Runtime.Runtime.queryParam('panel') === 'sources';\n      const target = SDK.TargetManager.TargetManager.instance().createTarget(\n          'main', i18nString(UIStrings.main), type, null, undefined, waitForDebuggerInPage);\n\n      // Only resume target during the first connection,\n      // subsequent connections are due to connection hand-over,\n      // there is no need to pause in debugger.\n      if (!firstCall) {\n        return;\n      }\n      firstCall = false;\n\n      if (waitForDebuggerInPage) {\n        const debuggerModel = target.model(SDK.DebuggerModel.DebuggerModel);\n        if (debuggerModel) {\n          if (!debuggerModel.isReadyToPause()) {\n            await debuggerModel.once(SDK.DebuggerModel.Events.DebuggerIsReadyToPause);\n          }\n          debuggerModel.pause();\n        }\n      }\n\n      target.runtimeAgent().invoke_runIfWaitingForDebugger();\n    }, Components.TargetDetachedDialog.TargetDetachedDialog.webSocketConnectionLost);\n\n    new SourcesPanelIndicator();\n    new BackendSettingsSync();\n    new MobileThrottling.NetworkPanelIndicator.NetworkPanelIndicator();\n\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n        Host.InspectorFrontendHostAPI.Events.ReloadInspectedPage, event => {\n          const hard = (event.data as boolean);\n          SDK.ResourceTreeModel.ResourceTreeModel.reloadAllPages(hard);\n        });\n  }\n}\n\nCommon.Runnable.registerEarlyInitializationRunnable(InspectorMainImpl.instance);\n\nlet reloadActionDelegateInstance: ReloadActionDelegate;\n\nexport class ReloadActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): ReloadActionDelegate {\n    const {forceNew} = opts;\n    if (!reloadActionDelegateInstance || forceNew) {\n      reloadActionDelegateInstance = new ReloadActionDelegate();\n    }\n\n    return reloadActionDelegateInstance;\n  }\n\n  handleAction(context: UI.Context.Context, actionId: string): boolean {\n    switch (actionId) {\n      case 'inspector_main.reload':\n        SDK.ResourceTreeModel.ResourceTreeModel.reloadAllPages(false);\n        return true;\n      case 'inspector_main.hard-reload':\n        SDK.ResourceTreeModel.ResourceTreeModel.reloadAllPages(true);\n        return true;\n    }\n    return false;\n  }\n}\n\nlet focusDebuggeeActionDelegateInstance: FocusDebuggeeActionDelegate;\n\nexport class FocusDebuggeeActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): FocusDebuggeeActionDelegate {\n    const {forceNew} = opts;\n    if (!focusDebuggeeActionDelegateInstance || forceNew) {\n      focusDebuggeeActionDelegateInstance = new FocusDebuggeeActionDelegate();\n    }\n\n    return focusDebuggeeActionDelegateInstance;\n  }\n  handleAction(_context: UI.Context.Context, _actionId: string): boolean {\n    const mainTarget = SDK.TargetManager.TargetManager.instance().mainTarget();\n    if (!mainTarget) {\n      return false;\n    }\n    mainTarget.pageAgent().invoke_bringToFront();\n    return true;\n  }\n}\n\nlet nodeIndicatorInstance: NodeIndicator;\n\nexport class NodeIndicator implements UI.Toolbar.Provider {\n  _element: Element;\n  _button: UI.Toolbar.ToolbarItem;\n  private constructor() {\n    const element = document.createElement('div');\n    const shadowRoot = UI.Utils.createShadowRootWithCoreStyles(\n        element,\n        {cssFile: 'entrypoints/inspector_main/nodeIcon.css', enableLegacyPatching: false, delegatesFocus: undefined});\n    this._element = shadowRoot.createChild('div', 'node-icon');\n    element.addEventListener(\n        'click', () => Host.InspectorFrontendHost.InspectorFrontendHostInstance.openNodeFrontend(), false);\n    this._button = new UI.Toolbar.ToolbarItem(element);\n    this._button.setTitle(i18nString('Open dedicated DevTools for Node.js'));\n    SDK.TargetManager.TargetManager.instance().addEventListener(\n        SDK.TargetManager.Events.AvailableTargetsChanged,\n        event => this._update((event.data as Protocol.Target.TargetInfo[])));\n    this._button.setVisible(false);\n    this._update([]);\n  }\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): NodeIndicator {\n    const {forceNew} = opts;\n    if (!nodeIndicatorInstance || forceNew) {\n      nodeIndicatorInstance = new NodeIndicator();\n    }\n\n    return nodeIndicatorInstance;\n  }\n\n  _update(targetInfos: Protocol.Target.TargetInfo[]): void {\n    const hasNode = Boolean(targetInfos.find(target => target.type === 'node' && !target.attached));\n    this._element.classList.toggle('inactive', !hasNode);\n    if (hasNode) {\n      this._button.setVisible(true);\n    }\n  }\n\n  item(): UI.Toolbar.ToolbarItem|null {\n    return this._button;\n  }\n}\n\nexport class SourcesPanelIndicator {\n  constructor() {\n    Common.Settings.Settings.instance()\n        .moduleSetting('javaScriptDisabled')\n        .addChangeListener(javaScriptDisabledChanged);\n    javaScriptDisabledChanged();\n\n    function javaScriptDisabledChanged(): void {\n      let icon: UI.Icon.Icon|null = null;\n      const javaScriptDisabled = Common.Settings.Settings.instance().moduleSetting('javaScriptDisabled').get();\n      if (javaScriptDisabled) {\n        icon = UI.Icon.Icon.create('smallicon-warning');\n        UI.Tooltip.Tooltip.install(icon, i18nString(UIStrings.javascriptIsDisabled));\n      }\n      UI.InspectorView.InspectorView.instance().setPanelIcon('sources', icon);\n    }\n  }\n}\n\nexport class BackendSettingsSync implements SDK.TargetManager.Observer {\n  _autoAttachSetting: Common.Settings.Setting<boolean>;\n  _adBlockEnabledSetting: Common.Settings.Setting<boolean>;\n  _emulatePageFocusSetting: Common.Settings.Setting<boolean>;\n\n  constructor() {\n    this._autoAttachSetting = Common.Settings.Settings.instance().moduleSetting('autoAttachToCreatedPages');\n    this._autoAttachSetting.addChangeListener(this._updateAutoAttach, this);\n    this._updateAutoAttach();\n\n    this._adBlockEnabledSetting = Common.Settings.Settings.instance().moduleSetting('network.adBlockingEnabled');\n    this._adBlockEnabledSetting.addChangeListener(this._update, this);\n\n    this._emulatePageFocusSetting = Common.Settings.Settings.instance().moduleSetting('emulatePageFocus');\n    this._emulatePageFocusSetting.addChangeListener(this._update, this);\n\n    SDK.TargetManager.TargetManager.instance().observeTargets(this);\n  }\n\n  _updateTarget(target: SDK.Target.Target): void {\n    if (target.type() !== SDK.Target.Type.Frame || target.parentTarget()) {\n      return;\n    }\n    target.pageAgent().invoke_setAdBlockingEnabled({enabled: this._adBlockEnabledSetting.get()});\n    target.emulationAgent().invoke_setFocusEmulationEnabled({enabled: this._emulatePageFocusSetting.get()});\n  }\n\n  _updateAutoAttach(): void {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.setOpenNewWindowForPopups(this._autoAttachSetting.get());\n  }\n\n  _update(): void {\n    for (const target of SDK.TargetManager.TargetManager.instance().targets()) {\n      this._updateTarget(target);\n    }\n  }\n\n  targetAdded(target: SDK.Target.Target): void {\n    this._updateTarget(target);\n  }\n\n  targetRemoved(_target: SDK.Target.Target): void {\n  }\n}\n\nSDK.ChildTargetManager.ChildTargetManager.install();\n"]}